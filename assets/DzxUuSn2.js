var ag=Object.defineProperty;var lg=(t,e,r)=>e in t?ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ad=(t,e,r)=>(lg(t,typeof e!="symbol"?e+"":e,r),r);import{_ as cg,x as Td,y as It,F as ug,C as ap,G as dg,H as Id,I as Sd,J as fg,v as Pd}from"./BUozNKlb.js";var Kn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}let pg=class extends Error{constructor(e){super(e.nativeError.message),this.name=this.constructor.name,this.nativeError=e.nativeError,this.client=e.client}};var Pn=pg,_g=new Set(["000","00000","01000","0100C","01008","01003","01007","01006","01004","01P01","02000","02001","03000","08000","08003","08006","08001","08004","08007","08P01","09000","0A000","0B000","0F000","0F001","0L000","0LP01","0P000","0Z000","0Z002","20000","21000","22000","2202E","22021","22008","22012","22005","2200B","22022","22015","2201E","22014","22016","2201F","2201G","22018","22007","22019","2200D","22025","22P06","22010","22023","2201B","2201W","2201X","2202H","2202G","22009","2200C","2200G","22004","22002","22003","22026","22001","22011","22027","22024","2200F","22P01","22P02","22P03","22P04","22P05","2200L","2200M","2200N","2200S","2200T","23000","23001","23502","23503","23505","23514","23P01","24000","25000","25001","25002","25008","25003","25004","25005","25006","25007","25P01","25P02","25P03","26000","27000","28000","28P01","2B000","2BP01","2D000","2F000","2F005","2F002","2F003","2F004","34000","38000","38001","38002","38003","38004","39000","39001","39004","39P01","39P02","39P03","3B000","3B001","3D000","3F000","40000","40002","40001","40003","40P01","42000","42601","42501","42846","42803","42P20","42P19","42830","42602","42622","42939","42804","42P18","42P21","42P22","42809","42703","42883","42P01","42P02","42704","42701","42P03","42P04","42723","42P05","42P06","42P07","42712","42710","42702","42725","42P08","42P09","42P10","42611","42P11","42P12","42P13","42P14","42P15","42P16","42P17","44000","53000","53100","53200","53300","53400","54000","54001","54011","54023","55000","55006","55P02","55P03","57000","57014","57P01","57P02","57P03","57P04","58000","58030","58P01","58P02","72000","F0000","F0001","HV000","HV005","HV002","HV010","HV021","HV024","HV007","HV008","HV004","HV006","HV091","HV00B","HV00C","HV00D","HV090","HV00A","HV009","HV014","HV001","HV00P","HV00J","HV00K","HV00Q","HV00R","HV00L","HV00M","HV00N","P0000","P0001","P0002","P0003","P0004","XX000","XX001","XX002"]),mg=new Set(["ER_HASHCHK","ER_NISAMCHK","ER_NO","ER_YES","ER_YES","ER_CANT_CREATE_FILE","ER_CANT_CREATE_TABLE","ER_CANT_CREATE_DB","ER_DB_CREATE_EXISTS","ER_DB_DROP_EXISTS","ER_DB_DROP_DELETE","ER_DB_DROP_RMDIR","ER_CANT_DELETE_FILE","ER_CANT_FIND_SYSTEM_REC","ER_CANT_GET_STAT","ER_CANT_GET_WD","ER_CANT_LOCK","ER_CANT_OPEN_FILE","ER_FILE_NOT_FOUND","ER_CANT_READ_DIR","ER_CANT_SET_WD","ER_CHECKREAD","ER_DISK_FULL","ER_DUP_KEY","ER_ERROR_ON_CLOSE","ER_ERROR_ON_READ","ER_ERROR_ON_RENAME","ER_ERROR_ON_WRITE","ER_FILE_USED","ER_FILSORT_ABORT","ER_FORM_NOT_FOUND","ER_GET_ERRNO","ER_ILLEGAL_HA","ER_KEY_NOT_FOUND","ER_NOT_FORM_FILE","ER_NOT_KEYFILE","ER_OLD_KEYFILE","ER_OPEN_AS_READONLY","ER_OUTOFMEMORY","ER_OUT_OF_SORTMEMORY","ER_UNEXPECTED_EOF","ER_CON_COUNT_ERROR","ER_OUT_OF_RESOURCES","ER_BAD_HOST_ERROR","ER_HANDSHAKE_ERROR","ER_DBACCESS_DENIED_ERROR","ER_ACCESS_DENIED_ERROR","ER_NO_DB_ERROR","ER_UNKNOWN_COM_ERROR","ER_BAD_NULL_ERROR","ER_BAD_DB_ERROR","ER_TABLE_EXISTS_ERROR","ER_BAD_TABLE_ERROR","ER_NON_UNIQ_ERROR","ER_SERVER_SHUTDOWN","ER_BAD_FIELD_ERROR","ER_WRONG_FIELD_WITH_GROUP","ER_WRONG_GROUP_FIELD","ER_WRONG_SUM_SELECT","ER_WRONG_VALUE_COUNT","ER_TOO_LONG_IDENT","ER_DUP_FIELDNAME","ER_DUP_KEYNAME","ER_DUP_ENTRY","ER_DUP_ENTRY_WITH_KEY_NAME","ER_WRONG_FIELD_SPEC","ER_PARSE_ERROR","ER_EMPTY_QUERY","ER_NONUNIQ_TABLE","ER_INVALID_DEFAULT","ER_MULTIPLE_PRI_KEY","ER_TOO_MANY_KEYS","ER_TOO_MANY_KEY_PARTS","ER_TOO_LONG_KEY","ER_KEY_COLUMN_DOES_NOT_EXITS","ER_BLOB_USED_AS_KEY","ER_TOO_BIG_FIELDLENGTH","ER_WRONG_AUTO_KEY","ER_READY","ER_NORMAL_SHUTDOWN","ER_GOT_SIGNAL","ER_SHUTDOWN_COMPLETE","ER_FORCING_CLOSE","ER_IPSOCK_ERROR","ER_NO_SUCH_INDEX","ER_WRONG_FIELD_TERMINATORS","ER_BLOBS_AND_NO_TERMINATED","ER_TEXTFILE_NOT_READABLE","ER_FILE_EXISTS_ERROR","ER_LOAD_INFO","ER_ALTER_INFO","ER_WRONG_SUB_KEY","ER_CANT_REMOVE_ALL_FIELDS","ER_CANT_DROP_FIELD_OR_KEY","ER_INSERT_INFO","ER_UPDATE_TABLE_USED","ER_NO_SUCH_THREAD","ER_KILL_DENIED_ERROR","ER_NO_TABLES_USED","ER_TOO_BIG_SET","ER_NO_UNIQUE_LOGFILE","ER_TABLE_NOT_LOCKED_FOR_WRITE","ER_TABLE_NOT_LOCKED","ER_BLOB_CANT_HAVE_DEFAULT","ER_WRONG_DB_NAME","ER_WRONG_TABLE_NAME","ER_TOO_BIG_SELECT","ER_UNKNOWN_ERROR","ER_UNKNOWN_PROCEDURE","ER_WRONG_PARAMCOUNT_TO_PROCEDURE","ER_WRONG_PARAMETERS_TO_PROCEDURE","ER_UNKNOWN_TABLE","ER_FIELD_SPECIFIED_TWICE","ER_INVALID_GROUP_FUNC_USE","ER_UNSUPPORTED_EXTENSION","ER_TABLE_MUST_HAVE_COLUMNS","ER_RECORD_FILE_FULL","ER_UNKNOWN_CHARACTER_SET","ER_TOO_MANY_TABLES","ER_TOO_MANY_FIELDS","ER_TOO_BIG_ROWSIZE","ER_STACK_OVERRUN","ER_WRONG_OUTER_JOIN","ER_NULL_COLUMN_IN_INDEX","ER_CANT_FIND_UDF","ER_CANT_INITIALIZE_UDF","ER_UDF_NO_PATHS","ER_UDF_EXISTS","ER_CANT_OPEN_LIBRARY","ER_CANT_FIND_DL_ENTRY","ER_FUNCTION_NOT_DEFINED","ER_HOST_IS_BLOCKED","ER_HOST_NOT_PRIVILEGED","ER_PASSWORD_ANONYMOUS_USER","ER_PASSWORD_NOT_ALLOWED","ER_PASSWORD_NO_MATCH","ER_UPDATE_INFO","ER_CANT_CREATE_THREAD","ER_WRONG_VALUE_COUNT_ON_ROW","ER_CANT_REOPEN_TABLE","ER_INVALID_USE_OF_NULL","ER_REGEXP_ERROR","ER_MIX_OF_GROUP_FUNC_AND_FIELDS","ER_NONEXISTING_GRANT","ER_TABLEACCESS_DENIED_ERROR","ER_COLUMNACCESS_DENIED_ERROR","ER_ILLEGAL_GRANT_FOR_TABLE","ER_GRANT_WRONG_HOST_OR_USER","ER_NO_SUCH_TABLE","ER_NONEXISTING_TABLE_GRANT","ER_NOT_ALLOWED_COMMAND","ER_SYNTAX_ERROR","ER_DELAYED_CANT_CHANGE_LOCK","ER_TOO_MANY_DELAYED_THREADS","ER_ABORTING_CONNECTION","ER_NET_PACKET_TOO_LARGE","ER_NET_READ_ERROR_FROM_PIPE","ER_NET_FCNTL_ERROR","ER_NET_PACKETS_OUT_OF_ORDER","ER_NET_UNCOMPRESS_ERROR","ER_NET_READ_ERROR","ER_NET_READ_INTERRUPTED","ER_NET_ERROR_ON_WRITE","ER_NET_WRITE_INTERRUPTED","ER_TOO_LONG_STRING","ER_TABLE_CANT_HANDLE_BLOB","ER_TABLE_CANT_HANDLE_AUTO_INCREMENT","ER_DELAYED_INSERT_TABLE_LOCKED","ER_WRONG_COLUMN_NAME","ER_WRONG_KEY_COLUMN","ER_WRONG_MRG_TABLE","ER_DUP_UNIQUE","ER_BLOB_KEY_WITHOUT_LENGTH","ER_PRIMARY_CANT_HAVE_NULL","ER_TOO_MANY_ROWS","ER_REQUIRES_PRIMARY_KEY","ER_NO_RAID_COMPILED","ER_UPDATE_WITHOUT_KEY_IN_SAFE_MODE","ER_KEY_DOES_NOT_EXITS","ER_CHECK_NO_SUCH_TABLE","ER_CHECK_NOT_IMPLEMENTED","ER_CANT_DO_THIS_DURING_AN_TRANSACTION","ER_ERROR_DURING_COMMIT","ER_ERROR_DURING_ROLLBACK","ER_ERROR_DURING_FLUSH_LOGS","ER_ERROR_DURING_CHECKPOINT","ER_NEW_ABORTING_CONNECTION","ER_DUMP_NOT_IMPLEMENTED","ER_FLUSH_MASTER_BINLOG_CLOSED","ER_INDEX_REBUILD","ER_MASTER","ER_MASTER_NET_READ","ER_MASTER_NET_WRITE","ER_FT_MATCHING_KEY_NOT_FOUND","ER_LOCK_OR_ACTIVE_TRANSACTION","ER_UNKNOWN_SYSTEM_VARIABLE","ER_CRASHED_ON_USAGE","ER_CRASHED_ON_REPAIR","ER_WARNING_NOT_COMPLETE_ROLLBACK","ER_TRANS_CACHE_FULL","ER_SLAVE_MUST_STOP","ER_SLAVE_NOT_RUNNING","ER_BAD_SLAVE","ER_MASTER_INFO","ER_SLAVE_THREAD","ER_TOO_MANY_USER_CONNECTIONS","ER_SET_CONSTANTS_ONLY","ER_LOCK_WAIT_TIMEOUT","ER_LOCK_TABLE_FULL","ER_READ_ONLY_TRANSACTION","ER_DROP_DB_WITH_READ_LOCK","ER_CREATE_DB_WITH_READ_LOCK","ER_WRONG_ARGUMENTS","ER_NO_PERMISSION_TO_CREATE_USER","ER_UNION_TABLES_IN_DIFFERENT_DIR","ER_LOCK_DEADLOCK","ER_TABLE_CANT_HANDLE_FT","ER_CANNOT_ADD_FOREIGN","ER_NO_REFERENCED_ROW","ER_ROW_IS_REFERENCED","ER_CONNECT_TO_MASTER","ER_QUERY_ON_MASTER","ER_ERROR_WHEN_EXECUTING_COMMAND","ER_WRONG_USAGE","ER_WRONG_NUMBER_OF_COLUMNS_IN_SELECT","ER_CANT_UPDATE_WITH_READLOCK","ER_MIXING_NOT_ALLOWED","ER_DUP_ARGUMENT","ER_USER_LIMIT_REACHED","ER_SPECIFIC_ACCESS_DENIED_ERROR","ER_LOCAL_VARIABLE","ER_GLOBAL_VARIABLE","ER_NO_DEFAULT","ER_WRONG_VALUE_FOR_VAR","ER_WRONG_TYPE_FOR_VAR","ER_VAR_CANT_BE_READ","ER_CANT_USE_OPTION_HERE","ER_NOT_SUPPORTED_YET","ER_MASTER_FATAL_ERROR_READING_BINLOG","ER_SLAVE_IGNORED_TABLE","ER_INCORRECT_GLOBAL_LOCAL_VAR","ER_WRONG_FK_DEF","ER_KEY_REF_DO_NOT_MATCH_TABLE_REF","ER_OPERAND_COLUMNS","ER_SUBQUERY_NO_1_ROW","ER_UNKNOWN_STMT_HANDLER","ER_CORRUPT_HELP_DB","ER_CYCLIC_REFERENCE","ER_AUTO_CONVERT","ER_ILLEGAL_REFERENCE","ER_DERIVED_MUST_HAVE_ALIAS","ER_SELECT_REDUCED","ER_TABLENAME_NOT_ALLOWED_HERE","ER_NOT_SUPPORTED_AUTH_MODE","ER_SPATIAL_CANT_HAVE_NULL","ER_COLLATION_CHARSET_MISMATCH","ER_SLAVE_WAS_RUNNING","ER_SLAVE_WAS_NOT_RUNNING","ER_TOO_BIG_FOR_UNCOMPRESS","ER_ZLIB_Z_MEM_ERROR","ER_ZLIB_Z_BUF_ERROR","ER_ZLIB_Z_DATA_ERROR","ER_CUT_VALUE_GROUP_CONCAT","ER_WARN_TOO_FEW_RECORDS","ER_WARN_TOO_MANY_RECORDS","ER_WARN_NULL_TO_NOTNULL","ER_WARN_DATA_OUT_OF_RANGE","ER_WARN_USING_OTHER_HANDLER","ER_CANT_AGGREGATE_2COLLATIONS","ER_DROP_USER","ER_REVOKE_GRANTS","ER_CANT_AGGREGATE_3COLLATIONS","ER_CANT_AGGREGATE_NCOLLATIONS","ER_VARIABLE_IS_NOT_STRUCT","ER_UNKNOWN_COLLATION","ER_SLAVE_IGNORED_SSL_PARAMS","ER_SERVER_IS_IN_SECURE_AUTH_MODE","ER_WARN_FIELD_RESOLVED","ER_BAD_SLAVE_UNTIL_COND","ER_MISSING_SKIP_SLAVE","ER_UNTIL_COND_IGNORED","ER_WRONG_NAME_FOR_INDEX","ER_WRONG_NAME_FOR_CATALOG","ER_WARN_QC_RESIZE","ER_BAD_FT_COLUMN","ER_UNKNOWN_KEY_CACHE","ER_WARN_HOSTNAME_WONT_WORK","ER_UNKNOWN_STORAGE_ENGINE","ER_WARN_DEPRECATED_SYNTAX","ER_NON_UPDATABLE_TABLE","ER_FEATURE_DISABLED","ER_OPTION_PREVENTS_STATEMENT","ER_DUPLICATED_VALUE_IN_TYPE","ER_TRUNCATED_WRONG_VALUE","ER_TOO_MUCH_AUTO_TIMESTAMP_COLS","ER_INVALID_ON_UPDATE","ER_UNSUPPORTED_PS","ER_GET_ERRMSG","ER_GET_TEMPORARY_ERRMSG","ER_UNKNOWN_TIME_ZONE","ER_WARN_INVALID_TIMESTAMP","ER_INVALID_CHARACTER_STRING","ER_WARN_ALLOWED_PACKET_OVERFLOWED","ER_CONFLICTING_DECLARATIONS","ER_SP_NO_RECURSIVE_CREATE","ER_SP_ALREADY_EXISTS","ER_SP_DOES_NOT_EXIST","ER_SP_DROP_FAILED","ER_SP_STORE_FAILED","ER_SP_LILABEL_MISMATCH","ER_SP_LABEL_REDEFINE","ER_SP_LABEL_MISMATCH","ER_SP_UNINIT_VAR","ER_SP_BADSELECT","ER_SP_BADRETURN","ER_SP_BADSTATEMENT","ER_UPDATE_LOG_DEPRECATED_IGNORED","ER_UPDATE_LOG_DEPRECATED_TRANSLATED","ER_QUERY_INTERRUPTED","ER_SP_WRONG_NO_OF_ARGS","ER_SP_COND_MISMATCH","ER_SP_NORETURN","ER_SP_NORETURNEND","ER_SP_BAD_CURSOR_QUERY","ER_SP_BAD_CURSOR_SELECT","ER_SP_CURSOR_MISMATCH","ER_SP_CURSOR_ALREADY_OPEN","ER_SP_CURSOR_NOT_OPEN","ER_SP_UNDECLARED_VAR","ER_SP_WRONG_NO_OF_FETCH_ARGS","ER_SP_FETCH_NO_DATA","ER_SP_DUP_PARAM","ER_SP_DUP_VAR","ER_SP_DUP_COND","ER_SP_DUP_CURS","ER_SP_CANT_ALTER","ER_SP_SUBSELECT_NYI","ER_STMT_NOT_ALLOWED_IN_SF_OR_TRG","ER_SP_VARCOND_AFTER_CURSHNDLR","ER_SP_CURSOR_AFTER_HANDLER","ER_SP_CASE_NOT_FOUND","ER_FPARSER_TOO_BIG_FILE","ER_FPARSER_BAD_HEADER","ER_FPARSER_EOF_IN_COMMENT","ER_FPARSER_ERROR_IN_PARAMETER","ER_FPARSER_EOF_IN_UNKNOWN_PARAMETER","ER_VIEW_NO_EXPLAIN","ER_FRM_UNKNOWN_TYPE","ER_WRONG_OBJECT","ER_NONUPDATEABLE_COLUMN","ER_VIEW_SELECT_DERIVED","ER_VIEW_SELECT_CLAUSE","ER_VIEW_SELECT_VARIABLE","ER_VIEW_SELECT_TMPTABLE","ER_VIEW_WRONG_LIST","ER_WARN_VIEW_MERGE","ER_WARN_VIEW_WITHOUT_KEY","ER_VIEW_INVALID","ER_SP_NO_DROP_SP","ER_SP_GOTO_IN_HNDLR","ER_TRG_ALREADY_EXISTS","ER_TRG_DOES_NOT_EXIST","ER_TRG_ON_VIEW_OR_TEMP_TABLE","ER_TRG_CANT_CHANGE_ROW","ER_TRG_NO_SUCH_ROW_IN_TRG","ER_NO_DEFAULT_FOR_FIELD","ER_DIVISION_BY_ZERO","ER_TRUNCATED_WRONG_VALUE_FOR_FIELD","ER_ILLEGAL_VALUE_FOR_TYPE","ER_VIEW_NONUPD_CHECK","ER_VIEW_CHECK_FAILED","ER_PROCACCESS_DENIED_ERROR","ER_RELAY_LOG_FAIL","ER_PASSWD_LENGTH","ER_UNKNOWN_TARGET_BINLOG","ER_IO_ERR_LOG_INDEX_READ","ER_BINLOG_PURGE_PROHIBITED","ER_FSEEK_FAIL","ER_BINLOG_PURGE_FATAL_ERR","ER_LOG_IN_USE","ER_LOG_PURGE_UNKNOWN_ERR","ER_RELAY_LOG_INIT","ER_NO_BINARY_LOGGING","ER_RESERVED_SYNTAX","ER_WSAS_FAILED","ER_DIFF_GROUPS_PROC","ER_NO_GROUP_FOR_PROC","ER_ORDER_WITH_PROC","ER_LOGGING_PROHIBIT_CHANGING_OF","ER_NO_FILE_MAPPING","ER_WRONG_MAGIC","ER_PS_MANY_PARAM","ER_KEY_PART_0","ER_VIEW_CHECKSUM","ER_VIEW_MULTIUPDATE","ER_VIEW_NO_INSERT_FIELD_LIST","ER_VIEW_DELETE_MERGE_VIEW","ER_CANNOT_USER","ER_XAER_NOTA","ER_XAER_INVAL","ER_XAER_RMFAIL","ER_XAER_OUTSIDE","ER_XAER_RMERR","ER_XA_RBROLLBACK","ER_NONEXISTING_PROC_GRANT","ER_PROC_AUTO_GRANT_FAIL","ER_PROC_AUTO_REVOKE_FAIL","ER_DATA_TOO_LONG","ER_SP_BAD_SQLSTATE","ER_STARTUP","ER_LOAD_FROM_FIXED_SIZE_ROWS_TO_VAR","ER_CANT_CREATE_USER_WITH_GRANT","ER_WRONG_VALUE_FOR_TYPE","ER_TABLE_DEF_CHANGED","ER_SP_DUP_HANDLER","ER_SP_NOT_VAR_ARG","ER_SP_NO_RETSET","ER_CANT_CREATE_GEOMETRY_OBJECT","ER_FAILED_ROUTINE_BREAK_BINLOG","ER_BINLOG_UNSAFE_ROUTINE","ER_BINLOG_CREATE_ROUTINE_NEED_SUPER","ER_EXEC_STMT_WITH_OPEN_CURSOR","ER_STMT_HAS_NO_OPEN_CURSOR","ER_COMMIT_NOT_ALLOWED_IN_SF_OR_TRG","ER_NO_DEFAULT_FOR_VIEW_FIELD","ER_SP_NO_RECURSION","ER_TOO_BIG_SCALE","ER_TOO_BIG_PRECISION","ER_M_BIGGER_THAN_D","ER_WRONG_LOCK_OF_SYSTEM_TABLE","ER_CONNECT_TO_FOREIGN_DATA_SOURCE","ER_QUERY_ON_FOREIGN_DATA_SOURCE","ER_FOREIGN_DATA_SOURCE_DOESNT_EXIST","ER_FOREIGN_DATA_STRING_INVALID_CANT_CREATE","ER_FOREIGN_DATA_STRING_INVALID","ER_CANT_CREATE_FEDERATED_TABLE","ER_TRG_IN_WRONG_SCHEMA","ER_STACK_OVERRUN_NEED_MORE","ER_TOO_LONG_BODY","ER_WARN_CANT_DROP_DEFAULT_KEYCACHE","ER_TOO_BIG_DISPLAYWIDTH","ER_XAER_DUPID","ER_DATETIME_FUNCTION_OVERFLOW","ER_CANT_UPDATE_USED_TABLE_IN_SF_OR_TRG","ER_VIEW_PREVENT_UPDATE","ER_PS_NO_RECURSION","ER_SP_CANT_SET_AUTOCOMMIT","ER_MALFORMED_DEFINER","ER_VIEW_FRM_NO_USER","ER_VIEW_OTHER_USER","ER_NO_SUCH_USER","ER_FORBID_SCHEMA_CHANGE","ER_ROW_IS_REFERENCED_2","ER_NO_REFERENCED_ROW_2","ER_SP_BAD_VAR_SHADOW","ER_TRG_NO_DEFINER","ER_OLD_FILE_FORMAT","ER_SP_RECURSION_LIMIT","ER_SP_PROC_TABLE_CORRUPT","ER_SP_WRONG_NAME","ER_TABLE_NEEDS_UPGRADE","ER_SP_NO_AGGREGATE","ER_MAX_PREPARED_STMT_COUNT_REACHED","ER_VIEW_RECURSIVE","ER_NON_GROUPING_FIELD_USED","ER_TABLE_CANT_HANDLE_SPKEYS","ER_NO_TRIGGERS_ON_SYSTEM_SCHEMA","ER_REMOVED_SPACES","ER_AUTOINC_READ_FAILED","ER_USERNAME","ER_HOSTNAME","ER_WRONG_STRING_LENGTH","ER_NON_INSERTABLE_TABLE","ER_ADMIN_WRONG_MRG_TABLE","ER_TOO_HIGH_LEVEL_OF_NESTING_FOR_SELECT","ER_NAME_BECOMES_EMPTY","ER_AMBIGUOUS_FIELD_TERM","ER_FOREIGN_SERVER_EXISTS","ER_FOREIGN_SERVER_DOESNT_EXIST","ER_ILLEGAL_HA_CREATE_OPTION","ER_PARTITION_REQUIRES_VALUES_ERROR","ER_PARTITION_WRONG_VALUES_ERROR","ER_PARTITION_MAXVALUE_ERROR","ER_PARTITION_SUBPARTITION_ERROR","ER_PARTITION_SUBPART_MIX_ERROR","ER_PARTITION_WRONG_NO_PART_ERROR","ER_PARTITION_WRONG_NO_SUBPART_ERROR","ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR","ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR","ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR","ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR","ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR","ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR","ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR","ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR","ER_NO_CONST_EXPR_IN_RANGE_OR_LIST_ERROR","ER_FIELD_NOT_FOUND_PART_ERROR","ER_LIST_OF_FIELDS_ONLY_IN_HASH_ERROR","ER_INCONSISTENT_PARTITION_INFO_ERROR","ER_PARTITION_FUNC_NOT_ALLOWED_ERROR","ER_PARTITIONS_MUST_BE_DEFINED_ERROR","ER_RANGE_NOT_INCREASING_ERROR","ER_INCONSISTENT_TYPE_OF_FUNCTIONS_ERROR","ER_MULTIPLE_DEF_CONST_IN_LIST_PART_ERROR","ER_PARTITION_ENTRY_ERROR","ER_MIX_HANDLER_ERROR","ER_PARTITION_NOT_DEFINED_ERROR","ER_TOO_MANY_PARTITIONS_ERROR","ER_SUBPARTITION_ERROR","ER_CANT_CREATE_HANDLER_FILE","ER_BLOB_FIELD_IN_PART_FUNC_ERROR","ER_UNIQUE_KEY_NEED_ALL_FIELDS_IN_PF","ER_NO_PARTS_ERROR","ER_PARTITION_MGMT_ON_NONPARTITIONED","ER_FOREIGN_KEY_ON_PARTITIONED","ER_DROP_PARTITION_NON_EXISTENT","ER_DROP_LAST_PARTITION","ER_COALESCE_ONLY_ON_HASH_PARTITION","ER_REORG_HASH_ONLY_ON_SAME_NO","ER_REORG_NO_PARAM_ERROR","ER_ONLY_ON_RANGE_LIST_PARTITION","ER_ADD_PARTITION_SUBPART_ERROR","ER_ADD_PARTITION_NO_NEW_PARTITION","ER_COALESCE_PARTITION_NO_PARTITION","ER_REORG_PARTITION_NOT_EXIST","ER_SAME_NAME_PARTITION","ER_NO_BINLOG_ERROR","ER_CONSECUTIVE_REORG_PARTITIONS","ER_REORG_OUTSIDE_RANGE","ER_PARTITION_FUNCTION_FAILURE","ER_PART_STATE_ERROR","ER_LIMITED_PART_RANGE","ER_PLUGIN_IS_NOT_LOADED","ER_WRONG_VALUE","ER_NO_PARTITION_FOR_GIVEN_VALUE","ER_FILEGROUP_OPTION_ONLY_ONCE","ER_CREATE_FILEGROUP_FAILED","ER_DROP_FILEGROUP_FAILED","ER_TABLESPACE_AUTO_EXTEND_ERROR","ER_WRONG_SIZE_NUMBER","ER_SIZE_OVERFLOW_ERROR","ER_ALTER_FILEGROUP_FAILED","ER_BINLOG_ROW_LOGGING_FAILED","ER_BINLOG_ROW_WRONG_TABLE_DEF","ER_BINLOG_ROW_RBR_TO_SBR","ER_EVENT_ALREADY_EXISTS","ER_EVENT_STORE_FAILED","ER_EVENT_DOES_NOT_EXIST","ER_EVENT_CANT_ALTER","ER_EVENT_DROP_FAILED","ER_EVENT_INTERVAL_NOT_POSITIVE_OR_TOO_BIG","ER_EVENT_ENDS_BEFORE_STARTS","ER_EVENT_EXEC_TIME_IN_THE_PAST","ER_EVENT_OPEN_TABLE_FAILED","ER_EVENT_NEITHER_M_EXPR_NOR_M_AT","ER_COL_COUNT_DOESNT_MATCH_CORRUPTED","ER_CANNOT_LOAD_FROM_TABLE","ER_EVENT_CANNOT_DELETE","ER_EVENT_COMPILE_ERROR","ER_EVENT_SAME_NAME","ER_EVENT_DATA_TOO_LONG","ER_DROP_INDEX_FK","ER_WARN_DEPRECATED_SYNTAX_WITH_VER","ER_CANT_WRITE_LOCK_LOG_TABLE","ER_CANT_LOCK_LOG_TABLE","ER_FOREIGN_DUPLICATE_KEY","ER_COL_COUNT_DOESNT_MATCH_PLEASE_UPDATE","ER_TEMP_TABLE_PREVENTS_SWITCH_OUT_OF_RBR","ER_STORED_FUNCTION_PREVENTS_SWITCH_BINLOG_FORMAT","ER_NDB_CANT_SWITCH_BINLOG_FORMAT","ER_PARTITION_NO_TEMPORARY","ER_PARTITION_CONST_DOMAIN_ERROR","ER_PARTITION_FUNCTION_IS_NOT_ALLOWED","ER_DDL_LOG_ERROR","ER_NULL_IN_VALUES_LESS_THAN","ER_WRONG_PARTITION_NAME","ER_CANT_CHANGE_TX_ISOLATION","ER_DUP_ENTRY_AUTOINCREMENT_CASE","ER_EVENT_MODIFY_QUEUE_ERROR","ER_EVENT_SET_VAR_ERROR","ER_PARTITION_MERGE_ERROR","ER_CANT_ACTIVATE_LOG","ER_RBR_NOT_AVAILABLE","ER_BASE64_DECODE_ERROR","ER_EVENT_RECURSION_FORBIDDEN","ER_EVENTS_DB_ERROR","ER_ONLY_INTEGERS_ALLOWED","ER_UNSUPORTED_LOG_ENGINE","ER_BAD_LOG_STATEMENT","ER_CANT_RENAME_LOG_TABLE","ER_WRONG_PARAMCOUNT_TO_NATIVE_FCT","ER_WRONG_PARAMETERS_TO_NATIVE_FCT","ER_WRONG_PARAMETERS_TO_STORED_FCT","ER_NATIVE_FCT_NAME_COLLISION","ER_DUP_ENTRY_WITH_KEY_NAME","ER_DUP_ENTRY","ER_BINLOG_PURGE_EMFILE","ER_EVENT_CANNOT_CREATE_IN_THE_PAST","ER_EVENT_CANNOT_ALTER_IN_THE_PAST","ER_SLAVE_INCIDENT","ER_NO_PARTITION_FOR_GIVEN_VALUE_SILENT","ER_BINLOG_UNSAFE_STATEMENT","ER_SLAVE_FATAL_ERROR","ER_SLAVE_RELAY_LOG_READ_FAILURE","ER_SLAVE_RELAY_LOG_WRITE_FAILURE","ER_SLAVE_CREATE_EVENT_FAILURE","ER_SLAVE_MASTER_COM_FAILURE","ER_BINLOG_LOGGING_IMPOSSIBLE","ER_VIEW_NO_CREATION_CTX","ER_VIEW_INVALID_CREATION_CTX","ER_SR_INVALID_CREATION_CTX","ER_TRG_CORRUPTED_FILE","ER_TRG_NO_CREATION_CTX","ER_TRG_INVALID_CREATION_CTX","ER_EVENT_INVALID_CREATION_CTX","ER_TRG_CANT_OPEN_TABLE","ER_CANT_CREATE_SROUTINE","ER_SLAVE_AMBIGOUS_EXEC_MODE","ER_SLAVE_AMBIGOUS_EXEC_MODE","ER_NEVER_USED","ER_SLAVE_AMBIGOUS_EXEC_MODE","ER_NEVER_USED","ER_SLAVE_AMBIGOUS_EXEC_MODE","ER_NEVER_USED","ER_NEVER_USED","ER_NO_FORMAT_DESCRIPTION_EVENT_BEFORE_BINLOG_STATEMENT","ER_SLAVE_CORRUPT_EVENT","ER_LOAD_DATA_INVALID_COLUMN","ER_LOG_PURGE_NO_FILE","ER_XA_RBTIMEOUT","ER_XA_RBDEADLOCK","ER_NEED_REPREPARE","ER_DELAYED_NOT_SUPPORTED","ER_VARIABLE_IS_READONLY","ER_WARN_ENGINE_TRANSACTION_ROLLBACK","ER_SLAVE_HEARTBEAT_FAILURE","ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE","ER_NDB_REPLICATION_SCHEMA_ERROR","ER_CONFLICT_FN_PARSE_ERROR","ER_EXCEPTIONS_WRITE_ERROR","ER_TOO_LONG_TABLE_COMMENT","ER_TOO_LONG_FIELD_COMMENT","ER_FUNC_INEXISTENT_NAME_COLLISION","ER_DATABASE_NAME","ER_TABLE_NAME","ER_PARTITION_NAME","ER_SUBPARTITION_NAME","ER_TEMPORARY_NAME","ER_RENAMED_NAME","ER_TOO_MANY_CONCURRENT_TRXS","ER_DEBUG_SYNC_TIMEOUT","ER_DEBUG_SYNC_HIT_LIMIT","ER_DUP_SIGNAL_SET","ER_SIGNAL_WARN","ER_SIGNAL_NOT_FOUND","ER_SIGNAL_EXCEPTION","ER_RESIGNAL_WITHOUT_ACTIVE_HANDLER","ER_SIGNAL_BAD_CONDITION_TYPE","ER_COND_ITEM_TOO_LONG","ER_UNKNOWN_LOCALE","ER_SLAVE_IGNORE_SERVER_IDS","ER_QUERY_CACHE_DISABLED","ER_SAME_NAME_PARTITION_FIELD","ER_PARTITION_COLUMN_LIST_ERROR","ER_WRONG_TYPE_COLUMN_VALUE_ERROR","ER_TOO_MANY_PARTITION_FUNC_FIELDS_ERROR","ER_MAXVALUE_IN_VALUES_IN","ER_TOO_MANY_VALUES_ERROR","ER_ROW_SINGLE_PARTITION_FIELD_ERROR","ER_FIELD_TYPE_NOT_ALLOWED_AS_PARTITION_FIELD","ER_PARTITION_FIELDS_TOO_LONG","ER_BINLOG_ROW_ENGINE_AND_STMT_ENGINE","ER_BINLOG_ROW_ENGINE_AND_STMT_ENGINE","ER_BINLOG_ROW_MODE_AND_STMT_ENGINE","ER_BINLOG_ROW_MODE_AND_STMT_ENGINE","ER_BINLOG_UNSAFE_AND_STMT_ENGINE","ER_BINLOG_UNSAFE_AND_STMT_ENGINE","ER_BINLOG_ROW_INJECTION_AND_STMT_ENGINE","ER_BINLOG_ROW_INJECTION_AND_STMT_ENGINE","ER_BINLOG_STMT_MODE_AND_ROW_ENGINE","ER_BINLOG_STMT_MODE_AND_ROW_ENGINE","ER_BINLOG_ROW_INJECTION_AND_STMT_MODE","ER_BINLOG_ROW_INJECTION_AND_STMT_MODE","ER_BINLOG_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE","ER_BINLOG_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE","ER_BINLOG_UNSAFE_LIMIT","ER_BINLOG_UNSAFE_LIMIT","ER_BINLOG_UNSAFE_INSERT_DELAYED","ER_BINLOG_UNSAFE_INSERT_DELAYED","ER_BINLOG_UNSAFE_SYSTEM_TABLE","ER_BINLOG_UNSAFE_SYSTEM_TABLE","ER_BINLOG_UNSAFE_AUTOINC_COLUMNS","ER_BINLOG_UNSAFE_AUTOINC_COLUMNS","ER_BINLOG_UNSAFE_UDF","ER_BINLOG_UNSAFE_UDF","ER_BINLOG_UNSAFE_SYSTEM_VARIABLE","ER_BINLOG_UNSAFE_SYSTEM_VARIABLE","ER_BINLOG_UNSAFE_SYSTEM_FUNCTION","ER_BINLOG_UNSAFE_SYSTEM_FUNCTION","ER_BINLOG_UNSAFE_NONTRANS_AFTER_TRANS","ER_BINLOG_UNSAFE_NONTRANS_AFTER_TRANS","ER_MESSAGE_AND_STATEMENT","ER_MESSAGE_AND_STATEMENT","ER_SLAVE_CONVERSION_FAILED","ER_SLAVE_CONVERSION_FAILED","ER_SLAVE_CANT_CREATE_CONVERSION","ER_SLAVE_CANT_CREATE_CONVERSION","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_FORMAT","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_FORMAT","ER_PATH_LENGTH","ER_PATH_LENGTH","ER_WARN_DEPRECATED_SYNTAX_NO_REPLACEMENT","ER_WARN_DEPRECATED_SYNTAX_NO_REPLACEMENT","ER_WRONG_NATIVE_TABLE_STRUCTURE","ER_WRONG_NATIVE_TABLE_STRUCTURE","ER_WRONG_PERFSCHEMA_USAGE","ER_WRONG_PERFSCHEMA_USAGE","ER_WARN_I_S_SKIPPED_TABLE","ER_WARN_I_S_SKIPPED_TABLE","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_DIRECT","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_DIRECT","ER_STORED_FUNCTION_PREVENTS_SWITCH_BINLOG_DIRECT","ER_STORED_FUNCTION_PREVENTS_SWITCH_BINLOG_DIRECT","ER_SPATIAL_MUST_HAVE_GEOM_COL","ER_SPATIAL_MUST_HAVE_GEOM_COL","ER_TOO_LONG_INDEX_COMMENT","ER_TOO_LONG_INDEX_COMMENT","ER_LOCK_ABORTED","ER_LOCK_ABORTED","ER_DATA_OUT_OF_RANGE","ER_DATA_OUT_OF_RANGE","ER_WRONG_SPVAR_TYPE_IN_LIMIT","ER_WRONG_SPVAR_TYPE_IN_LIMIT","ER_BINLOG_UNSAFE_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE","ER_BINLOG_UNSAFE_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE","ER_BINLOG_UNSAFE_MIXED_STATEMENT","ER_BINLOG_UNSAFE_MIXED_STATEMENT","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_SQL_LOG_BIN","ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_SQL_LOG_BIN","ER_STORED_FUNCTION_PREVENTS_SWITCH_SQL_LOG_BIN","ER_STORED_FUNCTION_PREVENTS_SWITCH_SQL_LOG_BIN","ER_FAILED_READ_FROM_PAR_FILE","ER_FAILED_READ_FROM_PAR_FILE","ER_VALUES_IS_NOT_INT_TYPE_ERROR","ER_VALUES_IS_NOT_INT_TYPE_ERROR","ER_ACCESS_DENIED_NO_PASSWORD_ERROR","ER_ACCESS_DENIED_NO_PASSWORD_ERROR","ER_SET_PASSWORD_AUTH_PLUGIN","ER_SET_PASSWORD_AUTH_PLUGIN","ER_GRANT_PLUGIN_USER_EXISTS","ER_GRANT_PLUGIN_USER_EXISTS","ER_TRUNCATE_ILLEGAL_FK","ER_TRUNCATE_ILLEGAL_FK","ER_PLUGIN_IS_PERMANENT","ER_PLUGIN_IS_PERMANENT","ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MIN","ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MIN","ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MAX","ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MAX","ER_STMT_CACHE_FULL","ER_STMT_CACHE_FULL","ER_MULTI_UPDATE_KEY_CONFLICT","ER_MULTI_UPDATE_KEY_CONFLICT","ER_TABLE_NEEDS_REBUILD","ER_TABLE_NEEDS_REBUILD","ER_INDEX_COLUMN_TOO_LONG","ER_INDEX_COLUMN_TOO_LONG","ER_ERROR_IN_TRIGGER_BODY","ER_ERROR_IN_TRIGGER_BODY","ER_ERROR_IN_UNKNOWN_TRIGGER_BODY","ER_ERROR_IN_UNKNOWN_TRIGGER_BODY","ER_INDEX_CORRUPT","ER_INDEX_CORRUPT","ER_UNDO_RECORD_TOO_BIG","ER_UNDO_RECORD_TOO_BIG","ER_BINLOG_UNSAFE_INSERT_IGNORE_SELECT","ER_BINLOG_UNSAFE_INSERT_IGNORE_SELECT","ER_BINLOG_UNSAFE_INSERT_SELECT_UPDATE","ER_BINLOG_UNSAFE_INSERT_SELECT_UPDATE","ER_BINLOG_UNSAFE_REPLACE_SELECT","ER_BINLOG_UNSAFE_REPLACE_SELECT","ER_BINLOG_UNSAFE_CREATE_IGNORE_SELECT","ER_BINLOG_UNSAFE_CREATE_IGNORE_SELECT","ER_BINLOG_UNSAFE_CREATE_REPLACE_SELECT","ER_BINLOG_UNSAFE_CREATE_REPLACE_SELECT","ER_BINLOG_UNSAFE_UPDATE_IGNORE","ER_BINLOG_UNSAFE_UPDATE_IGNORE","ER_PLUGIN_NO_UNINSTALL","ER_PLUGIN_NO_UNINSTALL","ER_PLUGIN_NO_INSTALL","ER_PLUGIN_NO_INSTALL","ER_BINLOG_UNSAFE_WRITE_AUTOINC_SELECT","ER_BINLOG_UNSAFE_WRITE_AUTOINC_SELECT","ER_BINLOG_UNSAFE_CREATE_SELECT_AUTOINC","ER_BINLOG_UNSAFE_CREATE_SELECT_AUTOINC","ER_BINLOG_UNSAFE_INSERT_TWO_KEYS","ER_BINLOG_UNSAFE_INSERT_TWO_KEYS","ER_TABLE_IN_FK_CHECK","ER_TABLE_IN_FK_CHECK","ER_UNSUPPORTED_ENGINE","ER_UNSUPPORTED_ENGINE","ER_BINLOG_UNSAFE_AUTOINC_NOT_FIRST","ER_BINLOG_UNSAFE_AUTOINC_NOT_FIRST"]);const yg={16:new Set([241,242,245,515,547,8152,5e4]),14:new Set([2601,2627])};function Eg(t){const e=yg[t.severity];return e?e.has(t.errorCode):!1}var gg={has:Eg};const Og=_g,vg=mg,Rg=gg;var Dl={postgres:Og,mysql:vg,mssql:Rg};const $g=Pn;let wg=class extends $g{};var nn=wg;function Ng(t){return t.substr(0,2)}var Bi={getSqlStateClass:Ng};const bg=nn;let Ag=class extends bg{constructor(e){super(e),this.table=e.table,this.columns=e.columns,this.constraint=e.constraint,this.schema=e.schema}};var Ys=Ag;const Tg=Ys,Ig=/Key \((.+)\)=\(.+\) already exists/;var Sg={error:Tg,parse:t=>{if(t.code!=="23505")return null;const e=Ig.exec(t.detail);if(!e)return null;const r=e[1].split(",").map(n=>n.trim()).map(n=>Pg(n));return{table:t.table,columns:r,constraint:t.constraint}},subclassParsers:[]};function Pg(t){return t[0]==='"'&&t[t.length-1]==='"'?t.substr(1,t.length-2):t}const Cg=nn;let Mg=class extends Cg{constructor(e){super(e),this.table=e.table,this.column=e.column,this.schema=e.schema,this.database=e.database}};var Xs=Mg;const Dg=Xs;var jg={error:Dg,parse:t=>t.code==="23502"?{table:t.table,column:t.column}:null,subclassParsers:[]};const Lg=nn;let Fg=class extends Lg{constructor(e){super(e),this.table=e.table,this.constraint=e.constraint,this.schema=e.schema}};var Zs=Fg;const kg=Zs;var Bg={error:kg,parse:t=>t.code==="23503"?{table:t.table,constraint:t.constraint}:null,subclassParsers:[]};const Ug=nn;let xg=class extends Ug{constructor(e){super(e),this.table=e.table,this.constraint=e.constraint}};var Ui=xg;const Gg=Ui;var Vg={error:Gg,parse:t=>t.code==="23514"?{table:t.table,constraint:t.constraint}:null,subclassParsers:[]};const Hg=nn,{getSqlStateClass:Kg}=Bi;var qg={error:Hg,parse:t=>Kg(t.code)==="23"?{}:null,subclassParsers:[Sg,jg,Bg,Vg]};const Wg=Pn;let Jg=class extends Wg{};var xi=Jg;const zg=xi,{getSqlStateClass:Qg}=Bi;var Yg={error:zg,parse:t=>Qg(t.code)==="22"?{}:null,subclassParsers:[]};const Xg=Pn,Zg=Dl.postgres;var eO={error:Xg,parse:t=>typeof t.code=="string"&&t.code.length===5&&Zg.has(t.code)&&"internalQuery"in t&&"table"in t?{nativeError:t,client:"postgres"}:null,subclassParsers:[qg,Yg]};const tO=Ys,rO=/SQLITE_CONSTRAINT: UNIQUE constraint failed: (.+)$/;var nO={error:tO,parse:t=>{const e=rO.exec(t.message);if(!e)return null;const r=e[1].split(",").map(n=>n.trim()).map(n=>n.split(".")).map(n=>n.map(s=>s.trim()));return{table:r[0][0],columns:r.map(n=>n[1])}},subclassParsers:[]};const sO=Xs,oO=/SQLITE_CONSTRAINT: NOT NULL constraint failed: (.+)$/;var iO={error:sO,parse:t=>{const e=oO.exec(t.message);if(!e)return null;const r=e[1].trim().split(".").map(n=>n.trim());return{table:r[0],column:r[1]}},subclassParsers:[]};const aO=Zs,lO=/SQLITE_CONSTRAINT: FOREIGN KEY constraint failed/;var cO={error:aO,parse:t=>lO.exec(t.message)?{}:null,subclassParsers:[]};const uO=Ui,dO=/SQLITE_CONSTRAINT: CHECK constraint failed/;var fO={error:uO,parse:t=>dO.exec(t.message)?{}:null,subclassParsers:[]};const hO=nn;var pO={error:hO,parse:t=>t.code==="SQLITE_CONSTRAINT"?{}:null,subclassParsers:[nO,iO,cO,fO]};const _O=Pn;var mO={error:_O,parse:t=>typeof t.code=="string"&&t.code.startsWith("SQLITE_")&&typeof t.errno=="number"?{nativeError:t,client:"sqlite"}:null,subclassParsers:[pO]};const yO=Ys,EO=["ER_DUP_ENTRY","ER_DUP_ENTRY_WITH_KEY_NAME"],gO=/Duplicate entry '(.+)' for key '(.+)'/;var OO={error:yO,parse:t=>{if(EO.indexOf(t.code)===-1)return null;const e=gO.exec(t.sqlMessage);return e?{constraint:e[2]}:null},subclassParsers:[]};const vO=Xs,RO=/Column '(.+)' cannot be null/,$O=/Field '(.+)' doesn't have a default value/;var wO={error:vO,parse:t=>{let e=null;return t.code==="ER_BAD_NULL_ERROR"?e=RO.exec(t.sqlMessage):t.code==="ER_NO_DEFAULT_FOR_FIELD"&&(e=$O.exec(t.sqlMessage)),e?{column:e[1]}:null},subclassParsers:[]};const NO=Zs,bO=/a foreign key constraint fails \(`(.+)`\.`(.+)`, CONSTRAINT `(.+)` FOREIGN KEY \(`(.+)`\) REFERENCES `(.+)` \(`(.+)`\)/,AO=/Cannot delete or update a parent row: a foreign key constraint fails \(`(.+)`\.`(.+)`, CONSTRAINT `(.+)` FOREIGN KEY \(`(.+)`\) REFERENCES `(.+)` \(`(.+)`\)/;var TO={error:NO,parse:t=>{let e=null;return t.code==="ER_NO_REFERENCED_ROW"||t.code==="ER_ROW_IS_REFERENCED"?{table:null,constraint:null}:(t.code==="ER_NO_REFERENCED_ROW_2"?e=bO.exec(t.sqlMessage):t.code==="ER_ROW_IS_REFERENCED_2"&&(e=AO.exec(t.sqlMessage)),e?{table:e[2],constraint:e[3]}:null)},subclassParsers:[]};const IO=nn,{getSqlStateClass:SO}=Bi;var PO={error:IO,parse:t=>SO(t.sqlState)==="23"||t.code==="ER_NO_DEFAULT_FOR_FIELD"?{}:null,subclassParsers:[OO,wO,TO]};const CO=xi,{getSqlStateClass:MO}=Bi,DO=["ER_DATA_TOO_LONG","ER_TRUNCATED_WRONG_VALUE","ER_TRUNCATED_WRONG_VALUE_FOR_FIELD"];var jO={error:CO,parse:t=>MO(t.sqlState)==="22"||DO.includes(t.code)?{}:null,subclassParsers:[]};const LO=Pn,FO=Dl.mysql;var kO={error:LO,parse:t=>typeof t.code=="string"&&"sqlMessage"in t&&"sqlState"in t&&t.sqlState.length===5&&FO.has(t.code)&&typeof t.errno=="number"?{nativeError:t,client:"mysql"}:null,subclassParsers:[PO,jO]};function lp(t){return{errorCode:t.originalError.info.number,severity:t.originalError.info.class}}function BO(t,e,r){const n=lp(t);return n?n.errorCode===r&&n.severity===e:!1}var us={getCode:lp,isCode:BO};const UO=Ui,{isCode:xO}=us,GO=/The (INSERT|UPDATE) statement conflicted with the CHECK constraint "(.+)". The conflict occurred in database "(.+)", table "(.+)", column '(.+)'./;var VO={error:UO,parse:t=>{if(xO(t,16,547)){const e=GO.exec(t.originalError.message);return e?{table:e[3],constraint:e[1]}:null}else return null},subclassParsers:[]};const HO=xi,{isCode:Io}=us;var KO={error:HO,parse:t=>Io(t,16,241)||Io(t,16,242)||Io(t,16,245)||Io(t,16,8152)?{}:null,subclassParsers:[]};const qO=Zs,{isCode:WO}=us,JO=/The (?:INSERT|UPDATE) statement conflicted with the FOREIGN KEY constraint "(.+)". The conflict occurred in database "(.+)", table "(.+)\.(.+)", column '(.+)'./,zO=/The DELETE statement conflicted with the REFERENCE constraint "(.+)". The conflict occurred in database "(.+)", table "(.+)\.(.+)", column '(.+)'./;var QO={error:qO,parse:t=>{if(WO(t,16,547)){const e=JO.exec(t.originalError.message);if(e)return{table:e[4],schema:e[3],constraint:e[1]};const r=zO.exec(t.originalError.message);if(r)return{table:r[4],schema:r[3],constraint:r[1]}}return null},subclassParsers:[]};const YO=Xs,{isCode:Cd}=us,XO=/Cannot insert the value NULL into column '(.+)', table '(.+)\.(.+)\.(.+)'; column does not allow nulls. (?:INSERT|UPDATE) fails./;var ZO={error:YO,parse:t=>{if(Cd(t,16,515)||Cd(t,16,5e4)){const e=XO.exec(t.originalError.message);return e?{column:e[1],database:e[2],schema:e[3],table:e[4]}:null}else return null},subclassParsers:[]};const ev=Ys,{isCode:Md}=us,tv=/Cannot insert duplicate key row in object '(.+)\.(.+)' with unique index '(.+)'. The duplicate key value is (.+)./,rv=/Violation of UNIQUE KEY constraint '(.+)'. Cannot insert duplicate key in object '(.+)\.(.+)'. The duplicate key value is \((.+)\)/;var nv={error:ev,parse:t=>{if(Md(t,14,2627)){const e=rv.exec(t.originalError.message);return e?{table:e[3],schema:e[2],constraint:e[1]}:null}if(Md(t,14,2601)){const e=tv.exec(t.originalError.message);return e?{table:e[2],constraint:e[3],schema:e[1]}:null}return null},subclassParsers:[]};const sv=Pn,ov=Dl.mssql,{getCode:iv}=us;var av={error:sv,parse:t=>t.originalError&&t.code==="EREQUEST"&&ov.has(iv(t))?{nativeError:t.originalError,client:"mssql"}:null,subclassParsers:[VO,KO,QO,ZO,nv]};const lv=eO,cv=mO,uv=kO,dv=av;var fv={postgres:lv,sqlite:cv,mysql:uv,mssql:dv};const Dd=fv,hv=Pn,pv=nn,_v=Zs,mv=Xs,yv=Ys,Ev=Ui,gv=xi;function Ov(t){const e=Object.keys(Dd);for(let r=0,n=e.length;r<n;++r){const s=Dd[e[r]],o=cp(s,t,null);if(o!==null)return new o.node.error(o.args)}return t}function cp(t,e,r){const n=t.parse(e);if(n===null)return null;const s={node:t,args:Object.assign({},r&&r.args,n)};for(let o=0;o<t.subclassParsers.length;++o){const i=cp(t.subclassParsers[o],e,s);if(i!==null)return i}return s}var up={wrapError:Ov,DBError:hv,UniqueViolationError:yv,NotNullViolationError:mv,ForeignKeyViolationError:_v,ConstraintViolationError:pv,CheckViolationError:Ev,DataError:gv},ii={exports:{}};ii.exports;(function(t,e){/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash include="cloneDeep,clone" exports="node" --development`
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var r,n="4.17.5",s=200,o="__lodash_hash_undefined__",i=1,a=2,c=4,u=9007199254740991,d="[object Arguments]",p="[object Array]",N="[object AsyncFunction]",$="[object Boolean]",g="[object Date]",R="[object Error]",y="[object Function]",_="[object GeneratorFunction]",v="[object Map]",C="[object Number]",D="[object Null]",L="[object Object]",ne="[object Promise]",ce="[object Proxy]",me="[object RegExp]",q="[object Set]",ee="[object String]",oe="[object Symbol]",ie="[object Undefined]",ae="[object WeakMap]",ue="[object ArrayBuffer]",$e="[object DataView]",be="[object Float32Array]",Fe="[object Float64Array]",Ye="[object Int8Array]",I="[object Int16Array]",b="[object Int32Array]",f="[object Uint8Array]",w="[object Uint8ClampedArray]",m="[object Uint16Array]",l="[object Uint32Array]",h=/[\\^$.*+?()[\]{}|]/g,A=/\w*$/,B=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,H={};H[be]=H[Fe]=H[Ye]=H[I]=H[b]=H[f]=H[w]=H[m]=H[l]=!0,H[d]=H[p]=H[ue]=H[$]=H[$e]=H[g]=H[R]=H[y]=H[v]=H[C]=H[L]=H[me]=H[q]=H[ee]=H[ae]=!1;var re={};re[d]=re[p]=re[ue]=re[$e]=re[$]=re[g]=re[be]=re[Fe]=re[Ye]=re[I]=re[b]=re[v]=re[C]=re[L]=re[me]=re[q]=re[ee]=re[oe]=re[f]=re[w]=re[m]=re[l]=!0,re[R]=re[y]=re[ae]=!1;var _e=typeof Kn=="object"&&Kn&&Kn.Object===Object&&Kn,Ae=_e||Function("return this")(),We=e&&!e.nodeType&&e,de=We&&!0&&t&&!t.nodeType&&t,Xe=de&&de.exports===We,qe=Xe&&_e.process,je=function(){try{return qe&&qe.binding&&qe.binding("util")}catch{}}(),we=je&&je.isMap,ct=je&&je.isSet,Qe=je&&je.isTypedArray;function nt(E,k){for(var Y=-1,Ee=E==null?0:E.length;++Y<Ee&&k(E[Y],Y,E)!==!1;);return E}function Z(E,k){for(var Y=-1,Ee=E==null?0:E.length,jt=0,Ot=[];++Y<Ee;){var dt=E[Y];k(dt,Y,E)&&(Ot[jt++]=dt)}return Ot}function z(E,k){for(var Y=-1,Ee=k.length,jt=E.length;++Y<Ee;)E[jt+Y]=k[Y];return E}function J(E,k){for(var Y=-1,Ee=Array(E);++Y<E;)Ee[Y]=k(Y);return Ee}function P(E){return function(k){return E(k)}}function U(E,k){return E==null?r:E[k]}function Q(E,k){return function(Y){return E(k(Y))}}var le=Array.prototype,x=Function.prototype,S=Object.prototype,te=Ae["__core-js_shared__"],Ne=x.toString,Ce=S.hasOwnProperty,Mt=function(){var E=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),ke=S.toString,et=RegExp("^"+Ne.call(Ce).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),st=Xe?Ae.Buffer:r,ze=Ae.Symbol,Nr=Ae.Uint8Array,Fr=st?st.allocUnsafe:r,Mn=Q(Object.getPrototypeOf,Object),Dn=Object.create,jn=S.propertyIsEnumerable,mr=le.splice,rr=ze?ze.toStringTag:r,G=function(){try{var E=un(Object,"defineProperty");return E({},"",{}),E}catch{}}(),O=Object.getOwnPropertySymbols,F=st?st.isBuffer:r,se=Q(Object.keys,Object),fe=un(Ae,"DataView"),He=un(Ae,"Map"),bt=un(Ae,"Promise"),kr=un(Ae,"Set"),M=un(Ae,"WeakMap"),T=un(Object,"create"),j=dn(fe),W=dn(He),K=dn(bt),ge=dn(kr),Re=dn(M),Ke=ze?ze.prototype:r,Ze=Ke?Ke.valueOf:r;function Pe(){}var Be=function(){function E(){}return function(k){if(!kn(k))return{};if(Dn)return Dn(k);E.prototype=k;var Y=new E;return E.prototype=r,Y}}();function Je(E){var k=-1,Y=E==null?0:E.length;for(this.clear();++k<Y;){var Ee=E[k];this.set(Ee[0],Ee[1])}}function ut(){this.__data__=T?T(null):{},this.size=0}function Te(E){var k=this.has(E)&&delete this.__data__[E];return this.size-=k?1:0,k}function ot(E){var k=this.__data__;if(T){var Y=k[E];return Y===o?r:Y}return Ce.call(k,E)?k[E]:r}function ft(E){var k=this.__data__;return T?k[E]!==r:Ce.call(k,E)}function it(E,k){var Y=this.__data__;return this.size+=this.has(E)?0:1,Y[E]=T&&k===r?o:k,this}Je.prototype.clear=ut,Je.prototype.delete=Te,Je.prototype.get=ot,Je.prototype.has=ft,Je.prototype.set=it;function Et(E){var k=-1,Y=E==null?0:E.length;for(this.clear();++k<Y;){var Ee=E[k];this.set(Ee[0],Ee[1])}}function Wt(){this.__data__=[],this.size=0}function Jt(E){var k=this.__data__,Y=$o(k,E);if(Y<0)return!1;var Ee=k.length-1;return Y==Ee?k.pop():mr.call(k,Y,1),--this.size,!0}function Br(E){var k=this.__data__,Y=$o(k,E);return Y<0?r:k[Y][1]}function br(E){return $o(this.__data__,E)>-1}function Dt(E,k){var Y=this.__data__,Ee=$o(Y,E);return Ee<0?(++this.size,Y.push([E,k])):Y[Ee][1]=k,this}Et.prototype.clear=Wt,Et.prototype.delete=Jt,Et.prototype.get=Br,Et.prototype.has=br,Et.prototype.set=Dt;function gt(E){var k=-1,Y=E==null?0:E.length;for(this.clear();++k<Y;){var Ee=E[k];this.set(Ee[0],Ee[1])}}function Ar(){this.size=0,this.__data__={hash:new Je,map:new(He||Et),string:new Je}}function nr(E){var k=No(this,E).delete(E);return this.size-=k?1:0,k}function ln(E){return No(this,E).get(E)}function go(E){return No(this,E).has(E)}function Oo(E,k){var Y=No(this,E),Ee=Y.size;return Y.set(E,k),this.size+=Y.size==Ee?0:1,this}gt.prototype.clear=Ar,gt.prototype.delete=nr,gt.prototype.get=ln,gt.prototype.has=go,gt.prototype.set=Oo;function sr(E){var k=this.__data__=new Et(E);this.size=k.size}function Ln(){this.__data__=new Et,this.size=0}function Fn(E){var k=this.__data__,Y=k.delete(E);return this.size=k.size,Y}function vo(E){return this.__data__.get(E)}function Ro(E){return this.__data__.has(E)}function cn(E,k){var Y=this.__data__;if(Y instanceof Et){var Ee=Y.__data__;if(!He||Ee.length<s-1)return Ee.push([E,k]),this.size=++Y.size,this;Y=this.__data__=new gt(Ee)}return Y.set(E,k),this.size=Y.size,this}sr.prototype.clear=Ln,sr.prototype.delete=Fn,sr.prototype.get=vo,sr.prototype.has=Ro,sr.prototype.set=cn;function fd(E,k){var Y=bo(E),Ee=!Y&&Ed(E),jt=!Y&&!Ee&&va(E),Ot=!Y&&!Ee&&!jt&&vd(E),dt=Y||Ee||jt||Ot,zt=dt?J(E.length,String):[],or=zt.length;for(var ir in E)(k||Ce.call(E,ir))&&!(dt&&(ir=="length"||jt&&(ir=="offset"||ir=="parent")||Ot&&(ir=="buffer"||ir=="byteLength"||ir=="byteOffset")||ZE(ir,or)))&&zt.push(ir);return zt}function hd(E,k,Y){var Ee=E[k];(!(Ce.call(E,k)&&ga(Ee,Y))||Y===r&&!(k in E))&&pd(E,k,Y)}function $o(E,k){for(var Y=E.length;Y--;)if(ga(E[Y][0],k))return Y;return-1}function PE(E,k){return E&&wo(k,Ao(k),E)}function CE(E,k){return E&&wo(k,To(k),E)}function pd(E,k,Y){k=="__proto__"&&G?G(E,k,{configurable:!0,enumerable:!0,value:Y,writable:!0}):E[k]=Y}function Es(E,k,Y,Ee,jt,Ot){var dt,zt=k&i,or=k&a,ir=k&c;if(dt!==r)return dt;if(!kn(E))return E;var $d=bo(E);if($d){if(dt=QE(E),!zt)return HE(E,dt)}else{var Un=Tr(E),wd=Un==y||Un==_;if(va(E))return BE(E,zt);if(Un==L||Un==d||wd&&!jt){if(dt=or||wd?{}:YE(E),!zt)return or?qE(E,CE(dt,E)):KE(E,PE(dt,E))}else{if(!re[Un])return jt?E:{};dt=XE(E,Un,zt)}}Ot||(Ot=new sr);var Nd=Ot.get(E);if(Nd)return Nd;if(Ot.set(E,dt),Od(E))return E.forEach(function(Ur){dt.add(Es(Ur,k,Y,Ur,E,Ot))}),dt;if(gd(E))return E.forEach(function(Ur,fn){dt.set(fn,Es(Ur,k,Y,fn,E,Ot))}),dt;var ig=ir?or?JE:WE:or?To:Ao,bd=$d?r:ig(E);return nt(bd||E,function(Ur,fn){bd&&(fn=Ur,Ur=E[fn]),hd(dt,fn,Es(Ur,k,Y,fn,E,Ot))}),dt}function _d(E,k,Y){var Ee=k(E);return bo(E)?Ee:z(Ee,Y(E))}function gs(E){return E==null?E===r?ie:D:rr&&rr in Object(E)?zE(E):ng(E)}function md(E){return Bn(E)&&gs(E)==d}function ME(E){return Bn(E)&&Tr(E)==v}function DE(E){if(!kn(E)||tg(E))return!1;var k=Ra(E)?et:B;return k.test(dn(E))}function jE(E){return Bn(E)&&Tr(E)==q}function LE(E){return Bn(E)&&$a(E.length)&&!!H[gs(E)]}function FE(E){if(!Ea(E))return se(E);var k=[];for(var Y in Object(E))Ce.call(E,Y)&&Y!="constructor"&&k.push(Y);return k}function kE(E){if(!kn(E))return rg(E);var k=Ea(E),Y=[];for(var Ee in E)Ee=="constructor"&&(k||!Ce.call(E,Ee))||Y.push(Ee);return Y}function BE(E,k){if(k)return E.slice();var Y=E.length,Ee=Fr?Fr(Y):new E.constructor(Y);return E.copy(Ee),Ee}function ma(E){var k=new E.constructor(E.byteLength);return new Nr(k).set(new Nr(E)),k}function UE(E,k){var Y=k?ma(E.buffer):E.buffer;return new E.constructor(Y,E.byteOffset,E.byteLength)}function xE(E){var k=new E.constructor(E.source,A.exec(E));return k.lastIndex=E.lastIndex,k}function GE(E){return Ze?Object(Ze.call(E)):{}}function VE(E,k){var Y=k?ma(E.buffer):E.buffer;return new E.constructor(Y,E.byteOffset,E.length)}function HE(E,k){var Y=-1,Ee=E.length;for(k||(k=Array(Ee));++Y<Ee;)k[Y]=E[Y];return k}function wo(E,k,Y,Ee){var jt=!Y;Y||(Y={});for(var Ot=-1,dt=k.length;++Ot<dt;){var zt=k[Ot],or=r;or===r&&(or=E[zt]),jt?pd(Y,zt,or):hd(Y,zt,or)}return Y}function KE(E,k){return wo(E,ya(E),k)}function qE(E,k){return wo(E,yd(E),k)}function WE(E){return _d(E,Ao,ya)}function JE(E){return _d(E,To,yd)}function No(E,k){var Y=E.__data__;return eg(k)?Y[typeof k=="string"?"string":"hash"]:Y.map}function un(E,k){var Y=U(E,k);return DE(Y)?Y:r}function zE(E){var k=Ce.call(E,rr),Y=E[rr];try{E[rr]=r;var Ee=!0}catch{}var jt=ke.call(E);return Ee&&(k?E[rr]=Y:delete E[rr]),jt}var ya=O?function(E){return E==null?[]:(E=Object(E),Z(O(E),function(k){return jn.call(E,k)}))}:wa,yd=O?function(E){for(var k=[];E;)z(k,ya(E)),E=Mn(E);return k}:wa,Tr=gs;(fe&&Tr(new fe(new ArrayBuffer(1)))!=$e||He&&Tr(new He)!=v||bt&&Tr(bt.resolve())!=ne||kr&&Tr(new kr)!=q||M&&Tr(new M)!=ae)&&(Tr=function(E){var k=gs(E),Y=k==L?E.constructor:r,Ee=Y?dn(Y):"";if(Ee)switch(Ee){case j:return $e;case W:return v;case K:return ne;case ge:return q;case Re:return ae}return k});function QE(E){var k=E.length,Y=new E.constructor(k);return k&&typeof E[0]=="string"&&Ce.call(E,"index")&&(Y.index=E.index,Y.input=E.input),Y}function YE(E){return typeof E.constructor=="function"&&!Ea(E)?Be(Mn(E)):{}}function XE(E,k,Y){var Ee=E.constructor;switch(k){case ue:return ma(E);case $:case g:return new Ee(+E);case $e:return UE(E,Y);case be:case Fe:case Ye:case I:case b:case f:case w:case m:case l:return VE(E,Y);case v:return new Ee;case C:case ee:return new Ee(E);case me:return xE(E);case q:return new Ee;case oe:return GE(E)}}function ZE(E,k){var Y=typeof E;return k=k??u,!!k&&(Y=="number"||Y!="symbol"&&V.test(E))&&E>-1&&E%1==0&&E<k}function eg(E){var k=typeof E;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?E!=="__proto__":E===null}function tg(E){return!!Mt&&Mt in E}function Ea(E){var k=E&&E.constructor,Y=typeof k=="function"&&k.prototype||S;return E===Y}function rg(E){var k=[];if(E!=null)for(var Y in Object(E))k.push(Y);return k}function ng(E){return ke.call(E)}function dn(E){if(E!=null){try{return Ne.call(E)}catch{}try{return E+""}catch{}}return""}function sg(E){return Es(E,c)}function og(E){return Es(E,i|c)}function ga(E,k){return E===k||E!==E&&k!==k}var Ed=md(function(){return arguments}())?md:function(E){return Bn(E)&&Ce.call(E,"callee")&&!jn.call(E,"callee")},bo=Array.isArray;function Oa(E){return E!=null&&$a(E.length)&&!Ra(E)}var va=F||Rd;function Ra(E){if(!kn(E))return!1;var k=gs(E);return k==y||k==_||k==N||k==ce}function $a(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=u}function kn(E){var k=typeof E;return E!=null&&(k=="object"||k=="function")}function Bn(E){return E!=null&&typeof E=="object"}var gd=we?P(we):ME,Od=ct?P(ct):jE,vd=Qe?P(Qe):LE;function Ao(E){return Oa(E)?fd(E):FE(E)}function To(E){return Oa(E)?fd(E,!0):kE(E)}function wa(){return[]}function Rd(){return!1}Pe.keys=Ao,Pe.keysIn=To,Pe.clone=sg,Pe.cloneDeep=og,Pe.eq=ga,Pe.isArguments=Ed,Pe.isArray=bo,Pe.isArrayLike=Oa,Pe.isBuffer=va,Pe.isFunction=Ra,Pe.isLength=$a,Pe.isMap=gd,Pe.isObject=kn,Pe.isObjectLike=Bn,Pe.isSet=Od,Pe.isTypedArray=vd,Pe.stubArray=wa,Pe.stubFalse=Rd,Pe.VERSION=n,de&&((de.exports=Pe)._=Pe,We._=Pe)}).call(Kn)})(ii,ii.exports);var vv=ii.exports;const{clone:Rv,cloneDeep:$v}=vv,jd=10;function wv(t){return Array.isArray(t)||Buffer.isBuffer(t)?t.length===0:Nn(t)?Object.keys(t).length===0:!0}function Nn(t){return t!==null&&typeof t=="object"}function Nv(t){return Nn(t)&&(!t.constructor||t.constructor===Object)&&(!t.toString||t.toString===Object.prototype.toString)}function bv(t){return typeof t=="function"}function Av(t){return t instanceof RegExp}function dp(t){return typeof t=="string"}function fp(t){return typeof t=="number"}function hp(t){return Array.isArray(t)?t:[t]}function Tv(t){return Array.isArray(t)?t[0]:t}function Iv(t,e=null){const r=new Map;for(let n=0,s=t.length;n<s;++n){const o=t[n],i=e!==null?e(o):o;r.set(i,o)}return Array.from(r.values())}function Sv(t,e=null){const r=new Map;for(const n of t){const s=e!==null?e(n):n;let o=r.get(s);o||(o=[],r.set(s,o)),o.push(n)}return r}function Pv(t,e){e=hp(e);const r=Object.keys(t),n={};for(let s=0,o=r.length;s<o;++s){const i=r[s];e.includes(i)||(n[i]=t[i])}return n}function Cv(t,e){const r=new Set(e),n=[];for(let s=0;s<t.length;++s){const o=t[s];r.has(o)||n.push(o)}return n}function Mv(t,e){return t.length<jd&&e.length<jd?Dv(t,e):jv(t,e)}function Dv(t,e){const r=t.slice();for(let n=0,s=e.length;n<s;++n){const o=e[n];r.indexOf(o)===-1&&r.push(o)}return r}function jv(t,e){const r=new Set;for(let n=0;n<t.length;++n)r.add(t[n]);for(let n=0;n<e.length;++n)r.add(e[n]);return Array.from(r)}function Lv(t){return t[t.length-1]}function Fv(t){return t[0].toUpperCase()+t.substring(1)}function kv(t){if(Nn(t)){const e=Object.keys(t),r=new Array(e.length);for(let n=0,s=e.length;n<s;++n)r[n]=t[e[n]];return r}else return[]}function Bv(t){let e=!1,r;return function(){return e===!1&&(e=!0,r=t.apply(this,arguments)),r}}function Uv(t){const e=[];for(let r=0,n=t.length;r<n;++r){const s=t[r];if(Array.isArray(s))for(let o=0;o<s.length;++o)e.push(s[o]);else e.push(s)}return e}function xv(t,e){for(let r=0,n=e.length;r<n;++r){const s=e[r];if(!Nn(t))return;t=t[s]}return t}function Gv(t,e,r){const n=t;for(let s=0,o=e.length-1;s<o;++s){const i=e[s];if(!rl(i))return n;let a=t[i];if(!Nn(a)){const c=e[s+1];isNaN(c)?a={}:a=[],t[i]=a}t=a}if(e.length>0&&Nn(t)){const s=e[e.length-1];rl(s)&&(t[s]=r)}return n}function Vv(t,e){const r={};for(let n=0,s=t.length;n<s;++n){const o=t[n];rl(o)&&(r[o]=e[n])}return r}function Hv(t,e){const r=[];for(let n=0,s=t.length;n<s;++n){const o=t[n];(r.length===0||r[r.length-1].length===e)&&r.push([]),r[r.length-1].push(o)}return r}function Kv(t,e){return jl(t,e,Qv)}function jl(t,e,r){return t===e?!0:qv(t,e,r)}function qv(t,e,r){const n=typeof t,s=typeof e,o=n==="object"&&!r(t,null),i=s==="object"&&!r(e,null);if(o&&i){const a=Array.isArray(t),c=Array.isArray(e);return a&&c?Wv(t,e,r):!a&&!c?Jv(t,e,r):!1}else return o!==i?!1:r(t,e)}function Wv(t,e,r){if(t.length!==e.length)return!1;for(let n=0,s=t.length;n<s;++n)if(!jl(t[n],e[n],r))return!1;return!0}function Jv(t,e,r){if(t.constructor===Date&&e.constructor===Date)return zv(t,e);const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(let o=0,i=n.length;o<i;++o){const a=n[o];if(!jl(t[a],e[a],r))return!1}return!0}function zv(t,e){return t.getTime()===e.getTime()}function Qv(t,e){return t===e}function rl(t){return fp(t)||dp(t)&&t!=="__proto__"}function Yv(t,e){const r=new Map(t);if(e)for(const n of e.keys())r.set(n,e.get(n));return r}var ye={isEmpty:wv,isString:dp,isRegExp:Av,isObject:Nn,isNumber:fp,isFunction:bv,jsonEquals:Kv,isPlainObject:Nv,difference:Cv,upperFirst:Fv,zipObject:Vv,mergeMaps:Yv,cloneDeep:$v,asSingle:Tv,asArray:hp,flatten:Uv,groupBy:Sv,uniqBy:Iv,values:kv,union:Mv,chunk:Hv,clone:Rv,omit:Pv,once:Bv,last:Lv,get:xv,set:Gv};const Xv=["$$queryProps"],Zv=["$$knex","$$validator","$$jsonSchema","$$colToProp","$$propToCol","$$relationMappings","$$relations","$$relationNames","$$jsonAttributes","$$columnNameMappers","$$tableMetadata","$$readOnlyAttributes","$$idRelationProperty","$$virtualAttributes"];function eR(t,e,r){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:r})}function tR(t,e){const r=new Map;for(let n=0,s=t.length;n<s;++n){const o=t[n];r.set(o.$propKey(e),o)}return r}var sn={hiddenProps:Xv,staticHiddenProps:Zv,defineNonEnumerableProperty:eR,keyByProps:tR};const rR="$";function nR(t){return t[0]===rR}var Gi={isInternalProp:nR};const{isObject:Ll,cloneDeep:sR}=ye,{hiddenProps:Ld}=sn,{defineNonEnumerableProperty:oR}=sn,{isInternalProp:iR}=Gi;function pp(t,e,r){let n=null;const s=t.$omitFromJson(),o=t.$omitFromDatabaseJson();return!e&&!r?n=aR(t):n=lR(t,e,r),s&&n.$omitFromJson(s),o&&n.$omitFromDatabaseJson(o),n=uR(t,n),n}function aR(t){const e=new t.constructor,r=Object.keys(t);for(let n=0,s=r.length;n<s;++n){const o=r[n],i=t[o];Ll(i)?e[o]=Fl(i):e[o]=i}return e}function lR(t,e,r){const n=new t.constructor,s=Object.keys(t),o=t.constructor.getRelationNames();for(let i=0,a=s.length;i<a;++i){const c=s[i],u=t[c];if(e&&o.includes(c)){delete n[c];continue}r&&iR(c)||(Ll(u)?n[c]=Fl(u):n[c]=u)}return n}function Fl(t){return Array.isArray(t)?cR(t):t.$isObjectionModel?pp(t,!1,!1):Buffer.isBuffer(t)?new Buffer(t):sR(t)}function cR(t){const e=new Array(t.length);for(let r=0,n=e.length;r<n;++r){const s=t[r];Ll(s)?e[r]=Fl(s):e[r]=s}return e}function uR(t,e){for(let r=0,n=Ld.length;r<n;++r){const s=Ld[r];t.hasOwnProperty(s)&&oR(e,s,t[s])}return e}var _p={clone:pp};const Fd=new Map;function dR(t){let e=Fd.get(t.name);return e||(e=fR(t.name),Fd.set(t.name,e)),e(t)}function fR(t){return new Function("BaseClass",`
    'use strict';
    return class ${t} extends BaseClass {}
  `)}var mp={inheritModel:dR};const{inheritModel:hR}=mp,{staticHiddenProps:pR}=sn,{defineNonEnumerableProperty:ai}=sn;function _R(t,e){let r=mR(t,e);return r===null&&(r=hR(t),r=ER(t,r),r.knex(e),r=gR(t,r,e),r=OR(t,r,e)),r}function mR(t,e){const r=yp(e),n=t.uniqueTag();return r.get(n)||null}function yp(t){return t.$$objection||yR(t),t.$$objection.boundModels}function yR(t){ai(t,"$$objection",{boundModels:new Map})}function ER(t,e){for(const r of pR)t.hasOwnProperty(r)&&r!=="$$relations"&&r!=="$$relationArray"&&ai(e,r,t[r]);return e}function gR(t,e,r){const n=yp(r),s=t.uniqueTag();return n.set(s,e),e}function OR(t,e,r){const n=Object.create(null),s=[];for(const o of t.getRelationNames()){const i=t.getRelation(o),a=i.bindKnex(r);n[i.name]=a,s.push(a)}return ai(e,"$$relations",n),ai(e,"$$relationArray",s),e}var vR={bindKnex:_R};const{clone:RR}=_p;function $R(t,e,r={}){e=e||t;const n=e,s=n&&n.$isObjectionModel;if(r.skipValidation)return e;s&&(e=RR(e,!0,!0),r=Object.assign({},r,{mutable:!0}));const i=t.constructor.getValidator(),a={options:r,model:t,json:e,ctx:Object.create(null)};return i.beforeValidate(a),e=i.validate(a),i.afterValidate(a),s?n.$set(e):e}var wR={validate:$R};const{isObject:NR,isFunction:Gs}=ye;function Cn(t){const e=typeof t;return t!==null&&(e==="object"||e==="function")&&t.client&&t.client.dialect||null}function bR(t){return Cn(t)==="postgresql"}function AR(t){const e=Cn(t);return e==="oracle"||e==="oracledb"}function TR(t){const e=Cn(t);return e==="mysql"||e==="mysql2"}function IR(t){return Cn(t)==="sqlite3"}function SR(t){return Cn(t)==="mssql"}function PR(t){return kl(t)&&Gs(t.select)&&Gs(t.column)&&t.select===t.column&&"client"in t}function CR(t){return kl(t)&&t.grouping==="join"&&"joinType"in t}function MR(t){return kl(t)&&t.isRawInstance&&"client"in t}function DR(t){return!!Cn(t)&&Gs(t.commit)&&Gs(t.rollback)}function kl(t){return NR(t)&&Gs(t.constructor)}var qt={getDialect:Cn,isPostgres:bR,isMySql:TR,isSqlite:IR,isMsSql:SR,isOracle:AR,isKnexQueryBuilder:PR,isKnexJoinBuilder:CR,isKnexRaw:MR,isKnexTransaction:DR};function jR(t,e,r){Ep(t,e,null,null,r)}function Ep(t,e,r,n,s){Array.isArray(t)?LR(t,e,r,n,s):t&&gp(t,e,r,n,s)}function LR(t,e,r,n,s){for(let o=0,i=t.length;o<i;++o)gp(t[o],e,r,n,s)}function gp(t,e,r,n,s){t&&s(t,e,r,n);const o=e.getRelationNames();for(let i=0,a=o.length;i<a;++i){const c=o[i],u=t[c];if(u){const d=e.getRelation(c);Ep(u,d.relatedModelClass,t,d,s)}}}var FR={visitModels:jR};function kR(t,e){return e!==void 0?UR(t,e):xR(t)}function BR(t){return t.$hasProps(t.constructor.getIdPropertyArray())}function UR(t,e){const r=t.constructor.getIdProperty(),n=Array.isArray(r);if(Array.isArray(e))if(n){if(e.length!==r.length)throw new Error("trying to set an invalid identifier for a model");for(let s=0;s<e.length;++s)t[r[s]]=e[s]}else{if(e.length!==1)throw new Error("trying to set an invalid identifier for a model");t[r]=e[0]}else if(n){if(r.length>1)throw new Error("trying to set an invalid identifier for a model");t[r[0]]=e}else t[r]=e}function xR(t){const e=t.constructor.getIdProperty();return Array.isArray(e)?t.$values(e):t[e]}var GR={getSetId:kR,hasId:BR};const{isObject:VR,isFunction:HR}=ye;function KR(t){return VR(t)&&HR(t.then)}var ds={isPromise:KR};const{isPromise:qR}=ds;function WR(t,e){return qR(t)?t.then(e):e(t)}var JR={after:WR};const{isPromise:zR}=ds;function QR(t,e){return zR(t)?t.then(()=>e):e}var YR={afterReturn:QR};const{isPromise:XR}=ds;function ZR(t,e,r){const n=new Array(t.length);let s=!1;for(let o=0,i=t.length;o<i;++o)n[o]=e(t[o]),XR(n[o])&&(s=!0);return s?Promise.all(n).then(()=>r):r}var e$={mapAfterAllReturn:ZR};const{isPromise:Op}=ds;function t$(t,e,r){switch(t.length){case 0:return r$();case 1:return n$(t,e);default:return s$(t,e,r)}}function r$(){return Promise.resolve([])}function n$(t,e){try{const r=e(t[0],0);return Op(r)?r.then(kd):Promise.resolve(kd(r))}catch(r){return Promise.reject(r)}}function kd(t){return[t]}function s$(t,e,r={}){return new Promise((n,s)=>{const o=r.concurrency||Number.MAX_SAFE_INTEGER,i={reject:s,resolve:n,rejected:!1,index:0,numFinished:0,results:new Array(t.length),items:t,mapper:e};for(;i.index<o&&i.index<t.length&&!i.rejected;)vp(i)})}function vp(t){try{if(t.rejected)return;const e=t.index++,r=t.items[e],n=t.mapper(r,e);return Op(n)?n.then(s=>Bd(t,s,e)).catch(s=>Ud(t,s)):process.nextTick(()=>Bd(t,n,e)),null}catch(e){Ud(t,e)}}function Bd(t,e,r){return t.rejected||(t.results[r]=e,t.numFinished++,t.numFinished===t.items.length&&t.resolve(t.results),t.index<t.items.length&&vp(t)),null}function Ud(t,e){t.rejected=!0,t.reject(e)}var o$={promiseMap:t$};const{isPromise:i$}=ds;function a$(t){try{const e=t();return i$(e)?e:Promise.resolve(e)}catch(e){return Promise.reject(e)}}var l$={promiseTry:a$};const{isPromise:c$}=ds,{after:u$}=JR,{afterReturn:d$}=YR,{mapAfterAllReturn:f$}=e$,{promiseMap:h$}=o$,{promiseTry:p$}=l$;var Ct={isPromise:c$,after:u$,afterReturn:d$,mapAfterAllReturn:f$,map:h$,try:p$};const{isObject:_$,isFunction:m$}=ye,{defineNonEnumerableProperty:y$}=sn,{isKnexRaw:E$,isKnexQueryBuilder:g$}=qt,Rp="$$queryProps";function O$(t,e){const r=Object.keys(e);if(v$(e,r)){const n={},s={};for(let o=0,i=r.length;o<i;++o){const a=r[o],c=e[a];Bl(c)?n[a]=c:s[a]=c}return y$(t,Rp,n),s}else return e}function v$(t,e){for(let r=0,n=e.length;r<n;++r)if(Bl(t[e[r]]))return!0;return!1}function Bl(t){return _$(t)?g$(t)||E$(t)||wp(t)||t.isObjectionQueryBuilderBase:!1}function R$(t,e,r,n){return e=$$(e,n),e=w$(t,e,r,n),e}function $$(t,e){const r=Object.keys(t);for(let n=0,s=r.length;n<s;++n){const o=r[n],i=t[o];Bl(i)&&(t[o]=$p(i,e))}return t}function w$(t,e,r,n){const s=t[Rp];if(!s)return e;const o=t.constructor,i=Object.keys(s);for(let a=0,c=i.length;a<c;++a){const u=i[a];if(!r||!r.includes(u)){const d=$p(s[u],n);e[o.propertyNameToColumnName(u)]=d}}return e}function $p(t,e){return t&&(t.isObjectionQueryBuilderBase?N$(t,e):wp(t)?b$(t,e):t)}function N$(t,e){return t.subqueryOf(e).toKnexQuery()}function b$(t,e){if(!e)throw new Error("toDatabaseJson called without a query builder instance for a model with query properties");return t.toKnexRaw(e)}function wp(t){return m$(t.toKnexRaw)}var Np={splitQueryProps:O$,mergeQueryProps:R$};const{isInternalProp:A$}=Gi,{mergeQueryProps:T$}=Np,{isObject:bp,cloneDeep:I$,isFunction:S$}=ye,P$=[];function C$(t,e){const r=t.constructor,n={virtuals:D$(e),shallow:Ap(e),omit:j$(e,r),pick:null,omitFromJson:t.$omitFromJson()||null,cloneObjects:r.cloneObjectAttributes};let s=F$(t,n);return s=t.$formatJson(s),s}function M$(t,e){const r=t.constructor,n={virtuals:!1,shallow:!0,omit:r.getRelationNames(),pick:L$(r),omitFromJson:t.$omitFromDatabaseJson()||null,cloneObjects:r.cloneObjectAttributes};let s=B$(t,n);return s=t.$formatDatabaseJson(s),T$(t,s,n.omitFromJson,e)}function D$(t){return t?Array.isArray(t.virtuals)?t.virtuals:t.virtuals!==!1:!0}function Ap(t){return!!t&&!!t.shallow}function j$(t,e){return Ap(t)?e.getRelationNames():null}function L$(t){const e=t.getJsonSchema();return e&&t.pickJsonSchemaProperties&&e.properties||null}function F$(t,e){const r={},n=Object.keys(t),s=k$(t,e);for(let o=0,i=n.length;o<i;++o){const a=n[o],c=t[a];Ul(r,a,c,e)}return s.length!==0&&G$(r,t,s,e),r}function k$(t,e){return Array.isArray(e.virtuals)?e.virtuals:e.virtuals===!0?t.constructor.getVirtualAttributes():P$}function B$(t,e){const r={},n=Object.keys(t);for(let s=0,o=n.length;s<o;++s){const i=n[s],a=t[i];Ul(r,i,a,e)}return r}function Ul(t,e,r,n){const s=typeof r;s!=="function"&&s!=="undefined"&&!A$(e)&&!U$(n,e)&&x$(n,e)&&(bp(r)?t[e]=Tp(r,n):t[e]=r)}function U$(t,e){return t.omit!==null&&t.omit.includes(e)||t.omitFromJson!==null&&t.omitFromJson.includes(e)}function x$(t,e){return t.pick===null||e in t.pick}function G$(t,e,r,n){for(let s=0,o=r.length;s<o;++s){const i=r[s];let a=e[i];S$(a)&&(a=a.call(e)),Ul(t,i,a,n)}}function Tp(t,e){return Array.isArray(t)?V$(t,e):t.$isObjectionModel?t.$toJson(e):Buffer.isBuffer(t)?t:e.cloneObjects?I$(t):t}function V$(t,e){const r=new Array(t.length);for(let n=0,s=r.length;n<s;++n){const o=t[n];bp(o)?r[n]=Tp(o,e):r[n]=o}return r}var H$={toJson:C$,toDatabaseJson:M$};const{isObject:K$}=ye,eo="k_";function q$(t,e){switch(e.length){case 1:return z$(t,e);case 2:return Q$(t,e);case 3:return Y$(t,e);default:return X$(t,e)}}function W$(t,e){switch(e.length){case 1:return Z$(t,e);case 2:return ew(t,e);case 3:return tw(t,e);default:return rw(t,e)}}function J$(t,e){for(let r=0;r<e.length;++r){const n=t[e[r]];if(nw(n))return!1}return!0}function z$(t,e){return[t[e[0]]]}function Q$(t,e){return[t[e[0]],t[e[1]]]}function Y$(t,e){return[t[e[0]],t[e[1]],t[e[2]]]}function X$(t,e){const r=new Array(e.length);for(let n=0,s=e.length;n<s;++n)r[n]=t[e[n]];return r}function Z$(t,e){return eo+en(t[e[0]])}function ew(t,e){return eo+en(t[e[0]])+","+en(t[e[1]])}function tw(t,e){return eo+en(t[e[0]])+","+en(t[e[1]])+","+en(t[e[2]])}function rw(t,e){let r=eo;for(let n=0,s=e.length;n<s;++n)r+=en(t[e[n]]),n<s-1&&(r+=",");return r}function en(t){return t===null?"null":t===void 0?"undefined":Buffer.isBuffer(t)?t.toString("hex"):K$(t)?JSON.stringify(t):`${t}`}function nw(t){return t==null}var Ip={PROP_KEY_PREFIX:eo,propToStr:en,values:q$,hasProps:J$,propKey:W$};const{isObject:sw}=ye;function Sp(t,e,r={}){r.cache||(r=Object.assign({},r,{cache:new Map})),r.cache.set(e,t);for(const n of t.constructor.getRelationNames()){const s=e[n];if(s!==void 0){const o=t.constructor.getRelation(n),i=ow(s,o,r);i!==s&&(t[o.name]=i)}}return t}function ow(t,e,r){return Array.isArray(t)?iw(t,e,r):t?Pp(t,e,r):null}function iw(t,e,r){const n=new Array(t.length);let s=!1;for(let o=0,i=t.length;o<i;++o){const a=Pp(t[o],e,r);a!==t[o]&&(s=!0),n[o]=a}return s?n:t}function Pp(t,e,r){if(sw(t)){const n=e.relatedModelClass;let s=r.cache.get(t);return s===void 0&&(t instanceof n?s=Sp(t,t,r):s=n.fromJson(t,r)),s}else return t}var Cp={parseRelationsIntoModelInstances:Sp};const{defineNonEnumerableProperty:aw}=sn,{isPromise:lw}=Ct,qr="$$tableMetadata";function cw(t,{parentBuilder:e=null,knex:r=null,force:n=!1,table:s=null}={}){s||(e?s=e.tableNameFor(t):s=t.getTableName());let o=t.tableMetadata({table:s});if(!n&&o||(t.hasOwnProperty(qr)||aw(t,qr,new Map),o=t[qr].get(s),!n&&o))return Promise.resolve(o);{const i=t.query(r).childQueryOf(e).columnInfo({table:s}).then(a=>{const c={columns:Object.keys(a)};return t[qr].set(s,c),c}).catch(a=>{throw t[qr].delete(s),a});return t[qr].set(s,i),i}}function uw(t,{table:e}={}){if(t.hasOwnProperty(qr)){const r=t[qr].get(e||t.getTableName());return lw(r)?null:r}else return null}var dw={fetchTableMetadata:cw,tableMetadata:uw};const{isInternalProp:fw}=Gi,{splitQueryProps:hw}=Np,{isFunction:pw,isString:_w,isPlainObject:mw}=ye,{parseRelationsIntoModelInstances:yw}=Cp;function Ew(t,e,r){if(e=e||{},r=r||{},Object.prototype.toString.call(e)!=="[object Object]")throw new Error("You should only pass objects to $setJson method. $setJson method was given an invalid value "+e);return e.$isObjectionModel||(e=hw(t,e)),e=t.$parseJson(e,r),e=t.$validate(e,r),t.$set(e),r.skipParseRelations||yw(t,e,r),t}function gw(t,e){if(e=t.$parseDatabaseJson(e),e){const r=Object.keys(e);for(let n=0,s=r.length;n<s;++n){const o=r[n];t[o]=e[o]}}return t}function Ow(t,e){if(e){const r=t.constructor.getReadOnlyAttributes(),n=Object.keys(e);for(let s=0,o=n.length;s<o;++s){const i=n[s],a=e[i];(a!==void 0||mw(e))&&!fw(i)&&!pw(a)&&!r.includes(i)&&(t[i]=a)}}return t}function vw(t,e,r){return e=Mp(t,e),e.isOneToOne()?Array.isArray(r)?r.length===0?t[e.name]=null:t[e.name]=r[0]||null:t[e.name]=r||null:r?Array.isArray(r)?t[e.name]=r:t[e.name]=[r]:t[e.name]=[],t}function Rw(t,e,r){return e=Mp(t,e),!t[e.name]||e.isOneToOne()?t.$setRelated(e,r):(Array.isArray(r)?r.forEach(n=>t[e.name].push(n)):r&&t[e.name].push(r),t)}function Mp(t,e){return _w(e)?t.constructor.getRelation(e):e}var $w={setFast:Ow,setJson:Ew,setDatabaseJson:gw,setRelated:vw,appendRelated:Rw};const{asArray:ww,isObject:Z2,flatten:xd,isString:Nw}=ye;function bw(t,e){const r=e.getJsonAttributes();if(r.length)for(let n=0,s=r.length;n<s;++n){const o=r[n],i=t[o];if(Nw(i)){const a=Iw(i);a!==void 0&&(t[o]=a)}}return t}function Aw(t,e){const r=e.getJsonAttributes();if(r.length)for(let n=0,s=r.length;n<s;++n){const o=r[n],i=t[o];i!=null&&(t[o]=JSON.stringify(i))}return t}function Tw(t){let e=t.jsonAttributes;if(Array.isArray(e))return e;if(e=[],t.getJsonSchema()){const r=t.getJsonSchema().properties||{};for(const n of Object.keys(r)){const s=r[n];let o=ww(s.type).filter(i=>!!i);o.length===0&&Array.isArray(s.anyOf)&&(o=xd(s.anyOf.map(i=>i.type))),o.length===0&&Array.isArray(s.oneOf)&&(o=xd(s.oneOf.map(i=>i.type))),(o.indexOf("object")!==-1||o.indexOf("array")!==-1)&&e.push(n)}}return e}function Iw(t){try{return JSON.parse(t)}catch{return}}var Sw={parseJsonAttributes:bw,formatJsonAttributes:Aw,getJsonAttributes:Tw};const{difference:Dp}=ye;function Pw(t,e){const r=new t,n=Object.keys(r.$parseDatabaseJson({})),s={};s[e]=null;const o=Object.keys(r.$parseDatabaseJson(s));return Dp(o,n)[0]||e}function Cw(t,e){const r=new t,n=Object.keys(r.$formatDatabaseJson({})),s={};s[e]=null;const o=Object.keys(r.$formatDatabaseJson(s));return Dp(o,n)[0]||e}var Mw={columnNameToPropertyName:Pw,propertyNameToColumnName:Cw};const{isObject:Dw,isFunction:jw}=ye;function Lw(t,e){return Dw(t)?jw(t.toKnexRaw)?t.toKnexRaw(e):t.isObjectionQueryBuilderBase===!0?t.subqueryOf(e).toKnexQuery():t:t}var jp={buildArg:Lw};const{isPlainObject:Fw}=ye,{buildArg:Lp}=jp;let xl=class{constructor(e,r){this._sql=`${e}`,this._args=r,this._as=null}get alias(){return this._as}as(e){return this._as=e,this}toKnexRaw(e){let r=null,n=this._sql;return this._args.length===1&&Fw(this._args[0])?(r=Bw(this._args[0],e),this._as&&(r.__alias__=this._as,n+=" as :__alias__:")):(r=kw(this._args,e),this._as&&(r.push(this._as),n+=" as ??")),e.knex().raw(n,r)}};Object.defineProperties(xl.prototype,{isObjectionRawBuilder:{enumerable:!1,writable:!1,value:!0}});function kw(t,e){return t.map(r=>Lp(r,e))}function Bw(t,e){return Object.keys(t).reduce((r,n)=>(r[n]=Lp(t[n],e),r),{})}function Fp(t){const[e,...r]=t;return r.length===1&&Array.isArray(r[0])?{sql:e,args:r[0]}:{sql:e,args:r}}function Uw(...t){const{sql:e,args:r}=Fp(t);return new xl(e,r)}var Vi={RawBuilder:xl,normalizeRawArgs:Fp,raw:Uw};function xw(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function Zn(t,e,r,n){this.message=t,this.expected=e,this.found=r,this.location=n,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Zn)}xw(Zn,Error);Zn.buildMessage=function(t,e){var r={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var d="",p;for(p=0;p<u.parts.length;p++)d+=u.parts[p]instanceof Array?o(u.parts[p][0])+"-"+o(u.parts[p][1]):o(u.parts[p]);return"["+(u.inverted?"^":"")+d+"]"},any:function(u){return"any character"},end:function(u){return"end of input"},other:function(u){return u.description}};function n(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d)})}function o(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d)})}function i(u){return r[u.type](u)}function a(u){var d=new Array(u.length),p,N;for(p=0;p<u.length;p++)d[p]=i(u[p]);if(d.sort(),d.length>0){for(p=1,N=1;p<d.length;p++)d[p-1]!==d[p]&&(d[N]=d[p],N++);d.length=N}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}function c(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+a(t)+" but "+c(e)+" found."};function Gw(t,e){e=e!==void 0?e:{};var r={},n={start:_e},s=_e,o=":",i=l(":",!1),a=function(Z,z){var J=[];if(z){var P=z[1];J=z[2],J.unshift(P)}return{columnName:Z,access:J}},c="[",u=l("[",!1),d='"',p=l('"',!1),N="'",$=l("'",!1),g="]",R=l("]",!1),y=function(Z){return{type:"object",ref:Array.isArray(Z)?Z[1]:Z}},_=function(Z){return{type:"array",ref:parseInt(Z,10)}},v=function(Z){return{type:"object",ref:Z}},C=".",D=l(".",!1),L=/^[^\][]/,ne=h(["]","["],!0,!1),ce=function(Z){return Z.join("")},me=/^[^:]/,q=h([":"],!0,!1),ee=/^[^"]/,oe=h(['"'],!0,!1),ie=/^[^']/,ae=h(["'"],!0,!1),ue=/^[^.\][]/,$e=h([".","]","["],!0,!1),be=/^[0-9]/,Fe=h([["0","9"]],!1,!1),Ye=function(Z){return Z.join("")},I=0,b=[{line:1,column:1}],f=0,w=[],m;if("startRule"in e){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function l(Z,z){return{type:"literal",text:Z,ignoreCase:z}}function h(Z,z,J){return{type:"class",parts:Z,inverted:z,ignoreCase:J}}function A(){return{type:"end"}}function B(Z){var z=b[Z],J;if(z)return z;for(J=Z-1;!b[J];)J--;for(z=b[J],z={line:z.line,column:z.column};J<Z;)t.charCodeAt(J)===10?(z.line++,z.column=1):z.column++,J++;return b[Z]=z,z}function V(Z,z){var J=B(Z),P=B(z);return{start:{offset:Z,line:J.line,column:J.column},end:{offset:z,line:P.line,column:P.column}}}function H(Z){I<f||(I>f&&(f=I,w=[]),w.push(Z))}function re(Z,z,J){return new Zn(Zn.buildMessage(Z,z),Z,z,J)}function _e(){var Z,z,J,P,U,Q,le;if(Z=I,z=je(),z!==r){if(J=I,t.charCodeAt(I)===58?(P=o,I++):(P=r,H(i)),P!==r)if(U=We(),U===r&&(U=Ae(),U===r&&(U=de())),U!==r){for(Q=[],le=We(),le===r&&(le=Ae(),le===r&&(le=Xe()));le!==r;)Q.push(le),le=We(),le===r&&(le=Ae(),le===r&&(le=Xe()));Q!==r?(P=[P,U,Q],J=P):(I=J,J=r)}else I=J,J=r;else I=J,J=r;J===r&&(J=null),J!==r?(z=a(z,J),Z=z):(I=Z,Z=r)}else I=Z,Z=r;return Z}function Ae(){var Z,z,J,P,U,Q;return Z=I,t.charCodeAt(I)===91?(z=c,I++):(z=r,H(u)),z!==r?(J=I,t.charCodeAt(I)===34?(P=d,I++):(P=r,H(p)),P!==r?(U=we(),U!==r?(t.charCodeAt(I)===34?(Q=d,I++):(Q=r,H(p)),Q!==r?(P=[P,U,Q],J=P):(I=J,J=r)):(I=J,J=r)):(I=J,J=r),J===r&&(J=I,t.charCodeAt(I)===39?(P=N,I++):(P=r,H($)),P!==r?(U=ct(),U!==r?(t.charCodeAt(I)===39?(Q=N,I++):(Q=r,H($)),Q!==r?(P=[P,U,Q],J=P):(I=J,J=r)):(I=J,J=r)):(I=J,J=r),J===r&&(J=qe())),J!==r?(t.charCodeAt(I)===93?(P=g,I++):(P=r,H(R)),P!==r?(z=y(J),Z=z):(I=Z,Z=r)):(I=Z,Z=r)):(I=Z,Z=r),Z}function We(){var Z,z,J,P;return Z=I,t.charCodeAt(I)===91?(z=c,I++):(z=r,H(u)),z!==r?(J=nt(),J!==r?(t.charCodeAt(I)===93?(P=g,I++):(P=r,H(R)),P!==r?(z=_(J),Z=z):(I=Z,Z=r)):(I=Z,Z=r)):(I=Z,Z=r),Z}function de(){var Z,z;return Z=I,z=Qe(),z!==r&&(z=v(z)),Z=z,Z}function Xe(){var Z,z,J;return Z=I,t.charCodeAt(I)===46?(z=C,I++):(z=r,H(D)),z!==r?(J=Qe(),J!==r?(z=v(J),Z=z):(I=Z,Z=r)):(I=Z,Z=r),Z}function qe(){var Z,z,J;if(Z=I,z=[],L.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H(ne)),J!==r)for(;J!==r;)z.push(J),L.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H(ne));else z=r;return z!==r&&(z=ce(z)),Z=z,Z}function je(){var Z,z,J;if(Z=I,z=[],me.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H(q)),J!==r)for(;J!==r;)z.push(J),me.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H(q));else z=r;return z!==r&&(z=ce(z)),Z=z,Z}function we(){var Z,z,J;if(Z=I,z=[],ee.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H(oe)),J!==r)for(;J!==r;)z.push(J),ee.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H(oe));else z=r;return z!==r&&(z=ce(z)),Z=z,Z}function ct(){var Z,z,J;if(Z=I,z=[],ie.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H(ae)),J!==r)for(;J!==r;)z.push(J),ie.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H(ae));else z=r;return z!==r&&(z=ce(z)),Z=z,Z}function Qe(){var Z,z,J;if(Z=I,z=[],ue.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H($e)),J!==r)for(;J!==r;)z.push(J),ue.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H($e));else z=r;return z!==r&&(z=ce(z)),Z=z,Z}function nt(){var Z,z,J;if(Z=I,z=[],be.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H(Fe)),J!==r)for(;J!==r;)z.push(J),be.test(t.charAt(I))?(J=t.charAt(I),I++):(J=r,H(Fe));else z=r;return z!==r&&(z=Ye(z)),Z=z,Z}if(m=s(),m!==r&&I===t.length)return m;throw m!==r&&I<t.length&&H(A()),re(w,f<t.length?t.charAt(f):null,f<t.length?V(f,f+1):V(f,f))}var Vw={SyntaxError:Zn,parse:Gw};const Hw=Vw,Gd=new Map;function Kw(t){let e=Gd.get(t);return e!==void 0||(e=Hw.parse(t),e=qw(e),e=Ww(e),Gd.set(t,e)),e}function qw(t){const e=t.columnName.split(".").map(r=>r.trim());return t.column=e[e.length-1],e.length>=2?t.table=e.slice(0,e.length-1).join("."):t.table=null,t}function Ww(t){for(const e of t.access)Object.freeze(e);return Object.freeze(t.access),Object.freeze(t),t}var kp={parseFieldExpression:Kw};const{parseFieldExpression:Jw}=kp,{isObject:zw}=ye;class Gl{constructor(e){this._expr=e,this._parsedExpr=null,this._column=null,this._table=null,this._cast=null,this._toJson=!1,this._table=null,this._alias=null,this._modelClass=null,e!==null&&this._parseExpression(e)}get parsedExpr(){return this._parsedExpr}get column(){return this._column}set column(e){this._column=e}get alias(){return this._alias}set alias(e){this._alias=e}get tableName(){return this._table}set tableName(e){this._table=e}get modelClass(){return this._modelClass}set modelClass(e){this._modelClass=e}get isPlainColumnRef(){return(!this._parsedExpr||this._parsedExpr.access.length===0)&&!this._cast&&!this._toJson}get expression(){return this._expr}get cast(){return this._cast}fullColumn(e){const r=this.tableName?this.tableName:this.modelClass?e.tableRefFor(this.modelClass):null;return r?`${r}.${this.column}`:this.column}castText(){return this.castTo("text")}castInt(){return this.castTo("integer")}castBigInt(){return this.castTo("bigint")}castFloat(){return this.castTo("float")}castDecimal(){return this.castTo("decimal")}castReal(){return this.castTo("real")}castBool(){return this.castTo("boolean")}castJson(){return this._toJson=!0,this}castTo(e){return this._cast=e,this}from(e){return this._table=e,this}table(e){return this._table=e,this}model(e){return this._modelClass=e,this}as(e){return this._alias=e,this}clone(){const e=new this.constructor(null);return e._expr=this._expr,e._parsedExpr=this._parsedExpr,e._column=this._column,e._table=this._table,e._cast=this._cast,e._toJson=this._toJson,e._alias=this._alias,e._modelClass=this._modelClass,e}toKnexRaw(e){return e.knex().raw(...this._createRawArgs(e))}_parseExpression(e){this._parsedExpr=Jw(e),this._column=this._parsedExpr.column,this._table=this._parsedExpr.table}_createRawArgs(e){let r=[],n=this._createReferenceSql(e,r);return n=this._maybeCast(n,r),n=this._maybeToJsonb(n,r),n=this._maybeAlias(n,r),[n,r]}_createReferenceSql(e,r){if(r.push(this.fullColumn(e)),this._parsedExpr.access.length>0){const n=this._cast?"#>>":"#>",s=this._parsedExpr.access.map(o=>o.ref).join(",");return`??${n}'{${s}}'`}else return"??"}_maybeCast(e){return this._cast?`CAST(${e} AS ${this._cast})`:e}_maybeToJsonb(e){return this._toJson?`to_jsonb(${e})`:e}_maybeAlias(e,r){return this._shouldAlias()?(r.push(this._alias),`${e} as ??`):e}_shouldAlias(){return this._alias?this.isPlainColumnRef?this._alias!==this._column:!0:!1}}Object.defineProperties(Gl.prototype,{isObjectionReferenceBuilder:{enumerable:!1,writable:!1,value:!0}});const Qw=t=>zw(t)&&t.isObjectionReferenceBuilder?t:new Gl(t);var Hi={ReferenceBuilder:Gl,ref:Qw};const{RawBuilder:Yw,normalizeRawArgs:Xw}=Vi,{asSingle:Zw,isNumber:e0}=ye;class Vl extends Yw{}function li(...t){const{sql:e,args:r}=Xw(t);return new Vl(`${e}(${r.map(()=>"?").join(", ")})`,r)}for(const t of["coalesce","concat","sum","avg","min","max","count","upper","lower"])li[t]=(...e)=>li(t.toUpperCase(),e);li.now=t=>(t=parseInt(Zw(t),10),(isNaN(t)||!e0(t))&&(t=6),new Vl(`CURRENT_TIMESTAMP(${t})`,[]));var Bp={FunctionBuilder:Vl,fn:li},nl={exports:{}},Up={},hr={},es={},to={},Ve={},Vs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(v){if(super(),!t.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((C,D)=>`${C}${D}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((C,D)=>(D instanceof r&&(C[D.str]=(C[D.str]||0)+1),C),{})}}t._Code=n,t.nil=new n("");function s(_,...v){const C=[_[0]];let D=0;for(;D<v.length;)a(C,v[D]),C.push(_[++D]);return new n(C)}t._=s;const o=new n("+");function i(_,...v){const C=[$(_[0])];let D=0;for(;D<v.length;)C.push(o),a(C,v[D]),C.push(o,$(_[++D]));return c(C),new n(C)}t.str=i;function a(_,v){v instanceof n?_.push(...v._items):v instanceof r?_.push(v):_.push(p(v))}t.addCodeArg=a;function c(_){let v=1;for(;v<_.length-1;){if(_[v]===o){const C=u(_[v-1],_[v+1]);if(C!==void 0){_.splice(v-1,3,C);continue}_[v++]="+"}v++}}function u(_,v){if(v==='""')return _;if(_==='""')return v;if(typeof _=="string")return v instanceof r||_[_.length-1]!=='"'?void 0:typeof v!="string"?`${_.slice(0,-1)}${v}"`:v[0]==='"'?_.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(_ instanceof r))return`"${_}${v.slice(1)}`}function d(_,v){return v.emptyStr()?_:_.emptyStr()?v:i`${_}${v}`}t.strConcat=d;function p(_){return typeof _=="number"||typeof _=="boolean"||_===null?_:$(Array.isArray(_)?_.join(","):_)}function N(_){return new n($(_))}t.stringify=N;function $(_){return JSON.stringify(_).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=$;function g(_){return typeof _=="string"&&t.IDENTIFIER.test(_)?new n(`.${_}`):s`[${_}]`}t.getProperty=g;function R(_){if(typeof _=="string"&&t.IDENTIFIER.test(_))return new n(`${_}`);throw new Error(`CodeGen: invalid export name: ${_}, use explicit $id name mapping`)}t.getEsmExportName=R;function y(_){return new n(_.toString())}t.regexpCode=y})(Vs);var sl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=Vs;class r extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:u,parent:d}={}){this._names={},this._prefixes=u,this._parent=d}toName(u){return u instanceof e.Name?u:this.name(u)}name(u){return new e.Name(this._newName(u))}_newName(u){const d=this._names[u]||this._nameGroup(u);return`${u}${d.index++}`}_nameGroup(u){var d,p;if(!((p=(d=this._parent)===null||d===void 0?void 0:d._prefixes)===null||p===void 0)&&p.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}t.Scope=s;class o extends e.Name{constructor(u,d){super(d),this.prefix=u}setValue(u,{property:d,itemIndex:p}){this.value=u,this.scopePath=(0,e._)`.${new e.Name(d)}[${p}]`}}t.ValueScopeName=o;const i=(0,e._)`\n`;class a extends s{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?i:e.nil}}get(){return this._scope}name(u){return new o(u,this._newName(u))}value(u,d){var p;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const N=this.toName(u),{prefix:$}=N,g=(p=d.key)!==null&&p!==void 0?p:d.ref;let R=this._values[$];if(R){const v=R.get(g);if(v)return v}else R=this._values[$]=new Map;R.set(g,N);const y=this._scope[$]||(this._scope[$]=[]),_=y.length;return y[_]=d.ref,N.setValue(d,{property:$,itemIndex:_}),N}getValue(u,d){const p=this._values[u];if(p)return p.get(d)}scopeRefs(u,d=this._values){return this._reduceValues(d,p=>{if(p.scopePath===void 0)throw new Error(`CodeGen: name "${p}" has no value`);return(0,e._)`${u}${p.scopePath}`})}scopeCode(u=this._values,d,p){return this._reduceValues(u,N=>{if(N.value===void 0)throw new Error(`CodeGen: name "${N}" has no value`);return N.value.code},d,p)}_reduceValues(u,d,p={},N){let $=e.nil;for(const g in u){const R=u[g];if(!R)continue;const y=p[g]=p[g]||new Map;R.forEach(_=>{if(y.has(_))return;y.set(_,n.Started);let v=d(_);if(v){const C=this.opts.es5?t.varKinds.var:t.varKinds.const;$=(0,e._)`${$}${C} ${_} = ${v};${this.opts._n}`}else if(v=N==null?void 0:N(_))$=(0,e._)`${$}${v}${this.opts._n}`;else throw new r(_);y.set(_,n.Completed)})}return $}}t.ValueScope=a})(sl);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=Vs,r=sl;var n=Vs;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var s=sl;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class o{optimizeNodes(){return this}optimizeNames(l,h){return this}}class i extends o{constructor(l,h,A){super(),this.varKind=l,this.name=h,this.rhs=A}render({es5:l,_n:h}){const A=l?r.varKinds.var:this.varKind,B=this.rhs===void 0?"":` = ${this.rhs}`;return`${A} ${this.name}${B};`+h}optimizeNames(l,h){if(l[this.name.str])return this.rhs&&(this.rhs=ue(this.rhs,l,h)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(l,h,A){super(),this.lhs=l,this.rhs=h,this.sideEffects=A}render({_n:l}){return`${this.lhs} = ${this.rhs};`+l}optimizeNames(l,h){if(!(this.lhs instanceof e.Name&&!l[this.lhs.str]&&!this.sideEffects))return this.rhs=ue(this.rhs,l,h),this}get names(){const l=this.lhs instanceof e.Name?{}:{...this.lhs.names};return ae(l,this.rhs)}}class c extends a{constructor(l,h,A,B){super(l,A,B),this.op=h}render({_n:l}){return`${this.lhs} ${this.op}= ${this.rhs};`+l}}class u extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`${this.label}:`+l}}class d extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`break${this.label?` ${this.label}`:""};`+l}}class p extends o{constructor(l){super(),this.error=l}render({_n:l}){return`throw ${this.error};`+l}get names(){return this.error.names}}class N extends o{constructor(l){super(),this.code=l}render({_n:l}){return`${this.code};`+l}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(l,h){return this.code=ue(this.code,l,h),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class $ extends o{constructor(l=[]){super(),this.nodes=l}render(l){return this.nodes.reduce((h,A)=>h+A.render(l),"")}optimizeNodes(){const{nodes:l}=this;let h=l.length;for(;h--;){const A=l[h].optimizeNodes();Array.isArray(A)?l.splice(h,1,...A):A?l[h]=A:l.splice(h,1)}return l.length>0?this:void 0}optimizeNames(l,h){const{nodes:A}=this;let B=A.length;for(;B--;){const V=A[B];V.optimizeNames(l,h)||($e(l,V.names),A.splice(B,1))}return A.length>0?this:void 0}get names(){return this.nodes.reduce((l,h)=>ie(l,h.names),{})}}class g extends ${render(l){return"{"+l._n+super.render(l)+"}"+l._n}}class R extends ${}class y extends g{}y.kind="else";class _ extends g{constructor(l,h){super(h),this.condition=l}render(l){let h=`if(${this.condition})`+super.render(l);return this.else&&(h+="else "+this.else.render(l)),h}optimizeNodes(){super.optimizeNodes();const l=this.condition;if(l===!0)return this.nodes;let h=this.else;if(h){const A=h.optimizeNodes();h=this.else=Array.isArray(A)?new y(A):A}if(h)return l===!1?h instanceof _?h:h.nodes:this.nodes.length?this:new _(be(l),h instanceof _?[h]:h.nodes);if(!(l===!1||!this.nodes.length))return this}optimizeNames(l,h){var A;if(this.else=(A=this.else)===null||A===void 0?void 0:A.optimizeNames(l,h),!!(super.optimizeNames(l,h)||this.else))return this.condition=ue(this.condition,l,h),this}get names(){const l=super.names;return ae(l,this.condition),this.else&&ie(l,this.else.names),l}}_.kind="if";class v extends g{}v.kind="for";class C extends v{constructor(l){super(),this.iteration=l}render(l){return`for(${this.iteration})`+super.render(l)}optimizeNames(l,h){if(super.optimizeNames(l,h))return this.iteration=ue(this.iteration,l,h),this}get names(){return ie(super.names,this.iteration.names)}}class D extends v{constructor(l,h,A,B){super(),this.varKind=l,this.name=h,this.from=A,this.to=B}render(l){const h=l.es5?r.varKinds.var:this.varKind,{name:A,from:B,to:V}=this;return`for(${h} ${A}=${B}; ${A}<${V}; ${A}++)`+super.render(l)}get names(){const l=ae(super.names,this.from);return ae(l,this.to)}}class L extends v{constructor(l,h,A,B){super(),this.loop=l,this.varKind=h,this.name=A,this.iterable=B}render(l){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(l)}optimizeNames(l,h){if(super.optimizeNames(l,h))return this.iterable=ue(this.iterable,l,h),this}get names(){return ie(super.names,this.iterable.names)}}class ne extends g{constructor(l,h,A){super(),this.name=l,this.args=h,this.async=A}render(l){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(l)}}ne.kind="func";class ce extends ${render(l){return"return "+super.render(l)}}ce.kind="return";class me extends g{render(l){let h="try"+super.render(l);return this.catch&&(h+=this.catch.render(l)),this.finally&&(h+=this.finally.render(l)),h}optimizeNodes(){var l,h;return super.optimizeNodes(),(l=this.catch)===null||l===void 0||l.optimizeNodes(),(h=this.finally)===null||h===void 0||h.optimizeNodes(),this}optimizeNames(l,h){var A,B;return super.optimizeNames(l,h),(A=this.catch)===null||A===void 0||A.optimizeNames(l,h),(B=this.finally)===null||B===void 0||B.optimizeNames(l,h),this}get names(){const l=super.names;return this.catch&&ie(l,this.catch.names),this.finally&&ie(l,this.finally.names),l}}class q extends g{constructor(l){super(),this.error=l}render(l){return`catch(${this.error})`+super.render(l)}}q.kind="catch";class ee extends g{render(l){return"finally"+super.render(l)}}ee.kind="finally";class oe{constructor(l,h={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...h,_n:h.lines?`
`:""},this._extScope=l,this._scope=new r.Scope({parent:l}),this._nodes=[new R]}toString(){return this._root.render(this.opts)}name(l){return this._scope.name(l)}scopeName(l){return this._extScope.name(l)}scopeValue(l,h){const A=this._extScope.value(l,h);return(this._values[A.prefix]||(this._values[A.prefix]=new Set)).add(A),A}getScopeValue(l,h){return this._extScope.getValue(l,h)}scopeRefs(l){return this._extScope.scopeRefs(l,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(l,h,A,B){const V=this._scope.toName(h);return A!==void 0&&B&&(this._constants[V.str]=A),this._leafNode(new i(l,V,A)),V}const(l,h,A){return this._def(r.varKinds.const,l,h,A)}let(l,h,A){return this._def(r.varKinds.let,l,h,A)}var(l,h,A){return this._def(r.varKinds.var,l,h,A)}assign(l,h,A){return this._leafNode(new a(l,h,A))}add(l,h){return this._leafNode(new c(l,t.operators.ADD,h))}code(l){return typeof l=="function"?l():l!==e.nil&&this._leafNode(new N(l)),this}object(...l){const h=["{"];for(const[A,B]of l)h.length>1&&h.push(","),h.push(A),(A!==B||this.opts.es5)&&(h.push(":"),(0,e.addCodeArg)(h,B));return h.push("}"),new e._Code(h)}if(l,h,A){if(this._blockNode(new _(l)),h&&A)this.code(h).else().code(A).endIf();else if(h)this.code(h).endIf();else if(A)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(l){return this._elseNode(new _(l))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(_,y)}_for(l,h){return this._blockNode(l),h&&this.code(h).endFor(),this}for(l,h){return this._for(new C(l),h)}forRange(l,h,A,B,V=this.opts.es5?r.varKinds.var:r.varKinds.let){const H=this._scope.toName(l);return this._for(new D(V,H,h,A),()=>B(H))}forOf(l,h,A,B=r.varKinds.const){const V=this._scope.toName(l);if(this.opts.es5){const H=h instanceof e.Name?h:this.var("_arr",h);return this.forRange("_i",0,(0,e._)`${H}.length`,re=>{this.var(V,(0,e._)`${H}[${re}]`),A(V)})}return this._for(new L("of",B,V,h),()=>A(V))}forIn(l,h,A,B=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(l,(0,e._)`Object.keys(${h})`,A);const V=this._scope.toName(l);return this._for(new L("in",B,V,h),()=>A(V))}endFor(){return this._endBlockNode(v)}label(l){return this._leafNode(new u(l))}break(l){return this._leafNode(new d(l))}return(l){const h=new ce;if(this._blockNode(h),this.code(l),h.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ce)}try(l,h,A){if(!h&&!A)throw new Error('CodeGen: "try" without "catch" and "finally"');const B=new me;if(this._blockNode(B),this.code(l),h){const V=this.name("e");this._currNode=B.catch=new q(V),h(V)}return A&&(this._currNode=B.finally=new ee,this.code(A)),this._endBlockNode(q,ee)}throw(l){return this._leafNode(new p(l))}block(l,h){return this._blockStarts.push(this._nodes.length),l&&this.code(l).endBlock(h),this}endBlock(l){const h=this._blockStarts.pop();if(h===void 0)throw new Error("CodeGen: not in self-balancing block");const A=this._nodes.length-h;if(A<0||l!==void 0&&A!==l)throw new Error(`CodeGen: wrong number of nodes: ${A} vs ${l} expected`);return this._nodes.length=h,this}func(l,h=e.nil,A,B){return this._blockNode(new ne(l,h,A)),B&&this.code(B).endFunc(),this}endFunc(){return this._endBlockNode(ne)}optimize(l=1){for(;l-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(l){return this._currNode.nodes.push(l),this}_blockNode(l){this._currNode.nodes.push(l),this._nodes.push(l)}_endBlockNode(l,h){const A=this._currNode;if(A instanceof l||h&&A instanceof h)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${h?`${l.kind}/${h.kind}`:l.kind}"`)}_elseNode(l){const h=this._currNode;if(!(h instanceof _))throw new Error('CodeGen: "else" without "if"');return this._currNode=h.else=l,this}get _root(){return this._nodes[0]}get _currNode(){const l=this._nodes;return l[l.length-1]}set _currNode(l){const h=this._nodes;h[h.length-1]=l}}t.CodeGen=oe;function ie(m,l){for(const h in l)m[h]=(m[h]||0)+(l[h]||0);return m}function ae(m,l){return l instanceof e._CodeOrName?ie(m,l.names):m}function ue(m,l,h){if(m instanceof e.Name)return A(m);if(!B(m))return m;return new e._Code(m._items.reduce((V,H)=>(H instanceof e.Name&&(H=A(H)),H instanceof e._Code?V.push(...H._items):V.push(H),V),[]));function A(V){const H=h[V.str];return H===void 0||l[V.str]!==1?V:(delete l[V.str],H)}function B(V){return V instanceof e._Code&&V._items.some(H=>H instanceof e.Name&&l[H.str]===1&&h[H.str]!==void 0)}}function $e(m,l){for(const h in l)m[h]=(m[h]||0)-(l[h]||0)}function be(m){return typeof m=="boolean"||typeof m=="number"||m===null?!m:(0,e._)`!${w(m)}`}t.not=be;const Fe=f(t.operators.AND);function Ye(...m){return m.reduce(Fe)}t.and=Ye;const I=f(t.operators.OR);function b(...m){return m.reduce(I)}t.or=b;function f(m){return(l,h)=>l===e.nil?h:h===e.nil?l:(0,e._)`${w(l)} ${m} ${w(h)}`}function w(m){return m instanceof e.Name?m:(0,e._)`(${m})`}})(Ve);var he={};Object.defineProperty(he,"__esModule",{value:!0});he.checkStrictMode=he.getErrorPath=he.Type=he.useFunc=he.setEvaluated=he.evaluatedPropsToName=he.mergeEvaluated=he.eachItem=he.unescapeJsonPointer=he.escapeJsonPointer=he.escapeFragment=he.unescapeFragment=he.schemaRefOrVal=he.schemaHasRulesButRef=he.schemaHasRules=he.checkUnknownRules=he.alwaysValidSchema=he.toHash=void 0;const tt=Ve,t0=Vs;function r0(t){const e={};for(const r of t)e[r]=!0;return e}he.toHash=r0;function n0(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(xp(t,e),!Gp(e,t.self.RULES.all))}he.alwaysValidSchema=n0;function xp(t,e=t.schema){const{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;const s=n.RULES.keywords;for(const o in e)s[o]||Kp(t,`unknown keyword: "${o}"`)}he.checkUnknownRules=xp;function Gp(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(e[r])return!0;return!1}he.schemaHasRules=Gp;function s0(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}he.schemaHasRulesButRef=s0;function o0({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,tt._)`${r}`}return(0,tt._)`${t}${e}${(0,tt.getProperty)(n)}`}he.schemaRefOrVal=o0;function i0(t){return Vp(decodeURIComponent(t))}he.unescapeFragment=i0;function a0(t){return encodeURIComponent(Hl(t))}he.escapeFragment=a0;function Hl(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}he.escapeJsonPointer=Hl;function Vp(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}he.unescapeJsonPointer=Vp;function l0(t,e){if(Array.isArray(t))for(const r of t)e(r);else e(t)}he.eachItem=l0;function Vd({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,o,i,a)=>{const c=i===void 0?o:i instanceof tt.Name?(o instanceof tt.Name?t(s,o,i):e(s,o,i),i):o instanceof tt.Name?(e(s,i,o),o):r(o,i);return a===tt.Name&&!(c instanceof tt.Name)?n(s,c):c}}he.mergeEvaluated={props:Vd({mergeNames:(t,e,r)=>t.if((0,tt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,tt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,tt._)`${r} || {}`).code((0,tt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,tt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,tt._)`${r} || {}`),Kl(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Hp}),items:Vd({mergeNames:(t,e,r)=>t.if((0,tt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,tt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,tt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,tt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Hp(t,e){if(e===!0)return t.var("props",!0);const r=t.var("props",(0,tt._)`{}`);return e!==void 0&&Kl(t,r,e),r}he.evaluatedPropsToName=Hp;function Kl(t,e,r){Object.keys(r).forEach(n=>t.assign((0,tt._)`${e}${(0,tt.getProperty)(n)}`,!0))}he.setEvaluated=Kl;const Hd={};function c0(t,e){return t.scopeValue("func",{ref:e,code:Hd[e.code]||(Hd[e.code]=new t0._Code(e.code))})}he.useFunc=c0;var ol;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(ol||(he.Type=ol={}));function u0(t,e,r){if(t instanceof tt.Name){const n=e===ol.Num;return r?n?(0,tt._)`"[" + ${t} + "]"`:(0,tt._)`"['" + ${t} + "']"`:n?(0,tt._)`"/" + ${t}`:(0,tt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,tt.getProperty)(t).toString():"/"+Hl(t)}he.getErrorPath=u0;function Kp(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}he.checkStrictMode=Kp;var $r={};Object.defineProperty($r,"__esModule",{value:!0});const At=Ve,d0={data:new At.Name("data"),valCxt:new At.Name("valCxt"),instancePath:new At.Name("instancePath"),parentData:new At.Name("parentData"),parentDataProperty:new At.Name("parentDataProperty"),rootData:new At.Name("rootData"),dynamicAnchors:new At.Name("dynamicAnchors"),vErrors:new At.Name("vErrors"),errors:new At.Name("errors"),this:new At.Name("this"),self:new At.Name("self"),scope:new At.Name("scope"),json:new At.Name("json"),jsonPos:new At.Name("jsonPos"),jsonLen:new At.Name("jsonLen"),jsonPart:new At.Name("jsonPart")};$r.default=d0;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=Ve,r=he,n=$r;t.keywordError={message:({keyword:y})=>(0,e.str)`must pass "${y}" keyword validation`},t.keyword$DataError={message:({keyword:y,schemaType:_})=>_?(0,e.str)`"${y}" keyword must be ${_} ($data)`:(0,e.str)`"${y}" keyword is invalid ($data)`};function s(y,_=t.keywordError,v,C){const{it:D}=y,{gen:L,compositeRule:ne,allErrors:ce}=D,me=p(y,_,v);C??(ne||ce)?c(L,me):u(D,(0,e._)`[${me}]`)}t.reportError=s;function o(y,_=t.keywordError,v){const{it:C}=y,{gen:D,compositeRule:L,allErrors:ne}=C,ce=p(y,_,v);c(D,ce),L||ne||u(C,n.default.vErrors)}t.reportExtraError=o;function i(y,_){y.assign(n.default.errors,_),y.if((0,e._)`${n.default.vErrors} !== null`,()=>y.if(_,()=>y.assign((0,e._)`${n.default.vErrors}.length`,_),()=>y.assign(n.default.vErrors,null)))}t.resetErrorsCount=i;function a({gen:y,keyword:_,schemaValue:v,data:C,errsCount:D,it:L}){if(D===void 0)throw new Error("ajv implementation error");const ne=y.name("err");y.forRange("i",D,n.default.errors,ce=>{y.const(ne,(0,e._)`${n.default.vErrors}[${ce}]`),y.if((0,e._)`${ne}.instancePath === undefined`,()=>y.assign((0,e._)`${ne}.instancePath`,(0,e.strConcat)(n.default.instancePath,L.errorPath))),y.assign((0,e._)`${ne}.schemaPath`,(0,e.str)`${L.errSchemaPath}/${_}`),L.opts.verbose&&(y.assign((0,e._)`${ne}.schema`,v),y.assign((0,e._)`${ne}.data`,C))})}t.extendErrors=a;function c(y,_){const v=y.const("err",_);y.if((0,e._)`${n.default.vErrors} === null`,()=>y.assign(n.default.vErrors,(0,e._)`[${v}]`),(0,e._)`${n.default.vErrors}.push(${v})`),y.code((0,e._)`${n.default.errors}++`)}function u(y,_){const{gen:v,validateName:C,schemaEnv:D}=y;D.$async?v.throw((0,e._)`new ${y.ValidationError}(${_})`):(v.assign((0,e._)`${C}.errors`,_),v.return(!1))}const d={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function p(y,_,v){const{createErrors:C}=y.it;return C===!1?(0,e._)`{}`:N(y,_,v)}function N(y,_,v={}){const{gen:C,it:D}=y,L=[$(D,v),g(y,v)];return R(y,_,L),C.object(...L)}function $({errorPath:y},{instancePath:_}){const v=_?(0,e.str)`${y}${(0,r.getErrorPath)(_,r.Type.Str)}`:y;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,v)]}function g({keyword:y,it:{errSchemaPath:_}},{schemaPath:v,parentSchema:C}){let D=C?_:(0,e.str)`${_}/${y}`;return v&&(D=(0,e.str)`${D}${(0,r.getErrorPath)(v,r.Type.Str)}`),[d.schemaPath,D]}function R(y,{params:_,message:v},C){const{keyword:D,data:L,schemaValue:ne,it:ce}=y,{opts:me,propertyName:q,topSchemaRef:ee,schemaPath:oe}=ce;C.push([d.keyword,D],[d.params,typeof _=="function"?_(y):_||(0,e._)`{}`]),me.messages&&C.push([d.message,typeof v=="function"?v(y):v]),me.verbose&&C.push([d.schema,ne],[d.parentSchema,(0,e._)`${ee}${oe}`],[n.default.data,L]),q&&C.push([d.propertyName,q])}})(to);Object.defineProperty(es,"__esModule",{value:!0});es.boolOrEmptySchema=es.topBoolOrEmptySchema=void 0;const f0=to,h0=Ve,p0=$r,_0={message:"boolean schema is false"};function m0(t){const{gen:e,schema:r,validateName:n}=t;r===!1?qp(t,!1):typeof r=="object"&&r.$async===!0?e.return(p0.default.data):(e.assign((0,h0._)`${n}.errors`,null),e.return(!0))}es.topBoolOrEmptySchema=m0;function y0(t,e){const{gen:r,schema:n}=t;n===!1?(r.var(e,!1),qp(t)):r.var(e,!0)}es.boolOrEmptySchema=y0;function qp(t,e){const{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,f0.reportError)(s,_0,void 0,e)}var mt={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.getRules=bn.isJSONType=void 0;const E0=["string","number","integer","boolean","null","object","array"],g0=new Set(E0);function O0(t){return typeof t=="string"&&g0.has(t)}bn.isJSONType=O0;function v0(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}bn.getRules=v0;var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.shouldUseRule=Pr.shouldUseGroup=Pr.schemaHasRulesForType=void 0;function R0({schema:t,self:e},r){const n=e.RULES.types[r];return n&&n!==!0&&Wp(t,n)}Pr.schemaHasRulesForType=R0;function Wp(t,e){return e.rules.some(r=>Jp(t,r))}Pr.shouldUseGroup=Wp;function Jp(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Pr.shouldUseRule=Jp;Object.defineProperty(mt,"__esModule",{value:!0});mt.reportTypeError=mt.checkDataTypes=mt.checkDataType=mt.coerceAndCheckDataType=mt.getJSONTypes=mt.getSchemaTypes=mt.DataType=void 0;const $0=bn,w0=Pr,N0=to,Me=Ve,zp=he;var zn;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(zn||(mt.DataType=zn={}));function b0(t){const e=Qp(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}mt.getSchemaTypes=b0;function Qp(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every($0.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}mt.getJSONTypes=Qp;function A0(t,e){const{gen:r,data:n,opts:s}=t,o=T0(e,s.coerceTypes),i=e.length>0&&!(o.length===0&&e.length===1&&(0,w0.schemaHasRulesForType)(t,e[0]));if(i){const a=ql(e,n,s.strictNumbers,zn.Wrong);r.if(a,()=>{o.length?I0(t,e,o):Wl(t)})}return i}mt.coerceAndCheckDataType=A0;const Yp=new Set(["string","number","integer","boolean","null"]);function T0(t,e){return e?t.filter(r=>Yp.has(r)||e==="array"&&r==="array"):[]}function I0(t,e,r){const{gen:n,data:s,opts:o}=t,i=n.let("dataType",(0,Me._)`typeof ${s}`),a=n.let("coerced",(0,Me._)`undefined`);o.coerceTypes==="array"&&n.if((0,Me._)`${i} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,Me._)`${s}[0]`).assign(i,(0,Me._)`typeof ${s}`).if(ql(e,s,o.strictNumbers),()=>n.assign(a,s))),n.if((0,Me._)`${a} !== undefined`);for(const u of r)(Yp.has(u)||u==="array"&&o.coerceTypes==="array")&&c(u);n.else(),Wl(t),n.endIf(),n.if((0,Me._)`${a} !== undefined`,()=>{n.assign(s,a),S0(t,a)});function c(u){switch(u){case"string":n.elseIf((0,Me._)`${i} == "number" || ${i} == "boolean"`).assign(a,(0,Me._)`"" + ${s}`).elseIf((0,Me._)`${s} === null`).assign(a,(0,Me._)`""`);return;case"number":n.elseIf((0,Me._)`${i} == "boolean" || ${s} === null
              || (${i} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,Me._)`+${s}`);return;case"integer":n.elseIf((0,Me._)`${i} === "boolean" || ${s} === null
              || (${i} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,Me._)`+${s}`);return;case"boolean":n.elseIf((0,Me._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,Me._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,Me._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,Me._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${s} === null`).assign(a,(0,Me._)`[${s}]`)}}}function S0({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,Me._)`${e} !== undefined`,()=>t.assign((0,Me._)`${e}[${r}]`,n))}function il(t,e,r,n=zn.Correct){const s=n===zn.Correct?Me.operators.EQ:Me.operators.NEQ;let o;switch(t){case"null":return(0,Me._)`${e} ${s} null`;case"array":o=(0,Me._)`Array.isArray(${e})`;break;case"object":o=(0,Me._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=i((0,Me._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=i();break;default:return(0,Me._)`typeof ${e} ${s} ${t}`}return n===zn.Correct?o:(0,Me.not)(o);function i(a=Me.nil){return(0,Me.and)((0,Me._)`typeof ${e} == "number"`,a,r?(0,Me._)`isFinite(${e})`:Me.nil)}}mt.checkDataType=il;function ql(t,e,r,n){if(t.length===1)return il(t[0],e,r,n);let s;const o=(0,zp.toHash)(t);if(o.array&&o.object){const i=(0,Me._)`typeof ${e} != "object"`;s=o.null?i:(0,Me._)`!${e} || ${i}`,delete o.null,delete o.array,delete o.object}else s=Me.nil;o.number&&delete o.integer;for(const i in o)s=(0,Me.and)(s,il(i,e,r,n));return s}mt.checkDataTypes=ql;const P0={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,Me._)`{type: ${t}}`:(0,Me._)`{type: ${e}}`};function Wl(t){const e=C0(t);(0,N0.reportError)(e,P0)}mt.reportTypeError=Wl;function C0(t){const{gen:e,data:r,schema:n}=t,s=(0,zp.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.assignDefaults=void 0;const xn=Ve,M0=he;function D0(t,e){const{properties:r,items:n}=t.schema;if(e==="object"&&r)for(const s in r)Kd(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,o)=>Kd(t,o,s.default))}Ki.assignDefaults=D0;function Kd(t,e,r){const{gen:n,compositeRule:s,data:o,opts:i}=t;if(r===void 0)return;const a=(0,xn._)`${o}${(0,xn.getProperty)(e)}`;if(s){(0,M0.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,xn._)`${a} === undefined`;i.useDefaults==="empty"&&(c=(0,xn._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,xn._)`${a} = ${(0,xn.stringify)(r)}`)}var gr={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.validateUnion=Ue.validateArray=Ue.usePattern=Ue.callValidateCode=Ue.schemaProperties=Ue.allSchemaProperties=Ue.noPropertyInData=Ue.propertyInData=Ue.isOwnProperty=Ue.hasPropFunc=Ue.reportMissingProp=Ue.checkMissingProp=Ue.checkReportMissingProp=void 0;const at=Ve,Jl=he,xr=$r,j0=he;function L0(t,e){const{gen:r,data:n,it:s}=t;r.if(Ql(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,at._)`${e}`},!0),t.error()})}Ue.checkReportMissingProp=L0;function F0({gen:t,data:e,it:{opts:r}},n,s){return(0,at.or)(...n.map(o=>(0,at.and)(Ql(t,e,o,r.ownProperties),(0,at._)`${s} = ${o}`)))}Ue.checkMissingProp=F0;function k0(t,e){t.setParams({missingProperty:e},!0),t.error()}Ue.reportMissingProp=k0;function Xp(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,at._)`Object.prototype.hasOwnProperty`})}Ue.hasPropFunc=Xp;function zl(t,e,r){return(0,at._)`${Xp(t)}.call(${e}, ${r})`}Ue.isOwnProperty=zl;function B0(t,e,r,n){const s=(0,at._)`${e}${(0,at.getProperty)(r)} !== undefined`;return n?(0,at._)`${s} && ${zl(t,e,r)}`:s}Ue.propertyInData=B0;function Ql(t,e,r,n){const s=(0,at._)`${e}${(0,at.getProperty)(r)} === undefined`;return n?(0,at.or)(s,(0,at.not)(zl(t,e,r))):s}Ue.noPropertyInData=Ql;function Zp(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}Ue.allSchemaProperties=Zp;function U0(t,e){return Zp(e).filter(r=>!(0,Jl.alwaysValidSchema)(t,e[r]))}Ue.schemaProperties=U0;function x0({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:o},it:i},a,c,u){const d=u?(0,at._)`${t}, ${e}, ${n}${s}`:e,p=[[xr.default.instancePath,(0,at.strConcat)(xr.default.instancePath,o)],[xr.default.parentData,i.parentData],[xr.default.parentDataProperty,i.parentDataProperty],[xr.default.rootData,xr.default.rootData]];i.opts.dynamicRef&&p.push([xr.default.dynamicAnchors,xr.default.dynamicAnchors]);const N=(0,at._)`${d}, ${r.object(...p)}`;return c!==at.nil?(0,at._)`${a}.call(${c}, ${N})`:(0,at._)`${a}(${N})`}Ue.callValidateCode=x0;const G0=(0,at._)`new RegExp`;function V0({gen:t,it:{opts:e}},r){const n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,o=s(r,n);return t.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,at._)`${s.code==="new RegExp"?G0:(0,j0.useFunc)(t,s)}(${r}, ${n})`})}Ue.usePattern=V0;function H0(t){const{gen:e,data:r,keyword:n,it:s}=t,o=e.name("valid");if(s.allErrors){const a=e.let("valid",!0);return i(()=>e.assign(a,!1)),a}return e.var(o,!0),i(()=>e.break()),o;function i(a){const c=e.const("len",(0,at._)`${r}.length`);e.forRange("i",0,c,u=>{t.subschema({keyword:n,dataProp:u,dataPropType:Jl.Type.Num},o),e.if((0,at.not)(o),a)})}}Ue.validateArray=H0;function K0(t){const{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,Jl.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const i=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,u)=>{const d=t.subschema({keyword:n,schemaProp:u,compositeRule:!0},a);e.assign(i,(0,at._)`${i} || ${a}`),t.mergeValidEvaluated(d,a)||e.if((0,at.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}Ue.validateUnion=K0;Object.defineProperty(gr,"__esModule",{value:!0});gr.validateKeywordUsage=gr.validSchemaType=gr.funcKeywordCode=gr.macroKeywordCode=void 0;const St=Ve,_n=$r,q0=Ue,W0=to;function J0(t,e){const{gen:r,keyword:n,schema:s,parentSchema:o,it:i}=t,a=e.macro.call(i.self,s,o,i),c=e_(r,n,a);i.opts.validateSchema!==!1&&i.self.validateSchema(a,!0);const u=r.name("valid");t.subschema({schema:a,schemaPath:St.nil,errSchemaPath:`${i.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}gr.macroKeywordCode=J0;function z0(t,e){var r;const{gen:n,keyword:s,schema:o,parentSchema:i,$data:a,it:c}=t;Y0(c,e);const u=!a&&e.compile?e.compile.call(c.self,o,i,c):e.validate,d=e_(n,s,u),p=n.let("valid");t.block$data(p,N),t.ok((r=e.valid)!==null&&r!==void 0?r:p);function N(){if(e.errors===!1)R(),e.modifying&&qd(t),y(()=>t.error());else{const _=e.async?$():g();e.modifying&&qd(t),y(()=>Q0(t,_))}}function $(){const _=n.let("ruleErrs",null);return n.try(()=>R((0,St._)`await `),v=>n.assign(p,!1).if((0,St._)`${v} instanceof ${c.ValidationError}`,()=>n.assign(_,(0,St._)`${v}.errors`),()=>n.throw(v))),_}function g(){const _=(0,St._)`${d}.errors`;return n.assign(_,null),R(St.nil),_}function R(_=e.async?(0,St._)`await `:St.nil){const v=c.opts.passContext?_n.default.this:_n.default.self,C=!("compile"in e&&!a||e.schema===!1);n.assign(p,(0,St._)`${_}${(0,q0.callValidateCode)(t,d,v,C)}`,e.modifying)}function y(_){var v;n.if((0,St.not)((v=e.valid)!==null&&v!==void 0?v:p),_)}}gr.funcKeywordCode=z0;function qd(t){const{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,St._)`${n.parentData}[${n.parentDataProperty}]`))}function Q0(t,e){const{gen:r}=t;r.if((0,St._)`Array.isArray(${e})`,()=>{r.assign(_n.default.vErrors,(0,St._)`${_n.default.vErrors} === null ? ${e} : ${_n.default.vErrors}.concat(${e})`).assign(_n.default.errors,(0,St._)`${_n.default.vErrors}.length`),(0,W0.extendErrors)(t)},()=>t.error())}function Y0({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function e_(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,St.stringify)(r)})}function X0(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}gr.validSchemaType=X0;function Z0({schema:t,opts:e,self:r,errSchemaPath:n},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const i=s.dependencies;if(i!=null&&i.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${o}: ${i.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[o])){const c=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}gr.validateKeywordUsage=Z0;var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.extendSubschemaMode=tn.extendSubschemaData=tn.getSubschema=void 0;const yr=Ve,t_=he;function eN(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:o,topSchemaRef:i}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,yr._)`${t.schemaPath}${(0,yr.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,yr._)`${t.schemaPath}${(0,yr.getProperty)(e)}${(0,yr.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,t_.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||o===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:i,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}tn.getSubschema=eN;function tN(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:o,propertyName:i}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=e;if(r!==void 0){const{errorPath:u,dataPathArr:d,opts:p}=e,N=a.let("data",(0,yr._)`${e.data}${(0,yr.getProperty)(r)}`,!0);c(N),t.errorPath=(0,yr.str)`${u}${(0,t_.getErrorPath)(r,n,p.jsPropertySyntax)}`,t.parentDataProperty=(0,yr._)`${r}`,t.dataPathArr=[...d,t.parentDataProperty]}if(s!==void 0){const u=s instanceof yr.Name?s:a.let("data",s,!0);c(u),i!==void 0&&(t.propertyName=i)}o&&(t.dataTypes=o);function c(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}tn.extendSubschemaData=tN;function rN(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:o}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=r}tn.extendSubschemaMode=rN;var wt={},qi=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var i=o[s];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r},r_={exports:{}},Yr=r_.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};zo(e,n,s,t,"",t)};Yr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Yr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Yr.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Yr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function zo(t,e,r,n,s,o,i,a,c,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,o,i,a,c,u);for(var d in n){var p=n[d];if(Array.isArray(p)){if(d in Yr.arrayKeywords)for(var N=0;N<p.length;N++)zo(t,e,r,p[N],s+"/"+d+"/"+N,o,s,d,n,N)}else if(d in Yr.propsKeywords){if(p&&typeof p=="object")for(var $ in p)zo(t,e,r,p[$],s+"/"+d+"/"+nN($),o,s,d,n,$)}else(d in Yr.keywords||t.allKeys&&!(d in Yr.skipKeywords))&&zo(t,e,r,p,s+"/"+d,o,s,d,n)}r(n,s,o,i,a,c,u)}}function nN(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var sN=r_.exports;Object.defineProperty(wt,"__esModule",{value:!0});wt.getSchemaRefs=wt.resolveUrl=wt.normalizeId=wt._getFullPath=wt.getFullPath=wt.inlineRef=void 0;const oN=he,iN=qi,aN=sN,lN=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function cN(t,e=!0){return typeof t=="boolean"?!0:e===!0?!al(t):e?n_(t)<=e:!1}wt.inlineRef=cN;const uN=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function al(t){for(const e in t){if(uN.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(al)||typeof r=="object"&&al(r))return!0}return!1}function n_(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!lN.has(r)&&(typeof t[r]=="object"&&(0,oN.eachItem)(t[r],n=>e+=n_(n)),e===1/0))return 1/0}return e}function s_(t,e="",r){r!==!1&&(e=Qn(e));const n=t.parse(e);return o_(t,n)}wt.getFullPath=s_;function o_(t,e){return t.serialize(e).split("#")[0]+"#"}wt._getFullPath=o_;const dN=/#\/?$/;function Qn(t){return t?t.replace(dN,""):""}wt.normalizeId=Qn;function fN(t,e,r){return r=Qn(r),t.resolve(e,r)}wt.resolveUrl=fN;const hN=/^[a-z_][-a-z0-9._]*$/i;function pN(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=Qn(t[r]||e),o={"":s},i=s_(n,s,!1),a={},c=new Set;return aN(t,{allKeys:!0},(p,N,$,g)=>{if(g===void 0)return;const R=i+N;let y=o[g];typeof p[r]=="string"&&(y=_.call(this,p[r])),v.call(this,p.$anchor),v.call(this,p.$dynamicAnchor),o[N]=y;function _(C){const D=this.opts.uriResolver.resolve;if(C=Qn(y?D(y,C):C),c.has(C))throw d(C);c.add(C);let L=this.refs[C];return typeof L=="string"&&(L=this.refs[L]),typeof L=="object"?u(p,L.schema,C):C!==Qn(R)&&(C[0]==="#"?(u(p,a[C],C),a[C]=p):this.refs[C]=R),C}function v(C){if(typeof C=="string"){if(!hN.test(C))throw new Error(`invalid anchor "${C}"`);_.call(this,`#${C}`)}}}),a;function u(p,N,$){if(N!==void 0&&!iN(p,N))throw d($)}function d(p){return new Error(`reference "${p}" resolves to more than one schema`)}}wt.getSchemaRefs=pN;Object.defineProperty(hr,"__esModule",{value:!0});hr.getData=hr.KeywordCxt=hr.validateFunctionCode=void 0;const i_=es,Wd=mt,Yl=Pr,ci=mt,_N=Ki,Ts=gr,Na=tn,Oe=Ve,Ie=$r,mN=wt,Cr=he,Os=to;function yN(t){if(c_(t)&&(u_(t),l_(t))){ON(t);return}a_(t,()=>(0,i_.topBoolOrEmptySchema)(t))}hr.validateFunctionCode=yN;function a_({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},o){s.code.es5?t.func(e,(0,Oe._)`${Ie.default.data}, ${Ie.default.valCxt}`,n.$async,()=>{t.code((0,Oe._)`"use strict"; ${Jd(r,s)}`),gN(t,s),t.code(o)}):t.func(e,(0,Oe._)`${Ie.default.data}, ${EN(s)}`,n.$async,()=>t.code(Jd(r,s)).code(o))}function EN(t){return(0,Oe._)`{${Ie.default.instancePath}="", ${Ie.default.parentData}, ${Ie.default.parentDataProperty}, ${Ie.default.rootData}=${Ie.default.data}${t.dynamicRef?(0,Oe._)`, ${Ie.default.dynamicAnchors}={}`:Oe.nil}}={}`}function gN(t,e){t.if(Ie.default.valCxt,()=>{t.var(Ie.default.instancePath,(0,Oe._)`${Ie.default.valCxt}.${Ie.default.instancePath}`),t.var(Ie.default.parentData,(0,Oe._)`${Ie.default.valCxt}.${Ie.default.parentData}`),t.var(Ie.default.parentDataProperty,(0,Oe._)`${Ie.default.valCxt}.${Ie.default.parentDataProperty}`),t.var(Ie.default.rootData,(0,Oe._)`${Ie.default.valCxt}.${Ie.default.rootData}`),e.dynamicRef&&t.var(Ie.default.dynamicAnchors,(0,Oe._)`${Ie.default.valCxt}.${Ie.default.dynamicAnchors}`)},()=>{t.var(Ie.default.instancePath,(0,Oe._)`""`),t.var(Ie.default.parentData,(0,Oe._)`undefined`),t.var(Ie.default.parentDataProperty,(0,Oe._)`undefined`),t.var(Ie.default.rootData,Ie.default.data),e.dynamicRef&&t.var(Ie.default.dynamicAnchors,(0,Oe._)`{}`)})}function ON(t){const{schema:e,opts:r,gen:n}=t;a_(t,()=>{r.$comment&&e.$comment&&f_(t),NN(t),n.let(Ie.default.vErrors,null),n.let(Ie.default.errors,0),r.unevaluated&&vN(t),d_(t),TN(t)})}function vN(t){const{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,Oe._)`${r}.evaluated`),e.if((0,Oe._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,Oe._)`${t.evaluated}.props`,(0,Oe._)`undefined`)),e.if((0,Oe._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,Oe._)`${t.evaluated}.items`,(0,Oe._)`undefined`))}function Jd(t,e){const r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,Oe._)`/*# sourceURL=${r} */`:Oe.nil}function RN(t,e){if(c_(t)&&(u_(t),l_(t))){$N(t,e);return}(0,i_.boolOrEmptySchema)(t,e)}function l_({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const r in t)if(e.RULES.all[r])return!0;return!1}function c_(t){return typeof t.schema!="boolean"}function $N(t,e){const{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&f_(t),bN(t),AN(t);const o=n.const("_errs",Ie.default.errors);d_(t,o),n.var(e,(0,Oe._)`${o} === ${Ie.default.errors}`)}function u_(t){(0,Cr.checkUnknownRules)(t),wN(t)}function d_(t,e){if(t.opts.jtd)return zd(t,[],!1,e);const r=(0,Wd.getSchemaTypes)(t.schema),n=(0,Wd.coerceAndCheckDataType)(t,r);zd(t,r,!n,e)}function wN(t){const{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Cr.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function NN(t){const{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Cr.checkStrictMode)(t,"default is ignored in the schema root")}function bN(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,mN.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function AN(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function f_({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){const o=r.$comment;if(s.$comment===!0)t.code((0,Oe._)`${Ie.default.self}.logger.log(${o})`);else if(typeof s.$comment=="function"){const i=(0,Oe.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,Oe._)`${Ie.default.self}.opts.$comment(${o}, ${i}, ${a}.schema)`)}}function TN(t){const{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:o}=t;r.$async?e.if((0,Oe._)`${Ie.default.errors} === 0`,()=>e.return(Ie.default.data),()=>e.throw((0,Oe._)`new ${s}(${Ie.default.vErrors})`)):(e.assign((0,Oe._)`${n}.errors`,Ie.default.vErrors),o.unevaluated&&IN(t),e.return((0,Oe._)`${Ie.default.errors} === 0`))}function IN({gen:t,evaluated:e,props:r,items:n}){r instanceof Oe.Name&&t.assign((0,Oe._)`${e}.props`,r),n instanceof Oe.Name&&t.assign((0,Oe._)`${e}.items`,n)}function zd(t,e,r,n){const{gen:s,schema:o,data:i,allErrors:a,opts:c,self:u}=t,{RULES:d}=u;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,Cr.schemaHasRulesButRef)(o,d))){s.block(()=>__(t,"$ref",d.all.$ref.definition));return}c.jtd||SN(t,e),s.block(()=>{for(const N of d.rules)p(N);p(d.post)});function p(N){(0,Yl.shouldUseGroup)(o,N)&&(N.type?(s.if((0,ci.checkDataType)(N.type,i,c.strictNumbers)),Qd(t,N),e.length===1&&e[0]===N.type&&r&&(s.else(),(0,ci.reportTypeError)(t)),s.endIf()):Qd(t,N),a||s.if((0,Oe._)`${Ie.default.errors} === ${n||0}`))}}function Qd(t,e){const{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,_N.assignDefaults)(t,e.type),r.block(()=>{for(const o of e.rules)(0,Yl.shouldUseRule)(n,o)&&__(t,o.keyword,o.definition,e.type)})}function SN(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(PN(t,e),t.opts.allowUnionTypes||CN(t,e),MN(t,t.dataTypes))}function PN(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{h_(t.dataTypes,r)||Xl(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),jN(t,e)}}function CN(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Xl(t,"use allowUnionTypes to allow union type keyword")}function MN(t,e){const r=t.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,Yl.shouldUseRule)(t.schema,s)){const{type:o}=s.definition;o.length&&!o.some(i=>DN(e,i))&&Xl(t,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function DN(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function h_(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function jN(t,e){const r=[];for(const n of t.dataTypes)h_(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function Xl(t,e){const r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Cr.checkStrictMode)(t,e,t.opts.strictTypes)}let p_=class{constructor(e,r,n){if((0,Ts.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Cr.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",m_(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Ts.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Ie.default.errors))}result(e,r,n){this.failResult((0,Oe.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,Oe.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:r}=this;this.fail((0,Oe._)`${r} !== undefined && (${(0,Oe.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Os.reportExtraError:Os.reportError)(this,this.def.error,r)}$dataError(){(0,Os.reportError)(this,this.def.$dataError||Os.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Os.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=Oe.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=Oe.nil,r=Oe.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:o,def:i}=this;n.if((0,Oe.or)((0,Oe._)`${s} === undefined`,r)),e!==Oe.nil&&n.assign(e,!0),(o.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==Oe.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:r,schemaType:n,def:s,it:o}=this;return(0,Oe.or)(i(),a());function i(){if(n.length){if(!(r instanceof Oe.Name))throw new Error("ajv implementation error");const c=Array.isArray(n)?n:[n];return(0,Oe._)`${(0,ci.checkDataTypes)(c,r,o.opts.strictNumbers,ci.DataType.Wrong)}`}return Oe.nil}function a(){if(s.validateSchema){const c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,Oe._)`!${c}(${r})`}return Oe.nil}}subschema(e,r){const n=(0,Na.getSubschema)(this.it,e);(0,Na.extendSubschemaData)(n,this.it,e),(0,Na.extendSubschemaMode)(n,e);const s={...this.it,...n,items:void 0,props:void 0};return RN(s,r),s}mergeEvaluated(e,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Cr.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Cr.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,Oe.Name)),!0}};hr.KeywordCxt=p_;function __(t,e,r,n){const s=new p_(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Ts.funcKeywordCode)(s,r):"macro"in r?(0,Ts.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Ts.funcKeywordCode)(s,r)}const LN=/^\/(?:[^~]|~0|~1)*$/,FN=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function m_(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,o;if(t==="")return Ie.default.rootData;if(t[0]==="/"){if(!LN.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,o=Ie.default.rootData}else{const u=FN.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);const d=+u[1];if(s=u[2],s==="#"){if(d>=e)throw new Error(c("property/index",d));return n[e-d]}if(d>e)throw new Error(c("data",d));if(o=r[e-d],!s)return o}let i=o;const a=s.split("/");for(const u of a)u&&(o=(0,Oe._)`${o}${(0,Oe.getProperty)((0,Cr.unescapeJsonPointer)(u))}`,i=(0,Oe._)`${i} && ${o}`);return i;function c(u,d){return`Cannot access ${u} ${d} levels up, current level is ${e}`}}hr.getData=m_;var ro={};Object.defineProperty(ro,"__esModule",{value:!0});let kN=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};ro.default=kN;var no={};Object.defineProperty(no,"__esModule",{value:!0});const ba=wt;let BN=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,ba.resolveUrl)(e,r,n),this.missingSchema=(0,ba.normalizeId)((0,ba.getFullPath)(e,this.missingRef))}};no.default=BN;var kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.resolveSchema=kt.getCompilingSchema=kt.resolveRef=kt.compileSchema=kt.SchemaEnv=void 0;const ar=Ve,UN=ro,hn=$r,dr=wt,Yd=he,xN=hr;let Wi=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,dr.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}};kt.SchemaEnv=Wi;function Zl(t){const e=y_.call(this,t);if(e)return e;const r=(0,dr.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,i=new ar.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o});let a;t.$async&&(a=i.scopeValue("Error",{ref:UN.default,code:(0,ar._)`require("ajv/dist/runtime/validation_error").default`}));const c=i.scopeName("validate");t.validateName=c;const u={gen:i,allErrors:this.opts.allErrors,data:hn.default.data,parentData:hn.default.parentData,parentDataProperty:hn.default.parentDataProperty,dataNames:[hn.default.data],dataPathArr:[ar.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ar.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ar.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ar._)`""`,opts:this.opts,self:this};let d;try{this._compilations.add(t),(0,xN.validateFunctionCode)(u),i.optimize(this.opts.code.optimize);const p=i.toString();d=`${i.scopeRefs(hn.default.scope)}return ${p}`,this.opts.code.process&&(d=this.opts.code.process(d,t));const $=new Function(`${hn.default.self}`,`${hn.default.scope}`,d)(this,this.scope.get());if(this.scope.value(c,{ref:$}),$.errors=null,$.schema=t.schema,$.schemaEnv=t,t.$async&&($.$async=!0),this.opts.code.source===!0&&($.source={validateName:c,validateCode:p,scopeValues:i._values}),this.opts.unevaluated){const{props:g,items:R}=u;$.evaluated={props:g instanceof ar.Name?void 0:g,items:R instanceof ar.Name?void 0:R,dynamicProps:g instanceof ar.Name,dynamicItems:R instanceof ar.Name},$.source&&($.source.evaluated=(0,ar.stringify)($.evaluated))}return t.validate=$,t}catch(p){throw delete t.validate,delete t.validateName,d&&this.logger.error("Error compiling schema, function code:",d),p}finally{this._compilations.delete(t)}}kt.compileSchema=Zl;function GN(t,e,r){var n;r=(0,dr.resolveUrl)(this.opts.uriResolver,e,r);const s=t.refs[r];if(s)return s;let o=KN.call(this,t,r);if(o===void 0){const i=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;i&&(o=new Wi({schema:i,schemaId:a,root:t,baseId:e}))}if(o!==void 0)return t.refs[r]=VN.call(this,o)}kt.resolveRef=GN;function VN(t){return(0,dr.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Zl.call(this,t)}function y_(t){for(const e of this._compilations)if(HN(e,t))return e}kt.getCompilingSchema=y_;function HN(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function KN(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Ji.call(this,t,e)}function Ji(t,e){const r=this.opts.uriResolver.parse(e),n=(0,dr._getFullPath)(this.opts.uriResolver,r);let s=(0,dr.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return Aa.call(this,r,t);const o=(0,dr.normalizeId)(n),i=this.refs[o]||this.schemas[o];if(typeof i=="string"){const a=Ji.call(this,t,i);return typeof(a==null?void 0:a.schema)!="object"?void 0:Aa.call(this,r,a)}if(typeof(i==null?void 0:i.schema)=="object"){if(i.validate||Zl.call(this,i),o===(0,dr.normalizeId)(e)){const{schema:a}=i,{schemaId:c}=this.opts,u=a[c];return u&&(s=(0,dr.resolveUrl)(this.opts.uriResolver,s,u)),new Wi({schema:a,schemaId:c,root:t,baseId:s})}return Aa.call(this,r,i)}}kt.resolveSchema=Ji;const qN=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Aa(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,Yd.unescapeFragment)(a)];if(c===void 0)return;r=c;const u=typeof r=="object"&&r[this.opts.schemaId];!qN.has(a)&&u&&(e=(0,dr.resolveUrl)(this.opts.uriResolver,e,u))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Yd.schemaHasRulesButRef)(r,this.RULES)){const a=(0,dr.resolveUrl)(this.opts.uriResolver,e,r.$ref);o=Ji.call(this,n,a)}const{schemaId:i}=this.opts;if(o=o||new Wi({schema:r,schemaId:i,root:n,baseId:e}),o.schema!==o.root.schema)return o}const WN="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",JN="Meta-schema for $data reference (JSON AnySchema extension proposal)",zN="object",QN=["$data"],YN={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},XN=!1,ZN={$id:WN,description:JN,type:zN,required:QN,properties:YN,additionalProperties:XN};var ec={},ll={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(t,e){(function(r,n){n(e)})(Kn,function(r){function n(){for(var M=arguments.length,T=Array(M),j=0;j<M;j++)T[j]=arguments[j];if(T.length>1){T[0]=T[0].slice(0,-1);for(var W=T.length-1,K=1;K<W;++K)T[K]=T[K].slice(1,-1);return T[W]=T[W].slice(1),T.join("")}else return T[0]}function s(M){return"(?:"+M+")"}function o(M){return M===void 0?"undefined":M===null?"null":Object.prototype.toString.call(M).split(" ").pop().split("]").shift().toLowerCase()}function i(M){return M.toUpperCase()}function a(M){return M!=null?M instanceof Array?M:typeof M.length!="number"||M.split||M.setInterval||M.call?[M]:Array.prototype.slice.call(M):[]}function c(M,T){var j=M;if(T)for(var W in T)j[W]=T[W];return j}function u(M){var T="[A-Za-z]",j="[0-9]",W=n(j,"[A-Fa-f]"),K=s(s("%[EFef]"+W+"%"+W+W+"%"+W+W)+"|"+s("%[89A-Fa-f]"+W+"%"+W+W)+"|"+s("%"+W+W)),ge="[\\:\\/\\?\\#\\[\\]\\@]",Re="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ke=n(ge,Re),Ze=M?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Pe=M?"[\\uE000-\\uF8FF]":"[]",Be=n(T,j,"[\\-\\.\\_\\~]",Ze);s(T+n(T,j,"[\\+\\-\\.]")+"*"),s(s(K+"|"+n(Be,Re,"[\\:]"))+"*");var Je=s(s("25[0-5]")+"|"+s("2[0-4]"+j)+"|"+s("1"+j+j)+"|"+s("0?[1-9]"+j)+"|0?0?"+j),ut=s(Je+"\\."+Je+"\\."+Je+"\\."+Je),Te=s(W+"{1,4}"),ot=s(s(Te+"\\:"+Te)+"|"+ut),ft=s(s(Te+"\\:")+"{6}"+ot),it=s("\\:\\:"+s(Te+"\\:")+"{5}"+ot),Et=s(s(Te)+"?\\:\\:"+s(Te+"\\:")+"{4}"+ot),Wt=s(s(s(Te+"\\:")+"{0,1}"+Te)+"?\\:\\:"+s(Te+"\\:")+"{3}"+ot),Jt=s(s(s(Te+"\\:")+"{0,2}"+Te)+"?\\:\\:"+s(Te+"\\:")+"{2}"+ot),Br=s(s(s(Te+"\\:")+"{0,3}"+Te)+"?\\:\\:"+Te+"\\:"+ot),br=s(s(s(Te+"\\:")+"{0,4}"+Te)+"?\\:\\:"+ot),Dt=s(s(s(Te+"\\:")+"{0,5}"+Te)+"?\\:\\:"+Te),gt=s(s(s(Te+"\\:")+"{0,6}"+Te)+"?\\:\\:"),Ar=s([ft,it,Et,Wt,Jt,Br,br,Dt,gt].join("|")),nr=s(s(Be+"|"+K)+"+");s("[vV]"+W+"+\\."+n(Be,Re,"[\\:]")+"+"),s(s(K+"|"+n(Be,Re))+"*");var ln=s(K+"|"+n(Be,Re,"[\\:\\@]"));return s(s(K+"|"+n(Be,Re,"[\\@]"))+"+"),s(s(ln+"|"+n("[\\/\\?]",Pe))+"*"),{NOT_SCHEME:new RegExp(n("[^]",T,j,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",Be,Re),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",Be,Re),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",Be,Re),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",Be,Re),"g"),NOT_QUERY:new RegExp(n("[^\\%]",Be,Re,"[\\:\\@\\/\\?]",Pe),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",Be,Re,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",Be,Re),"g"),UNRESERVED:new RegExp(Be,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",Be,Ke),"g"),PCT_ENCODED:new RegExp(K,"g"),IPV4ADDRESS:new RegExp("^("+ut+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ar+")"+s(s("\\%25|\\%(?!"+W+"{2})")+"("+nr+")")+"?\\]?$")}}var d=u(!1),p=u(!0),N=function(){function M(T,j){var W=[],K=!0,ge=!1,Re=void 0;try{for(var Ke=T[Symbol.iterator](),Ze;!(K=(Ze=Ke.next()).done)&&(W.push(Ze.value),!(j&&W.length===j));K=!0);}catch(Pe){ge=!0,Re=Pe}finally{try{!K&&Ke.return&&Ke.return()}finally{if(ge)throw Re}}return W}return function(T,j){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return M(T,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),$=function(M){if(Array.isArray(M)){for(var T=0,j=Array(M.length);T<M.length;T++)j[T]=M[T];return j}else return Array.from(M)},g=2147483647,R=36,y=1,_=26,v=38,C=700,D=72,L=128,ne="-",ce=/^xn--/,me=/[^\0-\x7E]/,q=/[\x2E\u3002\uFF0E\uFF61]/g,ee={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},oe=R-y,ie=Math.floor,ae=String.fromCharCode;function ue(M){throw new RangeError(ee[M])}function $e(M,T){for(var j=[],W=M.length;W--;)j[W]=T(M[W]);return j}function be(M,T){var j=M.split("@"),W="";j.length>1&&(W=j[0]+"@",M=j[1]),M=M.replace(q,".");var K=M.split("."),ge=$e(K,T).join(".");return W+ge}function Fe(M){for(var T=[],j=0,W=M.length;j<W;){var K=M.charCodeAt(j++);if(K>=55296&&K<=56319&&j<W){var ge=M.charCodeAt(j++);(ge&64512)==56320?T.push(((K&1023)<<10)+(ge&1023)+65536):(T.push(K),j--)}else T.push(K)}return T}var Ye=function(T){return String.fromCodePoint.apply(String,$(T))},I=function(T){return T-48<10?T-22:T-65<26?T-65:T-97<26?T-97:R},b=function(T,j){return T+22+75*(T<26)-((j!=0)<<5)},f=function(T,j,W){var K=0;for(T=W?ie(T/C):T>>1,T+=ie(T/j);T>oe*_>>1;K+=R)T=ie(T/oe);return ie(K+(oe+1)*T/(T+v))},w=function(T){var j=[],W=T.length,K=0,ge=L,Re=D,Ke=T.lastIndexOf(ne);Ke<0&&(Ke=0);for(var Ze=0;Ze<Ke;++Ze)T.charCodeAt(Ze)>=128&&ue("not-basic"),j.push(T.charCodeAt(Ze));for(var Pe=Ke>0?Ke+1:0;Pe<W;){for(var Be=K,Je=1,ut=R;;ut+=R){Pe>=W&&ue("invalid-input");var Te=I(T.charCodeAt(Pe++));(Te>=R||Te>ie((g-K)/Je))&&ue("overflow"),K+=Te*Je;var ot=ut<=Re?y:ut>=Re+_?_:ut-Re;if(Te<ot)break;var ft=R-ot;Je>ie(g/ft)&&ue("overflow"),Je*=ft}var it=j.length+1;Re=f(K-Be,it,Be==0),ie(K/it)>g-ge&&ue("overflow"),ge+=ie(K/it),K%=it,j.splice(K++,0,ge)}return String.fromCodePoint.apply(String,j)},m=function(T){var j=[];T=Fe(T);var W=T.length,K=L,ge=0,Re=D,Ke=!0,Ze=!1,Pe=void 0;try{for(var Be=T[Symbol.iterator](),Je;!(Ke=(Je=Be.next()).done);Ke=!0){var ut=Je.value;ut<128&&j.push(ae(ut))}}catch(cn){Ze=!0,Pe=cn}finally{try{!Ke&&Be.return&&Be.return()}finally{if(Ze)throw Pe}}var Te=j.length,ot=Te;for(Te&&j.push(ne);ot<W;){var ft=g,it=!0,Et=!1,Wt=void 0;try{for(var Jt=T[Symbol.iterator](),Br;!(it=(Br=Jt.next()).done);it=!0){var br=Br.value;br>=K&&br<ft&&(ft=br)}}catch(cn){Et=!0,Wt=cn}finally{try{!it&&Jt.return&&Jt.return()}finally{if(Et)throw Wt}}var Dt=ot+1;ft-K>ie((g-ge)/Dt)&&ue("overflow"),ge+=(ft-K)*Dt,K=ft;var gt=!0,Ar=!1,nr=void 0;try{for(var ln=T[Symbol.iterator](),go;!(gt=(go=ln.next()).done);gt=!0){var Oo=go.value;if(Oo<K&&++ge>g&&ue("overflow"),Oo==K){for(var sr=ge,Ln=R;;Ln+=R){var Fn=Ln<=Re?y:Ln>=Re+_?_:Ln-Re;if(sr<Fn)break;var vo=sr-Fn,Ro=R-Fn;j.push(ae(b(Fn+vo%Ro,0))),sr=ie(vo/Ro)}j.push(ae(b(sr,0))),Re=f(ge,Dt,ot==Te),ge=0,++ot}}}catch(cn){Ar=!0,nr=cn}finally{try{!gt&&ln.return&&ln.return()}finally{if(Ar)throw nr}}++ge,++K}return j.join("")},l=function(T){return be(T,function(j){return ce.test(j)?w(j.slice(4).toLowerCase()):j})},h=function(T){return be(T,function(j){return me.test(j)?"xn--"+m(j):j})},A={version:"2.1.0",ucs2:{decode:Fe,encode:Ye},decode:w,encode:m,toASCII:h,toUnicode:l},B={};function V(M){var T=M.charCodeAt(0),j=void 0;return T<16?j="%0"+T.toString(16).toUpperCase():T<128?j="%"+T.toString(16).toUpperCase():T<2048?j="%"+(T>>6|192).toString(16).toUpperCase()+"%"+(T&63|128).toString(16).toUpperCase():j="%"+(T>>12|224).toString(16).toUpperCase()+"%"+(T>>6&63|128).toString(16).toUpperCase()+"%"+(T&63|128).toString(16).toUpperCase(),j}function H(M){for(var T="",j=0,W=M.length;j<W;){var K=parseInt(M.substr(j+1,2),16);if(K<128)T+=String.fromCharCode(K),j+=3;else if(K>=194&&K<224){if(W-j>=6){var ge=parseInt(M.substr(j+4,2),16);T+=String.fromCharCode((K&31)<<6|ge&63)}else T+=M.substr(j,6);j+=6}else if(K>=224){if(W-j>=9){var Re=parseInt(M.substr(j+4,2),16),Ke=parseInt(M.substr(j+7,2),16);T+=String.fromCharCode((K&15)<<12|(Re&63)<<6|Ke&63)}else T+=M.substr(j,9);j+=9}else T+=M.substr(j,3),j+=3}return T}function re(M,T){function j(W){var K=H(W);return K.match(T.UNRESERVED)?K:W}return M.scheme&&(M.scheme=String(M.scheme).replace(T.PCT_ENCODED,j).toLowerCase().replace(T.NOT_SCHEME,"")),M.userinfo!==void 0&&(M.userinfo=String(M.userinfo).replace(T.PCT_ENCODED,j).replace(T.NOT_USERINFO,V).replace(T.PCT_ENCODED,i)),M.host!==void 0&&(M.host=String(M.host).replace(T.PCT_ENCODED,j).toLowerCase().replace(T.NOT_HOST,V).replace(T.PCT_ENCODED,i)),M.path!==void 0&&(M.path=String(M.path).replace(T.PCT_ENCODED,j).replace(M.scheme?T.NOT_PATH:T.NOT_PATH_NOSCHEME,V).replace(T.PCT_ENCODED,i)),M.query!==void 0&&(M.query=String(M.query).replace(T.PCT_ENCODED,j).replace(T.NOT_QUERY,V).replace(T.PCT_ENCODED,i)),M.fragment!==void 0&&(M.fragment=String(M.fragment).replace(T.PCT_ENCODED,j).replace(T.NOT_FRAGMENT,V).replace(T.PCT_ENCODED,i)),M}function _e(M){return M.replace(/^0*(.*)/,"$1")||"0"}function Ae(M,T){var j=M.match(T.IPV4ADDRESS)||[],W=N(j,2),K=W[1];return K?K.split(".").map(_e).join("."):M}function We(M,T){var j=M.match(T.IPV6ADDRESS)||[],W=N(j,3),K=W[1],ge=W[2];if(K){for(var Re=K.toLowerCase().split("::").reverse(),Ke=N(Re,2),Ze=Ke[0],Pe=Ke[1],Be=Pe?Pe.split(":").map(_e):[],Je=Ze.split(":").map(_e),ut=T.IPV4ADDRESS.test(Je[Je.length-1]),Te=ut?7:8,ot=Je.length-Te,ft=Array(Te),it=0;it<Te;++it)ft[it]=Be[it]||Je[ot+it]||"";ut&&(ft[Te-1]=Ae(ft[Te-1],T));var Et=ft.reduce(function(Dt,gt,Ar){if(!gt||gt==="0"){var nr=Dt[Dt.length-1];nr&&nr.index+nr.length===Ar?nr.length++:Dt.push({index:Ar,length:1})}return Dt},[]),Wt=Et.sort(function(Dt,gt){return gt.length-Dt.length})[0],Jt=void 0;if(Wt&&Wt.length>1){var Br=ft.slice(0,Wt.index),br=ft.slice(Wt.index+Wt.length);Jt=Br.join(":")+"::"+br.join(":")}else Jt=ft.join(":");return ge&&(Jt+="%"+ge),Jt}else return M}var de=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Xe="".match(/(){0}/)[1]===void 0;function qe(M){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j={},W=T.iri!==!1?p:d;T.reference==="suffix"&&(M=(T.scheme?T.scheme+":":"")+"//"+M);var K=M.match(de);if(K){Xe?(j.scheme=K[1],j.userinfo=K[3],j.host=K[4],j.port=parseInt(K[5],10),j.path=K[6]||"",j.query=K[7],j.fragment=K[8],isNaN(j.port)&&(j.port=K[5])):(j.scheme=K[1]||void 0,j.userinfo=M.indexOf("@")!==-1?K[3]:void 0,j.host=M.indexOf("//")!==-1?K[4]:void 0,j.port=parseInt(K[5],10),j.path=K[6]||"",j.query=M.indexOf("?")!==-1?K[7]:void 0,j.fragment=M.indexOf("#")!==-1?K[8]:void 0,isNaN(j.port)&&(j.port=M.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?K[4]:void 0)),j.host&&(j.host=We(Ae(j.host,W),W)),j.scheme===void 0&&j.userinfo===void 0&&j.host===void 0&&j.port===void 0&&!j.path&&j.query===void 0?j.reference="same-document":j.scheme===void 0?j.reference="relative":j.fragment===void 0?j.reference="absolute":j.reference="uri",T.reference&&T.reference!=="suffix"&&T.reference!==j.reference&&(j.error=j.error||"URI is not a "+T.reference+" reference.");var ge=B[(T.scheme||j.scheme||"").toLowerCase()];if(!T.unicodeSupport&&(!ge||!ge.unicodeSupport)){if(j.host&&(T.domainHost||ge&&ge.domainHost))try{j.host=A.toASCII(j.host.replace(W.PCT_ENCODED,H).toLowerCase())}catch(Re){j.error=j.error||"Host's domain name can not be converted to ASCII via punycode: "+Re}re(j,d)}else re(j,W);ge&&ge.parse&&ge.parse(j,T)}else j.error=j.error||"URI can not be parsed.";return j}function je(M,T){var j=T.iri!==!1?p:d,W=[];return M.userinfo!==void 0&&(W.push(M.userinfo),W.push("@")),M.host!==void 0&&W.push(We(Ae(String(M.host),j),j).replace(j.IPV6ADDRESS,function(K,ge,Re){return"["+ge+(Re?"%25"+Re:"")+"]"})),(typeof M.port=="number"||typeof M.port=="string")&&(W.push(":"),W.push(String(M.port))),W.length?W.join(""):void 0}var we=/^\.\.?\//,ct=/^\/\.(\/|$)/,Qe=/^\/\.\.(\/|$)/,nt=/^\/?(?:.|\n)*?(?=\/|$)/;function Z(M){for(var T=[];M.length;)if(M.match(we))M=M.replace(we,"");else if(M.match(ct))M=M.replace(ct,"/");else if(M.match(Qe))M=M.replace(Qe,"/"),T.pop();else if(M==="."||M==="..")M="";else{var j=M.match(nt);if(j){var W=j[0];M=M.slice(W.length),T.push(W)}else throw new Error("Unexpected dot segment condition")}return T.join("")}function z(M){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=T.iri?p:d,W=[],K=B[(T.scheme||M.scheme||"").toLowerCase()];if(K&&K.serialize&&K.serialize(M,T),M.host&&!j.IPV6ADDRESS.test(M.host)){if(T.domainHost||K&&K.domainHost)try{M.host=T.iri?A.toUnicode(M.host):A.toASCII(M.host.replace(j.PCT_ENCODED,H).toLowerCase())}catch(Ke){M.error=M.error||"Host's domain name can not be converted to "+(T.iri?"Unicode":"ASCII")+" via punycode: "+Ke}}re(M,j),T.reference!=="suffix"&&M.scheme&&(W.push(M.scheme),W.push(":"));var ge=je(M,T);if(ge!==void 0&&(T.reference!=="suffix"&&W.push("//"),W.push(ge),M.path&&M.path.charAt(0)!=="/"&&W.push("/")),M.path!==void 0){var Re=M.path;!T.absolutePath&&(!K||!K.absolutePath)&&(Re=Z(Re)),ge===void 0&&(Re=Re.replace(/^\/\//,"/%2F")),W.push(Re)}return M.query!==void 0&&(W.push("?"),W.push(M.query)),M.fragment!==void 0&&(W.push("#"),W.push(M.fragment)),W.join("")}function J(M,T){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},W=arguments[3],K={};return W||(M=qe(z(M,j),j),T=qe(z(T,j),j)),j=j||{},!j.tolerant&&T.scheme?(K.scheme=T.scheme,K.userinfo=T.userinfo,K.host=T.host,K.port=T.port,K.path=Z(T.path||""),K.query=T.query):(T.userinfo!==void 0||T.host!==void 0||T.port!==void 0?(K.userinfo=T.userinfo,K.host=T.host,K.port=T.port,K.path=Z(T.path||""),K.query=T.query):(T.path?(T.path.charAt(0)==="/"?K.path=Z(T.path):((M.userinfo!==void 0||M.host!==void 0||M.port!==void 0)&&!M.path?K.path="/"+T.path:M.path?K.path=M.path.slice(0,M.path.lastIndexOf("/")+1)+T.path:K.path=T.path,K.path=Z(K.path)),K.query=T.query):(K.path=M.path,T.query!==void 0?K.query=T.query:K.query=M.query),K.userinfo=M.userinfo,K.host=M.host,K.port=M.port),K.scheme=M.scheme),K.fragment=T.fragment,K}function P(M,T,j){var W=c({scheme:"null"},j);return z(J(qe(M,W),qe(T,W),W,!0),W)}function U(M,T){return typeof M=="string"?M=z(qe(M,T),T):o(M)==="object"&&(M=qe(z(M,T),T)),M}function Q(M,T,j){return typeof M=="string"?M=z(qe(M,j),j):o(M)==="object"&&(M=z(M,j)),typeof T=="string"?T=z(qe(T,j),j):o(T)==="object"&&(T=z(T,j)),M===T}function le(M,T){return M&&M.toString().replace(!T||!T.iri?d.ESCAPE:p.ESCAPE,V)}function x(M,T){return M&&M.toString().replace(!T||!T.iri?d.PCT_ENCODED:p.PCT_ENCODED,H)}var S={scheme:"http",domainHost:!0,parse:function(T,j){return T.host||(T.error=T.error||"HTTP URIs must have a host."),T},serialize:function(T,j){var W=String(T.scheme).toLowerCase()==="https";return(T.port===(W?443:80)||T.port==="")&&(T.port=void 0),T.path||(T.path="/"),T}},te={scheme:"https",domainHost:S.domainHost,parse:S.parse,serialize:S.serialize};function Ne(M){return typeof M.secure=="boolean"?M.secure:String(M.scheme).toLowerCase()==="wss"}var Ce={scheme:"ws",domainHost:!0,parse:function(T,j){var W=T;return W.secure=Ne(W),W.resourceName=(W.path||"/")+(W.query?"?"+W.query:""),W.path=void 0,W.query=void 0,W},serialize:function(T,j){if((T.port===(Ne(T)?443:80)||T.port==="")&&(T.port=void 0),typeof T.secure=="boolean"&&(T.scheme=T.secure?"wss":"ws",T.secure=void 0),T.resourceName){var W=T.resourceName.split("?"),K=N(W,2),ge=K[0],Re=K[1];T.path=ge&&ge!=="/"?ge:void 0,T.query=Re,T.resourceName=void 0}return T.fragment=void 0,T}},Mt={scheme:"wss",domainHost:Ce.domainHost,parse:Ce.parse,serialize:Ce.serialize},ke={},et="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",st="[0-9A-Fa-f]",ze=s(s("%[EFef]"+st+"%"+st+st+"%"+st+st)+"|"+s("%[89A-Fa-f]"+st+"%"+st+st)+"|"+s("%"+st+st)),Nr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Fr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Mn=n(Fr,'[\\"\\\\]'),Dn="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",jn=new RegExp(et,"g"),mr=new RegExp(ze,"g"),rr=new RegExp(n("[^]",Nr,"[\\.]",'[\\"]',Mn),"g"),G=new RegExp(n("[^]",et,Dn),"g"),O=G;function F(M){var T=H(M);return T.match(jn)?T:M}var se={scheme:"mailto",parse:function(T,j){var W=T,K=W.to=W.path?W.path.split(","):[];if(W.path=void 0,W.query){for(var ge=!1,Re={},Ke=W.query.split("&"),Ze=0,Pe=Ke.length;Ze<Pe;++Ze){var Be=Ke[Ze].split("=");switch(Be[0]){case"to":for(var Je=Be[1].split(","),ut=0,Te=Je.length;ut<Te;++ut)K.push(Je[ut]);break;case"subject":W.subject=x(Be[1],j);break;case"body":W.body=x(Be[1],j);break;default:ge=!0,Re[x(Be[0],j)]=x(Be[1],j);break}}ge&&(W.headers=Re)}W.query=void 0;for(var ot=0,ft=K.length;ot<ft;++ot){var it=K[ot].split("@");if(it[0]=x(it[0]),j.unicodeSupport)it[1]=x(it[1],j).toLowerCase();else try{it[1]=A.toASCII(x(it[1],j).toLowerCase())}catch(Et){W.error=W.error||"Email address's domain name can not be converted to ASCII via punycode: "+Et}K[ot]=it.join("@")}return W},serialize:function(T,j){var W=T,K=a(T.to);if(K){for(var ge=0,Re=K.length;ge<Re;++ge){var Ke=String(K[ge]),Ze=Ke.lastIndexOf("@"),Pe=Ke.slice(0,Ze).replace(mr,F).replace(mr,i).replace(rr,V),Be=Ke.slice(Ze+1);try{Be=j.iri?A.toUnicode(Be):A.toASCII(x(Be,j).toLowerCase())}catch(ot){W.error=W.error||"Email address's domain name can not be converted to "+(j.iri?"Unicode":"ASCII")+" via punycode: "+ot}K[ge]=Pe+"@"+Be}W.path=K.join(",")}var Je=T.headers=T.headers||{};T.subject&&(Je.subject=T.subject),T.body&&(Je.body=T.body);var ut=[];for(var Te in Je)Je[Te]!==ke[Te]&&ut.push(Te.replace(mr,F).replace(mr,i).replace(G,V)+"="+Je[Te].replace(mr,F).replace(mr,i).replace(O,V));return ut.length&&(W.query=ut.join("&")),W}},fe=/^([^\:]+)\:(.*)/,He={scheme:"urn",parse:function(T,j){var W=T.path&&T.path.match(fe),K=T;if(W){var ge=j.scheme||K.scheme||"urn",Re=W[1].toLowerCase(),Ke=W[2],Ze=ge+":"+(j.nid||Re),Pe=B[Ze];K.nid=Re,K.nss=Ke,K.path=void 0,Pe&&(K=Pe.parse(K,j))}else K.error=K.error||"URN can not be parsed.";return K},serialize:function(T,j){var W=j.scheme||T.scheme||"urn",K=T.nid,ge=W+":"+(j.nid||K),Re=B[ge];Re&&(T=Re.serialize(T,j));var Ke=T,Ze=T.nss;return Ke.path=(K||j.nid)+":"+Ze,Ke}},bt=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,kr={scheme:"urn:uuid",parse:function(T,j){var W=T;return W.uuid=W.nss,W.nss=void 0,!j.tolerant&&(!W.uuid||!W.uuid.match(bt))&&(W.error=W.error||"UUID is not valid."),W},serialize:function(T,j){var W=T;return W.nss=(T.uuid||"").toLowerCase(),W}};B[S.scheme]=S,B[te.scheme]=te,B[Ce.scheme]=Ce,B[Mt.scheme]=Mt,B[se.scheme]=se,B[He.scheme]=He,B[kr.scheme]=kr,r.SCHEMES=B,r.pctEncChar=V,r.pctDecChars=H,r.parse=qe,r.removeDotSegments=Z,r.serialize=z,r.resolveComponents=J,r.resolve=P,r.normalize=U,r.equal=Q,r.escapeComponent=le,r.unescapeComponent=x,Object.defineProperty(r,"__esModule",{value:!0})})})(ll,ll.exports);var E_=ll.exports;Object.defineProperty(ec,"__esModule",{value:!0});const g_=E_;g_.code='require("ajv/dist/runtime/uri").default';ec.default=g_;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=hr;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=Ve;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=ro,s=no,o=bn,i=kt,a=Ve,c=wt,u=mt,d=he,p=ZN,N=ec,$=(b,f)=>new RegExp(b,f);$.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],R=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},_={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function C(b){var f,w,m,l,h,A,B,V,H,re,_e,Ae,We,de,Xe,qe,je,we,ct,Qe,nt,Z,z,J,P;const U=b.strict,Q=(f=b.code)===null||f===void 0?void 0:f.optimize,le=Q===!0||Q===void 0?1:Q||0,x=(m=(w=b.code)===null||w===void 0?void 0:w.regExp)!==null&&m!==void 0?m:$,S=(l=b.uriResolver)!==null&&l!==void 0?l:N.default;return{strictSchema:(A=(h=b.strictSchema)!==null&&h!==void 0?h:U)!==null&&A!==void 0?A:!0,strictNumbers:(V=(B=b.strictNumbers)!==null&&B!==void 0?B:U)!==null&&V!==void 0?V:!0,strictTypes:(re=(H=b.strictTypes)!==null&&H!==void 0?H:U)!==null&&re!==void 0?re:"log",strictTuples:(Ae=(_e=b.strictTuples)!==null&&_e!==void 0?_e:U)!==null&&Ae!==void 0?Ae:"log",strictRequired:(de=(We=b.strictRequired)!==null&&We!==void 0?We:U)!==null&&de!==void 0?de:!1,code:b.code?{...b.code,optimize:le,regExp:x}:{optimize:le,regExp:x},loopRequired:(Xe=b.loopRequired)!==null&&Xe!==void 0?Xe:v,loopEnum:(qe=b.loopEnum)!==null&&qe!==void 0?qe:v,meta:(je=b.meta)!==null&&je!==void 0?je:!0,messages:(we=b.messages)!==null&&we!==void 0?we:!0,inlineRefs:(ct=b.inlineRefs)!==null&&ct!==void 0?ct:!0,schemaId:(Qe=b.schemaId)!==null&&Qe!==void 0?Qe:"$id",addUsedSchema:(nt=b.addUsedSchema)!==null&&nt!==void 0?nt:!0,validateSchema:(Z=b.validateSchema)!==null&&Z!==void 0?Z:!0,validateFormats:(z=b.validateFormats)!==null&&z!==void 0?z:!0,unicodeRegExp:(J=b.unicodeRegExp)!==null&&J!==void 0?J:!0,int32range:(P=b.int32range)!==null&&P!==void 0?P:!0,uriResolver:S}}class D{constructor(f={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,f=this.opts={...f,...C(f)};const{es5:w,lines:m}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:R,es5:w,lines:m}),this.logger=ie(f.logger);const l=f.validateFormats;f.validateFormats=!1,this.RULES=(0,o.getRules)(),L.call(this,y,f,"NOT SUPPORTED"),L.call(this,_,f,"DEPRECATED","warn"),this._metaOpts=ee.call(this),f.formats&&me.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),f.keywords&&q.call(this,f.keywords),typeof f.meta=="object"&&this.addMetaSchema(f.meta),ce.call(this),f.validateFormats=l}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:f,meta:w,schemaId:m}=this.opts;let l=p;m==="id"&&(l={...p},l.id=l.$id,delete l.$id),w&&f&&this.addMetaSchema(l,l[m],!1)}defaultMeta(){const{meta:f,schemaId:w}=this.opts;return this.opts.defaultMeta=typeof f=="object"?f[w]||f:void 0}validate(f,w){let m;if(typeof f=="string"){if(m=this.getSchema(f),!m)throw new Error(`no schema with key or ref "${f}"`)}else m=this.compile(f);const l=m(w);return"$async"in m||(this.errors=m.errors),l}compile(f,w){const m=this._addSchema(f,w);return m.validate||this._compileSchemaEnv(m)}compileAsync(f,w){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:m}=this.opts;return l.call(this,f,w);async function l(re,_e){await h.call(this,re.$schema);const Ae=this._addSchema(re,_e);return Ae.validate||A.call(this,Ae)}async function h(re){re&&!this.getSchema(re)&&await l.call(this,{$ref:re},!0)}async function A(re){try{return this._compileSchemaEnv(re)}catch(_e){if(!(_e instanceof s.default))throw _e;return B.call(this,_e),await V.call(this,_e.missingSchema),A.call(this,re)}}function B({missingSchema:re,missingRef:_e}){if(this.refs[re])throw new Error(`AnySchema ${re} is loaded but ${_e} cannot be resolved`)}async function V(re){const _e=await H.call(this,re);this.refs[re]||await h.call(this,_e.$schema),this.refs[re]||this.addSchema(_e,re,w)}async function H(re){const _e=this._loading[re];if(_e)return _e;try{return await(this._loading[re]=m(re))}finally{delete this._loading[re]}}}addSchema(f,w,m,l=this.opts.validateSchema){if(Array.isArray(f)){for(const A of f)this.addSchema(A,void 0,m,l);return this}let h;if(typeof f=="object"){const{schemaId:A}=this.opts;if(h=f[A],h!==void 0&&typeof h!="string")throw new Error(`schema ${A} must be string`)}return w=(0,c.normalizeId)(w||h),this._checkUnique(w),this.schemas[w]=this._addSchema(f,m,w,l,!0),this}addMetaSchema(f,w,m=this.opts.validateSchema){return this.addSchema(f,w,!0,m),this}validateSchema(f,w){if(typeof f=="boolean")return!0;let m;if(m=f.$schema,m!==void 0&&typeof m!="string")throw new Error("$schema must be a string");if(m=m||this.opts.defaultMeta||this.defaultMeta(),!m)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const l=this.validate(m,f);if(!l&&w){const h="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(h);else throw new Error(h)}return l}getSchema(f){let w;for(;typeof(w=ne.call(this,f))=="string";)f=w;if(w===void 0){const{schemaId:m}=this.opts,l=new i.SchemaEnv({schema:{},schemaId:m});if(w=i.resolveSchema.call(this,l,f),!w)return;this.refs[f]=w}return w.validate||this._compileSchemaEnv(w)}removeSchema(f){if(f instanceof RegExp)return this._removeAllSchemas(this.schemas,f),this._removeAllSchemas(this.refs,f),this;switch(typeof f){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const w=ne.call(this,f);return typeof w=="object"&&this._cache.delete(w.schema),delete this.schemas[f],delete this.refs[f],this}case"object":{const w=f;this._cache.delete(w);let m=f[this.opts.schemaId];return m&&(m=(0,c.normalizeId)(m),delete this.schemas[m],delete this.refs[m]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(f){for(const w of f)this.addKeyword(w);return this}addKeyword(f,w){let m;if(typeof f=="string")m=f,typeof w=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),w.keyword=m);else if(typeof f=="object"&&w===void 0){if(w=f,m=w.keyword,Array.isArray(m)&&!m.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ue.call(this,m,w),!w)return(0,d.eachItem)(m,h=>$e.call(this,h)),this;Fe.call(this,w);const l={...w,type:(0,u.getJSONTypes)(w.type),schemaType:(0,u.getJSONTypes)(w.schemaType)};return(0,d.eachItem)(m,l.type.length===0?h=>$e.call(this,h,l):h=>l.type.forEach(A=>$e.call(this,h,l,A))),this}getKeyword(f){const w=this.RULES.all[f];return typeof w=="object"?w.definition:!!w}removeKeyword(f){const{RULES:w}=this;delete w.keywords[f],delete w.all[f];for(const m of w.rules){const l=m.rules.findIndex(h=>h.keyword===f);l>=0&&m.rules.splice(l,1)}return this}addFormat(f,w){return typeof w=="string"&&(w=new RegExp(w)),this.formats[f]=w,this}errorsText(f=this.errors,{separator:w=", ",dataVar:m="data"}={}){return!f||f.length===0?"No errors":f.map(l=>`${m}${l.instancePath} ${l.message}`).reduce((l,h)=>l+w+h)}$dataMetaSchema(f,w){const m=this.RULES.all;f=JSON.parse(JSON.stringify(f));for(const l of w){const h=l.split("/").slice(1);let A=f;for(const B of h)A=A[B];for(const B in m){const V=m[B];if(typeof V!="object")continue;const{$data:H}=V.definition,re=A[B];H&&re&&(A[B]=I(re))}}return f}_removeAllSchemas(f,w){for(const m in f){const l=f[m];(!w||w.test(m))&&(typeof l=="string"?delete f[m]:l&&!l.meta&&(this._cache.delete(l.schema),delete f[m]))}}_addSchema(f,w,m,l=this.opts.validateSchema,h=this.opts.addUsedSchema){let A;const{schemaId:B}=this.opts;if(typeof f=="object")A=f[B];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof f!="boolean")throw new Error("schema must be object or boolean")}let V=this._cache.get(f);if(V!==void 0)return V;m=(0,c.normalizeId)(A||m);const H=c.getSchemaRefs.call(this,f,m);return V=new i.SchemaEnv({schema:f,schemaId:B,meta:w,baseId:m,localRefs:H}),this._cache.set(V.schema,V),h&&!m.startsWith("#")&&(m&&this._checkUnique(m),this.refs[m]=V),l&&this.validateSchema(f,!0),V}_checkUnique(f){if(this.schemas[f]||this.refs[f])throw new Error(`schema with key or id "${f}" already exists`)}_compileSchemaEnv(f){if(f.meta?this._compileMetaSchema(f):i.compileSchema.call(this,f),!f.validate)throw new Error("ajv implementation error");return f.validate}_compileMetaSchema(f){const w=this.opts;this.opts=this._metaOpts;try{i.compileSchema.call(this,f)}finally{this.opts=w}}}D.ValidationError=n.default,D.MissingRefError=s.default,t.default=D;function L(b,f,w,m="error"){for(const l in b){const h=l;h in f&&this.logger[m](`${w}: option ${l}. ${b[h]}`)}}function ne(b){return b=(0,c.normalizeId)(b),this.schemas[b]||this.refs[b]}function ce(){const b=this.opts.schemas;if(b)if(Array.isArray(b))this.addSchema(b);else for(const f in b)this.addSchema(b[f],f)}function me(){for(const b in this.opts.formats){const f=this.opts.formats[b];f&&this.addFormat(b,f)}}function q(b){if(Array.isArray(b)){this.addVocabulary(b);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const f in b){const w=b[f];w.keyword||(w.keyword=f),this.addKeyword(w)}}function ee(){const b={...this.opts};for(const f of g)delete b[f];return b}const oe={log(){},warn(){},error(){}};function ie(b){if(b===!1)return oe;if(b===void 0)return console;if(b.log&&b.warn&&b.error)return b;throw new Error("logger must implement log, warn and error methods")}const ae=/^[a-z_$][a-z0-9_$:-]*$/i;function ue(b,f){const{RULES:w}=this;if((0,d.eachItem)(b,m=>{if(w.keywords[m])throw new Error(`Keyword ${m} is already defined`);if(!ae.test(m))throw new Error(`Keyword ${m} has invalid name`)}),!!f&&f.$data&&!("code"in f||"validate"in f))throw new Error('$data keyword must have "code" or "validate" function')}function $e(b,f,w){var m;const l=f==null?void 0:f.post;if(w&&l)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:h}=this;let A=l?h.post:h.rules.find(({type:V})=>V===w);if(A||(A={type:w,rules:[]},h.rules.push(A)),h.keywords[b]=!0,!f)return;const B={keyword:b,definition:{...f,type:(0,u.getJSONTypes)(f.type),schemaType:(0,u.getJSONTypes)(f.schemaType)}};f.before?be.call(this,A,B,f.before):A.rules.push(B),h.all[b]=B,(m=f.implements)===null||m===void 0||m.forEach(V=>this.addKeyword(V))}function be(b,f,w){const m=b.rules.findIndex(l=>l.keyword===w);m>=0?b.rules.splice(m,0,f):(b.rules.push(f),this.logger.warn(`rule ${w} is not defined`))}function Fe(b){let{metaSchema:f}=b;f!==void 0&&(b.$data&&this.opts.$data&&(f=I(f)),b.validateSchema=this.compile(f,!0))}const Ye={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function I(b){return{anyOf:[b,Ye]}}})(Up);var tc={},rc={},nc={};Object.defineProperty(nc,"__esModule",{value:!0});const eb={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};nc.default=eb;var An={};Object.defineProperty(An,"__esModule",{value:!0});An.callRef=An.getValidate=void 0;const tb=no,Xd=Ue,Lt=Ve,Gn=$r,Zd=kt,So=he,rb={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:o,validateName:i,opts:a,self:c}=n,{root:u}=o;if((r==="#"||r==="#/")&&s===u.baseId)return p();const d=Zd.resolveRef.call(c,u,s,r);if(d===void 0)throw new tb.default(n.opts.uriResolver,s,r);if(d instanceof Zd.SchemaEnv)return N(d);return $(d);function p(){if(o===u)return Qo(t,i,o,o.$async);const g=e.scopeValue("root",{ref:u});return Qo(t,(0,Lt._)`${g}.validate`,u,u.$async)}function N(g){const R=O_(t,g);Qo(t,R,g,g.$async)}function $(g){const R=e.scopeValue("schema",a.code.source===!0?{ref:g,code:(0,Lt.stringify)(g)}:{ref:g}),y=e.name("valid"),_=t.subschema({schema:g,dataTypes:[],schemaPath:Lt.nil,topSchemaRef:R,errSchemaPath:r},y);t.mergeEvaluated(_),t.ok(y)}}};function O_(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Lt._)`${r.scopeValue("wrapper",{ref:e})}.validate`}An.getValidate=O_;function Qo(t,e,r,n){const{gen:s,it:o}=t,{allErrors:i,schemaEnv:a,opts:c}=o,u=c.passContext?Gn.default.this:Lt.nil;n?d():p();function d(){if(!a.$async)throw new Error("async schema referenced by sync schema");const g=s.let("valid");s.try(()=>{s.code((0,Lt._)`await ${(0,Xd.callValidateCode)(t,e,u)}`),$(e),i||s.assign(g,!0)},R=>{s.if((0,Lt._)`!(${R} instanceof ${o.ValidationError})`,()=>s.throw(R)),N(R),i||s.assign(g,!1)}),t.ok(g)}function p(){t.result((0,Xd.callValidateCode)(t,e,u),()=>$(e),()=>N(e))}function N(g){const R=(0,Lt._)`${g}.errors`;s.assign(Gn.default.vErrors,(0,Lt._)`${Gn.default.vErrors} === null ? ${R} : ${Gn.default.vErrors}.concat(${R})`),s.assign(Gn.default.errors,(0,Lt._)`${Gn.default.vErrors}.length`)}function $(g){var R;if(!o.opts.unevaluated)return;const y=(R=r==null?void 0:r.validate)===null||R===void 0?void 0:R.evaluated;if(o.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(o.props=So.mergeEvaluated.props(s,y.props,o.props));else{const _=s.var("props",(0,Lt._)`${g}.evaluated.props`);o.props=So.mergeEvaluated.props(s,_,o.props,Lt.Name)}if(o.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(o.items=So.mergeEvaluated.items(s,y.items,o.items));else{const _=s.var("items",(0,Lt._)`${g}.evaluated.items`);o.items=So.mergeEvaluated.items(s,_,o.items,Lt.Name)}}}An.callRef=Qo;An.default=rb;Object.defineProperty(rc,"__esModule",{value:!0});const nb=nc,sb=An,ob=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",nb.default,sb.default];rc.default=ob;var sc={},oc={};Object.defineProperty(oc,"__esModule",{value:!0});const ui=Ve,Gr=ui.operators,di={maximum:{okStr:"<=",ok:Gr.LTE,fail:Gr.GT},minimum:{okStr:">=",ok:Gr.GTE,fail:Gr.LT},exclusiveMaximum:{okStr:"<",ok:Gr.LT,fail:Gr.GTE},exclusiveMinimum:{okStr:">",ok:Gr.GT,fail:Gr.LTE}},ib={message:({keyword:t,schemaCode:e})=>(0,ui.str)`must be ${di[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,ui._)`{comparison: ${di[t].okStr}, limit: ${e}}`},ab={keyword:Object.keys(di),type:"number",schemaType:"number",$data:!0,error:ib,code(t){const{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,ui._)`${r} ${di[e].fail} ${n} || isNaN(${r})`)}};oc.default=ab;var ic={};Object.defineProperty(ic,"__esModule",{value:!0});const Is=Ve,lb={message:({schemaCode:t})=>(0,Is.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Is._)`{multipleOf: ${t}}`},cb={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:lb,code(t){const{gen:e,data:r,schemaCode:n,it:s}=t,o=s.opts.multipleOfPrecision,i=e.let("res"),a=o?(0,Is._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${o}`:(0,Is._)`${i} !== parseInt(${i})`;t.fail$data((0,Is._)`(${n} === 0 || (${i} = ${r}/${n}, ${a}))`)}};ic.default=cb;var ac={},lc={};Object.defineProperty(lc,"__esModule",{value:!0});function v_(t){const e=t.length;let r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}lc.default=v_;v_.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(ac,"__esModule",{value:!0});const mn=Ve,ub=he,db=lc,fb={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,mn.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,mn._)`{limit: ${t}}`},hb={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:fb,code(t){const{keyword:e,data:r,schemaCode:n,it:s}=t,o=e==="maxLength"?mn.operators.GT:mn.operators.LT,i=s.opts.unicode===!1?(0,mn._)`${r}.length`:(0,mn._)`${(0,ub.useFunc)(t.gen,db.default)}(${r})`;t.fail$data((0,mn._)`${i} ${o} ${n}`)}};ac.default=hb;var cc={};Object.defineProperty(cc,"__esModule",{value:!0});const pb=Ue,fi=Ve,_b={message:({schemaCode:t})=>(0,fi.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,fi._)`{pattern: ${t}}`},mb={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:_b,code(t){const{data:e,$data:r,schema:n,schemaCode:s,it:o}=t,i=o.opts.unicodeRegExp?"u":"",a=r?(0,fi._)`(new RegExp(${s}, ${i}))`:(0,pb.usePattern)(t,n);t.fail$data((0,fi._)`!${a}.test(${e})`)}};cc.default=mb;var uc={};Object.defineProperty(uc,"__esModule",{value:!0});const Ss=Ve,yb={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,Ss.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Ss._)`{limit: ${t}}`},Eb={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:yb,code(t){const{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?Ss.operators.GT:Ss.operators.LT;t.fail$data((0,Ss._)`Object.keys(${r}).length ${s} ${n}`)}};uc.default=Eb;var dc={};Object.defineProperty(dc,"__esModule",{value:!0});const vs=Ue,Ps=Ve,gb=he,Ob={message:({params:{missingProperty:t}})=>(0,Ps.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Ps._)`{missingProperty: ${t}}`},vb={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Ob,code(t){const{gen:e,schema:r,schemaCode:n,data:s,$data:o,it:i}=t,{opts:a}=i;if(!o&&r.length===0)return;const c=r.length>=a.loopRequired;if(i.allErrors?u():d(),a.strictRequired){const $=t.parentSchema.properties,{definedProperties:g}=t.it;for(const R of r)if(($==null?void 0:$[R])===void 0&&!g.has(R)){const y=i.schemaEnv.baseId+i.errSchemaPath,_=`required property "${R}" is not defined at "${y}" (strictRequired)`;(0,gb.checkStrictMode)(i,_,i.opts.strictRequired)}}function u(){if(c||o)t.block$data(Ps.nil,p);else for(const $ of r)(0,vs.checkReportMissingProp)(t,$)}function d(){const $=e.let("missing");if(c||o){const g=e.let("valid",!0);t.block$data(g,()=>N($,g)),t.ok(g)}else e.if((0,vs.checkMissingProp)(t,r,$)),(0,vs.reportMissingProp)(t,$),e.else()}function p(){e.forOf("prop",n,$=>{t.setParams({missingProperty:$}),e.if((0,vs.noPropertyInData)(e,s,$,a.ownProperties),()=>t.error())})}function N($,g){t.setParams({missingProperty:$}),e.forOf($,n,()=>{e.assign(g,(0,vs.propertyInData)(e,s,$,a.ownProperties)),e.if((0,Ps.not)(g),()=>{t.error(),e.break()})},Ps.nil)}}};dc.default=vb;var fc={};Object.defineProperty(fc,"__esModule",{value:!0});const Cs=Ve,Rb={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,Cs.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Cs._)`{limit: ${t}}`},$b={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Rb,code(t){const{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Cs.operators.GT:Cs.operators.LT;t.fail$data((0,Cs._)`${r}.length ${s} ${n}`)}};fc.default=$b;var hc={},so={};Object.defineProperty(so,"__esModule",{value:!0});const R_=qi;R_.code='require("ajv/dist/runtime/equal").default';so.default=R_;Object.defineProperty(hc,"__esModule",{value:!0});const Ta=mt,Rt=Ve,wb=he,Nb=so,bb={message:({params:{i:t,j:e}})=>(0,Rt.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Rt._)`{i: ${t}, j: ${e}}`},Ab={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:bb,code(t){const{gen:e,data:r,$data:n,schema:s,parentSchema:o,schemaCode:i,it:a}=t;if(!n&&!s)return;const c=e.let("valid"),u=o.items?(0,Ta.getSchemaTypes)(o.items):[];t.block$data(c,d,(0,Rt._)`${i} === false`),t.ok(c);function d(){const g=e.let("i",(0,Rt._)`${r}.length`),R=e.let("j");t.setParams({i:g,j:R}),e.assign(c,!0),e.if((0,Rt._)`${g} > 1`,()=>(p()?N:$)(g,R))}function p(){return u.length>0&&!u.some(g=>g==="object"||g==="array")}function N(g,R){const y=e.name("item"),_=(0,Ta.checkDataTypes)(u,y,a.opts.strictNumbers,Ta.DataType.Wrong),v=e.const("indices",(0,Rt._)`{}`);e.for((0,Rt._)`;${g}--;`,()=>{e.let(y,(0,Rt._)`${r}[${g}]`),e.if(_,(0,Rt._)`continue`),u.length>1&&e.if((0,Rt._)`typeof ${y} == "string"`,(0,Rt._)`${y} += "_"`),e.if((0,Rt._)`typeof ${v}[${y}] == "number"`,()=>{e.assign(R,(0,Rt._)`${v}[${y}]`),t.error(),e.assign(c,!1).break()}).code((0,Rt._)`${v}[${y}] = ${g}`)})}function $(g,R){const y=(0,wb.useFunc)(e,Nb.default),_=e.name("outer");e.label(_).for((0,Rt._)`;${g}--;`,()=>e.for((0,Rt._)`${R} = ${g}; ${R}--;`,()=>e.if((0,Rt._)`${y}(${r}[${g}], ${r}[${R}])`,()=>{t.error(),e.assign(c,!1).break(_)})))}}};hc.default=Ab;var pc={};Object.defineProperty(pc,"__esModule",{value:!0});const cl=Ve,Tb=he,Ib=so,Sb={message:"must be equal to constant",params:({schemaCode:t})=>(0,cl._)`{allowedValue: ${t}}`},Pb={keyword:"const",$data:!0,error:Sb,code(t){const{gen:e,data:r,$data:n,schemaCode:s,schema:o}=t;n||o&&typeof o=="object"?t.fail$data((0,cl._)`!${(0,Tb.useFunc)(e,Ib.default)}(${r}, ${s})`):t.fail((0,cl._)`${o} !== ${r}`)}};pc.default=Pb;var _c={};Object.defineProperty(_c,"__esModule",{value:!0});const Ns=Ve,Cb=he,Mb=so,Db={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Ns._)`{allowedValues: ${t}}`},jb={keyword:"enum",schemaType:"array",$data:!0,error:Db,code(t){const{gen:e,data:r,$data:n,schema:s,schemaCode:o,it:i}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=i.opts.loopEnum;let c;const u=()=>c??(c=(0,Cb.useFunc)(e,Mb.default));let d;if(a||n)d=e.let("valid"),t.block$data(d,p);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const $=e.const("vSchema",o);d=(0,Ns.or)(...s.map((g,R)=>N($,R)))}t.pass(d);function p(){e.assign(d,!1),e.forOf("v",o,$=>e.if((0,Ns._)`${u()}(${r}, ${$})`,()=>e.assign(d,!0).break()))}function N($,g){const R=s[g];return typeof R=="object"&&R!==null?(0,Ns._)`${u()}(${r}, ${$}[${g}])`:(0,Ns._)`${r} === ${R}`}}};_c.default=jb;Object.defineProperty(sc,"__esModule",{value:!0});const Lb=oc,Fb=ic,kb=ac,Bb=cc,Ub=uc,xb=dc,Gb=fc,Vb=hc,Hb=pc,Kb=_c,qb=[Lb.default,Fb.default,kb.default,Bb.default,Ub.default,xb.default,Gb.default,Vb.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Hb.default,Kb.default];sc.default=qb;var mc={},fs={};Object.defineProperty(fs,"__esModule",{value:!0});fs.validateAdditionalItems=void 0;const yn=Ve,ul=he,Wb={message:({params:{len:t}})=>(0,yn.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,yn._)`{limit: ${t}}`},Jb={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Wb,code(t){const{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,ul.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}$_(t,n)}};function $_(t,e){const{gen:r,schema:n,data:s,keyword:o,it:i}=t;i.items=!0;const a=r.const("len",(0,yn._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,yn._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,ul.alwaysValidSchema)(i,n)){const u=r.var("valid",(0,yn._)`${a} <= ${e.length}`);r.if((0,yn.not)(u),()=>c(u)),t.ok(u)}function c(u){r.forRange("i",e.length,a,d=>{t.subschema({keyword:o,dataProp:d,dataPropType:ul.Type.Num},u),i.allErrors||r.if((0,yn.not)(u),()=>r.break())})}}fs.validateAdditionalItems=$_;fs.default=Jb;var yc={},hs={};Object.defineProperty(hs,"__esModule",{value:!0});hs.validateTuple=void 0;const ef=Ve,Yo=he,zb=Ue,Qb={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return w_(t,"additionalItems",e);r.items=!0,!(0,Yo.alwaysValidSchema)(r,e)&&t.ok((0,zb.validateArray)(t))}};function w_(t,e,r=t.schema){const{gen:n,parentSchema:s,data:o,keyword:i,it:a}=t;d(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Yo.mergeEvaluated.items(n,r.length,a.items));const c=n.name("valid"),u=n.const("len",(0,ef._)`${o}.length`);r.forEach((p,N)=>{(0,Yo.alwaysValidSchema)(a,p)||(n.if((0,ef._)`${u} > ${N}`,()=>t.subschema({keyword:i,schemaProp:N,dataProp:N},c)),t.ok(c))});function d(p){const{opts:N,errSchemaPath:$}=a,g=r.length,R=g===p.minItems&&(g===p.maxItems||p[e]===!1);if(N.strictTuples&&!R){const y=`"${i}" is ${g}-tuple, but minItems or maxItems/${e} are not specified or different at path "${$}"`;(0,Yo.checkStrictMode)(a,y,N.strictTuples)}}}hs.validateTuple=w_;hs.default=Qb;Object.defineProperty(yc,"__esModule",{value:!0});const Yb=hs,Xb={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Yb.validateTuple)(t,"items")};yc.default=Xb;var Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});const tf=Ve,Zb=he,eA=Ue,tA=fs,rA={message:({params:{len:t}})=>(0,tf.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,tf._)`{limit: ${t}}`},nA={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:rA,code(t){const{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Zb.alwaysValidSchema)(n,e)&&(s?(0,tA.validateAdditionalItems)(t,s):t.ok((0,eA.validateArray)(t)))}};Ec.default=nA;var gc={};Object.defineProperty(gc,"__esModule",{value:!0});const Yt=Ve,Po=he,sA={message:({params:{min:t,max:e}})=>e===void 0?(0,Yt.str)`must contain at least ${t} valid item(s)`:(0,Yt.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Yt._)`{minContains: ${t}}`:(0,Yt._)`{minContains: ${t}, maxContains: ${e}}`},oA={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:sA,code(t){const{gen:e,schema:r,parentSchema:n,data:s,it:o}=t;let i,a;const{minContains:c,maxContains:u}=n;o.opts.next?(i=c===void 0?1:c,a=u):i=1;const d=e.const("len",(0,Yt._)`${s}.length`);if(t.setParams({min:i,max:a}),a===void 0&&i===0){(0,Po.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&i>a){(0,Po.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Po.alwaysValidSchema)(o,r)){let R=(0,Yt._)`${d} >= ${i}`;a!==void 0&&(R=(0,Yt._)`${R} && ${d} <= ${a}`),t.pass(R);return}o.items=!0;const p=e.name("valid");a===void 0&&i===1?$(p,()=>e.if(p,()=>e.break())):i===0?(e.let(p,!0),a!==void 0&&e.if((0,Yt._)`${s}.length > 0`,N)):(e.let(p,!1),N()),t.result(p,()=>t.reset());function N(){const R=e.name("_valid"),y=e.let("count",0);$(R,()=>e.if(R,()=>g(y)))}function $(R,y){e.forRange("i",0,d,_=>{t.subschema({keyword:"contains",dataProp:_,dataPropType:Po.Type.Num,compositeRule:!0},R),y()})}function g(R){e.code((0,Yt._)`${R}++`),a===void 0?e.if((0,Yt._)`${R} >= ${i}`,()=>e.assign(p,!0).break()):(e.if((0,Yt._)`${R} > ${a}`,()=>e.assign(p,!1).break()),i===1?e.assign(p,!0):e.if((0,Yt._)`${R} >= ${i}`,()=>e.assign(p,!0)))}}};gc.default=oA;var N_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=Ve,r=he,n=Ue;t.error={message:({params:{property:c,depsCount:u,deps:d}})=>{const p=u===1?"property":"properties";return(0,e.str)`must have ${p} ${d} when property ${c} is present`},params:({params:{property:c,depsCount:u,deps:d,missingProperty:p}})=>(0,e._)`{property: ${c},
    missingProperty: ${p},
    depsCount: ${u},
    deps: ${d}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(c){const[u,d]=o(c);i(c,u),a(c,d)}};function o({schema:c}){const u={},d={};for(const p in c){if(p==="__proto__")continue;const N=Array.isArray(c[p])?u:d;N[p]=c[p]}return[u,d]}function i(c,u=c.schema){const{gen:d,data:p,it:N}=c;if(Object.keys(u).length===0)return;const $=d.let("missing");for(const g in u){const R=u[g];if(R.length===0)continue;const y=(0,n.propertyInData)(d,p,g,N.opts.ownProperties);c.setParams({property:g,depsCount:R.length,deps:R.join(", ")}),N.allErrors?d.if(y,()=>{for(const _ of R)(0,n.checkReportMissingProp)(c,_)}):(d.if((0,e._)`${y} && (${(0,n.checkMissingProp)(c,R,$)})`),(0,n.reportMissingProp)(c,$),d.else())}}t.validatePropertyDeps=i;function a(c,u=c.schema){const{gen:d,data:p,keyword:N,it:$}=c,g=d.name("valid");for(const R in u)(0,r.alwaysValidSchema)($,u[R])||(d.if((0,n.propertyInData)(d,p,R,$.opts.ownProperties),()=>{const y=c.subschema({keyword:N,schemaProp:R},g);c.mergeValidEvaluated(y,g)},()=>d.var(g,!0)),c.ok(g))}t.validateSchemaDeps=a,t.default=s})(N_);var Oc={};Object.defineProperty(Oc,"__esModule",{value:!0});const b_=Ve,iA=he,aA={message:"property name must be valid",params:({params:t})=>(0,b_._)`{propertyName: ${t.propertyName}}`},lA={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:aA,code(t){const{gen:e,schema:r,data:n,it:s}=t;if((0,iA.alwaysValidSchema)(s,r))return;const o=e.name("valid");e.forIn("key",n,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},o),e.if((0,b_.not)(o),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(o)}};Oc.default=lA;var zi={};Object.defineProperty(zi,"__esModule",{value:!0});const Co=Ue,cr=Ve,cA=$r,Mo=he,uA={message:"must NOT have additional properties",params:({params:t})=>(0,cr._)`{additionalProperty: ${t.additionalProperty}}`},dA={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:uA,code(t){const{gen:e,schema:r,parentSchema:n,data:s,errsCount:o,it:i}=t;if(!o)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=i;if(i.props=!0,c.removeAdditional!=="all"&&(0,Mo.alwaysValidSchema)(i,r))return;const u=(0,Co.allSchemaProperties)(n.properties),d=(0,Co.allSchemaProperties)(n.patternProperties);p(),t.ok((0,cr._)`${o} === ${cA.default.errors}`);function p(){e.forIn("key",s,y=>{!u.length&&!d.length?g(y):e.if(N(y),()=>g(y))})}function N(y){let _;if(u.length>8){const v=(0,Mo.schemaRefOrVal)(i,n.properties,"properties");_=(0,Co.isOwnProperty)(e,v,y)}else u.length?_=(0,cr.or)(...u.map(v=>(0,cr._)`${y} === ${v}`)):_=cr.nil;return d.length&&(_=(0,cr.or)(_,...d.map(v=>(0,cr._)`${(0,Co.usePattern)(t,v)}.test(${y})`))),(0,cr.not)(_)}function $(y){e.code((0,cr._)`delete ${s}[${y}]`)}function g(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){$(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Mo.alwaysValidSchema)(i,r)){const _=e.name("valid");c.removeAdditional==="failing"?(R(y,_,!1),e.if((0,cr.not)(_),()=>{t.reset(),$(y)})):(R(y,_),a||e.if((0,cr.not)(_),()=>e.break()))}}function R(y,_,v){const C={keyword:"additionalProperties",dataProp:y,dataPropType:Mo.Type.Str};v===!1&&Object.assign(C,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(C,_)}}};zi.default=dA;var vc={};Object.defineProperty(vc,"__esModule",{value:!0});const fA=hr,rf=Ue,Ia=he,nf=zi,hA={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:s,it:o}=t;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&nf.default.code(new fA.KeywordCxt(o,nf.default,"additionalProperties"));const i=(0,rf.allSchemaProperties)(r);for(const p of i)o.definedProperties.add(p);o.opts.unevaluated&&i.length&&o.props!==!0&&(o.props=Ia.mergeEvaluated.props(e,(0,Ia.toHash)(i),o.props));const a=i.filter(p=>!(0,Ia.alwaysValidSchema)(o,r[p]));if(a.length===0)return;const c=e.name("valid");for(const p of a)u(p)?d(p):(e.if((0,rf.propertyInData)(e,s,p,o.opts.ownProperties)),d(p),o.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(p),t.ok(c);function u(p){return o.opts.useDefaults&&!o.compositeRule&&r[p].default!==void 0}function d(p){t.subschema({keyword:"properties",schemaProp:p,dataProp:p},c)}}};vc.default=hA;var Rc={};Object.defineProperty(Rc,"__esModule",{value:!0});const sf=Ue,Do=Ve,of=he,af=he,pA={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:n,parentSchema:s,it:o}=t,{opts:i}=o,a=(0,sf.allSchemaProperties)(r),c=a.filter(R=>(0,of.alwaysValidSchema)(o,r[R]));if(a.length===0||c.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;const u=i.strictSchema&&!i.allowMatchingProperties&&s.properties,d=e.name("valid");o.props!==!0&&!(o.props instanceof Do.Name)&&(o.props=(0,af.evaluatedPropsToName)(e,o.props));const{props:p}=o;N();function N(){for(const R of a)u&&$(R),o.allErrors?g(R):(e.var(d,!0),g(R),e.if(d))}function $(R){for(const y in u)new RegExp(R).test(y)&&(0,of.checkStrictMode)(o,`property ${y} matches pattern ${R} (use allowMatchingProperties)`)}function g(R){e.forIn("key",n,y=>{e.if((0,Do._)`${(0,sf.usePattern)(t,R)}.test(${y})`,()=>{const _=c.includes(R);_||t.subschema({keyword:"patternProperties",schemaProp:R,dataProp:y,dataPropType:af.Type.Str},d),o.opts.unevaluated&&p!==!0?e.assign((0,Do._)`${p}[${y}]`,!0):!_&&!o.allErrors&&e.if((0,Do.not)(d),()=>e.break())})})}}};Rc.default=pA;var $c={};Object.defineProperty($c,"__esModule",{value:!0});const _A=he,mA={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:n}=t;if((0,_A.alwaysValidSchema)(n,r)){t.fail();return}const s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};$c.default=mA;var wc={};Object.defineProperty(wc,"__esModule",{value:!0});const yA=Ue,EA={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:yA.validateUnion,error:{message:"must match a schema in anyOf"}};wc.default=EA;var Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});const Xo=Ve,gA=he,OA={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Xo._)`{passingSchemas: ${t.passing}}`},vA={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:OA,code(t){const{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const o=r,i=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(u),t.result(i,()=>t.reset(),()=>t.error(!0));function u(){o.forEach((d,p)=>{let N;(0,gA.alwaysValidSchema)(s,d)?e.var(c,!0):N=t.subschema({keyword:"oneOf",schemaProp:p,compositeRule:!0},c),p>0&&e.if((0,Xo._)`${c} && ${i}`).assign(i,!1).assign(a,(0,Xo._)`[${a}, ${p}]`).else(),e.if(c,()=>{e.assign(i,!0),e.assign(a,p),N&&t.mergeEvaluated(N,Xo.Name)})})}}};Nc.default=vA;var bc={};Object.defineProperty(bc,"__esModule",{value:!0});const RA=he,$A={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=e.name("valid");r.forEach((o,i)=>{if((0,RA.alwaysValidSchema)(n,o))return;const a=t.subschema({keyword:"allOf",schemaProp:i},s);t.ok(s),t.mergeEvaluated(a)})}};bc.default=$A;var Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});const hi=Ve,A_=he,wA={message:({params:t})=>(0,hi.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,hi._)`{failingKeyword: ${t.ifClause}}`},NA={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:wA,code(t){const{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,A_.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=lf(n,"then"),o=lf(n,"else");if(!s&&!o)return;const i=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&o){const d=e.let("ifClause");t.setParams({ifClause:d}),e.if(a,u("then",d),u("else",d))}else s?e.if(a,u("then")):e.if((0,hi.not)(a),u("else"));t.pass(i,()=>t.error(!0));function c(){const d=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(d)}function u(d,p){return()=>{const N=t.subschema({keyword:d},a);e.assign(i,a),t.mergeValidEvaluated(N,i),p?e.assign(p,(0,hi._)`${d}`):t.setParams({ifClause:d})}}}};function lf(t,e){const r=t.schema[e];return r!==void 0&&!(0,A_.alwaysValidSchema)(t,r)}Ac.default=NA;var Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});const bA=he,AA={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,bA.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};Tc.default=AA;Object.defineProperty(mc,"__esModule",{value:!0});const TA=fs,IA=yc,SA=hs,PA=Ec,CA=gc,MA=N_,DA=Oc,jA=zi,LA=vc,FA=Rc,kA=$c,BA=wc,UA=Nc,xA=bc,GA=Ac,VA=Tc;function HA(t=!1){const e=[kA.default,BA.default,UA.default,xA.default,GA.default,VA.default,DA.default,jA.default,MA.default,LA.default,FA.default];return t?e.push(IA.default,PA.default):e.push(TA.default,SA.default),e.push(CA.default),e}mc.default=HA;var Ic={},Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});const pt=Ve,KA={message:({schemaCode:t})=>(0,pt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,pt._)`{format: ${t}}`},qA={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:KA,code(t,e){const{gen:r,data:n,$data:s,schema:o,schemaCode:i,it:a}=t,{opts:c,errSchemaPath:u,schemaEnv:d,self:p}=a;if(!c.validateFormats)return;s?N():$();function N(){const g=r.scopeValue("formats",{ref:p.formats,code:c.code.formats}),R=r.const("fDef",(0,pt._)`${g}[${i}]`),y=r.let("fType"),_=r.let("format");r.if((0,pt._)`typeof ${R} == "object" && !(${R} instanceof RegExp)`,()=>r.assign(y,(0,pt._)`${R}.type || "string"`).assign(_,(0,pt._)`${R}.validate`),()=>r.assign(y,(0,pt._)`"string"`).assign(_,R)),t.fail$data((0,pt.or)(v(),C()));function v(){return c.strictSchema===!1?pt.nil:(0,pt._)`${i} && !${_}`}function C(){const D=d.$async?(0,pt._)`(${R}.async ? await ${_}(${n}) : ${_}(${n}))`:(0,pt._)`${_}(${n})`,L=(0,pt._)`(typeof ${_} == "function" ? ${D} : ${_}.test(${n}))`;return(0,pt._)`${_} && ${_} !== true && ${y} === ${e} && !${L}`}}function $(){const g=p.formats[o];if(!g){v();return}if(g===!0)return;const[R,y,_]=C(g);R===e&&t.pass(D());function v(){if(c.strictSchema===!1){p.logger.warn(L());return}throw new Error(L());function L(){return`unknown format "${o}" ignored in schema at path "${u}"`}}function C(L){const ne=L instanceof RegExp?(0,pt.regexpCode)(L):c.code.formats?(0,pt._)`${c.code.formats}${(0,pt.getProperty)(o)}`:void 0,ce=r.scopeValue("formats",{key:o,ref:L,code:ne});return typeof L=="object"&&!(L instanceof RegExp)?[L.type||"string",L.validate,(0,pt._)`${ce}.validate`]:["string",L,ce]}function D(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!d.$async)throw new Error("async format in sync schema");return(0,pt._)`await ${_}(${n})`}return typeof y=="function"?(0,pt._)`${_}(${n})`:(0,pt._)`${_}.test(${n})`}}}};Sc.default=qA;Object.defineProperty(Ic,"__esModule",{value:!0});const WA=Sc,JA=[WA.default];Ic.default=JA;var ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.contentVocabulary=ts.metadataVocabulary=void 0;ts.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ts.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(tc,"__esModule",{value:!0});const zA=rc,QA=sc,YA=mc,XA=Ic,cf=ts,ZA=[zA.default,QA.default,(0,YA.default)(),XA.default,cf.metadataVocabulary,cf.contentVocabulary];tc.default=ZA;var Pc={},Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.DiscrError=void 0;var uf;(function(t){t.Tag="tag",t.Mapping="mapping"})(uf||(Qi.DiscrError=uf={}));Object.defineProperty(Pc,"__esModule",{value:!0});const qn=Ve,dl=Qi,df=kt,eT=he,tT={message:({params:{discrError:t,tagName:e}})=>t===dl.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,qn._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},rT={keyword:"discriminator",type:"object",schemaType:"object",error:tT,code(t){const{gen:e,data:r,schema:n,parentSchema:s,it:o}=t,{oneOf:i}=s;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");const c=e.let("valid",!1),u=e.const("tag",(0,qn._)`${r}${(0,qn.getProperty)(a)}`);e.if((0,qn._)`typeof ${u} == "string"`,()=>d(),()=>t.error(!1,{discrError:dl.DiscrError.Tag,tag:u,tagName:a})),t.ok(c);function d(){const $=N();e.if(!1);for(const g in $)e.elseIf((0,qn._)`${u} === ${g}`),e.assign(c,p($[g]));e.else(),t.error(!1,{discrError:dl.DiscrError.Mapping,tag:u,tagName:a}),e.endIf()}function p($){const g=e.name("valid"),R=t.subschema({keyword:"oneOf",schemaProp:$},g);return t.mergeEvaluated(R,qn.Name),g}function N(){var $;const g={},R=_(s);let y=!0;for(let D=0;D<i.length;D++){let L=i[D];L!=null&&L.$ref&&!(0,eT.schemaHasRulesButRef)(L,o.self.RULES)&&(L=df.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,L==null?void 0:L.$ref),L instanceof df.SchemaEnv&&(L=L.schema));const ne=($=L==null?void 0:L.properties)===null||$===void 0?void 0:$[a];if(typeof ne!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(R||_(L)),v(ne,D)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return g;function _({required:D}){return Array.isArray(D)&&D.includes(a)}function v(D,L){if(D.const)C(D.const,L);else if(D.enum)for(const ne of D.enum)C(ne,L);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function C(D,L){if(typeof D!="string"||D in g)throw new Error(`discriminator: "${a}" values must be unique strings`);g[D]=L}}}};Pc.default=rT;const nT="http://json-schema.org/draft-07/schema#",sT="http://json-schema.org/draft-07/schema#",oT="Core schema meta-schema",iT={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},aT=["object","boolean"],lT={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},cT={$schema:nT,$id:sT,title:oT,definitions:iT,type:aT,properties:lT,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=Up,n=tc,s=Pc,o=cT,i=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(g=>this.addVocabulary(g)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const g=this.opts.$data?this.$dataMetaSchema(o,i):o;this.addMetaSchema(g,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var u=hr;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var d=Ve;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var p=ro;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return p.default}});var N=no;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return N.default}})})(nl,nl.exports);var uT=nl.exports,fl={exports:{}},T_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(q,ee){return{validate:q,compare:ee}}t.fullFormats={date:e(o,i),time:e(c,u),"date-time":e(p,N),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:R,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:me,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:_,int32:{type:"number",validate:D},int64:{type:"number",validate:L},float:{type:"number",validate:ne},double:{type:"number",validate:ne},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,i),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,u),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,N),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function r(q){return q%4===0&&(q%100!==0||q%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(q){const ee=n.exec(q);if(!ee)return!1;const oe=+ee[1],ie=+ee[2],ae=+ee[3];return ie>=1&&ie<=12&&ae>=1&&ae<=(ie===2&&r(oe)?29:s[ie])}function i(q,ee){if(q&&ee)return q>ee?1:q<ee?-1:0}const a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function c(q,ee){const oe=a.exec(q);if(!oe)return!1;const ie=+oe[1],ae=+oe[2],ue=+oe[3],$e=oe[5];return(ie<=23&&ae<=59&&ue<=59||ie===23&&ae===59&&ue===60)&&(!ee||$e!=="")}function u(q,ee){if(!(q&&ee))return;const oe=a.exec(q),ie=a.exec(ee);if(oe&&ie)return q=oe[1]+oe[2]+oe[3]+(oe[4]||""),ee=ie[1]+ie[2]+ie[3]+(ie[4]||""),q>ee?1:q<ee?-1:0}const d=/t|\s/i;function p(q){const ee=q.split(d);return ee.length===2&&o(ee[0])&&c(ee[1],!0)}function N(q,ee){if(!(q&&ee))return;const[oe,ie]=q.split(d),[ae,ue]=ee.split(d),$e=i(oe,ae);if($e!==void 0)return $e||u(ie,ue)}const $=/\/|:/,g=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function R(q){return $.test(q)&&g.test(q)}const y=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function _(q){return y.lastIndex=0,y.test(q)}const v=-(2**31),C=2**31-1;function D(q){return Number.isInteger(q)&&q<=C&&q>=v}function L(q){return Number.isInteger(q)}function ne(){return!0}const ce=/[^\\]\\Z/;function me(q){if(ce.test(q))return!1;try{return new RegExp(q),!0}catch{return!1}}})(T_);var I_={},hl={exports:{}},S_={},pr={},rs={},oo={},Le={},Hs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(v){if(super(),!t.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((C,D)=>`${C}${D}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((C,D)=>(D instanceof r&&(C[D.str]=(C[D.str]||0)+1),C),{})}}t._Code=n,t.nil=new n("");function s(_,...v){const C=[_[0]];let D=0;for(;D<v.length;)a(C,v[D]),C.push(_[++D]);return new n(C)}t._=s;const o=new n("+");function i(_,...v){const C=[$(_[0])];let D=0;for(;D<v.length;)C.push(o),a(C,v[D]),C.push(o,$(_[++D]));return c(C),new n(C)}t.str=i;function a(_,v){v instanceof n?_.push(...v._items):v instanceof r?_.push(v):_.push(p(v))}t.addCodeArg=a;function c(_){let v=1;for(;v<_.length-1;){if(_[v]===o){const C=u(_[v-1],_[v+1]);if(C!==void 0){_.splice(v-1,3,C);continue}_[v++]="+"}v++}}function u(_,v){if(v==='""')return _;if(_==='""')return v;if(typeof _=="string")return v instanceof r||_[_.length-1]!=='"'?void 0:typeof v!="string"?`${_.slice(0,-1)}${v}"`:v[0]==='"'?_.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(_ instanceof r))return`"${_}${v.slice(1)}`}function d(_,v){return v.emptyStr()?_:_.emptyStr()?v:i`${_}${v}`}t.strConcat=d;function p(_){return typeof _=="number"||typeof _=="boolean"||_===null?_:$(Array.isArray(_)?_.join(","):_)}function N(_){return new n($(_))}t.stringify=N;function $(_){return JSON.stringify(_).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=$;function g(_){return typeof _=="string"&&t.IDENTIFIER.test(_)?new n(`.${_}`):s`[${_}]`}t.getProperty=g;function R(_){if(typeof _=="string"&&t.IDENTIFIER.test(_))return new n(`${_}`);throw new Error(`CodeGen: invalid export name: ${_}, use explicit $id name mapping`)}t.getEsmExportName=R;function y(_){return new n(_.toString())}t.regexpCode=y})(Hs);var pl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=Hs;class r extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class s{constructor({prefixes:u,parent:d}={}){this._names={},this._prefixes=u,this._parent=d}toName(u){return u instanceof e.Name?u:this.name(u)}name(u){return new e.Name(this._newName(u))}_newName(u){const d=this._names[u]||this._nameGroup(u);return`${u}${d.index++}`}_nameGroup(u){var d,p;if(!((p=(d=this._parent)===null||d===void 0?void 0:d._prefixes)===null||p===void 0)&&p.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}t.Scope=s;class o extends e.Name{constructor(u,d){super(d),this.prefix=u}setValue(u,{property:d,itemIndex:p}){this.value=u,this.scopePath=(0,e._)`.${new e.Name(d)}[${p}]`}}t.ValueScopeName=o;const i=(0,e._)`\n`;class a extends s{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?i:e.nil}}get(){return this._scope}name(u){return new o(u,this._newName(u))}value(u,d){var p;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const N=this.toName(u),{prefix:$}=N,g=(p=d.key)!==null&&p!==void 0?p:d.ref;let R=this._values[$];if(R){const v=R.get(g);if(v)return v}else R=this._values[$]=new Map;R.set(g,N);const y=this._scope[$]||(this._scope[$]=[]),_=y.length;return y[_]=d.ref,N.setValue(d,{property:$,itemIndex:_}),N}getValue(u,d){const p=this._values[u];if(p)return p.get(d)}scopeRefs(u,d=this._values){return this._reduceValues(d,p=>{if(p.scopePath===void 0)throw new Error(`CodeGen: name "${p}" has no value`);return(0,e._)`${u}${p.scopePath}`})}scopeCode(u=this._values,d,p){return this._reduceValues(u,N=>{if(N.value===void 0)throw new Error(`CodeGen: name "${N}" has no value`);return N.value.code},d,p)}_reduceValues(u,d,p={},N){let $=e.nil;for(const g in u){const R=u[g];if(!R)continue;const y=p[g]=p[g]||new Map;R.forEach(_=>{if(y.has(_))return;y.set(_,n.Started);let v=d(_);if(v){const C=this.opts.es5?t.varKinds.var:t.varKinds.const;$=(0,e._)`${$}${C} ${_} = ${v};${this.opts._n}`}else if(v=N==null?void 0:N(_))$=(0,e._)`${$}${v}${this.opts._n}`;else throw new r(_);y.set(_,n.Completed)})}return $}}t.ValueScope=a})(pl);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=Hs,r=pl;var n=Hs;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var s=pl;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class o{optimizeNodes(){return this}optimizeNames(l,h){return this}}class i extends o{constructor(l,h,A){super(),this.varKind=l,this.name=h,this.rhs=A}render({es5:l,_n:h}){const A=l?r.varKinds.var:this.varKind,B=this.rhs===void 0?"":` = ${this.rhs}`;return`${A} ${this.name}${B};`+h}optimizeNames(l,h){if(l[this.name.str])return this.rhs&&(this.rhs=ue(this.rhs,l,h)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(l,h,A){super(),this.lhs=l,this.rhs=h,this.sideEffects=A}render({_n:l}){return`${this.lhs} = ${this.rhs};`+l}optimizeNames(l,h){if(!(this.lhs instanceof e.Name&&!l[this.lhs.str]&&!this.sideEffects))return this.rhs=ue(this.rhs,l,h),this}get names(){const l=this.lhs instanceof e.Name?{}:{...this.lhs.names};return ae(l,this.rhs)}}class c extends a{constructor(l,h,A,B){super(l,A,B),this.op=h}render({_n:l}){return`${this.lhs} ${this.op}= ${this.rhs};`+l}}class u extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`${this.label}:`+l}}class d extends o{constructor(l){super(),this.label=l,this.names={}}render({_n:l}){return`break${this.label?` ${this.label}`:""};`+l}}class p extends o{constructor(l){super(),this.error=l}render({_n:l}){return`throw ${this.error};`+l}get names(){return this.error.names}}class N extends o{constructor(l){super(),this.code=l}render({_n:l}){return`${this.code};`+l}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(l,h){return this.code=ue(this.code,l,h),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class $ extends o{constructor(l=[]){super(),this.nodes=l}render(l){return this.nodes.reduce((h,A)=>h+A.render(l),"")}optimizeNodes(){const{nodes:l}=this;let h=l.length;for(;h--;){const A=l[h].optimizeNodes();Array.isArray(A)?l.splice(h,1,...A):A?l[h]=A:l.splice(h,1)}return l.length>0?this:void 0}optimizeNames(l,h){const{nodes:A}=this;let B=A.length;for(;B--;){const V=A[B];V.optimizeNames(l,h)||($e(l,V.names),A.splice(B,1))}return A.length>0?this:void 0}get names(){return this.nodes.reduce((l,h)=>ie(l,h.names),{})}}class g extends ${render(l){return"{"+l._n+super.render(l)+"}"+l._n}}class R extends ${}class y extends g{}y.kind="else";class _ extends g{constructor(l,h){super(h),this.condition=l}render(l){let h=`if(${this.condition})`+super.render(l);return this.else&&(h+="else "+this.else.render(l)),h}optimizeNodes(){super.optimizeNodes();const l=this.condition;if(l===!0)return this.nodes;let h=this.else;if(h){const A=h.optimizeNodes();h=this.else=Array.isArray(A)?new y(A):A}if(h)return l===!1?h instanceof _?h:h.nodes:this.nodes.length?this:new _(be(l),h instanceof _?[h]:h.nodes);if(!(l===!1||!this.nodes.length))return this}optimizeNames(l,h){var A;if(this.else=(A=this.else)===null||A===void 0?void 0:A.optimizeNames(l,h),!!(super.optimizeNames(l,h)||this.else))return this.condition=ue(this.condition,l,h),this}get names(){const l=super.names;return ae(l,this.condition),this.else&&ie(l,this.else.names),l}}_.kind="if";class v extends g{}v.kind="for";class C extends v{constructor(l){super(),this.iteration=l}render(l){return`for(${this.iteration})`+super.render(l)}optimizeNames(l,h){if(super.optimizeNames(l,h))return this.iteration=ue(this.iteration,l,h),this}get names(){return ie(super.names,this.iteration.names)}}class D extends v{constructor(l,h,A,B){super(),this.varKind=l,this.name=h,this.from=A,this.to=B}render(l){const h=l.es5?r.varKinds.var:this.varKind,{name:A,from:B,to:V}=this;return`for(${h} ${A}=${B}; ${A}<${V}; ${A}++)`+super.render(l)}get names(){const l=ae(super.names,this.from);return ae(l,this.to)}}class L extends v{constructor(l,h,A,B){super(),this.loop=l,this.varKind=h,this.name=A,this.iterable=B}render(l){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(l)}optimizeNames(l,h){if(super.optimizeNames(l,h))return this.iterable=ue(this.iterable,l,h),this}get names(){return ie(super.names,this.iterable.names)}}class ne extends g{constructor(l,h,A){super(),this.name=l,this.args=h,this.async=A}render(l){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(l)}}ne.kind="func";class ce extends ${render(l){return"return "+super.render(l)}}ce.kind="return";class me extends g{render(l){let h="try"+super.render(l);return this.catch&&(h+=this.catch.render(l)),this.finally&&(h+=this.finally.render(l)),h}optimizeNodes(){var l,h;return super.optimizeNodes(),(l=this.catch)===null||l===void 0||l.optimizeNodes(),(h=this.finally)===null||h===void 0||h.optimizeNodes(),this}optimizeNames(l,h){var A,B;return super.optimizeNames(l,h),(A=this.catch)===null||A===void 0||A.optimizeNames(l,h),(B=this.finally)===null||B===void 0||B.optimizeNames(l,h),this}get names(){const l=super.names;return this.catch&&ie(l,this.catch.names),this.finally&&ie(l,this.finally.names),l}}class q extends g{constructor(l){super(),this.error=l}render(l){return`catch(${this.error})`+super.render(l)}}q.kind="catch";class ee extends g{render(l){return"finally"+super.render(l)}}ee.kind="finally";class oe{constructor(l,h={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...h,_n:h.lines?`
`:""},this._extScope=l,this._scope=new r.Scope({parent:l}),this._nodes=[new R]}toString(){return this._root.render(this.opts)}name(l){return this._scope.name(l)}scopeName(l){return this._extScope.name(l)}scopeValue(l,h){const A=this._extScope.value(l,h);return(this._values[A.prefix]||(this._values[A.prefix]=new Set)).add(A),A}getScopeValue(l,h){return this._extScope.getValue(l,h)}scopeRefs(l){return this._extScope.scopeRefs(l,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(l,h,A,B){const V=this._scope.toName(h);return A!==void 0&&B&&(this._constants[V.str]=A),this._leafNode(new i(l,V,A)),V}const(l,h,A){return this._def(r.varKinds.const,l,h,A)}let(l,h,A){return this._def(r.varKinds.let,l,h,A)}var(l,h,A){return this._def(r.varKinds.var,l,h,A)}assign(l,h,A){return this._leafNode(new a(l,h,A))}add(l,h){return this._leafNode(new c(l,t.operators.ADD,h))}code(l){return typeof l=="function"?l():l!==e.nil&&this._leafNode(new N(l)),this}object(...l){const h=["{"];for(const[A,B]of l)h.length>1&&h.push(","),h.push(A),(A!==B||this.opts.es5)&&(h.push(":"),(0,e.addCodeArg)(h,B));return h.push("}"),new e._Code(h)}if(l,h,A){if(this._blockNode(new _(l)),h&&A)this.code(h).else().code(A).endIf();else if(h)this.code(h).endIf();else if(A)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(l){return this._elseNode(new _(l))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(_,y)}_for(l,h){return this._blockNode(l),h&&this.code(h).endFor(),this}for(l,h){return this._for(new C(l),h)}forRange(l,h,A,B,V=this.opts.es5?r.varKinds.var:r.varKinds.let){const H=this._scope.toName(l);return this._for(new D(V,H,h,A),()=>B(H))}forOf(l,h,A,B=r.varKinds.const){const V=this._scope.toName(l);if(this.opts.es5){const H=h instanceof e.Name?h:this.var("_arr",h);return this.forRange("_i",0,(0,e._)`${H}.length`,re=>{this.var(V,(0,e._)`${H}[${re}]`),A(V)})}return this._for(new L("of",B,V,h),()=>A(V))}forIn(l,h,A,B=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(l,(0,e._)`Object.keys(${h})`,A);const V=this._scope.toName(l);return this._for(new L("in",B,V,h),()=>A(V))}endFor(){return this._endBlockNode(v)}label(l){return this._leafNode(new u(l))}break(l){return this._leafNode(new d(l))}return(l){const h=new ce;if(this._blockNode(h),this.code(l),h.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ce)}try(l,h,A){if(!h&&!A)throw new Error('CodeGen: "try" without "catch" and "finally"');const B=new me;if(this._blockNode(B),this.code(l),h){const V=this.name("e");this._currNode=B.catch=new q(V),h(V)}return A&&(this._currNode=B.finally=new ee,this.code(A)),this._endBlockNode(q,ee)}throw(l){return this._leafNode(new p(l))}block(l,h){return this._blockStarts.push(this._nodes.length),l&&this.code(l).endBlock(h),this}endBlock(l){const h=this._blockStarts.pop();if(h===void 0)throw new Error("CodeGen: not in self-balancing block");const A=this._nodes.length-h;if(A<0||l!==void 0&&A!==l)throw new Error(`CodeGen: wrong number of nodes: ${A} vs ${l} expected`);return this._nodes.length=h,this}func(l,h=e.nil,A,B){return this._blockNode(new ne(l,h,A)),B&&this.code(B).endFunc(),this}endFunc(){return this._endBlockNode(ne)}optimize(l=1){for(;l-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(l){return this._currNode.nodes.push(l),this}_blockNode(l){this._currNode.nodes.push(l),this._nodes.push(l)}_endBlockNode(l,h){const A=this._currNode;if(A instanceof l||h&&A instanceof h)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${h?`${l.kind}/${h.kind}`:l.kind}"`)}_elseNode(l){const h=this._currNode;if(!(h instanceof _))throw new Error('CodeGen: "else" without "if"');return this._currNode=h.else=l,this}get _root(){return this._nodes[0]}get _currNode(){const l=this._nodes;return l[l.length-1]}set _currNode(l){const h=this._nodes;h[h.length-1]=l}}t.CodeGen=oe;function ie(m,l){for(const h in l)m[h]=(m[h]||0)+(l[h]||0);return m}function ae(m,l){return l instanceof e._CodeOrName?ie(m,l.names):m}function ue(m,l,h){if(m instanceof e.Name)return A(m);if(!B(m))return m;return new e._Code(m._items.reduce((V,H)=>(H instanceof e.Name&&(H=A(H)),H instanceof e._Code?V.push(...H._items):V.push(H),V),[]));function A(V){const H=h[V.str];return H===void 0||l[V.str]!==1?V:(delete l[V.str],H)}function B(V){return V instanceof e._Code&&V._items.some(H=>H instanceof e.Name&&l[H.str]===1&&h[H.str]!==void 0)}}function $e(m,l){for(const h in l)m[h]=(m[h]||0)-(l[h]||0)}function be(m){return typeof m=="boolean"||typeof m=="number"||m===null?!m:(0,e._)`!${w(m)}`}t.not=be;const Fe=f(t.operators.AND);function Ye(...m){return m.reduce(Fe)}t.and=Ye;const I=f(t.operators.OR);function b(...m){return m.reduce(I)}t.or=b;function f(m){return(l,h)=>l===e.nil?h:h===e.nil?l:(0,e._)`${w(l)} ${m} ${w(h)}`}function w(m){return m instanceof e.Name?m:(0,e._)`(${m})`}})(Le);var pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.checkStrictMode=pe.getErrorPath=pe.Type=pe.useFunc=pe.setEvaluated=pe.evaluatedPropsToName=pe.mergeEvaluated=pe.eachItem=pe.unescapeJsonPointer=pe.escapeJsonPointer=pe.escapeFragment=pe.unescapeFragment=pe.schemaRefOrVal=pe.schemaHasRulesButRef=pe.schemaHasRules=pe.checkUnknownRules=pe.alwaysValidSchema=pe.toHash=void 0;const rt=Le,dT=Hs;function fT(t){const e={};for(const r of t)e[r]=!0;return e}pe.toHash=fT;function hT(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(P_(t,e),!C_(e,t.self.RULES.all))}pe.alwaysValidSchema=hT;function P_(t,e=t.schema){const{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;const s=n.RULES.keywords;for(const o in e)s[o]||j_(t,`unknown keyword: "${o}"`)}pe.checkUnknownRules=P_;function C_(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(e[r])return!0;return!1}pe.schemaHasRules=C_;function pT(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}pe.schemaHasRulesButRef=pT;function _T({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,rt._)`${r}`}return(0,rt._)`${t}${e}${(0,rt.getProperty)(n)}`}pe.schemaRefOrVal=_T;function mT(t){return M_(decodeURIComponent(t))}pe.unescapeFragment=mT;function yT(t){return encodeURIComponent(Cc(t))}pe.escapeFragment=yT;function Cc(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}pe.escapeJsonPointer=Cc;function M_(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}pe.unescapeJsonPointer=M_;function ET(t,e){if(Array.isArray(t))for(const r of t)e(r);else e(t)}pe.eachItem=ET;function ff({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,o,i,a)=>{const c=i===void 0?o:i instanceof rt.Name?(o instanceof rt.Name?t(s,o,i):e(s,o,i),i):o instanceof rt.Name?(e(s,i,o),o):r(o,i);return a===rt.Name&&!(c instanceof rt.Name)?n(s,c):c}}pe.mergeEvaluated={props:ff({mergeNames:(t,e,r)=>t.if((0,rt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,rt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,rt._)`${r} || {}`).code((0,rt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,rt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,rt._)`${r} || {}`),Mc(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:D_}),items:ff({mergeNames:(t,e,r)=>t.if((0,rt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,rt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,rt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,rt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function D_(t,e){if(e===!0)return t.var("props",!0);const r=t.var("props",(0,rt._)`{}`);return e!==void 0&&Mc(t,r,e),r}pe.evaluatedPropsToName=D_;function Mc(t,e,r){Object.keys(r).forEach(n=>t.assign((0,rt._)`${e}${(0,rt.getProperty)(n)}`,!0))}pe.setEvaluated=Mc;const hf={};function gT(t,e){return t.scopeValue("func",{ref:e,code:hf[e.code]||(hf[e.code]=new dT._Code(e.code))})}pe.useFunc=gT;var _l;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(_l||(pe.Type=_l={}));function OT(t,e,r){if(t instanceof rt.Name){const n=e===_l.Num;return r?n?(0,rt._)`"[" + ${t} + "]"`:(0,rt._)`"['" + ${t} + "']"`:n?(0,rt._)`"/" + ${t}`:(0,rt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,rt.getProperty)(t).toString():"/"+Cc(t)}pe.getErrorPath=OT;function j_(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}pe.checkStrictMode=j_;var wr={};Object.defineProperty(wr,"__esModule",{value:!0});const Tt=Le,vT={data:new Tt.Name("data"),valCxt:new Tt.Name("valCxt"),instancePath:new Tt.Name("instancePath"),parentData:new Tt.Name("parentData"),parentDataProperty:new Tt.Name("parentDataProperty"),rootData:new Tt.Name("rootData"),dynamicAnchors:new Tt.Name("dynamicAnchors"),vErrors:new Tt.Name("vErrors"),errors:new Tt.Name("errors"),this:new Tt.Name("this"),self:new Tt.Name("self"),scope:new Tt.Name("scope"),json:new Tt.Name("json"),jsonPos:new Tt.Name("jsonPos"),jsonLen:new Tt.Name("jsonLen"),jsonPart:new Tt.Name("jsonPart")};wr.default=vT;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=Le,r=pe,n=wr;t.keywordError={message:({keyword:y})=>(0,e.str)`must pass "${y}" keyword validation`},t.keyword$DataError={message:({keyword:y,schemaType:_})=>_?(0,e.str)`"${y}" keyword must be ${_} ($data)`:(0,e.str)`"${y}" keyword is invalid ($data)`};function s(y,_=t.keywordError,v,C){const{it:D}=y,{gen:L,compositeRule:ne,allErrors:ce}=D,me=p(y,_,v);C??(ne||ce)?c(L,me):u(D,(0,e._)`[${me}]`)}t.reportError=s;function o(y,_=t.keywordError,v){const{it:C}=y,{gen:D,compositeRule:L,allErrors:ne}=C,ce=p(y,_,v);c(D,ce),L||ne||u(C,n.default.vErrors)}t.reportExtraError=o;function i(y,_){y.assign(n.default.errors,_),y.if((0,e._)`${n.default.vErrors} !== null`,()=>y.if(_,()=>y.assign((0,e._)`${n.default.vErrors}.length`,_),()=>y.assign(n.default.vErrors,null)))}t.resetErrorsCount=i;function a({gen:y,keyword:_,schemaValue:v,data:C,errsCount:D,it:L}){if(D===void 0)throw new Error("ajv implementation error");const ne=y.name("err");y.forRange("i",D,n.default.errors,ce=>{y.const(ne,(0,e._)`${n.default.vErrors}[${ce}]`),y.if((0,e._)`${ne}.instancePath === undefined`,()=>y.assign((0,e._)`${ne}.instancePath`,(0,e.strConcat)(n.default.instancePath,L.errorPath))),y.assign((0,e._)`${ne}.schemaPath`,(0,e.str)`${L.errSchemaPath}/${_}`),L.opts.verbose&&(y.assign((0,e._)`${ne}.schema`,v),y.assign((0,e._)`${ne}.data`,C))})}t.extendErrors=a;function c(y,_){const v=y.const("err",_);y.if((0,e._)`${n.default.vErrors} === null`,()=>y.assign(n.default.vErrors,(0,e._)`[${v}]`),(0,e._)`${n.default.vErrors}.push(${v})`),y.code((0,e._)`${n.default.errors}++`)}function u(y,_){const{gen:v,validateName:C,schemaEnv:D}=y;D.$async?v.throw((0,e._)`new ${y.ValidationError}(${_})`):(v.assign((0,e._)`${C}.errors`,_),v.return(!1))}const d={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function p(y,_,v){const{createErrors:C}=y.it;return C===!1?(0,e._)`{}`:N(y,_,v)}function N(y,_,v={}){const{gen:C,it:D}=y,L=[$(D,v),g(y,v)];return R(y,_,L),C.object(...L)}function $({errorPath:y},{instancePath:_}){const v=_?(0,e.str)`${y}${(0,r.getErrorPath)(_,r.Type.Str)}`:y;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,v)]}function g({keyword:y,it:{errSchemaPath:_}},{schemaPath:v,parentSchema:C}){let D=C?_:(0,e.str)`${_}/${y}`;return v&&(D=(0,e.str)`${D}${(0,r.getErrorPath)(v,r.Type.Str)}`),[d.schemaPath,D]}function R(y,{params:_,message:v},C){const{keyword:D,data:L,schemaValue:ne,it:ce}=y,{opts:me,propertyName:q,topSchemaRef:ee,schemaPath:oe}=ce;C.push([d.keyword,D],[d.params,typeof _=="function"?_(y):_||(0,e._)`{}`]),me.messages&&C.push([d.message,typeof v=="function"?v(y):v]),me.verbose&&C.push([d.schema,ne],[d.parentSchema,(0,e._)`${ee}${oe}`],[n.default.data,L]),q&&C.push([d.propertyName,q])}})(oo);Object.defineProperty(rs,"__esModule",{value:!0});rs.boolOrEmptySchema=rs.topBoolOrEmptySchema=void 0;const RT=oo,$T=Le,wT=wr,NT={message:"boolean schema is false"};function bT(t){const{gen:e,schema:r,validateName:n}=t;r===!1?L_(t,!1):typeof r=="object"&&r.$async===!0?e.return(wT.default.data):(e.assign((0,$T._)`${n}.errors`,null),e.return(!0))}rs.topBoolOrEmptySchema=bT;function AT(t,e){const{gen:r,schema:n}=t;n===!1?(r.var(e,!1),L_(t)):r.var(e,!0)}rs.boolOrEmptySchema=AT;function L_(t,e){const{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,RT.reportError)(s,NT,void 0,e)}var yt={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.getRules=Tn.isJSONType=void 0;const TT=["string","number","integer","boolean","null","object","array"],IT=new Set(TT);function ST(t){return typeof t=="string"&&IT.has(t)}Tn.isJSONType=ST;function PT(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Tn.getRules=PT;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.shouldUseRule=Mr.shouldUseGroup=Mr.schemaHasRulesForType=void 0;function CT({schema:t,self:e},r){const n=e.RULES.types[r];return n&&n!==!0&&F_(t,n)}Mr.schemaHasRulesForType=CT;function F_(t,e){return e.rules.some(r=>k_(t,r))}Mr.shouldUseGroup=F_;function k_(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Mr.shouldUseRule=k_;Object.defineProperty(yt,"__esModule",{value:!0});yt.reportTypeError=yt.checkDataTypes=yt.checkDataType=yt.coerceAndCheckDataType=yt.getJSONTypes=yt.getSchemaTypes=yt.DataType=void 0;const MT=Tn,DT=Mr,jT=oo,De=Le,B_=pe;var Yn;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Yn||(yt.DataType=Yn={}));function LT(t){const e=U_(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}yt.getSchemaTypes=LT;function U_(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(MT.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}yt.getJSONTypes=U_;function FT(t,e){const{gen:r,data:n,opts:s}=t,o=kT(e,s.coerceTypes),i=e.length>0&&!(o.length===0&&e.length===1&&(0,DT.schemaHasRulesForType)(t,e[0]));if(i){const a=Dc(e,n,s.strictNumbers,Yn.Wrong);r.if(a,()=>{o.length?BT(t,e,o):jc(t)})}return i}yt.coerceAndCheckDataType=FT;const x_=new Set(["string","number","integer","boolean","null"]);function kT(t,e){return e?t.filter(r=>x_.has(r)||e==="array"&&r==="array"):[]}function BT(t,e,r){const{gen:n,data:s,opts:o}=t,i=n.let("dataType",(0,De._)`typeof ${s}`),a=n.let("coerced",(0,De._)`undefined`);o.coerceTypes==="array"&&n.if((0,De._)`${i} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,De._)`${s}[0]`).assign(i,(0,De._)`typeof ${s}`).if(Dc(e,s,o.strictNumbers),()=>n.assign(a,s))),n.if((0,De._)`${a} !== undefined`);for(const u of r)(x_.has(u)||u==="array"&&o.coerceTypes==="array")&&c(u);n.else(),jc(t),n.endIf(),n.if((0,De._)`${a} !== undefined`,()=>{n.assign(s,a),UT(t,a)});function c(u){switch(u){case"string":n.elseIf((0,De._)`${i} == "number" || ${i} == "boolean"`).assign(a,(0,De._)`"" + ${s}`).elseIf((0,De._)`${s} === null`).assign(a,(0,De._)`""`);return;case"number":n.elseIf((0,De._)`${i} == "boolean" || ${s} === null
              || (${i} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,De._)`+${s}`);return;case"integer":n.elseIf((0,De._)`${i} === "boolean" || ${s} === null
              || (${i} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,De._)`+${s}`);return;case"boolean":n.elseIf((0,De._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,De._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,De._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,De._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${s} === null`).assign(a,(0,De._)`[${s}]`)}}}function UT({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,De._)`${e} !== undefined`,()=>t.assign((0,De._)`${e}[${r}]`,n))}function ml(t,e,r,n=Yn.Correct){const s=n===Yn.Correct?De.operators.EQ:De.operators.NEQ;let o;switch(t){case"null":return(0,De._)`${e} ${s} null`;case"array":o=(0,De._)`Array.isArray(${e})`;break;case"object":o=(0,De._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=i((0,De._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=i();break;default:return(0,De._)`typeof ${e} ${s} ${t}`}return n===Yn.Correct?o:(0,De.not)(o);function i(a=De.nil){return(0,De.and)((0,De._)`typeof ${e} == "number"`,a,r?(0,De._)`isFinite(${e})`:De.nil)}}yt.checkDataType=ml;function Dc(t,e,r,n){if(t.length===1)return ml(t[0],e,r,n);let s;const o=(0,B_.toHash)(t);if(o.array&&o.object){const i=(0,De._)`typeof ${e} != "object"`;s=o.null?i:(0,De._)`!${e} || ${i}`,delete o.null,delete o.array,delete o.object}else s=De.nil;o.number&&delete o.integer;for(const i in o)s=(0,De.and)(s,ml(i,e,r,n));return s}yt.checkDataTypes=Dc;const xT={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,De._)`{type: ${t}}`:(0,De._)`{type: ${e}}`};function jc(t){const e=GT(t);(0,jT.reportError)(e,xT)}yt.reportTypeError=jc;function GT(t){const{gen:e,data:r,schema:n}=t,s=(0,B_.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.assignDefaults=void 0;const Vn=Le,VT=pe;function HT(t,e){const{properties:r,items:n}=t.schema;if(e==="object"&&r)for(const s in r)pf(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,o)=>pf(t,o,s.default))}Yi.assignDefaults=HT;function pf(t,e,r){const{gen:n,compositeRule:s,data:o,opts:i}=t;if(r===void 0)return;const a=(0,Vn._)`${o}${(0,Vn.getProperty)(e)}`;if(s){(0,VT.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,Vn._)`${a} === undefined`;i.useDefaults==="empty"&&(c=(0,Vn._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,Vn._)`${a} = ${(0,Vn.stringify)(r)}`)}var Or={},xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.validateUnion=xe.validateArray=xe.usePattern=xe.callValidateCode=xe.schemaProperties=xe.allSchemaProperties=xe.noPropertyInData=xe.propertyInData=xe.isOwnProperty=xe.hasPropFunc=xe.reportMissingProp=xe.checkMissingProp=xe.checkReportMissingProp=void 0;const lt=Le,Lc=pe,Vr=wr,KT=pe;function qT(t,e){const{gen:r,data:n,it:s}=t;r.if(kc(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,lt._)`${e}`},!0),t.error()})}xe.checkReportMissingProp=qT;function WT({gen:t,data:e,it:{opts:r}},n,s){return(0,lt.or)(...n.map(o=>(0,lt.and)(kc(t,e,o,r.ownProperties),(0,lt._)`${s} = ${o}`)))}xe.checkMissingProp=WT;function JT(t,e){t.setParams({missingProperty:e},!0),t.error()}xe.reportMissingProp=JT;function G_(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,lt._)`Object.prototype.hasOwnProperty`})}xe.hasPropFunc=G_;function Fc(t,e,r){return(0,lt._)`${G_(t)}.call(${e}, ${r})`}xe.isOwnProperty=Fc;function zT(t,e,r,n){const s=(0,lt._)`${e}${(0,lt.getProperty)(r)} !== undefined`;return n?(0,lt._)`${s} && ${Fc(t,e,r)}`:s}xe.propertyInData=zT;function kc(t,e,r,n){const s=(0,lt._)`${e}${(0,lt.getProperty)(r)} === undefined`;return n?(0,lt.or)(s,(0,lt.not)(Fc(t,e,r))):s}xe.noPropertyInData=kc;function V_(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}xe.allSchemaProperties=V_;function QT(t,e){return V_(e).filter(r=>!(0,Lc.alwaysValidSchema)(t,e[r]))}xe.schemaProperties=QT;function YT({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:o},it:i},a,c,u){const d=u?(0,lt._)`${t}, ${e}, ${n}${s}`:e,p=[[Vr.default.instancePath,(0,lt.strConcat)(Vr.default.instancePath,o)],[Vr.default.parentData,i.parentData],[Vr.default.parentDataProperty,i.parentDataProperty],[Vr.default.rootData,Vr.default.rootData]];i.opts.dynamicRef&&p.push([Vr.default.dynamicAnchors,Vr.default.dynamicAnchors]);const N=(0,lt._)`${d}, ${r.object(...p)}`;return c!==lt.nil?(0,lt._)`${a}.call(${c}, ${N})`:(0,lt._)`${a}(${N})`}xe.callValidateCode=YT;const XT=(0,lt._)`new RegExp`;function ZT({gen:t,it:{opts:e}},r){const n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,o=s(r,n);return t.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,lt._)`${s.code==="new RegExp"?XT:(0,KT.useFunc)(t,s)}(${r}, ${n})`})}xe.usePattern=ZT;function eI(t){const{gen:e,data:r,keyword:n,it:s}=t,o=e.name("valid");if(s.allErrors){const a=e.let("valid",!0);return i(()=>e.assign(a,!1)),a}return e.var(o,!0),i(()=>e.break()),o;function i(a){const c=e.const("len",(0,lt._)`${r}.length`);e.forRange("i",0,c,u=>{t.subschema({keyword:n,dataProp:u,dataPropType:Lc.Type.Num},o),e.if((0,lt.not)(o),a)})}}xe.validateArray=eI;function tI(t){const{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,Lc.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;const i=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,u)=>{const d=t.subschema({keyword:n,schemaProp:u,compositeRule:!0},a);e.assign(i,(0,lt._)`${i} || ${a}`),t.mergeValidEvaluated(d,a)||e.if((0,lt.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}xe.validateUnion=tI;Object.defineProperty(Or,"__esModule",{value:!0});Or.validateKeywordUsage=Or.validSchemaType=Or.funcKeywordCode=Or.macroKeywordCode=void 0;const Pt=Le,En=wr,rI=xe,nI=oo;function sI(t,e){const{gen:r,keyword:n,schema:s,parentSchema:o,it:i}=t,a=e.macro.call(i.self,s,o,i),c=H_(r,n,a);i.opts.validateSchema!==!1&&i.self.validateSchema(a,!0);const u=r.name("valid");t.subschema({schema:a,schemaPath:Pt.nil,errSchemaPath:`${i.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}Or.macroKeywordCode=sI;function oI(t,e){var r;const{gen:n,keyword:s,schema:o,parentSchema:i,$data:a,it:c}=t;aI(c,e);const u=!a&&e.compile?e.compile.call(c.self,o,i,c):e.validate,d=H_(n,s,u),p=n.let("valid");t.block$data(p,N),t.ok((r=e.valid)!==null&&r!==void 0?r:p);function N(){if(e.errors===!1)R(),e.modifying&&_f(t),y(()=>t.error());else{const _=e.async?$():g();e.modifying&&_f(t),y(()=>iI(t,_))}}function $(){const _=n.let("ruleErrs",null);return n.try(()=>R((0,Pt._)`await `),v=>n.assign(p,!1).if((0,Pt._)`${v} instanceof ${c.ValidationError}`,()=>n.assign(_,(0,Pt._)`${v}.errors`),()=>n.throw(v))),_}function g(){const _=(0,Pt._)`${d}.errors`;return n.assign(_,null),R(Pt.nil),_}function R(_=e.async?(0,Pt._)`await `:Pt.nil){const v=c.opts.passContext?En.default.this:En.default.self,C=!("compile"in e&&!a||e.schema===!1);n.assign(p,(0,Pt._)`${_}${(0,rI.callValidateCode)(t,d,v,C)}`,e.modifying)}function y(_){var v;n.if((0,Pt.not)((v=e.valid)!==null&&v!==void 0?v:p),_)}}Or.funcKeywordCode=oI;function _f(t){const{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Pt._)`${n.parentData}[${n.parentDataProperty}]`))}function iI(t,e){const{gen:r}=t;r.if((0,Pt._)`Array.isArray(${e})`,()=>{r.assign(En.default.vErrors,(0,Pt._)`${En.default.vErrors} === null ? ${e} : ${En.default.vErrors}.concat(${e})`).assign(En.default.errors,(0,Pt._)`${En.default.vErrors}.length`),(0,nI.extendErrors)(t)},()=>t.error())}function aI({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function H_(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Pt.stringify)(r)})}function lI(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Or.validSchemaType=lI;function cI({schema:t,opts:e,self:r,errSchemaPath:n},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const i=s.dependencies;if(i!=null&&i.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${o}: ${i.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[o])){const c=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}Or.validateKeywordUsage=cI;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.extendSubschemaMode=rn.extendSubschemaData=rn.getSubschema=void 0;const Er=Le,K_=pe;function uI(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:o,topSchemaRef:i}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Er._)`${t.schemaPath}${(0,Er.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Er._)`${t.schemaPath}${(0,Er.getProperty)(e)}${(0,Er.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,K_.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||o===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:i,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}rn.getSubschema=uI;function dI(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:o,propertyName:i}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=e;if(r!==void 0){const{errorPath:u,dataPathArr:d,opts:p}=e,N=a.let("data",(0,Er._)`${e.data}${(0,Er.getProperty)(r)}`,!0);c(N),t.errorPath=(0,Er.str)`${u}${(0,K_.getErrorPath)(r,n,p.jsPropertySyntax)}`,t.parentDataProperty=(0,Er._)`${r}`,t.dataPathArr=[...d,t.parentDataProperty]}if(s!==void 0){const u=s instanceof Er.Name?s:a.let("data",s,!0);c(u),i!==void 0&&(t.propertyName=i)}o&&(t.dataTypes=o);function c(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}rn.extendSubschemaData=dI;function fI(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:o}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=r}rn.extendSubschemaMode=fI;var Nt={},q_={exports:{}},Xr=q_.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Zo(e,n,s,t,"",t)};Xr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Xr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Xr.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Xr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Zo(t,e,r,n,s,o,i,a,c,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,o,i,a,c,u);for(var d in n){var p=n[d];if(Array.isArray(p)){if(d in Xr.arrayKeywords)for(var N=0;N<p.length;N++)Zo(t,e,r,p[N],s+"/"+d+"/"+N,o,s,d,n,N)}else if(d in Xr.propsKeywords){if(p&&typeof p=="object")for(var $ in p)Zo(t,e,r,p[$],s+"/"+d+"/"+hI($),o,s,d,n,$)}else(d in Xr.keywords||t.allKeys&&!(d in Xr.skipKeywords))&&Zo(t,e,r,p,s+"/"+d,o,s,d,n)}r(n,s,o,i,a,c,u)}}function hI(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var pI=q_.exports;Object.defineProperty(Nt,"__esModule",{value:!0});Nt.getSchemaRefs=Nt.resolveUrl=Nt.normalizeId=Nt._getFullPath=Nt.getFullPath=Nt.inlineRef=void 0;const _I=pe,mI=qi,yI=pI,EI=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function gI(t,e=!0){return typeof t=="boolean"?!0:e===!0?!yl(t):e?W_(t)<=e:!1}Nt.inlineRef=gI;const OI=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function yl(t){for(const e in t){if(OI.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(yl)||typeof r=="object"&&yl(r))return!0}return!1}function W_(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!EI.has(r)&&(typeof t[r]=="object"&&(0,_I.eachItem)(t[r],n=>e+=W_(n)),e===1/0))return 1/0}return e}function J_(t,e="",r){r!==!1&&(e=Xn(e));const n=t.parse(e);return z_(t,n)}Nt.getFullPath=J_;function z_(t,e){return t.serialize(e).split("#")[0]+"#"}Nt._getFullPath=z_;const vI=/#\/?$/;function Xn(t){return t?t.replace(vI,""):""}Nt.normalizeId=Xn;function RI(t,e,r){return r=Xn(r),t.resolve(e,r)}Nt.resolveUrl=RI;const $I=/^[a-z_][-a-z0-9._]*$/i;function wI(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=Xn(t[r]||e),o={"":s},i=J_(n,s,!1),a={},c=new Set;return yI(t,{allKeys:!0},(p,N,$,g)=>{if(g===void 0)return;const R=i+N;let y=o[g];typeof p[r]=="string"&&(y=_.call(this,p[r])),v.call(this,p.$anchor),v.call(this,p.$dynamicAnchor),o[N]=y;function _(C){const D=this.opts.uriResolver.resolve;if(C=Xn(y?D(y,C):C),c.has(C))throw d(C);c.add(C);let L=this.refs[C];return typeof L=="string"&&(L=this.refs[L]),typeof L=="object"?u(p,L.schema,C):C!==Xn(R)&&(C[0]==="#"?(u(p,a[C],C),a[C]=p):this.refs[C]=R),C}function v(C){if(typeof C=="string"){if(!$I.test(C))throw new Error(`invalid anchor "${C}"`);_.call(this,`#${C}`)}}}),a;function u(p,N,$){if(N!==void 0&&!mI(p,N))throw d($)}function d(p){return new Error(`reference "${p}" resolves to more than one schema`)}}Nt.getSchemaRefs=wI;Object.defineProperty(pr,"__esModule",{value:!0});pr.getData=pr.KeywordCxt=pr.validateFunctionCode=void 0;const Q_=rs,mf=yt,Bc=Mr,pi=yt,NI=Yi,Ms=Or,Sa=rn,ve=Le,Se=wr,bI=Nt,Dr=pe,Rs=oo;function AI(t){if(Z_(t)&&(em(t),X_(t))){SI(t);return}Y_(t,()=>(0,Q_.topBoolOrEmptySchema)(t))}pr.validateFunctionCode=AI;function Y_({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},o){s.code.es5?t.func(e,(0,ve._)`${Se.default.data}, ${Se.default.valCxt}`,n.$async,()=>{t.code((0,ve._)`"use strict"; ${yf(r,s)}`),II(t,s),t.code(o)}):t.func(e,(0,ve._)`${Se.default.data}, ${TI(s)}`,n.$async,()=>t.code(yf(r,s)).code(o))}function TI(t){return(0,ve._)`{${Se.default.instancePath}="", ${Se.default.parentData}, ${Se.default.parentDataProperty}, ${Se.default.rootData}=${Se.default.data}${t.dynamicRef?(0,ve._)`, ${Se.default.dynamicAnchors}={}`:ve.nil}}={}`}function II(t,e){t.if(Se.default.valCxt,()=>{t.var(Se.default.instancePath,(0,ve._)`${Se.default.valCxt}.${Se.default.instancePath}`),t.var(Se.default.parentData,(0,ve._)`${Se.default.valCxt}.${Se.default.parentData}`),t.var(Se.default.parentDataProperty,(0,ve._)`${Se.default.valCxt}.${Se.default.parentDataProperty}`),t.var(Se.default.rootData,(0,ve._)`${Se.default.valCxt}.${Se.default.rootData}`),e.dynamicRef&&t.var(Se.default.dynamicAnchors,(0,ve._)`${Se.default.valCxt}.${Se.default.dynamicAnchors}`)},()=>{t.var(Se.default.instancePath,(0,ve._)`""`),t.var(Se.default.parentData,(0,ve._)`undefined`),t.var(Se.default.parentDataProperty,(0,ve._)`undefined`),t.var(Se.default.rootData,Se.default.data),e.dynamicRef&&t.var(Se.default.dynamicAnchors,(0,ve._)`{}`)})}function SI(t){const{schema:e,opts:r,gen:n}=t;Y_(t,()=>{r.$comment&&e.$comment&&rm(t),jI(t),n.let(Se.default.vErrors,null),n.let(Se.default.errors,0),r.unevaluated&&PI(t),tm(t),kI(t)})}function PI(t){const{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,ve._)`${r}.evaluated`),e.if((0,ve._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,ve._)`${t.evaluated}.props`,(0,ve._)`undefined`)),e.if((0,ve._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,ve._)`${t.evaluated}.items`,(0,ve._)`undefined`))}function yf(t,e){const r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,ve._)`/*# sourceURL=${r} */`:ve.nil}function CI(t,e){if(Z_(t)&&(em(t),X_(t))){MI(t,e);return}(0,Q_.boolOrEmptySchema)(t,e)}function X_({schema:t,self:e}){if(typeof t=="boolean")return!t;for(const r in t)if(e.RULES.all[r])return!0;return!1}function Z_(t){return typeof t.schema!="boolean"}function MI(t,e){const{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&rm(t),LI(t),FI(t);const o=n.const("_errs",Se.default.errors);tm(t,o),n.var(e,(0,ve._)`${o} === ${Se.default.errors}`)}function em(t){(0,Dr.checkUnknownRules)(t),DI(t)}function tm(t,e){if(t.opts.jtd)return Ef(t,[],!1,e);const r=(0,mf.getSchemaTypes)(t.schema),n=(0,mf.coerceAndCheckDataType)(t,r);Ef(t,r,!n,e)}function DI(t){const{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Dr.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function jI(t){const{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Dr.checkStrictMode)(t,"default is ignored in the schema root")}function LI(t){const e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,bI.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function FI(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function rm({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){const o=r.$comment;if(s.$comment===!0)t.code((0,ve._)`${Se.default.self}.logger.log(${o})`);else if(typeof s.$comment=="function"){const i=(0,ve.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,ve._)`${Se.default.self}.opts.$comment(${o}, ${i}, ${a}.schema)`)}}function kI(t){const{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:o}=t;r.$async?e.if((0,ve._)`${Se.default.errors} === 0`,()=>e.return(Se.default.data),()=>e.throw((0,ve._)`new ${s}(${Se.default.vErrors})`)):(e.assign((0,ve._)`${n}.errors`,Se.default.vErrors),o.unevaluated&&BI(t),e.return((0,ve._)`${Se.default.errors} === 0`))}function BI({gen:t,evaluated:e,props:r,items:n}){r instanceof ve.Name&&t.assign((0,ve._)`${e}.props`,r),n instanceof ve.Name&&t.assign((0,ve._)`${e}.items`,n)}function Ef(t,e,r,n){const{gen:s,schema:o,data:i,allErrors:a,opts:c,self:u}=t,{RULES:d}=u;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,Dr.schemaHasRulesButRef)(o,d))){s.block(()=>om(t,"$ref",d.all.$ref.definition));return}c.jtd||UI(t,e),s.block(()=>{for(const N of d.rules)p(N);p(d.post)});function p(N){(0,Bc.shouldUseGroup)(o,N)&&(N.type?(s.if((0,pi.checkDataType)(N.type,i,c.strictNumbers)),gf(t,N),e.length===1&&e[0]===N.type&&r&&(s.else(),(0,pi.reportTypeError)(t)),s.endIf()):gf(t,N),a||s.if((0,ve._)`${Se.default.errors} === ${n||0}`))}}function gf(t,e){const{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,NI.assignDefaults)(t,e.type),r.block(()=>{for(const o of e.rules)(0,Bc.shouldUseRule)(n,o)&&om(t,o.keyword,o.definition,e.type)})}function UI(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(xI(t,e),t.opts.allowUnionTypes||GI(t,e),VI(t,t.dataTypes))}function xI(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{nm(t.dataTypes,r)||Uc(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),KI(t,e)}}function GI(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Uc(t,"use allowUnionTypes to allow union type keyword")}function VI(t,e){const r=t.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,Bc.shouldUseRule)(t.schema,s)){const{type:o}=s.definition;o.length&&!o.some(i=>HI(e,i))&&Uc(t,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function HI(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function nm(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function KI(t,e){const r=[];for(const n of t.dataTypes)nm(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function Uc(t,e){const r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Dr.checkStrictMode)(t,e,t.opts.strictTypes)}class sm{constructor(e,r,n){if((0,Ms.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Dr.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",im(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Ms.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Se.default.errors))}result(e,r,n){this.failResult((0,ve.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,ve.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:r}=this;this.fail((0,ve._)`${r} !== undefined && (${(0,ve.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?Rs.reportExtraError:Rs.reportError)(this,this.def.error,r)}$dataError(){(0,Rs.reportError)(this,this.def.$dataError||Rs.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Rs.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=ve.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=ve.nil,r=ve.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:o,def:i}=this;n.if((0,ve.or)((0,ve._)`${s} === undefined`,r)),e!==ve.nil&&n.assign(e,!0),(o.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==ve.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:r,schemaType:n,def:s,it:o}=this;return(0,ve.or)(i(),a());function i(){if(n.length){if(!(r instanceof ve.Name))throw new Error("ajv implementation error");const c=Array.isArray(n)?n:[n];return(0,ve._)`${(0,pi.checkDataTypes)(c,r,o.opts.strictNumbers,pi.DataType.Wrong)}`}return ve.nil}function a(){if(s.validateSchema){const c=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,ve._)`!${c}(${r})`}return ve.nil}}subschema(e,r){const n=(0,Sa.getSubschema)(this.it,e);(0,Sa.extendSubschemaData)(n,this.it,e),(0,Sa.extendSubschemaMode)(n,e);const s={...this.it,...n,items:void 0,props:void 0};return CI(s,r),s}mergeEvaluated(e,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Dr.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Dr.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,ve.Name)),!0}}pr.KeywordCxt=sm;function om(t,e,r,n){const s=new sm(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Ms.funcKeywordCode)(s,r):"macro"in r?(0,Ms.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Ms.funcKeywordCode)(s,r)}const qI=/^\/(?:[^~]|~0|~1)*$/,WI=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function im(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,o;if(t==="")return Se.default.rootData;if(t[0]==="/"){if(!qI.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,o=Se.default.rootData}else{const u=WI.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);const d=+u[1];if(s=u[2],s==="#"){if(d>=e)throw new Error(c("property/index",d));return n[e-d]}if(d>e)throw new Error(c("data",d));if(o=r[e-d],!s)return o}let i=o;const a=s.split("/");for(const u of a)u&&(o=(0,ve._)`${o}${(0,ve.getProperty)((0,Dr.unescapeJsonPointer)(u))}`,i=(0,ve._)`${i} && ${o}`);return i;function c(u,d){return`Cannot access ${u} ${d} levels up, current level is ${e}`}}pr.getData=im;var io={};Object.defineProperty(io,"__esModule",{value:!0});let JI=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};io.default=JI;var ao={};Object.defineProperty(ao,"__esModule",{value:!0});const Pa=Nt;class zI extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Pa.resolveUrl)(e,r,n),this.missingSchema=(0,Pa.normalizeId)((0,Pa.getFullPath)(e,this.missingRef))}}ao.default=zI;var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.resolveSchema=Bt.getCompilingSchema=Bt.resolveRef=Bt.compileSchema=Bt.SchemaEnv=void 0;const lr=Le,QI=io,pn=wr,fr=Nt,Of=pe,YI=pr;class Xi{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,fr.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}Bt.SchemaEnv=Xi;function xc(t){const e=am.call(this,t);if(e)return e;const r=(0,fr.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,i=new lr.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o});let a;t.$async&&(a=i.scopeValue("Error",{ref:QI.default,code:(0,lr._)`require("ajv/dist/runtime/validation_error").default`}));const c=i.scopeName("validate");t.validateName=c;const u={gen:i,allErrors:this.opts.allErrors,data:pn.default.data,parentData:pn.default.parentData,parentDataProperty:pn.default.parentDataProperty,dataNames:[pn.default.data],dataPathArr:[lr.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,lr.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:lr.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,lr._)`""`,opts:this.opts,self:this};let d;try{this._compilations.add(t),(0,YI.validateFunctionCode)(u),i.optimize(this.opts.code.optimize);const p=i.toString();d=`${i.scopeRefs(pn.default.scope)}return ${p}`,this.opts.code.process&&(d=this.opts.code.process(d,t));const $=new Function(`${pn.default.self}`,`${pn.default.scope}`,d)(this,this.scope.get());if(this.scope.value(c,{ref:$}),$.errors=null,$.schema=t.schema,$.schemaEnv=t,t.$async&&($.$async=!0),this.opts.code.source===!0&&($.source={validateName:c,validateCode:p,scopeValues:i._values}),this.opts.unevaluated){const{props:g,items:R}=u;$.evaluated={props:g instanceof lr.Name?void 0:g,items:R instanceof lr.Name?void 0:R,dynamicProps:g instanceof lr.Name,dynamicItems:R instanceof lr.Name},$.source&&($.source.evaluated=(0,lr.stringify)($.evaluated))}return t.validate=$,t}catch(p){throw delete t.validate,delete t.validateName,d&&this.logger.error("Error compiling schema, function code:",d),p}finally{this._compilations.delete(t)}}Bt.compileSchema=xc;function XI(t,e,r){var n;r=(0,fr.resolveUrl)(this.opts.uriResolver,e,r);const s=t.refs[r];if(s)return s;let o=tS.call(this,t,r);if(o===void 0){const i=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;i&&(o=new Xi({schema:i,schemaId:a,root:t,baseId:e}))}if(o!==void 0)return t.refs[r]=ZI.call(this,o)}Bt.resolveRef=XI;function ZI(t){return(0,fr.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:xc.call(this,t)}function am(t){for(const e of this._compilations)if(eS(e,t))return e}Bt.getCompilingSchema=am;function eS(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function tS(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Zi.call(this,t,e)}function Zi(t,e){const r=this.opts.uriResolver.parse(e),n=(0,fr._getFullPath)(this.opts.uriResolver,r);let s=(0,fr.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return Ca.call(this,r,t);const o=(0,fr.normalizeId)(n),i=this.refs[o]||this.schemas[o];if(typeof i=="string"){const a=Zi.call(this,t,i);return typeof(a==null?void 0:a.schema)!="object"?void 0:Ca.call(this,r,a)}if(typeof(i==null?void 0:i.schema)=="object"){if(i.validate||xc.call(this,i),o===(0,fr.normalizeId)(e)){const{schema:a}=i,{schemaId:c}=this.opts,u=a[c];return u&&(s=(0,fr.resolveUrl)(this.opts.uriResolver,s,u)),new Xi({schema:a,schemaId:c,root:t,baseId:s})}return Ca.call(this,r,i)}}Bt.resolveSchema=Zi;const rS=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Ca(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,Of.unescapeFragment)(a)];if(c===void 0)return;r=c;const u=typeof r=="object"&&r[this.opts.schemaId];!rS.has(a)&&u&&(e=(0,fr.resolveUrl)(this.opts.uriResolver,e,u))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Of.schemaHasRulesButRef)(r,this.RULES)){const a=(0,fr.resolveUrl)(this.opts.uriResolver,e,r.$ref);o=Zi.call(this,n,a)}const{schemaId:i}=this.opts;if(o=o||new Xi({schema:r,schemaId:i,root:n,baseId:e}),o.schema!==o.root.schema)return o}const nS="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",sS="Meta-schema for $data reference (JSON AnySchema extension proposal)",oS="object",iS=["$data"],aS={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},lS=!1,cS={$id:nS,description:sS,type:oS,required:iS,properties:aS,additionalProperties:lS};var Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});const lm=E_;lm.code='require("ajv/dist/runtime/uri").default';Gc.default=lm;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=pr;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=Le;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=io,s=ao,o=Tn,i=Bt,a=Le,c=Nt,u=yt,d=pe,p=cS,N=Gc,$=(b,f)=>new RegExp(b,f);$.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],R=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},_={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function C(b){var f,w,m,l,h,A,B,V,H,re,_e,Ae,We,de,Xe,qe,je,we,ct,Qe,nt,Z,z,J,P;const U=b.strict,Q=(f=b.code)===null||f===void 0?void 0:f.optimize,le=Q===!0||Q===void 0?1:Q||0,x=(m=(w=b.code)===null||w===void 0?void 0:w.regExp)!==null&&m!==void 0?m:$,S=(l=b.uriResolver)!==null&&l!==void 0?l:N.default;return{strictSchema:(A=(h=b.strictSchema)!==null&&h!==void 0?h:U)!==null&&A!==void 0?A:!0,strictNumbers:(V=(B=b.strictNumbers)!==null&&B!==void 0?B:U)!==null&&V!==void 0?V:!0,strictTypes:(re=(H=b.strictTypes)!==null&&H!==void 0?H:U)!==null&&re!==void 0?re:"log",strictTuples:(Ae=(_e=b.strictTuples)!==null&&_e!==void 0?_e:U)!==null&&Ae!==void 0?Ae:"log",strictRequired:(de=(We=b.strictRequired)!==null&&We!==void 0?We:U)!==null&&de!==void 0?de:!1,code:b.code?{...b.code,optimize:le,regExp:x}:{optimize:le,regExp:x},loopRequired:(Xe=b.loopRequired)!==null&&Xe!==void 0?Xe:v,loopEnum:(qe=b.loopEnum)!==null&&qe!==void 0?qe:v,meta:(je=b.meta)!==null&&je!==void 0?je:!0,messages:(we=b.messages)!==null&&we!==void 0?we:!0,inlineRefs:(ct=b.inlineRefs)!==null&&ct!==void 0?ct:!0,schemaId:(Qe=b.schemaId)!==null&&Qe!==void 0?Qe:"$id",addUsedSchema:(nt=b.addUsedSchema)!==null&&nt!==void 0?nt:!0,validateSchema:(Z=b.validateSchema)!==null&&Z!==void 0?Z:!0,validateFormats:(z=b.validateFormats)!==null&&z!==void 0?z:!0,unicodeRegExp:(J=b.unicodeRegExp)!==null&&J!==void 0?J:!0,int32range:(P=b.int32range)!==null&&P!==void 0?P:!0,uriResolver:S}}class D{constructor(f={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,f=this.opts={...f,...C(f)};const{es5:w,lines:m}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:R,es5:w,lines:m}),this.logger=ie(f.logger);const l=f.validateFormats;f.validateFormats=!1,this.RULES=(0,o.getRules)(),L.call(this,y,f,"NOT SUPPORTED"),L.call(this,_,f,"DEPRECATED","warn"),this._metaOpts=ee.call(this),f.formats&&me.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),f.keywords&&q.call(this,f.keywords),typeof f.meta=="object"&&this.addMetaSchema(f.meta),ce.call(this),f.validateFormats=l}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:f,meta:w,schemaId:m}=this.opts;let l=p;m==="id"&&(l={...p},l.id=l.$id,delete l.$id),w&&f&&this.addMetaSchema(l,l[m],!1)}defaultMeta(){const{meta:f,schemaId:w}=this.opts;return this.opts.defaultMeta=typeof f=="object"?f[w]||f:void 0}validate(f,w){let m;if(typeof f=="string"){if(m=this.getSchema(f),!m)throw new Error(`no schema with key or ref "${f}"`)}else m=this.compile(f);const l=m(w);return"$async"in m||(this.errors=m.errors),l}compile(f,w){const m=this._addSchema(f,w);return m.validate||this._compileSchemaEnv(m)}compileAsync(f,w){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:m}=this.opts;return l.call(this,f,w);async function l(re,_e){await h.call(this,re.$schema);const Ae=this._addSchema(re,_e);return Ae.validate||A.call(this,Ae)}async function h(re){re&&!this.getSchema(re)&&await l.call(this,{$ref:re},!0)}async function A(re){try{return this._compileSchemaEnv(re)}catch(_e){if(!(_e instanceof s.default))throw _e;return B.call(this,_e),await V.call(this,_e.missingSchema),A.call(this,re)}}function B({missingSchema:re,missingRef:_e}){if(this.refs[re])throw new Error(`AnySchema ${re} is loaded but ${_e} cannot be resolved`)}async function V(re){const _e=await H.call(this,re);this.refs[re]||await h.call(this,_e.$schema),this.refs[re]||this.addSchema(_e,re,w)}async function H(re){const _e=this._loading[re];if(_e)return _e;try{return await(this._loading[re]=m(re))}finally{delete this._loading[re]}}}addSchema(f,w,m,l=this.opts.validateSchema){if(Array.isArray(f)){for(const A of f)this.addSchema(A,void 0,m,l);return this}let h;if(typeof f=="object"){const{schemaId:A}=this.opts;if(h=f[A],h!==void 0&&typeof h!="string")throw new Error(`schema ${A} must be string`)}return w=(0,c.normalizeId)(w||h),this._checkUnique(w),this.schemas[w]=this._addSchema(f,m,w,l,!0),this}addMetaSchema(f,w,m=this.opts.validateSchema){return this.addSchema(f,w,!0,m),this}validateSchema(f,w){if(typeof f=="boolean")return!0;let m;if(m=f.$schema,m!==void 0&&typeof m!="string")throw new Error("$schema must be a string");if(m=m||this.opts.defaultMeta||this.defaultMeta(),!m)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const l=this.validate(m,f);if(!l&&w){const h="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(h);else throw new Error(h)}return l}getSchema(f){let w;for(;typeof(w=ne.call(this,f))=="string";)f=w;if(w===void 0){const{schemaId:m}=this.opts,l=new i.SchemaEnv({schema:{},schemaId:m});if(w=i.resolveSchema.call(this,l,f),!w)return;this.refs[f]=w}return w.validate||this._compileSchemaEnv(w)}removeSchema(f){if(f instanceof RegExp)return this._removeAllSchemas(this.schemas,f),this._removeAllSchemas(this.refs,f),this;switch(typeof f){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const w=ne.call(this,f);return typeof w=="object"&&this._cache.delete(w.schema),delete this.schemas[f],delete this.refs[f],this}case"object":{const w=f;this._cache.delete(w);let m=f[this.opts.schemaId];return m&&(m=(0,c.normalizeId)(m),delete this.schemas[m],delete this.refs[m]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(f){for(const w of f)this.addKeyword(w);return this}addKeyword(f,w){let m;if(typeof f=="string")m=f,typeof w=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),w.keyword=m);else if(typeof f=="object"&&w===void 0){if(w=f,m=w.keyword,Array.isArray(m)&&!m.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ue.call(this,m,w),!w)return(0,d.eachItem)(m,h=>$e.call(this,h)),this;Fe.call(this,w);const l={...w,type:(0,u.getJSONTypes)(w.type),schemaType:(0,u.getJSONTypes)(w.schemaType)};return(0,d.eachItem)(m,l.type.length===0?h=>$e.call(this,h,l):h=>l.type.forEach(A=>$e.call(this,h,l,A))),this}getKeyword(f){const w=this.RULES.all[f];return typeof w=="object"?w.definition:!!w}removeKeyword(f){const{RULES:w}=this;delete w.keywords[f],delete w.all[f];for(const m of w.rules){const l=m.rules.findIndex(h=>h.keyword===f);l>=0&&m.rules.splice(l,1)}return this}addFormat(f,w){return typeof w=="string"&&(w=new RegExp(w)),this.formats[f]=w,this}errorsText(f=this.errors,{separator:w=", ",dataVar:m="data"}={}){return!f||f.length===0?"No errors":f.map(l=>`${m}${l.instancePath} ${l.message}`).reduce((l,h)=>l+w+h)}$dataMetaSchema(f,w){const m=this.RULES.all;f=JSON.parse(JSON.stringify(f));for(const l of w){const h=l.split("/").slice(1);let A=f;for(const B of h)A=A[B];for(const B in m){const V=m[B];if(typeof V!="object")continue;const{$data:H}=V.definition,re=A[B];H&&re&&(A[B]=I(re))}}return f}_removeAllSchemas(f,w){for(const m in f){const l=f[m];(!w||w.test(m))&&(typeof l=="string"?delete f[m]:l&&!l.meta&&(this._cache.delete(l.schema),delete f[m]))}}_addSchema(f,w,m,l=this.opts.validateSchema,h=this.opts.addUsedSchema){let A;const{schemaId:B}=this.opts;if(typeof f=="object")A=f[B];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof f!="boolean")throw new Error("schema must be object or boolean")}let V=this._cache.get(f);if(V!==void 0)return V;m=(0,c.normalizeId)(A||m);const H=c.getSchemaRefs.call(this,f,m);return V=new i.SchemaEnv({schema:f,schemaId:B,meta:w,baseId:m,localRefs:H}),this._cache.set(V.schema,V),h&&!m.startsWith("#")&&(m&&this._checkUnique(m),this.refs[m]=V),l&&this.validateSchema(f,!0),V}_checkUnique(f){if(this.schemas[f]||this.refs[f])throw new Error(`schema with key or id "${f}" already exists`)}_compileSchemaEnv(f){if(f.meta?this._compileMetaSchema(f):i.compileSchema.call(this,f),!f.validate)throw new Error("ajv implementation error");return f.validate}_compileMetaSchema(f){const w=this.opts;this.opts=this._metaOpts;try{i.compileSchema.call(this,f)}finally{this.opts=w}}}D.ValidationError=n.default,D.MissingRefError=s.default,t.default=D;function L(b,f,w,m="error"){for(const l in b){const h=l;h in f&&this.logger[m](`${w}: option ${l}. ${b[h]}`)}}function ne(b){return b=(0,c.normalizeId)(b),this.schemas[b]||this.refs[b]}function ce(){const b=this.opts.schemas;if(b)if(Array.isArray(b))this.addSchema(b);else for(const f in b)this.addSchema(b[f],f)}function me(){for(const b in this.opts.formats){const f=this.opts.formats[b];f&&this.addFormat(b,f)}}function q(b){if(Array.isArray(b)){this.addVocabulary(b);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const f in b){const w=b[f];w.keyword||(w.keyword=f),this.addKeyword(w)}}function ee(){const b={...this.opts};for(const f of g)delete b[f];return b}const oe={log(){},warn(){},error(){}};function ie(b){if(b===!1)return oe;if(b===void 0)return console;if(b.log&&b.warn&&b.error)return b;throw new Error("logger must implement log, warn and error methods")}const ae=/^[a-z_$][a-z0-9_$:-]*$/i;function ue(b,f){const{RULES:w}=this;if((0,d.eachItem)(b,m=>{if(w.keywords[m])throw new Error(`Keyword ${m} is already defined`);if(!ae.test(m))throw new Error(`Keyword ${m} has invalid name`)}),!!f&&f.$data&&!("code"in f||"validate"in f))throw new Error('$data keyword must have "code" or "validate" function')}function $e(b,f,w){var m;const l=f==null?void 0:f.post;if(w&&l)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:h}=this;let A=l?h.post:h.rules.find(({type:V})=>V===w);if(A||(A={type:w,rules:[]},h.rules.push(A)),h.keywords[b]=!0,!f)return;const B={keyword:b,definition:{...f,type:(0,u.getJSONTypes)(f.type),schemaType:(0,u.getJSONTypes)(f.schemaType)}};f.before?be.call(this,A,B,f.before):A.rules.push(B),h.all[b]=B,(m=f.implements)===null||m===void 0||m.forEach(V=>this.addKeyword(V))}function be(b,f,w){const m=b.rules.findIndex(l=>l.keyword===w);m>=0?b.rules.splice(m,0,f):(b.rules.push(f),this.logger.warn(`rule ${w} is not defined`))}function Fe(b){let{metaSchema:f}=b;f!==void 0&&(b.$data&&this.opts.$data&&(f=I(f)),b.validateSchema=this.compile(f,!0))}const Ye={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function I(b){return{anyOf:[b,Ye]}}})(S_);var Vc={},Hc={},Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});const uS={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Kc.default=uS;var In={};Object.defineProperty(In,"__esModule",{value:!0});In.callRef=In.getValidate=void 0;const dS=ao,vf=xe,Ft=Le,Hn=wr,Rf=Bt,jo=pe,fS={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:o,validateName:i,opts:a,self:c}=n,{root:u}=o;if((r==="#"||r==="#/")&&s===u.baseId)return p();const d=Rf.resolveRef.call(c,u,s,r);if(d===void 0)throw new dS.default(n.opts.uriResolver,s,r);if(d instanceof Rf.SchemaEnv)return N(d);return $(d);function p(){if(o===u)return ei(t,i,o,o.$async);const g=e.scopeValue("root",{ref:u});return ei(t,(0,Ft._)`${g}.validate`,u,u.$async)}function N(g){const R=cm(t,g);ei(t,R,g,g.$async)}function $(g){const R=e.scopeValue("schema",a.code.source===!0?{ref:g,code:(0,Ft.stringify)(g)}:{ref:g}),y=e.name("valid"),_=t.subschema({schema:g,dataTypes:[],schemaPath:Ft.nil,topSchemaRef:R,errSchemaPath:r},y);t.mergeEvaluated(_),t.ok(y)}}};function cm(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Ft._)`${r.scopeValue("wrapper",{ref:e})}.validate`}In.getValidate=cm;function ei(t,e,r,n){const{gen:s,it:o}=t,{allErrors:i,schemaEnv:a,opts:c}=o,u=c.passContext?Hn.default.this:Ft.nil;n?d():p();function d(){if(!a.$async)throw new Error("async schema referenced by sync schema");const g=s.let("valid");s.try(()=>{s.code((0,Ft._)`await ${(0,vf.callValidateCode)(t,e,u)}`),$(e),i||s.assign(g,!0)},R=>{s.if((0,Ft._)`!(${R} instanceof ${o.ValidationError})`,()=>s.throw(R)),N(R),i||s.assign(g,!1)}),t.ok(g)}function p(){t.result((0,vf.callValidateCode)(t,e,u),()=>$(e),()=>N(e))}function N(g){const R=(0,Ft._)`${g}.errors`;s.assign(Hn.default.vErrors,(0,Ft._)`${Hn.default.vErrors} === null ? ${R} : ${Hn.default.vErrors}.concat(${R})`),s.assign(Hn.default.errors,(0,Ft._)`${Hn.default.vErrors}.length`)}function $(g){var R;if(!o.opts.unevaluated)return;const y=(R=r==null?void 0:r.validate)===null||R===void 0?void 0:R.evaluated;if(o.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(o.props=jo.mergeEvaluated.props(s,y.props,o.props));else{const _=s.var("props",(0,Ft._)`${g}.evaluated.props`);o.props=jo.mergeEvaluated.props(s,_,o.props,Ft.Name)}if(o.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(o.items=jo.mergeEvaluated.items(s,y.items,o.items));else{const _=s.var("items",(0,Ft._)`${g}.evaluated.items`);o.items=jo.mergeEvaluated.items(s,_,o.items,Ft.Name)}}}In.callRef=ei;In.default=fS;Object.defineProperty(Hc,"__esModule",{value:!0});const hS=Kc,pS=In,_S=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",hS.default,pS.default];Hc.default=_S;var qc={},Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});const _i=Le,Hr=_i.operators,mi={maximum:{okStr:"<=",ok:Hr.LTE,fail:Hr.GT},minimum:{okStr:">=",ok:Hr.GTE,fail:Hr.LT},exclusiveMaximum:{okStr:"<",ok:Hr.LT,fail:Hr.GTE},exclusiveMinimum:{okStr:">",ok:Hr.GT,fail:Hr.LTE}},mS={message:({keyword:t,schemaCode:e})=>(0,_i.str)`must be ${mi[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,_i._)`{comparison: ${mi[t].okStr}, limit: ${e}}`},yS={keyword:Object.keys(mi),type:"number",schemaType:"number",$data:!0,error:mS,code(t){const{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,_i._)`${r} ${mi[e].fail} ${n} || isNaN(${r})`)}};Wc.default=yS;var Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});const Ds=Le,ES={message:({schemaCode:t})=>(0,Ds.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Ds._)`{multipleOf: ${t}}`},gS={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:ES,code(t){const{gen:e,data:r,schemaCode:n,it:s}=t,o=s.opts.multipleOfPrecision,i=e.let("res"),a=o?(0,Ds._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${o}`:(0,Ds._)`${i} !== parseInt(${i})`;t.fail$data((0,Ds._)`(${n} === 0 || (${i} = ${r}/${n}, ${a}))`)}};Jc.default=gS;var zc={},Qc={};Object.defineProperty(Qc,"__esModule",{value:!0});function um(t){const e=t.length;let r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}Qc.default=um;um.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(zc,"__esModule",{value:!0});const gn=Le,OS=pe,vS=Qc,RS={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,gn.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,gn._)`{limit: ${t}}`},$S={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:RS,code(t){const{keyword:e,data:r,schemaCode:n,it:s}=t,o=e==="maxLength"?gn.operators.GT:gn.operators.LT,i=s.opts.unicode===!1?(0,gn._)`${r}.length`:(0,gn._)`${(0,OS.useFunc)(t.gen,vS.default)}(${r})`;t.fail$data((0,gn._)`${i} ${o} ${n}`)}};zc.default=$S;var Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});const wS=xe,yi=Le,NS={message:({schemaCode:t})=>(0,yi.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,yi._)`{pattern: ${t}}`},bS={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:NS,code(t){const{data:e,$data:r,schema:n,schemaCode:s,it:o}=t,i=o.opts.unicodeRegExp?"u":"",a=r?(0,yi._)`(new RegExp(${s}, ${i}))`:(0,wS.usePattern)(t,n);t.fail$data((0,yi._)`!${a}.test(${e})`)}};Yc.default=bS;var Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});const js=Le,AS={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,js.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,js._)`{limit: ${t}}`},TS={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:AS,code(t){const{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?js.operators.GT:js.operators.LT;t.fail$data((0,js._)`Object.keys(${r}).length ${s} ${n}`)}};Xc.default=TS;var Zc={};Object.defineProperty(Zc,"__esModule",{value:!0});const $s=xe,Ls=Le,IS=pe,SS={message:({params:{missingProperty:t}})=>(0,Ls.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Ls._)`{missingProperty: ${t}}`},PS={keyword:"required",type:"object",schemaType:"array",$data:!0,error:SS,code(t){const{gen:e,schema:r,schemaCode:n,data:s,$data:o,it:i}=t,{opts:a}=i;if(!o&&r.length===0)return;const c=r.length>=a.loopRequired;if(i.allErrors?u():d(),a.strictRequired){const $=t.parentSchema.properties,{definedProperties:g}=t.it;for(const R of r)if(($==null?void 0:$[R])===void 0&&!g.has(R)){const y=i.schemaEnv.baseId+i.errSchemaPath,_=`required property "${R}" is not defined at "${y}" (strictRequired)`;(0,IS.checkStrictMode)(i,_,i.opts.strictRequired)}}function u(){if(c||o)t.block$data(Ls.nil,p);else for(const $ of r)(0,$s.checkReportMissingProp)(t,$)}function d(){const $=e.let("missing");if(c||o){const g=e.let("valid",!0);t.block$data(g,()=>N($,g)),t.ok(g)}else e.if((0,$s.checkMissingProp)(t,r,$)),(0,$s.reportMissingProp)(t,$),e.else()}function p(){e.forOf("prop",n,$=>{t.setParams({missingProperty:$}),e.if((0,$s.noPropertyInData)(e,s,$,a.ownProperties),()=>t.error())})}function N($,g){t.setParams({missingProperty:$}),e.forOf($,n,()=>{e.assign(g,(0,$s.propertyInData)(e,s,$,a.ownProperties)),e.if((0,Ls.not)(g),()=>{t.error(),e.break()})},Ls.nil)}}};Zc.default=PS;var eu={};Object.defineProperty(eu,"__esModule",{value:!0});const Fs=Le,CS={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,Fs.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Fs._)`{limit: ${t}}`},MS={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:CS,code(t){const{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?Fs.operators.GT:Fs.operators.LT;t.fail$data((0,Fs._)`${r}.length ${s} ${n}`)}};eu.default=MS;var tu={},lo={};Object.defineProperty(lo,"__esModule",{value:!0});const dm=qi;dm.code='require("ajv/dist/runtime/equal").default';lo.default=dm;Object.defineProperty(tu,"__esModule",{value:!0});const Ma=yt,$t=Le,DS=pe,jS=lo,LS={message:({params:{i:t,j:e}})=>(0,$t.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,$t._)`{i: ${t}, j: ${e}}`},FS={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:LS,code(t){const{gen:e,data:r,$data:n,schema:s,parentSchema:o,schemaCode:i,it:a}=t;if(!n&&!s)return;const c=e.let("valid"),u=o.items?(0,Ma.getSchemaTypes)(o.items):[];t.block$data(c,d,(0,$t._)`${i} === false`),t.ok(c);function d(){const g=e.let("i",(0,$t._)`${r}.length`),R=e.let("j");t.setParams({i:g,j:R}),e.assign(c,!0),e.if((0,$t._)`${g} > 1`,()=>(p()?N:$)(g,R))}function p(){return u.length>0&&!u.some(g=>g==="object"||g==="array")}function N(g,R){const y=e.name("item"),_=(0,Ma.checkDataTypes)(u,y,a.opts.strictNumbers,Ma.DataType.Wrong),v=e.const("indices",(0,$t._)`{}`);e.for((0,$t._)`;${g}--;`,()=>{e.let(y,(0,$t._)`${r}[${g}]`),e.if(_,(0,$t._)`continue`),u.length>1&&e.if((0,$t._)`typeof ${y} == "string"`,(0,$t._)`${y} += "_"`),e.if((0,$t._)`typeof ${v}[${y}] == "number"`,()=>{e.assign(R,(0,$t._)`${v}[${y}]`),t.error(),e.assign(c,!1).break()}).code((0,$t._)`${v}[${y}] = ${g}`)})}function $(g,R){const y=(0,DS.useFunc)(e,jS.default),_=e.name("outer");e.label(_).for((0,$t._)`;${g}--;`,()=>e.for((0,$t._)`${R} = ${g}; ${R}--;`,()=>e.if((0,$t._)`${y}(${r}[${g}], ${r}[${R}])`,()=>{t.error(),e.assign(c,!1).break(_)})))}}};tu.default=FS;var ru={};Object.defineProperty(ru,"__esModule",{value:!0});const El=Le,kS=pe,BS=lo,US={message:"must be equal to constant",params:({schemaCode:t})=>(0,El._)`{allowedValue: ${t}}`},xS={keyword:"const",$data:!0,error:US,code(t){const{gen:e,data:r,$data:n,schemaCode:s,schema:o}=t;n||o&&typeof o=="object"?t.fail$data((0,El._)`!${(0,kS.useFunc)(e,BS.default)}(${r}, ${s})`):t.fail((0,El._)`${o} !== ${r}`)}};ru.default=xS;var nu={};Object.defineProperty(nu,"__esModule",{value:!0});const bs=Le,GS=pe,VS=lo,HS={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,bs._)`{allowedValues: ${t}}`},KS={keyword:"enum",schemaType:"array",$data:!0,error:HS,code(t){const{gen:e,data:r,$data:n,schema:s,schemaCode:o,it:i}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const a=s.length>=i.opts.loopEnum;let c;const u=()=>c??(c=(0,GS.useFunc)(e,VS.default));let d;if(a||n)d=e.let("valid"),t.block$data(d,p);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const $=e.const("vSchema",o);d=(0,bs.or)(...s.map((g,R)=>N($,R)))}t.pass(d);function p(){e.assign(d,!1),e.forOf("v",o,$=>e.if((0,bs._)`${u()}(${r}, ${$})`,()=>e.assign(d,!0).break()))}function N($,g){const R=s[g];return typeof R=="object"&&R!==null?(0,bs._)`${u()}(${r}, ${$}[${g}])`:(0,bs._)`${r} === ${R}`}}};nu.default=KS;Object.defineProperty(qc,"__esModule",{value:!0});const qS=Wc,WS=Jc,JS=zc,zS=Yc,QS=Xc,YS=Zc,XS=eu,ZS=tu,eP=ru,tP=nu,rP=[qS.default,WS.default,JS.default,zS.default,QS.default,YS.default,XS.default,ZS.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},eP.default,tP.default];qc.default=rP;var su={},ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.validateAdditionalItems=void 0;const On=Le,gl=pe,nP={message:({params:{len:t}})=>(0,On.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,On._)`{limit: ${t}}`},sP={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:nP,code(t){const{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,gl.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}fm(t,n)}};function fm(t,e){const{gen:r,schema:n,data:s,keyword:o,it:i}=t;i.items=!0;const a=r.const("len",(0,On._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,On._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,gl.alwaysValidSchema)(i,n)){const u=r.var("valid",(0,On._)`${a} <= ${e.length}`);r.if((0,On.not)(u),()=>c(u)),t.ok(u)}function c(u){r.forRange("i",e.length,a,d=>{t.subschema({keyword:o,dataProp:d,dataPropType:gl.Type.Num},u),i.allErrors||r.if((0,On.not)(u),()=>r.break())})}}ps.validateAdditionalItems=fm;ps.default=sP;var ou={},_s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.validateTuple=void 0;const $f=Le,ti=pe,oP=xe,iP={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return hm(t,"additionalItems",e);r.items=!0,!(0,ti.alwaysValidSchema)(r,e)&&t.ok((0,oP.validateArray)(t))}};function hm(t,e,r=t.schema){const{gen:n,parentSchema:s,data:o,keyword:i,it:a}=t;d(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=ti.mergeEvaluated.items(n,r.length,a.items));const c=n.name("valid"),u=n.const("len",(0,$f._)`${o}.length`);r.forEach((p,N)=>{(0,ti.alwaysValidSchema)(a,p)||(n.if((0,$f._)`${u} > ${N}`,()=>t.subschema({keyword:i,schemaProp:N,dataProp:N},c)),t.ok(c))});function d(p){const{opts:N,errSchemaPath:$}=a,g=r.length,R=g===p.minItems&&(g===p.maxItems||p[e]===!1);if(N.strictTuples&&!R){const y=`"${i}" is ${g}-tuple, but minItems or maxItems/${e} are not specified or different at path "${$}"`;(0,ti.checkStrictMode)(a,y,N.strictTuples)}}}_s.validateTuple=hm;_s.default=iP;Object.defineProperty(ou,"__esModule",{value:!0});const aP=_s,lP={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,aP.validateTuple)(t,"items")};ou.default=lP;var iu={};Object.defineProperty(iu,"__esModule",{value:!0});const wf=Le,cP=pe,uP=xe,dP=ps,fP={message:({params:{len:t}})=>(0,wf.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,wf._)`{limit: ${t}}`},hP={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:fP,code(t){const{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,cP.alwaysValidSchema)(n,e)&&(s?(0,dP.validateAdditionalItems)(t,s):t.ok((0,uP.validateArray)(t)))}};iu.default=hP;var au={};Object.defineProperty(au,"__esModule",{value:!0});const Xt=Le,Lo=pe,pP={message:({params:{min:t,max:e}})=>e===void 0?(0,Xt.str)`must contain at least ${t} valid item(s)`:(0,Xt.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Xt._)`{minContains: ${t}}`:(0,Xt._)`{minContains: ${t}, maxContains: ${e}}`},_P={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:pP,code(t){const{gen:e,schema:r,parentSchema:n,data:s,it:o}=t;let i,a;const{minContains:c,maxContains:u}=n;o.opts.next?(i=c===void 0?1:c,a=u):i=1;const d=e.const("len",(0,Xt._)`${s}.length`);if(t.setParams({min:i,max:a}),a===void 0&&i===0){(0,Lo.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&i>a){(0,Lo.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Lo.alwaysValidSchema)(o,r)){let R=(0,Xt._)`${d} >= ${i}`;a!==void 0&&(R=(0,Xt._)`${R} && ${d} <= ${a}`),t.pass(R);return}o.items=!0;const p=e.name("valid");a===void 0&&i===1?$(p,()=>e.if(p,()=>e.break())):i===0?(e.let(p,!0),a!==void 0&&e.if((0,Xt._)`${s}.length > 0`,N)):(e.let(p,!1),N()),t.result(p,()=>t.reset());function N(){const R=e.name("_valid"),y=e.let("count",0);$(R,()=>e.if(R,()=>g(y)))}function $(R,y){e.forRange("i",0,d,_=>{t.subschema({keyword:"contains",dataProp:_,dataPropType:Lo.Type.Num,compositeRule:!0},R),y()})}function g(R){e.code((0,Xt._)`${R}++`),a===void 0?e.if((0,Xt._)`${R} >= ${i}`,()=>e.assign(p,!0).break()):(e.if((0,Xt._)`${R} > ${a}`,()=>e.assign(p,!1).break()),i===1?e.assign(p,!0):e.if((0,Xt._)`${R} >= ${i}`,()=>e.assign(p,!0)))}}};au.default=_P;var pm={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=Le,r=pe,n=xe;t.error={message:({params:{property:c,depsCount:u,deps:d}})=>{const p=u===1?"property":"properties";return(0,e.str)`must have ${p} ${d} when property ${c} is present`},params:({params:{property:c,depsCount:u,deps:d,missingProperty:p}})=>(0,e._)`{property: ${c},
    missingProperty: ${p},
    depsCount: ${u},
    deps: ${d}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(c){const[u,d]=o(c);i(c,u),a(c,d)}};function o({schema:c}){const u={},d={};for(const p in c){if(p==="__proto__")continue;const N=Array.isArray(c[p])?u:d;N[p]=c[p]}return[u,d]}function i(c,u=c.schema){const{gen:d,data:p,it:N}=c;if(Object.keys(u).length===0)return;const $=d.let("missing");for(const g in u){const R=u[g];if(R.length===0)continue;const y=(0,n.propertyInData)(d,p,g,N.opts.ownProperties);c.setParams({property:g,depsCount:R.length,deps:R.join(", ")}),N.allErrors?d.if(y,()=>{for(const _ of R)(0,n.checkReportMissingProp)(c,_)}):(d.if((0,e._)`${y} && (${(0,n.checkMissingProp)(c,R,$)})`),(0,n.reportMissingProp)(c,$),d.else())}}t.validatePropertyDeps=i;function a(c,u=c.schema){const{gen:d,data:p,keyword:N,it:$}=c,g=d.name("valid");for(const R in u)(0,r.alwaysValidSchema)($,u[R])||(d.if((0,n.propertyInData)(d,p,R,$.opts.ownProperties),()=>{const y=c.subschema({keyword:N,schemaProp:R},g);c.mergeValidEvaluated(y,g)},()=>d.var(g,!0)),c.ok(g))}t.validateSchemaDeps=a,t.default=s})(pm);var lu={};Object.defineProperty(lu,"__esModule",{value:!0});const _m=Le,mP=pe,yP={message:"property name must be valid",params:({params:t})=>(0,_m._)`{propertyName: ${t.propertyName}}`},EP={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:yP,code(t){const{gen:e,schema:r,data:n,it:s}=t;if((0,mP.alwaysValidSchema)(s,r))return;const o=e.name("valid");e.forIn("key",n,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},o),e.if((0,_m.not)(o),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(o)}};lu.default=EP;var ea={};Object.defineProperty(ea,"__esModule",{value:!0});const Fo=xe,ur=Le,gP=wr,ko=pe,OP={message:"must NOT have additional properties",params:({params:t})=>(0,ur._)`{additionalProperty: ${t.additionalProperty}}`},vP={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:OP,code(t){const{gen:e,schema:r,parentSchema:n,data:s,errsCount:o,it:i}=t;if(!o)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=i;if(i.props=!0,c.removeAdditional!=="all"&&(0,ko.alwaysValidSchema)(i,r))return;const u=(0,Fo.allSchemaProperties)(n.properties),d=(0,Fo.allSchemaProperties)(n.patternProperties);p(),t.ok((0,ur._)`${o} === ${gP.default.errors}`);function p(){e.forIn("key",s,y=>{!u.length&&!d.length?g(y):e.if(N(y),()=>g(y))})}function N(y){let _;if(u.length>8){const v=(0,ko.schemaRefOrVal)(i,n.properties,"properties");_=(0,Fo.isOwnProperty)(e,v,y)}else u.length?_=(0,ur.or)(...u.map(v=>(0,ur._)`${y} === ${v}`)):_=ur.nil;return d.length&&(_=(0,ur.or)(_,...d.map(v=>(0,ur._)`${(0,Fo.usePattern)(t,v)}.test(${y})`))),(0,ur.not)(_)}function $(y){e.code((0,ur._)`delete ${s}[${y}]`)}function g(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){$(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,ko.alwaysValidSchema)(i,r)){const _=e.name("valid");c.removeAdditional==="failing"?(R(y,_,!1),e.if((0,ur.not)(_),()=>{t.reset(),$(y)})):(R(y,_),a||e.if((0,ur.not)(_),()=>e.break()))}}function R(y,_,v){const C={keyword:"additionalProperties",dataProp:y,dataPropType:ko.Type.Str};v===!1&&Object.assign(C,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(C,_)}}};ea.default=vP;var cu={};Object.defineProperty(cu,"__esModule",{value:!0});const RP=pr,Nf=xe,Da=pe,bf=ea,$P={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:s,it:o}=t;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&bf.default.code(new RP.KeywordCxt(o,bf.default,"additionalProperties"));const i=(0,Nf.allSchemaProperties)(r);for(const p of i)o.definedProperties.add(p);o.opts.unevaluated&&i.length&&o.props!==!0&&(o.props=Da.mergeEvaluated.props(e,(0,Da.toHash)(i),o.props));const a=i.filter(p=>!(0,Da.alwaysValidSchema)(o,r[p]));if(a.length===0)return;const c=e.name("valid");for(const p of a)u(p)?d(p):(e.if((0,Nf.propertyInData)(e,s,p,o.opts.ownProperties)),d(p),o.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(p),t.ok(c);function u(p){return o.opts.useDefaults&&!o.compositeRule&&r[p].default!==void 0}function d(p){t.subschema({keyword:"properties",schemaProp:p,dataProp:p},c)}}};cu.default=$P;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});const Af=xe,Bo=Le,Tf=pe,If=pe,wP={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:n,parentSchema:s,it:o}=t,{opts:i}=o,a=(0,Af.allSchemaProperties)(r),c=a.filter(R=>(0,Tf.alwaysValidSchema)(o,r[R]));if(a.length===0||c.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;const u=i.strictSchema&&!i.allowMatchingProperties&&s.properties,d=e.name("valid");o.props!==!0&&!(o.props instanceof Bo.Name)&&(o.props=(0,If.evaluatedPropsToName)(e,o.props));const{props:p}=o;N();function N(){for(const R of a)u&&$(R),o.allErrors?g(R):(e.var(d,!0),g(R),e.if(d))}function $(R){for(const y in u)new RegExp(R).test(y)&&(0,Tf.checkStrictMode)(o,`property ${y} matches pattern ${R} (use allowMatchingProperties)`)}function g(R){e.forIn("key",n,y=>{e.if((0,Bo._)`${(0,Af.usePattern)(t,R)}.test(${y})`,()=>{const _=c.includes(R);_||t.subschema({keyword:"patternProperties",schemaProp:R,dataProp:y,dataPropType:If.Type.Str},d),o.opts.unevaluated&&p!==!0?e.assign((0,Bo._)`${p}[${y}]`,!0):!_&&!o.allErrors&&e.if((0,Bo.not)(d),()=>e.break())})})}}};uu.default=wP;var du={};Object.defineProperty(du,"__esModule",{value:!0});const NP=pe,bP={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:n}=t;if((0,NP.alwaysValidSchema)(n,r)){t.fail();return}const s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};du.default=bP;var fu={};Object.defineProperty(fu,"__esModule",{value:!0});const AP=xe,TP={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:AP.validateUnion,error:{message:"must match a schema in anyOf"}};fu.default=TP;var hu={};Object.defineProperty(hu,"__esModule",{value:!0});const ri=Le,IP=pe,SP={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,ri._)`{passingSchemas: ${t.passing}}`},PP={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:SP,code(t){const{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const o=r,i=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(u),t.result(i,()=>t.reset(),()=>t.error(!0));function u(){o.forEach((d,p)=>{let N;(0,IP.alwaysValidSchema)(s,d)?e.var(c,!0):N=t.subschema({keyword:"oneOf",schemaProp:p,compositeRule:!0},c),p>0&&e.if((0,ri._)`${c} && ${i}`).assign(i,!1).assign(a,(0,ri._)`[${a}, ${p}]`).else(),e.if(c,()=>{e.assign(i,!0),e.assign(a,p),N&&t.mergeEvaluated(N,ri.Name)})})}}};hu.default=PP;var pu={};Object.defineProperty(pu,"__esModule",{value:!0});const CP=pe,MP={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=e.name("valid");r.forEach((o,i)=>{if((0,CP.alwaysValidSchema)(n,o))return;const a=t.subschema({keyword:"allOf",schemaProp:i},s);t.ok(s),t.mergeEvaluated(a)})}};pu.default=MP;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});const Ei=Le,mm=pe,DP={message:({params:t})=>(0,Ei.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Ei._)`{failingKeyword: ${t.ifClause}}`},jP={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:DP,code(t){const{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,mm.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=Sf(n,"then"),o=Sf(n,"else");if(!s&&!o)return;const i=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),s&&o){const d=e.let("ifClause");t.setParams({ifClause:d}),e.if(a,u("then",d),u("else",d))}else s?e.if(a,u("then")):e.if((0,Ei.not)(a),u("else"));t.pass(i,()=>t.error(!0));function c(){const d=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(d)}function u(d,p){return()=>{const N=t.subschema({keyword:d},a);e.assign(i,a),t.mergeValidEvaluated(N,i),p?e.assign(p,(0,Ei._)`${d}`):t.setParams({ifClause:d})}}}};function Sf(t,e){const r=t.schema[e];return r!==void 0&&!(0,mm.alwaysValidSchema)(t,r)}_u.default=jP;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});const LP=pe,FP={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,LP.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};mu.default=FP;Object.defineProperty(su,"__esModule",{value:!0});const kP=ps,BP=ou,UP=_s,xP=iu,GP=au,VP=pm,HP=lu,KP=ea,qP=cu,WP=uu,JP=du,zP=fu,QP=hu,YP=pu,XP=_u,ZP=mu;function eC(t=!1){const e=[JP.default,zP.default,QP.default,YP.default,XP.default,ZP.default,HP.default,KP.default,VP.default,qP.default,WP.default];return t?e.push(BP.default,xP.default):e.push(kP.default,UP.default),e.push(GP.default),e}su.default=eC;var yu={},Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});const _t=Le,tC={message:({schemaCode:t})=>(0,_t.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,_t._)`{format: ${t}}`},rC={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:tC,code(t,e){const{gen:r,data:n,$data:s,schema:o,schemaCode:i,it:a}=t,{opts:c,errSchemaPath:u,schemaEnv:d,self:p}=a;if(!c.validateFormats)return;s?N():$();function N(){const g=r.scopeValue("formats",{ref:p.formats,code:c.code.formats}),R=r.const("fDef",(0,_t._)`${g}[${i}]`),y=r.let("fType"),_=r.let("format");r.if((0,_t._)`typeof ${R} == "object" && !(${R} instanceof RegExp)`,()=>r.assign(y,(0,_t._)`${R}.type || "string"`).assign(_,(0,_t._)`${R}.validate`),()=>r.assign(y,(0,_t._)`"string"`).assign(_,R)),t.fail$data((0,_t.or)(v(),C()));function v(){return c.strictSchema===!1?_t.nil:(0,_t._)`${i} && !${_}`}function C(){const D=d.$async?(0,_t._)`(${R}.async ? await ${_}(${n}) : ${_}(${n}))`:(0,_t._)`${_}(${n})`,L=(0,_t._)`(typeof ${_} == "function" ? ${D} : ${_}.test(${n}))`;return(0,_t._)`${_} && ${_} !== true && ${y} === ${e} && !${L}`}}function $(){const g=p.formats[o];if(!g){v();return}if(g===!0)return;const[R,y,_]=C(g);R===e&&t.pass(D());function v(){if(c.strictSchema===!1){p.logger.warn(L());return}throw new Error(L());function L(){return`unknown format "${o}" ignored in schema at path "${u}"`}}function C(L){const ne=L instanceof RegExp?(0,_t.regexpCode)(L):c.code.formats?(0,_t._)`${c.code.formats}${(0,_t.getProperty)(o)}`:void 0,ce=r.scopeValue("formats",{key:o,ref:L,code:ne});return typeof L=="object"&&!(L instanceof RegExp)?[L.type||"string",L.validate,(0,_t._)`${ce}.validate`]:["string",L,ce]}function D(){if(typeof g=="object"&&!(g instanceof RegExp)&&g.async){if(!d.$async)throw new Error("async format in sync schema");return(0,_t._)`await ${_}(${n})`}return typeof y=="function"?(0,_t._)`${_}(${n})`:(0,_t._)`${_}.test(${n})`}}}};Eu.default=rC;Object.defineProperty(yu,"__esModule",{value:!0});const nC=Eu,sC=[nC.default];yu.default=sC;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.contentVocabulary=ns.metadataVocabulary=void 0;ns.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ns.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Vc,"__esModule",{value:!0});const oC=Hc,iC=qc,aC=su,lC=yu,Pf=ns,cC=[oC.default,iC.default,(0,aC.default)(),lC.default,Pf.metadataVocabulary,Pf.contentVocabulary];Vc.default=cC;var gu={},ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.DiscrError=void 0;var Cf;(function(t){t.Tag="tag",t.Mapping="mapping"})(Cf||(ta.DiscrError=Cf={}));Object.defineProperty(gu,"__esModule",{value:!0});const Wn=Le,Ol=ta,Mf=Bt,uC=pe,dC={message:({params:{discrError:t,tagName:e}})=>t===Ol.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Wn._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},fC={keyword:"discriminator",type:"object",schemaType:"object",error:dC,code(t){const{gen:e,data:r,schema:n,parentSchema:s,it:o}=t,{oneOf:i}=s;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");const c=e.let("valid",!1),u=e.const("tag",(0,Wn._)`${r}${(0,Wn.getProperty)(a)}`);e.if((0,Wn._)`typeof ${u} == "string"`,()=>d(),()=>t.error(!1,{discrError:Ol.DiscrError.Tag,tag:u,tagName:a})),t.ok(c);function d(){const $=N();e.if(!1);for(const g in $)e.elseIf((0,Wn._)`${u} === ${g}`),e.assign(c,p($[g]));e.else(),t.error(!1,{discrError:Ol.DiscrError.Mapping,tag:u,tagName:a}),e.endIf()}function p($){const g=e.name("valid"),R=t.subschema({keyword:"oneOf",schemaProp:$},g);return t.mergeEvaluated(R,Wn.Name),g}function N(){var $;const g={},R=_(s);let y=!0;for(let D=0;D<i.length;D++){let L=i[D];L!=null&&L.$ref&&!(0,uC.schemaHasRulesButRef)(L,o.self.RULES)&&(L=Mf.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,L==null?void 0:L.$ref),L instanceof Mf.SchemaEnv&&(L=L.schema));const ne=($=L==null?void 0:L.properties)===null||$===void 0?void 0:$[a];if(typeof ne!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(R||_(L)),v(ne,D)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return g;function _({required:D}){return Array.isArray(D)&&D.includes(a)}function v(D,L){if(D.const)C(D.const,L);else if(D.enum)for(const ne of D.enum)C(ne,L);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function C(D,L){if(typeof D!="string"||D in g)throw new Error(`discriminator: "${a}" values must be unique strings`);g[D]=L}}}};gu.default=fC;const hC="http://json-schema.org/draft-07/schema#",pC="http://json-schema.org/draft-07/schema#",_C="Core schema meta-schema",mC={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},yC=["object","boolean"],EC={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},gC={$schema:hC,$id:pC,title:_C,definitions:mC,type:yC,properties:EC,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=S_,n=Vc,s=gu,o=gC,i=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(g=>this.addVocabulary(g)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const g=this.opts.$data?this.$dataMetaSchema(o,i):o;this.addMetaSchema(g,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var u=pr;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var d=Le;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var p=io;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return p.default}});var N=ao;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return N.default}})})(hl,hl.exports);var OC=hl.exports;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=OC,r=Le,n=r.operators,s={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},o={message:({keyword:a,schemaCode:c})=>r.str`should be ${s[a].okStr} ${c}`,params:({keyword:a,schemaCode:c})=>r._`{comparison: ${s[a].okStr}, limit: ${c}}`};t.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:o,code(a){const{gen:c,data:u,schemaCode:d,keyword:p,it:N}=a,{opts:$,self:g}=N;if(!$.validateFormats)return;const R=new e.KeywordCxt(N,g.RULES.all.format.definition,"format");R.$data?y():_();function y(){const C=c.scopeValue("formats",{ref:g.formats,code:$.code.formats}),D=c.const("fmt",r._`${C}[${R.schemaCode}]`);a.fail$data(r.or(r._`typeof ${D} != "object"`,r._`${D} instanceof RegExp`,r._`typeof ${D}.compare != "function"`,v(D)))}function _(){const C=R.schema,D=g.formats[C];if(!D||D===!0)return;if(typeof D!="object"||D instanceof RegExp||typeof D.compare!="function")throw new Error(`"${p}": format "${C}" does not define "compare" function`);const L=c.scopeValue("formats",{key:C,ref:D,code:$.code.formats?r._`${$.code.formats}${r.getProperty(C)}`:void 0});a.fail$data(v(L))}function v(C){return r._`${C}.compare(${u}, ${d}) ${s[p].fail} 0`}},dependencies:["format"]};const i=a=>(a.addKeyword(t.formatLimitDefinition),a);t.default=i})(I_);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const r=T_,n=I_,s=Le,o=new s.Name("fullFormats"),i=new s.Name("fastFormats"),a=(u,d={keywords:!0})=>{if(Array.isArray(d))return c(u,d,r.fullFormats,o),u;const[p,N]=d.mode==="fast"?[r.fastFormats,i]:[r.fullFormats,o],$=d.formats||r.formatNames;return c(u,$,p,N),d.keywords&&n.default(u),u};a.get=(u,d="full")=>{const N=(d==="fast"?r.fastFormats:r.fullFormats)[u];if(!N)throw new Error(`Unknown format "${u}"`);return N};function c(u,d,p,N){var $,g;($=(g=u.opts.code).formats)!==null&&$!==void 0||(g.formats=s._`require("ajv-formats/dist/formats").${N}`);for(const R of d)u.addFormat(R,p[R])}t.exports=e=a,Object.defineProperty(e,"__esModule",{value:!0}),e.default=a})(fl,fl.exports);var vC=fl.exports;let RC=class{constructor(...e){this.constructor.init(this,...e)}static init(){}beforeValidate({model:e,json:r,options:n}){e.$beforeValidate(null,r,n)}validate(){throw new Error("not implemented")}afterValidate({model:e,json:r,options:n}){e.$afterValidate(r,n)}};var ym={Validator:RC};const{asArray:$C,isString:wC}=ye,Em={ModelValidation:"ModelValidation",RelationExpression:"RelationExpression",UnallowedRelation:"UnallowedRelation",InvalidGraph:"InvalidGraph"};let NC=class extends Error{static get Type(){return Em}constructor({type:e,message:r,modelClass:n,data:s={},statusCode:o=400}){super(r||bC(s)),this.name=this.constructor.name,this.type=e,this.data=s,this.statusCode=o,Object.defineProperty(this,"modelClass",{value:n,enumerable:!1})}};function bC(t){return Object.keys(t).reduce((e,r)=>(e.push(`${r}: ${$C(t[r]).map(AC).join(", ")}`),e),[]).join(", ")}function AC(t){return wC(t)?t:t.message}var Lr={ValidationError:NC,ValidationErrorType:Em};const Df=uT,TC=vC,{Validator:IC}=ym,{ValidationErrorType:SC}=Lr,{isObject:Ou,once:lH,cloneDeep:PC,omit:CC}=ye;let MC=class extends IC{static init(e,r){super.init(e,r),e.ajvOptions=Object.assign({},r.options,{allErrors:!0}),e.ajv=new Df(Object.assign({useDefaults:!0},e.ajvOptions)),e.ajvNoDefaults=new Df(Object.assign({},e.ajvOptions,{useDefaults:!1})),e.cache=new Map;const n=s=>{r.onCreateAjv(s),s.formats["date-time"]||TC(s)};n(e.ajv),n(e.ajvNoDefaults)}beforeValidate({json:e,model:r,options:n,ctx:s}){if(s.jsonSchema=r.constructor.getJsonSchema(),r.$beforeValidate!==r.$objectionModelClass.prototype.$beforeValidate){s.jsonSchema=jf(s.jsonSchema);const o=r.$beforeValidate(s.jsonSchema,e,n);o!==void 0&&(s.jsonSchema=o)}}validate({json:e,model:r,options:n,ctx:s}){if(!s.jsonSchema)return e;const o=r.constructor,i=this.getValidator(o,s.jsonSchema,!!n.patch);!n.mutable&&!n.patch&&jC(s.jsonSchema)&&(e=jf(e)),i.call(r,e);const a=DC(i.errors,o,n);if(a)throw a;return e}getValidator(e,r,n){const s=this.ajvOptions.serialize||JSON.stringify,o=r===e.getJsonSchema()?e.uniqueTag():s(r);let i=this.cache.get(o),a=null;return i||(i={patchValidator:null,normalValidator:null},this.cache.set(o,i)),n?(a=i.patchValidator,a||(a=this.compilePatchValidator(r),i.patchValidator=a)):(a=i.normalValidator,a||(a=this.compileNormalValidator(r),i.normalValidator=a)),a}compilePatchValidator(e){return e=Ks(e),this.ajvNoDefaults.compile(e)}compileNormalValidator(e){return this.ajv.compile(e)}};function DC(t,e,r){if(!t)return null;let n=e.getRelationNames(),s={},o=0;for(const i of t){if(i.params&&i.params.additionalProperty&&n.includes(i.params.additionalProperty))continue;let a=i.instancePath.replace(/\//g,".");i.params&&(i.params.missingProperty?a+=`.${i.params.missingProperty}`:i.params.additionalProperty&&(a+=`.${i.params.additionalProperty}`));const c=`${r.dataPath||""}${a}`.substring(1);(s[c]||(s[c]=[])).unshift({message:i.message,keyword:i.keyword,params:i.params}),++o}return o===0?null:e.createValidationError({type:SC.ModelValidation,data:s})}function jf(t){return Ou(t)&&t.$isObjectionModel?t.$clone():PC(t)}function jC(t){return t&&t.properties&&vu(t.properties)}function vu(t){return Array.isArray(t)?LC(t):FC(t)}function LC(t){for(let e=0,r=t.length;e<r;++e){const n=t[e];if(Ou(n)&&vu(n))return!0}return!1}function FC(t){const e=Object.keys(t);for(let r=0,n=e.length;r<n;++r){const s=e[r];if(s==="default")return!0;{const o=t[s];if(Ou(o)&&vu(o))return!0}}return!1}function Ks(t){const e=["anyOf","oneOf","allOf","not","then","else","properties"];return Object.assign(CC(t,["required",...e]),...e.map(r=>kC(t,r)),t&&t.definitions&&Object.keys(t.definitions).length>0?{definitions:Object.assign(...Object.keys(t.definitions).map(r=>({[r]:Ks(t.definitions[r])})))}:{},t.discriminator&&t.discriminator.propertyName?{required:[t.discriminator.propertyName]}:{})}function kC(t,e){if(t[e])if(Array.isArray(t[e])){const r=BC(t[e]);return r.length!==0?{[e]:r}:{}}else return t.type==="object"&&e==="properties"?{[e]:Object.fromEntries(Object.entries(t[e]).map(([r,n])=>[r,Ks(n)]))}:{[e]:Ks(t[e])};else return{}}function BC(t){return t.map(Ks).filter(UC)}function UC(t){return Object.keys(t).length!==0}var gm={AjvValidator:MC};const{asArray:xC,isString:GC,isFunction:Lf,isPlainObject:VC}=ye;function vl({modelClass:t,modifier:e,modifiers:r}){const n=t?t.getModifiers():{},s=xC(e).map(o=>{let i=null;if(GC(o)){if(i=r&&r[o]||n[o],i&&!Lf(i))return vl({modelClass:t,modifier:i,modifiers:r})}else if(Lf(o))i=o;else if(VC(o))i=a=>a.where(o);else if(Array.isArray(o))return vl({modelClass:t,modifier:o,modifiers:r});return i||(i=a=>t.modifierNotFound(a,o)),i});return(o,...i)=>{for(const a of s)a.call(o,o,...i)}}var co={createModifier:vl};function HC(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function ss(t,e,r,n){this.message=t,this.expected=e,this.found=r,this.location=n,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ss)}HC(ss,Error);ss.buildMessage=function(t,e){var r={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var d="",p;for(p=0;p<u.parts.length;p++)d+=u.parts[p]instanceof Array?o(u.parts[p][0])+"-"+o(u.parts[p][1]):o(u.parts[p]);return"["+(u.inverted?"^":"")+d+"]"},any:function(u){return"any character"},end:function(u){return"end of input"},other:function(u){return u.description}};function n(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d)})}function o(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+n(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+n(d)})}function i(u){return r[u.type](u)}function a(u){var d=new Array(u.length),p,N;for(p=0;p<u.length;p++)d[p]=i(u[p]);if(d.sort(),d.length>0){for(p=1,N=1;p<d.length;p++)d[p-1]!==d[p]&&(d[N]=d[p],N++);d.length=N}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}function c(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+a(t)+" but "+c(e)+" found."};function KC(t,e){e=e!==void 0?e:{};var r={},n={start:_e},s=_e,o=function(P){const U=J();return P.$name==="*"?U.$allRecursive=!0:(z(U,P),U[P.$name]=P,U.$childNames.push(P.$name)),U},i=function(P){const U=J();return P.forEach(Q=>{z(U,Q),U[Q.$name]=Q,U.$childNames.push(Q.$name)}),U},a=function(P,U,Q,le){const x=J();return x.$name=Q||P,x.$relation=P,x.$modify=U||[],le.forEach(S=>{z(x,S),x[S.$name]=S,x.$childNames.push(S.$name)}),x},c=function(P,U,Q,le){const x=J();if(x.$name=Q||P,x.$relation=P,x.$modify=U||[],le){const S=/^\^(\d*)$/.exec(le.$name);S?S[1]?x.$recursive=parseInt(S[1],10):x.$recursive=!0:le.$name==="*"?x.$allRecursive=!0:(z(x,le),x[le.$name]=le,x.$childNames.push(le.$name))}return x},u="as",d=l("as",!1),p=function(P){return P},N=function(P){return P.join("")},$=/^[^[\](),. \t\r\n]/,g=h(["[","]","(",")",",","."," ","	","\r",`
`],!0,!1),R="(",y=l("(",!1),_=")",v=l(")",!1),C=function(P){return P},D=",",L=l(",",!1),ne=function(P){return P},ce=/^[ \t\r\n]/,me=h([" ","	","\r",`
`],!1,!1),q=".",ee=l(".",!1),oe=function(P){return P},ie="[",ae=l("[",!1),ue="]",$e=l("]",!1),be=function(P){return P},Fe=function(P){return P},Ye=function(P){return P},I=0,b=[{line:1,column:1}],f=0,w=[],m;if("startRule"in e){if(!(e.startRule in n))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=n[e.startRule]}function l(P,U){return{type:"literal",text:P,ignoreCase:U}}function h(P,U,Q){return{type:"class",parts:P,inverted:U,ignoreCase:Q}}function A(){return{type:"end"}}function B(P){var U=b[P],Q;if(U)return U;for(Q=P-1;!b[Q];)Q--;for(U=b[Q],U={line:U.line,column:U.column};Q<P;)t.charCodeAt(Q)===10?(U.line++,U.column=1):U.column++,Q++;return b[P]=U,U}function V(P,U){var Q=B(P),le=B(U);return{start:{offset:P,line:Q.line,column:Q.column},end:{offset:U,line:le.line,column:le.column}}}function H(P){I<f||(I>f&&(f=I,w=[]),w.push(P))}function re(P,U,Q){return new ss(ss.buildMessage(P,U),P,U,Q)}function _e(){var P,U;return P=I,U=Ae(),U!==r&&(U=o(U)),P=U,P===r&&(P=I,U=Qe(),U!==r&&(U=i(U)),P=U),P}function Ae(){var P,U,Q,le,x;return P=I,U=de(),U!==r?(Q=qe(),Q===r&&(Q=null),Q!==r?(le=We(),le===r&&(le=null),le!==r?(x=ct(),x!==r?(U=a(U,Q,le,x),P=U):(I=P,P=r)):(I=P,P=r)):(I=P,P=r)):(I=P,P=r),P===r&&(P=I,U=de(),U!==r?(Q=qe(),Q===r&&(Q=null),Q!==r?(le=We(),le===r&&(le=null),le!==r?(x=Z(),x===r&&(x=null),x!==r?(U=c(U,Q,le,x),P=U):(I=P,P=r)):(I=P,P=r)):(I=P,P=r)):(I=P,P=r)),P}function We(){var P,U,Q,le,x;if(P=I,U=[],Q=we(),Q!==r)for(;Q!==r;)U.push(Q),Q=we();else U=r;if(U!==r)if(t.substr(I,2)===u?(Q=u,I+=2):(Q=r,H(d)),Q!==r){if(le=[],x=we(),x!==r)for(;x!==r;)le.push(x),x=we();else le=r;le!==r?(x=de(),x!==r?(U=p(x),P=U):(I=P,P=r)):(I=P,P=r)}else I=P,P=r;else I=P,P=r;return P}function de(){var P,U,Q;if(P=I,U=[],Q=Xe(),Q!==r)for(;Q!==r;)U.push(Q),Q=Xe();else U=r;return U!==r&&(U=N(U)),P=U,P}function Xe(){var P;return $.test(t.charAt(I))?(P=t.charAt(I),I++):(P=r,H(g)),P}function qe(){var P,U,Q,le,x,S;for(P=I,U=[],Q=we();Q!==r;)U.push(Q),Q=we();if(U!==r)if(t.charCodeAt(I)===40?(Q=R,I++):(Q=r,H(y)),Q!==r){for(le=[],x=je();x!==r;)le.push(x),x=je();if(le!==r){for(x=[],S=we();S!==r;)x.push(S),S=we();x!==r?(t.charCodeAt(I)===41?(S=_,I++):(S=r,H(v)),S!==r?(U=C(le),P=U):(I=P,P=r)):(I=P,P=r)}else I=P,P=r}else I=P,P=r;else I=P,P=r;return P}function je(){var P,U,Q,le,x;for(P=I,U=[],Q=we();Q!==r;)U.push(Q),Q=we();if(U!==r)if(Q=de(),Q!==r){for(le=[],x=we();x!==r;)le.push(x),x=we();le!==r?(t.charCodeAt(I)===44?(x=D,I++):(x=r,H(L)),x===r&&(x=null),x!==r?(U=ne(Q),P=U):(I=P,P=r)):(I=P,P=r)}else I=P,P=r;else I=P,P=r;return P}function we(){var P;return ce.test(t.charAt(I))?(P=t.charAt(I),I++):(P=r,H(me)),P}function ct(){var P,U,Q,le;for(P=I,U=[],Q=we();Q!==r;)U.push(Q),Q=we();return U!==r?(t.charCodeAt(I)===46?(Q=q,I++):(Q=r,H(ee)),Q!==r?(le=Qe(),le!==r?(U=oe(le),P=U):(I=P,P=r)):(I=P,P=r)):(I=P,P=r),P}function Qe(){var P,U,Q,le,x,S,te,Ne;for(P=I,U=[],Q=we();Q!==r;)U.push(Q),Q=we();if(U!==r)if(t.charCodeAt(I)===91?(Q=ie,I++):(Q=r,H(ae)),Q!==r){for(le=[],x=nt();x!==r;)le.push(x),x=nt();if(le!==r){for(x=[],S=we();S!==r;)x.push(S),S=we();if(x!==r)if(t.charCodeAt(I)===93?(S=ue,I++):(S=r,H($e)),S!==r){for(te=[],Ne=we();Ne!==r;)te.push(Ne),Ne=we();te!==r?(U=be(le),P=U):(I=P,P=r)}else I=P,P=r;else I=P,P=r}else I=P,P=r}else I=P,P=r;else I=P,P=r;return P}function nt(){var P,U,Q,le,x;for(P=I,U=[],Q=we();Q!==r;)U.push(Q),Q=we();if(U!==r)if(Q=Ae(),Q!==r){for(le=[],x=we();x!==r;)le.push(x),x=we();le!==r?(t.charCodeAt(I)===44?(x=D,I++):(x=r,H(L)),x===r&&(x=null),x!==r?(U=Fe(Q),P=U):(I=P,P=r)):(I=P,P=r)}else I=P,P=r;else I=P,P=r;return P}function Z(){var P,U,Q,le,x,S,te;for(P=I,U=[],Q=we();Q!==r;)U.push(Q),Q=we();if(U!==r)if(t.charCodeAt(I)===46?(Q=q,I++):(Q=r,H(ee)),Q!==r){for(le=[],x=we();x!==r;)le.push(x),x=we();if(le!==r)if(x=Ae(),x!==r){for(S=[],te=we();te!==r;)S.push(te),te=we();S!==r?(U=Ye(x),P=U):(I=P,P=r)}else I=P,P=r;else I=P,P=r}else I=P,P=r;else I=P,P=r;return P}function z(P,U){U.$name in P&&console.warn(`Duplicate relation "${U.$name}" in a relation expression. You should use "a.[b, c]" instead of "[a.b, a.c]". This will cause an error in objection 2.0`)}function J(){return{$name:null,$relation:null,$modify:[],$recursive:!1,$allRecursive:!1,$childNames:[]}}if(m=s(),m!==r&&I===t.length)return m;throw m!==r&&I<t.length&&H(A()),re(w,f<t.length?t.charAt(f):null,f<t.length?V(f,f+1):V(f,f))}var qC={SyntaxError:ss,parse:KC};let WC=class extends Error{constructor(e){super(`unknown relation "${e}" in a relation expression`),this.name=this.constructor.name,this.relationName=e}};var Om={RelationDoesNotExistError:WC};const JC=qC,{isObject:vm,isNumber:gi,isString:zC,union:Ff}=ye,{RelationDoesNotExistError:QC}=Om;class Ru extends Error{}class Rm extends Ru{constructor(e){super(),this.relationName=e}}let $m=class vt{constructor(e=ni(),r=0){this.node=e,this.recursionDepth=r}static create(e){if(vm(e))return e.isObjectionRelationExpression?e:new vt(ra(e));if(zC(e)){if(e.trim().length===0)return new vt;try{return new vt(YC(e))}catch(r){throw r.duplicateRelationName?new Rm(r.duplicateRelationName):new Ru(r.message)}}else return new vt}static fromModelGraph(e){return e?new vt(Nm(e,ni())):new vt}get maxRecursionDepth(){return gi(this.node.$recursive)?this.node.$recursive:this.node.$recursive?Number.MAX_SAFE_INTEGER:0}get numChildren(){return this.node.$childNames.length}get isEmpty(){return this.numChildren===0}merge(e){return e=vt.create(e),this.isEmpty?e:new vt(Am(this.node,e.node))}isSubExpression(e){if(e=vt.create(e),this.node.$allRecursive)return!0;if(e.node.$allRecursive)return this.node.$allRecursive;if(this.node.$relation!==e.node.$relation)return!1;const r=e.maxRecursionDepth;if(r>0)return this.node.$allRecursive||this.maxRecursionDepth>=r;for(const n of e.node.$childNames){const s=this.childExpression(n),o=e.childExpression(n);if(!s||!s.isSubExpression(o))return!1}return!0}childExpression(e){if(this.node.$allRecursive||e===this.node.$name&&this.recursionDepth<this.maxRecursionDepth-1)return new vt(this.node,this.recursionDepth+1);const r=this.node[e];return r?new vt(r):null}forEachChildExpression(e,r){const n=this.maxRecursionDepth;if(this.node.$allRecursive)for(const s of e.getRelationNames()){const o=ni(s,!0),i=e.getRelationUnsafe(s),a=new vt(o);r(a,i)}else if(this.recursionDepth<n-1){const s=e.getRelationUnsafe(this.node.$relation)||null,o=new vt(this.node,this.recursionDepth+1);r(o,s)}else if(n===0)for(const s of this.node.$childNames){const o=this.node[s],i=e.getRelationUnsafe(o.$relation);if(!i)throw new QC(o.$relation);const a=new vt(o);r(a,i)}}expressionsAtPath(e){return bm(this,vt.create(e),[])}clone(){return new vt(Oi(this.node),this.recursionDepth)}toString(){return wm(this.node)}toPojo(){return Oi(this.node)}toJSON(){return this.toPojo()}};const kf=new Map;function YC(t){const e=kf.get(t);if(e)return Oi(e);{const r=JC.parse(t);return kf.set(t,Oi(r)),r}}function XC(t){if(!t)return[];const e=[];for(const r of Object.keys(t))r[0]!=="$"&&e.push(r);return e}function wm(t){let r=t.$childNames.map(s=>t[s]).map(wm),n=t.$relation;return t.$recursive?gi(t.$recursive)?n+=".^"+t.$recursive:n+=".^":t.$allRecursive&&(n+=".*"),r.length>1?r=`[${r.join(", ")}]`:r=r[0],t.$modify.length&&(n+=`(${t.$modify.join(", ")})`),t.$name!==t.$relation&&(n+=` as ${t.$name}`),r?n?`${n}.${r}`:r:n}function Oi(t){return ra(t)}function Nm(t,e){if(t){if(Array.isArray(t))for(let r=0,n=t.length;r<n;++r)Bf(t[r],e);else Bf(t,e);return e}}function Bf(t,e){const n=t.constructor.getRelationNames();for(let s=0,o=n.length;s<o;++s){const i=n[s];if(t[i]!==void 0){let a=e[i];a||(a=ni(i),e[i]=a,e.$childNames.push(i)),Nm(t[i],a)}}}function ni(t=null,e=!1){return ra(null,t,e)}function ra(t=null,e=null,r=!1){const n={$name:ZC(t,e),$relation:e1(t,e),$modify:t1(t),$recursive:r1(t),$allRecursive:n1(t,r),$childNames:s1(t)};for(const s of n.$childNames){const o=t[s];(vm(o)||o===!0)&&(n[s]=ra(o,s))}return n}function ZC(t,e){return t&&t.$name||e||null}function e1(t,e){return t&&t.$relation||e||null}function t1(t){return!t||!t.$modify?[]:Array.isArray(t.$modify)?t.$modify.slice():[t.$modify]}function r1(t){return t&&t.$recursive||!1}function n1(t,e){return t&&t.$allRecursive||e||!1}function s1(t){return t&&t.$childNames&&t.$childNames.slice()||XC(t)}function bm(t,e,r){if(e.node.$childNames.length==0)r.push(t);else for(const n of e.node.$childNames){const s=e.childExpression(n),o=t.childExpression(n);o&&bm(o,s,r)}return r}function Am(t,e){const r={$name:t.$name,$relation:t.$relation,$modify:Ff(t.$modify,e.$modify),$recursive:o1(t.$recursive,e.$recursive),$allRecursive:t.$allRecursive||e.$allRecursive,$childNames:null};if(!r.$recursive&&!r.$allRecursive){r.$childNames=Ff(t.$childNames,e.$childNames);for(const n of r.$childNames){const s=t[n],o=e[n];s&&o?r[n]=Am(s,o):r[n]=s||o}}else r.$childNames=[];return r}function o1(t,e){return t===!0||e===!0?!0:gi(t)&&gi(e)?Math.max(t,e):t||e}Object.defineProperties($m.prototype,{isObjectionRelationExpression:{enumerable:!1,writable:!1,value:!0}});var on={RelationExpression:$m,RelationExpressionParseError:Ru,DuplicateRelationError:Rm};function i1(t){if(!t.$hasId()){const e=t.constructor,r=e.getIdColumnArray().join(", ");throw new Error(`one of the identifier columns [${r}] is null or undefined. Have you specified the correct identifier column for the model '${e.name}' using the 'idColumn' property?`)}}function Tm(t,e){if(Array.isArray(t))t.forEach(r=>Tm(r,e));else if(t===void 0)throw Error(e)}var uo={assertHasId:i1,assertIdNotUndefined:Tm};const{isString:a1,isObject:l1}=ye,Uf=/\s+as\s+/i;let fo=class Rl{constructor(e,r,n){this.table=e,this.column=r,this.alias=n}get name(){return this.alias||this.column}static create(e){return l1(e)?e.isObjectionSelection?e:e.isObjectionReferenceBuilder?c1(e):e.isObjectionRawBuilder?u1(e):null:a1(e)?d1(e):null}static doesSelect(e,r,n){if(r=Rl.create(r),n=Rl.create(n),r.column==="*")return r.table?n.column==="*"?n.table===r.table:n.table===null||n.table===r.table:!0;{const s=r.table||e.tableRef();return n.column==="*"?!1:n.column===r.column&&(n.table===null||n.table===s)}}};Object.defineProperties(fo.prototype,{isObjectionSelection:{enumerable:!1,writable:!1,value:!0}});function c1(t){return new fo(t.tableName,t.column,t.alias)}function u1(t){return t.alias?new fo(null,null,t.alias):null}function d1(t){let e=null,r=null,n=null;if(Uf.test(t)){const o=t.split(Uf);t=o[0].trim(),n=o[1].trim()}const s=t.lastIndexOf(".");return s!==-1?(e=t.substr(0,s),r=t.substr(s+1)):r=t,new fo(e,r,n)}var $u={Selection:fo};let f1=class{constructor(){this.skipUndefined=!1,this.keepImplicitJoinProps=!1,this.returnImmediatelyValue=void 0,this.isInternalQuery=!1,this.debug=!1,this.schema=void 0}clone(){const e=new this.constructor;return e.skipUndefined=this.skipUndefined,e.keepImplicitJoinProps=this.keepImplicitJoinProps,e.returnImmediatelyValue=this.returnImmediatelyValue,e.isInternalQuery=this.isInternalQuery,e.debug=this.debug,e.schema=this.schema,e}};var h1={InternalOptions:f1};const{InternalOptions:p1}=h1;let _1=class{constructor(e){this.userContext=e?new e.constructor.QueryBuilderUserContext(e):null,this.options=e?new this.constructor.InternalOptions:null,this.knex=null,this.aliasMap=null,this.tableMap=null}static get InternalOptions(){return p1}clone(){const e=new this.constructor;return e.userContext=this.userContext,e.options=this.options.clone(),e.knex=this.knex,e.aliasMap=this.aliasMap,e.tableMap=this.tableMap,e}};var Im={QueryBuilderContextBase:_1};const{QueryBuilderContextBase:m1}=Im;class y1 extends m1{constructor(e){super(e),this.runBefore=[],this.runAfter=[],this.onBuild=[]}clone(){const e=super.clone();return e.runBefore=this.runBefore.slice(),e.runAfter=this.runAfter.slice(),e.onBuild=this.onBuild.slice(),e}}var E1={QueryBuilderContext:y1};const xf=Symbol();let g1=class{constructor(e){this[xf]=e}get transaction(){return this[xf].knex()}newFromObject(e,r){const n=new this.constructor(e);return Object.assign(n,r),n}newMerge(e,r){const n=new this.constructor(e);return Object.assign(n,this,r),n}};var O1={QueryBuilderUserContext:g1};const Gf=new Set;function v1(t){Gf.has(t)||(Gf.add(t),console.warn(t))}var R1={deprecate:v1};const{isString:$l,isFunction:Vf,isRegExp:$1,mergeMaps:Hf,last:w1}=ye,{QueryBuilderContextBase:N1}=Im,{QueryBuilderUserContext:b1}=O1,{deprecate:A1}=R1,Sm=()=>!0,Kf=/^(select|columns|column|distinct|count|countDistinct|min|max|sum|sumDistinct|avg|avgDistinct)$/,qf=/^(where|orWhere|andWhere|find\w+)/,T1=/^(on|orOn|andOn)/,Wf=/orderBy/,I1=/(join|joinRaw|joinRelated)$/i,S1=/^(from|into|table)$/;let P1=class{constructor(...e){this.constructor.init(this,...e)}static init(e,r){e._modelClass=r,e._operations=[],e._context=new this.QueryBuilderContext(e),e._parentQuery=null,e._isPartialQuery=!1,e._activeOperations=[]}static forClass(e){return new this(e)}static get AllSelector(){return Sm}static get QueryBuilderContext(){return N1}static get QueryBuilderUserContext(){return b1}static get SelectSelector(){return Kf}static get WhereSelector(){return qf}static get OnSelector(){return T1}static get JoinSelector(){return I1}static get FromSelector(){return S1}static get OrderBySelector(){return Wf}modelClass(){return this._modelClass}context(e){const r=this._context;return arguments.length===0?r.userContext:(r.userContext=r.userContext.newMerge(this,e),this)}clearContext(){const e=this._context;return e.userContext=new this.constructor.QueryBuilderUserContext(this),this}internalContext(e){return arguments.length===0?this._context:(this._context=e,this)}internalOptions(e){if(arguments.length===0)return this._context.options;{const r=this._context.options;return this._context.options=Object.assign(r,e),this}}isPartial(e){return arguments.length===0?this._isPartialQuery:(this._isPartialQuery=e,this)}isInternal(){return this.internalOptions().isInternalQuery}tableNameFor(e,r){const n=this.internalContext(),s=n.tableMap;return $l(r)?(n.tableMap=s||new Map,n.tableMap.set(e,r),this):s&&s.get(e)||e}aliasFor(e,r){const n=this.internalContext(),s=n.aliasMap;return $l(r)?(n.aliasMap=s||new Map,n.aliasMap.set(e,r),this):s&&s.get(e)||null}tableRefFor(e){return this.aliasFor(e)||this.tableNameFor(e)}childQueryOf(e,{fork:r,isInternalQuery:n}={}){if(e){let s=this.context(),o=e.internalContext();r&&(o=o.clone()),n&&(o.options.isInternalQuery=!0),this._parentQuery=e,this.internalContext(o),this.context(s),this.unsafeKnex()===null&&this.knex(e.unsafeKnex())}return this}subqueryOf(e){if(e){if(this._isPartialQuery){const r=this.internalContext();r.aliasMap=Hf(e.internalContext().aliasMap,r.aliasMap),r.tableMap=Hf(e.internalContext().tableMap,r.tableMap)}this._parentQuery=e,this.unsafeKnex()===null&&this.knex(e.unsafeKnex())}return this}parentQuery(){return this._parentQuery}knex(...e){if(e.length===0){const r=this.unsafeKnex();if(!r)throw new Error("no database connection available for a query. You need to bind the model class or the query to a knex instance.");return r}else return this._context.knex=e[0],this}unsafeKnex(){return this._context.knex||this._modelClass.knex()||null}clear(e){const r=new Set;this.forEachOperation(e,n=>{n.isAncestorInSet(r)||r.add(n)});for(const n of r)this.removeOperation(n);return this}toFindQuery(){const e=this.clone(),r=[],n=[];e.forEachOperation(s=>s.hasToFindOperation(),s=>{const o=s.toFindOperation(e);o?r.push({op:s,findOp:o}):n.push(s)});for(const s of n)e.removeOperation(s);for(const{op:s,findOp:o}of r)e.replaceOperation(s,o);return e}clearSelect(){return this.clear(Kf)}clearWhere(){return this.clear(qf)}clearOrder(){return this.clear(Wf)}copyFrom(e,r){const n=new Set;e.forEachOperation(r,s=>{s.isAncestorInSet(n)||n.add(s)});for(const s of n){const o=s.clone();o.parentOperation=null,o.adderHookName=null,this._operations.push(o)}return this}has(e){return!!this.findOperation(e)}forEachOperation(e,r,n=!0){const s=C1(e);for(const o of this._operations)if(s(o)===n&&r(o)===!1||o.forEachDescendantOperation(a=>{if(s(a)===n&&r(a)===!1)return!1})===!1)break;return this}findOperation(e){let r=null;return this.forEachOperation(e,n=>(r=n,!1)),r}findLastOperation(e){let r=null;return this.forEachOperation(e,n=>{r=n}),r}everyOperation(e){let r=!0;return this.forEachOperation(e,()=>(r=!1,!1),!1),r}callOperationMethod(e,r,n){try{return e.removeChildOperationsByHookName(r),this._activeOperations.push({operation:e,hookName:r}),e[r](...n)}finally{this._activeOperations.pop()}}async callAsyncOperationMethod(e,r,n){e.removeChildOperationsByHookName(r),this._activeOperations.push({operation:e,hookName:r});try{return await e[r](...n)}finally{this._activeOperations.pop()}}addOperation(e,r){return this.addOperationUsingMethod("push",e,r)}addOperationToFront(e,r){return this.addOperationUsingMethod("unshift",e,r)}addOperationUsingMethod(e,r,n){if(this.callOperationMethod(r,"onAdd",[this,n]))if(this._activeOperations.length){const{operation:o,hookName:i}=w1(this._activeOperations);o.addChildOperation(i,r)}else this._operations[e](r);return this}removeOperation(e){if(e.parentOperation)e.parentOperation.removeChildOperation(e);else{const r=this._operations.indexOf(e);r!==-1&&this._operations.splice(r,1)}return this}replaceOperation(e,r){if(e.parentOperation)e.parentOperation.replaceChildOperation(e,r);else{const n=this._operations.indexOf(e);n!==-1&&(this._operations[n]=r)}return this}clone(){return this.baseCloneInto(new this.constructor(this.unsafeKnex()))}baseCloneInto(e){return e._modelClass=this._modelClass,e._operations=this._operations.map(r=>r.clone()),e._context=this._context.clone(),e._parentQuery=this._parentQuery,e._isPartialQuery=this._isPartialQuery,e._activeOperations=[],e}toKnexQuery(e=this.knex().queryBuilder()){return this.executeOnBuild(),this.executeOnBuildKnex(e)}executeOnBuild(){this.forEachOperation(!0,e=>{e.hasOnBuild()&&this.callOperationMethod(e,"onBuild",[this])})}executeOnBuildKnex(e){return this.forEachOperation(!0,r=>{r.hasOnBuildKnex()&&(e=this.callOperationMethod(r,"onBuildKnex",[e,this])||e)}),e}toString(){return this.toKnexQuery().toString()}toSql(){return this.toString()}skipUndefined(){return A1("skipUndefined() is deprecated and will be removed in objection 4.0"),this.internalOptions().skipUndefined=!0,this}};function C1(t){return t===!0?Sm:$1(t)?e=>t.test(e.name):$l(t)?e=>e.name===t:Vf(t)&&t.isObjectionQueryBuilderOperationClass?e=>e.is(t):Vf(t)?t:()=>!1}var Pm={QueryBuilderOperationSupport:P1};const M1={onAdd:"hasOnAdd",onBefore1:"hasOnBefore1",onBefore2:"hasOnBefore2",onBefore3:"hasOnBefore3",onBuild:"hasOnBuild",onBuildKnex:"hasOnBuildKnex",onRawResult:"hasOnRawResult",queryExecutor:"hasQueryExecutor",onAfter1:"hasOnAfter1",onAfter2:"hasOnAfter2",onAfter3:"hasOnAfter3",onError:"hasOnError"};let Cm=class Vt{constructor(e=null,r={}){this.name=e,this.opt=r,this.adderHookName=null,this.parentOperation=null,this.childOperations=[]}is(e){return this instanceof e}hasHook(e){return this[M1[e]]()}onAdd(e,r){return!0}hasOnAdd(){return!0}onBefore1(e,r){}hasOnBefore1(){return this.onBefore1!==Vt.prototype.onBefore1}onBefore2(e,r){}hasOnBefore2(){return this.onBefore2!==Vt.prototype.onBefore2}onBefore3(e,r){}hasOnBefore3(){return this.onBefore3!==Vt.prototype.onBefore3}onBuild(e){}hasOnBuild(){return this.onBuild!==Vt.prototype.onBuild}onBuildKnex(e,r){return e}hasOnBuildKnex(){return this.onBuildKnex!==Vt.prototype.onBuildKnex}onRawResult(e,r){return r}hasOnRawResult(){return this.onRawResult!==Vt.prototype.onRawResult}onAfter1(e,r){return r}hasOnAfter1(){return this.onAfter1!==Vt.prototype.onAfter1}onAfter2(e,r){return r}hasOnAfter2(){return this.onAfter2!==Vt.prototype.onAfter2}onAfter3(e,r){return r}hasOnAfter3(){return this.onAfter3!==Vt.prototype.onAfter3}queryExecutor(e){}hasQueryExecutor(){return this.queryExecutor!==Vt.prototype.queryExecutor}onError(e,r){}hasOnError(){return this.onError!==Vt.prototype.onError}toFindOperation(e){return this}hasToFindOperation(){return this.toFindOperation!==Vt.prototype.toFindOperation}isAncestorInSet(e){let r=this.parentOperation;for(;r;){if(e.has(r))return!0;r=r.parentOperation}return!1}clone(){const e=new this.constructor(this.name,this.opt);return e.adderHookName=this.adderHookName,e.parentOperation=this.parentOperation,e.childOperations=this.childOperations.map(r=>{const n=r.clone();return n.parentOperation=e,n}),e}addChildOperation(e,r){r.adderHookName=e,r.parentOperation=this,this.childOperations.push(r)}removeChildOperation(e){const r=this.childOperations.indexOf(e);r!==-1&&(e.parentOperation=null,this.childOperations.splice(r,1))}replaceChildOperation(e,r){const n=this.childOperations.indexOf(e);n!==-1&&(r.adderHookName=e.adderHookName,r.parentOperation=this,e.parentOperation=null,this.childOperations[n]=r)}removeChildOperationsByHookName(e){this.childOperations=this.childOperations.filter(r=>r.adderHookName!==e)}forEachDescendantOperation(e){for(const r of this.childOperations)if(e(r)===!1||r.forEachDescendantOperation(e)===!1)return!1;return!0}};Object.defineProperties(Cm,{isObjectionQueryBuilderOperationClass:{enumerable:!1,writable:!1,value:!0}});var ht={QueryBuilderOperation:Cm};let D1=class{onConvertQueryBuilderBase(e,r){return e}};var Mm={QueryTransformation:D1};const{QueryTransformation:j1}=Mm;let L1=class extends j1{constructor(e){super(),this.transformations=e}onConvertQueryBuilderBase(e,r){for(const n of this.transformations)e=n.onConvertQueryBuilderBase(e,r);return e}};var F1={CompositeQueryTransformation:L1};const{QueryTransformation:k1}=Mm,{isMySql:B1}=qt;let U1=class extends k1{onConvertQueryBuilderBase(e,r){const n=r.unsafeKnex();return!n||!B1(n)||!r.isUpdate()&&!r.isDelete()||r.tableName()!==e.tableName()&&!x1(e,r.tableName())?e:e.modelClass().query().from(e.as("mysql_subquery_fix"))}};function x1(t,e){let r=!1;return t.forEachOperation(t.constructor.JoinSelector,n=>{if(n.args[0]===e)return r=!0,!1}),r}var G1={WrapMysqlModifySubqueryTransformation:U1};const{CompositeQueryTransformation:V1}=F1,{WrapMysqlModifySubqueryTransformation:H1}=G1,K1=new V1([new H1]);var q1={transformation:K1},ja,Jf;function W1(){if(Jf)return ja;Jf=1;const{QueryBuilderOperationSupport:t}=Pm,{KnexOperation:e}=wu();class r extends t{using(...s){return this.addOperation(new e("using"),s)}on(...s){return this.addOperation(new e("on"),s)}orOn(...s){return this.addOperation(new e("orOn"),s)}onBetween(...s){return this.addOperation(new e("onBetween"),s)}onNotBetween(...s){return this.addOperation(new e("onNotBetween"),s)}orOnBetween(...s){return this.addOperation(new e("orOnBetween"),s)}orOnNotBetween(...s){return this.addOperation(new e("orOnNotBetween"),s)}onIn(...s){return this.addOperation(new e("onIn"),s)}onNotIn(...s){return this.addOperation(new e("onNotIn"),s)}orOnIn(...s){return this.addOperation(new e("orOnIn"),s)}orOnNotIn(...s){return this.addOperation(new e("orOnNotIn"),s)}onNull(...s){return this.addOperation(new e("onNull"),s)}orOnNull(...s){return this.addOperation(new e("orOnNull"),s)}onNotNull(...s){return this.addOperation(new e("onNotNull"),s)}orOnNotNull(...s){return this.addOperation(new e("orOnNotNull"),s)}onExists(...s){return this.addOperation(new e("onExists"),s)}orOnExists(...s){return this.addOperation(new e("orOnExists"),s)}onNotExists(...s){return this.addOperation(new e("onNotExists"),s)}orOnNotExists(...s){return this.addOperation(new e("orOnNotExists"),s)}type(...s){return this.addOperation(new e("type"),s)}andOn(...s){return this.addOperation(new e("andOn"),s)}andOnIn(...s){return this.addOperation(new e("andOnIn"),s)}andOnNotIn(...s){return this.addOperation(new e("andOnNotIn"),s)}andOnNull(...s){return this.addOperation(new e("andOnNull"),s)}andOnNotNull(...s){return this.addOperation(new e("andOnNotNull"),s)}andOnExists(...s){return this.addOperation(new e("andOnExists"),s)}andOnNotExists(...s){return this.addOperation(new e("andOnNotExists"),s)}andOnBetween(...s){return this.addOperation(new e("andOnBetween"),s)}andOnNotBetween(...s){return this.addOperation(new e("andOnNotBetween"),s)}andOnJsonPathEquals(...s){return this.addOperation(new e("andOnJsonPathEquals"),s)}onVal(...s){return this.addOperation(new e("onVal"),s)}andOnVal(...s){return this.addOperation(new e("andOnVal"),s)}orOnVal(...s){return this.addOperation(new e("orOnVal"),s)}}return ja={JoinBuilder:r},ja}var La,zf;function _r(){if(zf)return La;zf=1;const{QueryBuilderOperation:t}=ht,{isPlainObject:e,isObject:r,isFunction:n,once:s}=ye,{isKnexQueryBuilder:o,isKnexJoinBuilder:i}=qt,{transformation:a}=q1,c=s(()=>W1().JoinBuilder);class u extends t{constructor(ee,oe){super(ee,oe),this.args=null}getKnexArgs(ee){return p(this.name,ee,this.args)}onAdd(ee,oe){return this.args=Array.from(oe),d(this.name,ee,this.args)}clone(){const ee=super.clone();return ee.args=this.args,ee}}function d(q,ee,oe){const ie=ee.internalOptions().skipUndefined;for(let ae=0,ue=oe.length;ae<ue;++ae){const $e=oe[ae];if(N($e)){if(ie)return!1;throw new Error(`undefined passed as argument #${ae} for '${q}' operation. Call skipUndefined() method to ignore the undefined values.`)}}return!0}function p(q,ee,oe){const ie=ee.internalOptions().skipUndefined;return oe.map((ae,ue)=>$(ae)?g(ae,ee):R(ae)?y(ae,ee):_(ae)?v(ae,ee,ue,q,ie):n(ae)?C(ae,ee):ne(ae)?ce(ae):e(ae)?me(ae,ee,ue,q,ie):ae)}function N(q){return q===void 0}function $(q){return r(q)&&n(q.toKnexRaw)}function g(q,ee){return q.toKnexRaw(ee)}function R(q){return r(q)&&q.isObjectionQueryBuilderBase===!0}function y(q,ee){return q=a.onConvertQueryBuilderBase(q,ee),q.subqueryOf(ee).toKnexQuery()}function _(q){return Array.isArray(q)}function v(q,ee,oe,ie,ae){return q.map(ue=>{if(ue===void 0){if(!ae)throw new Error(`undefined passed as an item in argument #${oe} for '${ie}' operation. Call skipUndefined() method to ignore the undefined values.`)}else return $(ue)?g(ue,ee):R(ue)?y(ue,ee):ue})}function C(q,ee){return function(...ie){if(o(this))D(this,q,ee);else if(i(this))L(this,q,ee);else return q.apply(this,ie)}}function D(q,ee,oe){const ie=oe.constructor.forClass(oe.modelClass());ie.isPartial(!0).subqueryOf(oe),ee.call(ie,ie),ie.toKnexQuery(q)}function L(q,ee,oe){const ae=c().forClass(oe.modelClass());ae.isPartial(!0).subqueryOf(oe),ee.call(ae,ae),ae.toKnexQuery(q)}function ne(q){return r(q)&&q.$isObjectionModel}function ce(q){return q.$toDatabaseJson()}function me(q,ee,oe,ie,ae){return Object.keys(q).reduce((ue,$e)=>{const be=q[$e];if(be===void 0){if(!ae)throw new Error(`undefined passed as a property in argument #${oe} for '${ie}' operation. Call skipUndefined() method to ignore the undefined values.`)}else $(be)?ue[$e]=g(be,ee):R(be)?ue[$e]=y(be,ee):ue[$e]=be;return ue},{})}return La={ObjectionToKnexConvertingOperation:u},La}var Fa,Qf;function wu(){if(Qf)return Fa;Qf=1;const{ObjectionToKnexConvertingOperation:t}=_r();class e extends t{onBuildKnex(n,s){return n[this.name].apply(n,this.getKnexArgs(s))}}return Fa={KnexOperation:e},Fa}const{asArray:Uo}=ye,Ir=Symbol();let J1=class Dm{constructor({builder:e,result:r=null}){Object.defineProperty(this,Ir,{value:e}),Object.defineProperty(this,"result",{value:Uo(r)})}static create(e){return new Dm(e)}get asFindQuery(){return()=>this[Ir].toFindQuery().clearWithGraphFetched().runAfter(Uo)}get context(){return this[Ir].context()}get transaction(){return this[Ir].unsafeKnex()}get relation(){const e=this[Ir].findOperation(z1);if(e)return jm(e)}get modelOptions(){const e=this[Ir].findOperation(Q1);if(e)return Lm(e)}get items(){const e=this[Ir].findOperation(Y1);return e?Uo(Fm(e)):[]}get inputItems(){const e=this[Ir].findOperation(X1);return e?Uo(km(e)):[]}get cancelQuery(){const e=this;return r=>{const n=this[Ir];r===void 0&&(n.isInsert()?r=e.inputItems:n.isFind()?r=[]:r=0),n.resolve(r)}}};function jm(t){return t.relation}function z1(t){return!!jm(t)}function Lm(t){return t.modelOptions}function Q1(t){return!!Lm(t)}function Fm(t){return t.instance||t.owner&&t.owner.isModels&&t.owner.modelArray}function Y1(t){return!!Fm(t)}function km(t){return t.models||t.model}function X1(t){return!!km(t)}var na={StaticHookArguments:J1};const{ref:Z1}=Hi,{isEmpty:eM}=ye,{isKnexRaw:tM,isKnexQueryBuilder:rM}=qt,{QueryBuilderOperation:nM}=ht,{StaticHookArguments:Bm}=na;let sM=class extends nM{constructor(e,r){super(e,r),this.model=null,this.modelOptions=Object.assign({},this.opt.modelOptions||{})}onAdd(e,r){const n=r[0],s=e.modelClass();return this.model=s.ensureModel(n,this.modelOptions),!0}async onBefore2(e,r){return await oM(e,this.model,this.modelOptions),r}onBefore3(e){const r=this.model.$toDatabaseJson(e);eM(r)&&e.resolve(0)}onBuildKnex(e,r){const n=this.model.$toDatabaseJson(r),s=Um(r,this.model,n);return e.update(s)}onAfter2(e,r){return lM(e,this.model,this.modelOptions,r)}toFindOperation(){return null}clone(){const e=super.clone();return e.model=this.model,e}};async function oM(t,e,r){return await iM(t,e,r),aM(t)}function iM(t,e,r){return e.$beforeUpdate(r,t.context())}function aM(t){const e=Bm.create({builder:t});return t.modelClass().beforeUpdate(e)}async function lM(t,e,r,n){return await cM(t,e,r),uM(t,n)}function cM(t,e,r){return e.$afterUpdate(r,t.context())}async function uM(t,e){const r=Bm.create({builder:t,result:e}),n=await t.modelClass().afterUpdate(r);return n===void 0?e:n}function Um(t,e,r){const n=t.knex(),s={};for(const o of Object.keys(r)){let i=r[o];if(o.indexOf(":")>-1){let a=Z1(o),c="{"+a.parsedExpr.access.map(d=>d.ref).join(",")+"}",u="?";rM(i)||tM(i)?u="to_jsonb(?)":i=JSON.stringify(i),s[a.column]=n.raw(`jsonb_set(??, '${c}', ${u}, true)`,[s[a.column]||a.column,i]),delete e[o]}else s[o]=i}return s}var ms={UpdateOperation:sM,convertFieldExpressionsToRaw:Um};const{isFunction:dM,isEmpty:fM,isObject:hM}=ye,{QueryBuilderOperation:pM}=ht,{convertFieldExpressionsToRaw:_M}=ms;let mM=class extends pM{constructor(e,r){super(e,r),this.model=null,this.args=null}onAdd(e,r){if(this.args=r,!fM(r)&&hM(r[0])&&!Array.isArray(r[0])){const n=r[0],s=e.modelClass();this.model=s.ensureModel(n,{patch:!0})}return!0}onBuildKnex(e,r){if(!dM(e.merge))throw new Error("merge method can only be chained right after onConflict method");if(this.model){const n=this.model.$toDatabaseJson(r),s=_M(r,this.model,n);return e.merge(s)}return e.merge(...this.args)}toFindOperation(){return null}clone(){const e=super.clone();return e.model=this.model,e.args=this.args,e}};var yM={MergeOperation:mM};const{flatten:EM}=ye,{Selection:ka}=$u,{ObjectionToKnexConvertingOperation:gM}=_r(),OM=/count/i;let vM=class extends gM{constructor(e,r){super(e,r),this.selections=[]}onAdd(e,r){const n=EM(r);if(n.length===0&&!OM.test(this.name))return!1;const s=super.onAdd(e,n);for(const o of n){const i=ka.create(o);i&&this.selections.push(i)}return s}onBuildKnex(e,r){return e[this.name].apply(e,this.getKnexArgs(r))}findSelection(e,r){const n=ka.create(r);if(!n)return null;for(const s of this.selections)if(ka.doesSelect(e,s,n))return s;return null}clone(){const e=super.clone();return e.selections=this.selections.slice(),e}};var xm={SelectOperation:vM};const{flatten:RM}=ye,{ObjectionToKnexConvertingOperation:$M}=_r();let wM=class extends $M{onAdd(e,r){return r=RM(r),r.length===0?!1:super.onAdd(e,r)}onBuildKnex(e,r){return e.returning(this.getKnexArgs(r))}};var NM={ReturningOperation:wM};const{ObjectionToKnexConvertingOperation:bM}=_r(),{asSingle:Yf}=ye;let AM=class extends bM{onBuildKnex(e,r){const n=this.getKnexArgs(r);if(n.length===2)n.splice(1,0,"=");else if(n.length!==3)throw new Error(`invalid number of arguments ${n.length}`);return e.where(...TM(...n))}};function TM(t,e,r){if(IM(t,r))return SM(t,e,r);if(PM(t,r))return CM(t,e,r);throw new Error("both cols and values must have same dimensions")}function IM(t,e){return(!Array.isArray(t)||t.length===1)&&(!Array.isArray(e)||e.length===1)}function SM(t,e,r){return[Yf(t),e,Yf(r)]}function PM(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===e.length}function CM(t,e,r){return[n=>{for(let s=0,o=t.length;s<o;++s)n.where(t[s],e,r[s])}]}var MM={WhereCompositeOperation:AM};const DM=kp,{asArray:jM,isObject:LM,isString:Gm}=ye;function qs(t,e){let r=DM.parseFieldExpression(t),n=r.access.map(i=>i.ref).join(","),s=e?"#>>":"#>";return`"${r.columnName.split(".").join('"."')}"${s}'{${n}}'`}function FM(t,e,r,n,s){let o=Vm(e,r,n,s);return t.whereRaw.apply(t,o)}function Vm(t,e,r,n){let s=qs(t);if(Gm(r)){let o=qs(r),i=["(",s,")::jsonb",e,"(",o,")::jsonb"];return n&&i.unshift(n),[i.join(" ")]}else if(LM(r)){let o=["(",s,")::jsonb",e,"?::jsonb"];return n&&o.unshift(n),[o.join(" "),JSON.stringify(r)]}throw new Error("Invalid right hand expression.")}function kM(t,e,r,n){let s=qs(e);n=jM(n);let i="array["+n.map(c=>{if(!Gm(c))throw new Error("All keys to find must be strings.");return"?"}).join(",")+"]",a=t.raw(i,n);return`${s} ${r.replace("?","\\?")} ${a}`}function BM(t,e,r,n){let s=qs(e,!0),o=UM(t,r),i,a=t.raw(" ?",[n]),c=typeof n;if(c==="number")i="::NUMERIC";else if(c==="boolean")i="::BOOLEAN";else if(c==="string")i="::TEXT";else if(n===null)i="::TEXT",a="NULL";else throw new Error("Value must be string, number, boolean or null.");return`(${s})${i} ${o} ${a}`}function UM(t,e){let r=e.trim().toLowerCase();switch(r){case"is":case"is not":return r;default:return t.client.formatter().operator(e)}}var Nu={parseFieldExpression:qs,whereJsonbRefOnLeftJsonbValOrRefOnRight:FM,whereJsonbRefOnLeftJsonbValOrRefOnRightRawQueryParams:Vm,whereJsonFieldRightStringArrayOnLeftQuery:kM,whereJsonFieldQuery:BM};const xM=Nu,{ObjectionToKnexConvertingOperation:GM}=_r();let VM=class extends GM{onBuildKnex(e,r){const n=this.getKnexArgs(r),s=xM.whereJsonbRefOnLeftJsonbValOrRefOnRightRawQueryParams(n[0],this.opt.operator,n[1],this.opt.prefix);return this.opt.bool==="or"?e=e.orWhereRaw.apply(e,s):e=e.whereRaw.apply(e,s),e}};var HM={WhereJsonPostgresOperation:VM};const{ObjectionToKnexConvertingOperation:KM}=_r(),{isObject:qM,asSingle:WM}=ye,{isKnexQueryBuilder:JM}=qt;let zM=class extends KM{constructor(e,r){super(e,r),this.prefix=this.opt.prefix||null}onBuildKnex(e,r){const n=QM(r.knex(),...this.getKnexArgs(r));return this.prefix==="not"?e.whereNotIn(...n):e.whereIn(...n)}clone(){const e=super.clone();return e.prefix=this.prefix,e}};function QM(t,e,r){return YM(e)?XM(t,e,r):tD(e,r)}function YM(t){return Array.isArray(t)&&t.length>1}function XM(t,e,r){return Array.isArray(r)?ZM(e,r):eD(t,e,r)}function ZM(t,e){return Array.isArray(e[0])?[t,e]:[t,[e]]}function eD(t,e,r){const n=`(${e.map(s=>qM(s)?"?":"??").join(",")})`;return[t.raw(n,e),r]}function tD(t,e){return Array.isArray(e)?e=Hm(e,[]):JM(e)||(e=[e]),[WM(t),e]}function Hm(t,e){for(let r=0,n=t.length;r<n;++r){const s=t[r];Array.isArray(s)?Hm(s,e):s!=null&&e.push(s)}return e}var rD={WhereInCompositeOperation:zM};const{ObjectionToKnexConvertingOperation:nD}=_r(),{isKnexQueryBuilder:sD}=qt,{asSingle:oD}=ye;let iD=class extends nD{constructor(e,r){super(e,r),this.prefix=this.opt.prefix||null}onBuildKnex(e,r){const{method:n,args:s}=aD(...this.getKnexArgs(r));return n==="where"?this.prefix==="not"?e.whereNot(...s):e.where(...s):this.prefix==="not"?e.whereNotIn(...s):e.whereIn(...s)}clone(){const e=super.clone();return e.prefix=this.prefix,e}};function aD(t,e){return lD(t)?cD(t,e):uD(t,e)}function lD(t){return Array.isArray(t)&&t.length>1}function cD(t,e){if(!Array.isArray(e))throw new Error("sqlite doesn't support multi-column where in clauses");return{method:"where",args:[r=>{e.forEach(n=>{r.orWhere(s=>{t.forEach((o,i)=>{s.andWhere(o,n[i])})})})}]}}function uD(t,e){return Array.isArray(e)?e=Km(e,[]):sD(e)||(e=[e]),{method:"whereIn",args:[oD(t),e]}}function Km(t,e){for(let r=0,n=t.length;r<n;++r){const s=t[r];Array.isArray(s)?Km(s,e):s!=null&&e.push(s)}return e}var dD={WhereInCompositeSqliteOperation:iD};const qm="objectiontmpjoin";function fD(t){return`${qm}${t}`}function hD(t){return t.startsWith(qm)}var Wm={getTempColumn:fD,isTempColumn:hD};const{ObjectionToKnexConvertingOperation:pD}=_r(),{flatten:_D,zipObject:mD,isString:yD}=ye,{getTempColumn:ED}=Wm;let gD=class extends pD{constructor(e,r){super(e,r),this.prefix=this.opt.prefix||null}onBuildKnex(e,r){const n=this.getKnexArgs(r);return this.build(r.knex(),e,n[0],n[1])}build(e,r,n,s){return Array.isArray(n)&&n.length>1?this.buildComposite(e,r,n,s):this.buildNonComposite(r,n,s)}buildComposite(e,r,n,s){const o=n.map((i,a)=>ED(a));return Array.isArray(s)?this.buildCompositeValue(e,r,n,o,s):this.buildCompositeSubquery(e,r,n,o,s.as(e.raw(`V(${o.map(i=>"??")})`,o)))}buildCompositeValue(e,r,n,s,o){return this.buildCompositeSubquery(e,r,n,s,e.raw(`(VALUES ${o.map(i=>`(${i.map(a=>"?").join(",")})`).join(",")}) AS V(${s.map(i=>"??").join(",")})`,_D(o).concat(s)))}buildCompositeSubquery(e,r,n,s,o){const i=e.from(o).where(mD(s,n.map(a=>e.raw("??",a))));return this.prefix==="not"?r.whereNotExists(i):r.whereExists(i)}buildNonComposite(e,r,n){const s=yD(r)?r:r[0];return Array.isArray(n)?n=Jm(n,[]):n=[n],this.whereIn(e,s,n)}whereIn(e,r,n){return this.prefix==="not"?e.whereNotIn(r,n):e.whereIn(r,n)}clone(){const e=super.clone();return e.prefix=this.prefix,e}};function Jm(t,e){for(let r=0,n=t.length;r<n;++r){const s=t[r];Array.isArray(s)?Jm(s,e):s!=null&&e.push(s)}return e}var OD={WhereInCompositeMsSqlOperation:gD};const vD=Nu,{ObjectionToKnexConvertingOperation:RD}=_r();let $D=class extends RD{onBuildKnex(e,r){const n=this.getKnexArgs(r),s=vD.whereJsonFieldRightStringArrayOnLeftQuery(r.knex(),n[0],this.opt.operator,n[1]);return this.opt.bool==="or"?e=e.orWhereRaw(s):e=e.whereRaw(s),e}};var wD={WhereJsonHasPostgresOperation:$D};const Xf=Nu,{ObjectionToKnexConvertingOperation:ND}=_r();let bD=class extends ND{onBuildKnex(e,r){return this.whereJsonNotObject(e,r.knex(),this.getKnexArgs(r)[0])}whereJsonNotObject(e,r,n){const s=o=>{Xf.whereJsonbRefOnLeftJsonbValOrRefOnRight(o,n,"@>",this.opt.compareValue,"not").orWhereRaw(Xf.whereJsonFieldQuery(r,n,"IS",null))};return this.opt.bool==="or"?e=e.orWhere(s):e=e.where(s),e}};var AD={WhereJsonNotObjectPostgresOperation:bD};const{QueryBuilderOperationSupport:TD}=Pm,{isSqlite:Zf,isMsSql:eh}=qt,{KnexOperation:X}=wu(),{MergeOperation:ID}=yM,{SelectOperation:Gt}=xm,{ReturningOperation:SD}=NM,{WhereCompositeOperation:PD}=MM,{WhereJsonPostgresOperation:Kr}=HM,{WhereInCompositeOperation:th}=rD,{WhereInCompositeSqliteOperation:rh}=dD,{WhereInCompositeMsSqlOperation:nh}=OD,{WhereJsonHasPostgresOperation:xo}=wD,{WhereJsonNotObjectPostgresOperation:Go}=AD;let zm=class extends TD{modify(...e){const r=e[0];return r?(e.length===1?r.call(this,this):(e[0]=this,r(...e)),this):this}transacting(e){return this._context.knex=e||null,this}select(...e){return this.addOperation(new Gt("select"),e)}insert(...e){return this.addOperation(new X("insert"),e)}update(...e){return this.addOperation(new X("update"),e)}delete(...e){return this.addOperation(new X("delete"),e)}del(...e){return this.delete(...e)}forUpdate(...e){return this.addOperation(new X("forUpdate"),e)}forShare(...e){return this.addOperation(new X("forShare"),e)}forNoKeyUpdate(...e){return this.addOperation(new X("forNoKeyUpdate"),e)}forKeyShare(...e){return this.addOperation(new X("forKeyShare"),e)}skipLocked(...e){return this.addOperation(new X("skipLocked"),e)}noWait(...e){return this.addOperation(new X("noWait"),e)}as(...e){return this.addOperation(new X("as"),e)}columns(...e){return this.addOperation(new Gt("columns"),e)}column(...e){return this.addOperation(new Gt("column"),e)}from(...e){return this.addOperation(new X("from"),e)}fromJS(...e){return this.addOperation(new X("fromJS"),e)}fromRaw(...e){return this.addOperation(new X("fromRaw"),e)}into(...e){return this.addOperation(new X("into"),e)}withSchema(...e){return this.addOperation(new X("withSchema"),e)}table(...e){return this.addOperation(new X("table"),e)}distinct(...e){return this.addOperation(new Gt("distinct"),e)}distinctOn(...e){return this.addOperation(new Gt("distinctOn"),e)}join(...e){return this.addOperation(new X("join"),e)}joinRaw(...e){return this.addOperation(new X("joinRaw"),e)}innerJoin(...e){return this.addOperation(new X("innerJoin"),e)}leftJoin(...e){return this.addOperation(new X("leftJoin"),e)}leftOuterJoin(...e){return this.addOperation(new X("leftOuterJoin"),e)}rightJoin(...e){return this.addOperation(new X("rightJoin"),e)}rightOuterJoin(...e){return this.addOperation(new X("rightOuterJoin"),e)}outerJoin(...e){return this.addOperation(new X("outerJoin"),e)}fullOuterJoin(...e){return this.addOperation(new X("fullOuterJoin"),e)}crossJoin(...e){return this.addOperation(new X("crossJoin"),e)}where(...e){return this.addOperation(new X("where"),e)}andWhere(...e){return this.addOperation(new X("andWhere"),e)}orWhere(...e){return this.addOperation(new X("orWhere"),e)}whereNot(...e){return this.addOperation(new X("whereNot"),e)}andWhereNot(...e){return this.addOperation(new X("andWhereNot"),e)}orWhereNot(...e){return this.addOperation(new X("orWhereNot"),e)}whereRaw(...e){return this.addOperation(new X("whereRaw"),e)}andWhereRaw(...e){return this.addOperation(new X("andWhereRaw"),e)}orWhereRaw(...e){return this.addOperation(new X("orWhereRaw"),e)}whereWrapped(...e){return this.addOperation(new X("whereWrapped"),e)}havingWrapped(...e){return this.addOperation(new X("havingWrapped"),e)}whereExists(...e){return this.addOperation(new X("whereExists"),e)}orWhereExists(...e){return this.addOperation(new X("orWhereExists"),e)}whereNotExists(...e){return this.addOperation(new X("whereNotExists"),e)}orWhereNotExists(...e){return this.addOperation(new X("orWhereNotExists"),e)}whereIn(...e){return this.addOperation(new X("whereIn"),e)}orWhereIn(...e){return this.addOperation(new X("orWhereIn"),e)}whereNotIn(...e){return this.addOperation(new X("whereNotIn"),e)}orWhereNotIn(...e){return this.addOperation(new X("orWhereNotIn"),e)}whereNull(...e){return this.addOperation(new X("whereNull"),e)}orWhereNull(...e){return this.addOperation(new X("orWhereNull"),e)}whereNotNull(...e){return this.addOperation(new X("whereNotNull"),e)}orWhereNotNull(...e){return this.addOperation(new X("orWhereNotNull"),e)}whereBetween(...e){return this.addOperation(new X("whereBetween"),e)}andWhereBetween(...e){return this.addOperation(new X("andWhereBetween"),e)}whereNotBetween(...e){return this.addOperation(new X("whereNotBetween"),e)}andWhereNotBetween(...e){return this.addOperation(new X("andWhereNotBetween"),e)}orWhereBetween(...e){return this.addOperation(new X("orWhereBetween"),e)}orWhereNotBetween(...e){return this.addOperation(new X("orWhereNotBetween"),e)}whereLike(...e){return this.addOperation(new X("whereLike"),e)}andWhereLike(...e){return this.addOperation(new X("andWhereLike"),e)}orWhereLike(...e){return this.addOperation(new X("orWhereLike"),e)}whereILike(...e){return this.addOperation(new X("whereILike"),e)}andWhereILike(...e){return this.addOperation(new X("andWhereILike"),e)}orWhereILike(...e){return this.addOperation(new X("orWhereILike"),e)}groupBy(...e){return this.addOperation(new X("groupBy"),e)}groupByRaw(...e){return this.addOperation(new X("groupByRaw"),e)}orderBy(...e){return this.addOperation(new X("orderBy"),e)}orderByRaw(...e){return this.addOperation(new X("orderByRaw"),e)}union(...e){return this.addOperation(new X("union"),e)}unionAll(...e){return this.addOperation(new X("unionAll"),e)}intersect(...e){return this.addOperation(new X("intersect"),e)}except(...e){return this.addOperation(new X("except"),e)}having(...e){return this.addOperation(new X("having"),e)}clearHaving(...e){return this.addOperation(new X("clearHaving"),e)}clearGroup(...e){return this.addOperation(new X("clearGroup"),e)}orHaving(...e){return this.addOperation(new X("orHaving"),e)}havingIn(...e){return this.addOperation(new X("havingIn"),e)}orHavingIn(...e){return this.addOperation(new X("havingIn"),e)}havingNotIn(...e){return this.addOperation(new X("havingNotIn"),e)}orHavingNotIn(...e){return this.addOperation(new X("orHavingNotIn"),e)}havingNull(...e){return this.addOperation(new X("havingNull"),e)}orHavingNull(...e){return this.addOperation(new X("orHavingNull"),e)}havingNotNull(...e){return this.addOperation(new X("havingNotNull"),e)}orHavingNotNull(...e){return this.addOperation(new X("orHavingNotNull"),e)}havingExists(...e){return this.addOperation(new X("havingExists"),e)}orHavingExists(...e){return this.addOperation(new X("orHavingExists"),e)}havingNotExists(...e){return this.addOperation(new X("havingNotExists"),e)}orHavingNotExists(...e){return this.addOperation(new X("orHavingNotExists"),e)}havingBetween(...e){return this.addOperation(new X("havingBetween"),e)}orHavingBetween(...e){return this.addOperation(new X("havingBetween"),e)}havingNotBetween(...e){return this.addOperation(new X("havingNotBetween"),e)}orHavingNotBetween(...e){return this.addOperation(new X("havingNotBetween"),e)}havingRaw(...e){return this.addOperation(new X("havingRaw"),e)}orHavingRaw(...e){return this.addOperation(new X("orHavingRaw"),e)}offset(...e){return this.addOperation(new X("offset"),e)}limit(...e){return this.addOperation(new X("limit"),e)}count(...e){return this.addOperation(new Gt("count"),e)}countDistinct(...e){return this.addOperation(new Gt("countDistinct"),e)}min(...e){return this.addOperation(new Gt("min"),e)}max(...e){return this.addOperation(new Gt("max"),e)}sum(...e){return this.addOperation(new Gt("sum"),e)}sumDistinct(...e){return this.addOperation(new Gt("sumDistinct"),e)}avg(...e){return this.addOperation(new Gt("avg"),e)}avgDistinct(...e){return this.addOperation(new Gt("avgDistinct"),e)}debug(...e){return this.addOperation(new X("debug"),e)}returning(...e){return this.addOperation(new SD("returning"),e)}truncate(...e){return this.addOperation(new X("truncate"),e)}connection(...e){return this.addOperation(new X("connection"),e)}options(...e){return this.addOperation(new X("options"),e)}columnInfo(...e){return this.addOperation(new X("columnInfo"),e)}off(...e){return this.addOperation(new X("off"),e)}timeout(...e){return this.addOperation(new X("timeout"),e)}with(...e){return this.addOperation(new X("with"),e)}withWrapped(...e){return this.addOperation(new X("withWrapped"),e)}withRecursive(...e){return this.addOperation(new X("withRecursive"),e)}withMaterialized(...e){return this.addOperation(new X("withMaterialized"),e)}withNotMaterialized(...e){return this.addOperation(new X("withNotMaterialized"),e)}whereComposite(...e){return this.addOperation(new PD("whereComposite"),e)}whereInComposite(...e){let r=null;return Zf(this.knex())?r=new rh("whereInComposite"):eh(this.knex())?r=new nh("whereInComposite"):r=new th("whereInComposite"),this.addOperation(r,e)}whereNotInComposite(...e){let r=null;return Zf(this.knex())?r=new rh("whereNotInComposite",{prefix:"not"}):eh(this.knex())?r=new nh("whereNotInComposite",{prefix:"not"}):r=new th("whereNotInComposite",{prefix:"not"}),this.addOperation(r,e)}jsonExtract(...e){return this.addOperation(new X("jsonExtract"),e)}jsonSet(...e){return this.addOperation(new X("jsonSet"),e)}jsonInsert(...e){return this.addOperation(new X("jsonInsert"),e)}jsonRemove(...e){return this.addOperation(new X("jsonRemove"),e)}whereJsonObject(...e){return this.addOperation(new X("whereJsonObject"),e)}orWhereJsonObject(...e){return this.addOperation(new X("orWhereJsonObject"),e)}andWhereJsonObject(...e){return this.addOperation(new X("andWhereJsonObject"),e)}whereNotJsonObject(...e){return this.addOperation(new X("whereNotJsonObject"),e)}orWhereNotJsonObject(...e){return this.addOperation(new X("orWhereNotJsonObject"),e)}andWhereNotJsonObject(...e){return this.addOperation(new X("andWhereNotJsonObject"),e)}whereJsonPath(...e){return this.addOperation(new X("whereJsonPath"),e)}orWhereJsonPath(...e){return this.addOperation(new X("orWhereJsonPath"),e)}andWhereJsonPath(...e){return this.addOperation(new X("andWhereJsonPath"),e)}whereJsonSupersetOf(...e){return this.addOperation(new Kr("whereJsonSupersetOf",{operator:"@>",bool:"and"}),e)}andWhereJsonSupersetOf(...e){return this.whereJsonSupersetOf(...e)}orWhereJsonSupersetOf(...e){return this.addOperation(new Kr("orWhereJsonSupersetOf",{operator:"@>",bool:"or"}),e)}whereJsonNotSupersetOf(...e){return this.addOperation(new Kr("whereJsonNotSupersetOf",{operator:"@>",bool:"and",prefix:"not"}),e)}andWhereJsonNotSupersetOf(...e){return this.andWhereJsonNotSupersetOf(...e)}orWhereJsonNotSupersetOf(...e){return this.addOperation(new Kr("orWhereJsonNotSupersetOf",{operator:"@>",bool:"or",prefix:"not"}),e)}whereJsonSubsetOf(...e){return this.addOperation(new Kr("whereJsonSubsetOf",{operator:"<@",bool:"and"}),e)}andWhereJsonSubsetOf(...e){return this.whereJsonSubsetOf(...e)}orWhereJsonSubsetOf(...e){return this.addOperation(new Kr("orWhereJsonSubsetOf",{operator:"<@",bool:"or"}),e)}whereJsonNotSubsetOf(...e){return this.addOperation(new Kr("whereJsonNotSubsetOf",{operator:"<@",bool:"and",prefix:"not"}),e)}andWhereJsonNotSubsetOf(...e){return this.whereJsonNotSubsetOf(...e)}orWhereJsonNotSubsetOf(...e){return this.addOperation(new Kr("orWhereJsonNotSubsetOf",{operator:"<@",bool:"or",prefix:"not"}),e)}whereJsonNotArray(...e){return this.addOperation(new Go("whereJsonNotArray",{bool:"and",compareValue:[]}),e)}orWhereJsonNotArray(...e){return this.addOperation(new Go("orWhereJsonNotArray",{bool:"or",compareValue:[]}),e)}whereJsonNotObject(...e){return this.addOperation(new Go("whereJsonNotObject",{bool:"and",compareValue:{}}),e)}orWhereJsonNotObject(...e){return this.addOperation(new Go("orWhereJsonNotObject",{bool:"or",compareValue:{}}),e)}whereJsonHasAny(...e){return this.addOperation(new xo("whereJsonHasAny",{bool:"and",operator:"?|"}),e)}orWhereJsonHasAny(...e){return this.addOperation(new xo("orWhereJsonHasAny",{bool:"or",operator:"?|"}),e)}whereJsonHasAll(...e){return this.addOperation(new xo("whereJsonHasAll",{bool:"and",operator:"?&"}),e)}orWhereJsonHasAll(...e){return this.addOperation(new xo("orWhereJsonHasAll",{bool:"or",operator:"?&"}),e)}whereJsonIsArray(e){return this.whereJsonSupersetOf(e,[])}orWhereJsonIsArray(e){return this.orWhereJsonSupersetOf(e,[])}whereJsonIsObject(e){return this.whereJsonSupersetOf(e,{})}orWhereJsonIsObject(e){return this.orWhereJsonSupersetOf(e,{})}whereColumn(...e){return this.addOperation(new X("whereColumn"),e)}andWhereColumn(...e){return this.addOperation(new X("andWhereColumn"),e)}orWhereColumn(...e){return this.addOperation(new X("orWhereColumn"),e)}whereNotColumn(...e){return this.addOperation(new X("whereNotColumn"),e)}andWhereNotColumn(...e){return this.addOperation(new X("andWhereNotColumn"),e)}orWhereNotColumn(...e){return this.addOperation(new X("orWhereNotColumn"),e)}onConflict(...e){return this.addOperation(new X("onConflict"),e)}ignore(...e){return this.addOperation(new X("ignore"),e)}merge(...e){return this.addOperation(new ID("merge"),e)}};Object.defineProperties(zm.prototype,{isObjectionQueryBuilderBase:{enumerable:!1,writable:!1,value:!0}});var Qm={QueryBuilderBase:zm};const{QueryBuilderOperation:CD}=ht,{StaticHookArguments:Ym}=na,{isPromise:bu,after:Xm,afterReturn:MD}=Ct,{isObject:sa}=ye;let DD=class extends CD{onBefore2(e,r){return MD(jD(e),r)}onAfter3(e,r){return e.findOptions().dontCallFindHooks?r:LD(e,r)}};function jD(t){const e=Ym.create({builder:t});return t.modelClass().beforeFind(e)}function LD(t,e){const r=t.findOptions(),n=Zm(t.context(),e,r.callAfterFindDeeply);return Xm(n,()=>FD(t,e))}function FD(t,e){const r=Ym.create({builder:t,result:e}),n=t.modelClass().afterFind(r);return Xm(n,s=>s===void 0?e:s)}function Zm(t,e,r){return Array.isArray(e)?e.length===1?wl(t,e[0],e,r):kD(t,e,r):wl(t,e,e,r)}function kD(t,e,r){if(e.length===0||!sa(e[0]))return e;const n=new Array(e.length);let s=!1;for(let o=0,i=e.length;o<i;++o)n[o]=wl(t,e[o],e[o],r),bu(n[o])&&(s=!0);return s?Promise.all(n):n}function wl(t,e,r,n){if(!sa(e)||!e.$isObjectionModel)return r;if(n){const s=[];return BD(t,e,s)?Promise.all(s).then(()=>Ba(t,e,r)):Ba(t,e,r)}else return Ba(t,e,r)}function BD(t,e,r){const n=Object.keys(e);let s=!1;for(let o=0,i=n.length;o<i;++o){const a=n[o],c=e[a];if(UD(c)){const u=Zm(t,c,!0);bu(u)&&(s=!0),r.push(u)}}return s}function UD(t){return sa(t)&&t.$isObjectionModel||xD(t)&&t[0].$isObjectionModel}function xD(t){return Array.isArray(t)&&t.length>0&&sa(t[0])}function Ba(t,e,r){const n=GD(e);if(n!==null){const s=n.call(e,t);return bu(s)?s.then(()=>r):r}else return r}function GD(t){return t.$afterFind!==t.$objectionModelClass.prototype.$afterFind?t.$afterFind:null}var Au={FindOperation:DD};const{QueryBuilderOperation:VD}=ht,{StaticHookArguments:ey}=na;let HD=class extends VD{async onBefore2(e,r){return await KD(e),r}onBuildKnex(e){return e.delete()}onAfter2(e,r){return WD(e,r)}toFindOperation(){return null}};function KD(t){return qD(t)}function qD(t){const e=ey.create({builder:t});return t.modelClass().beforeDelete(e)}function WD(t,e){return JD(t,e)}async function JD(t,e){const r=ey.create({builder:t,result:e}),n=await t.modelClass().afterDelete(r);return n===void 0?e:n}var oa={DeleteOperation:HD};const{QueryBuilderOperation:zD}=ht,{StaticHookArguments:ty}=na,{after:Tu,mapAfterAllReturn:ry}=Ct,{isPostgres:QD,isSqlite:YD,isMySql:XD,isMsSql:ZD}=qt,{isObject:ej}=ye;let tj=class extends zD{constructor(e,r){super(e,r),this.models=null,this.isArray=!1,this.modelOptions=Object.assign({},this.opt.modelOptions||{})}onAdd(e,r){const n=r[0],s=e.modelClass();return this.isArray=Array.isArray(n),this.models=s.ensureModelArray(n,this.modelOptions),!0}async onBefore2(e,r){if(this.models.length>1&&!QD(e.knex())&&!ZD(e.knex()))throw new Error("batch insert only works with Postgresql and SQL Server");return await rj(e,this.models),r}onBuildKnex(e,r){return!YD(r.knex())&&!XD(r.knex())&&!r.has(/returning/)&&(e=e.returning(r.modelClass().getIdColumn())),e.insert(this.models.map(n=>n.$toDatabaseJson(r)))}onAfter1(e,r){if(!Array.isArray(r)||!r.length||r===this.models)return this.models;if(ej(r[0]))for(let n=0,s=this.models.length;n<s;++n)this.models[n].$setDatabaseJson(r[n]);else for(let n=0,s=this.models.length;n<s;++n){const o=this.models[n];o.$id()||o.$id(r[n])}return this.models}onAfter2(e,r){const n=this.isArray?r:r[0]||null;return oj(e,this.models,n)}toFindOperation(){return null}clone(){const e=super.clone();return e.models=this.models,e.isArray=this.isArray,e}};function rj(t,e){const r=nj(t,e);return Tu(r,()=>sj(t))}function nj(t,e){return ry(e,r=>r.$beforeInsert(t.context()),e)}function sj(t){const e=ty.create({builder:t});return t.modelClass().beforeInsert(e)}function oj(t,e,r){const n=ij(t,e);return Tu(n,()=>aj(t,r))}function ij(t,e){return ry(e,r=>r.$afterInsert(t.context()),e)}function aj(t,e){const r=ty.create({builder:t,result:e}),n=t.modelClass().afterInsert(r);return Tu(n,s=>s===void 0?e:s)}var ho={InsertOperation:tj};const{QueryBuilderOperation:lj}=ht;let cj=class extends lj{constructor(e,r){super(e,r),this.relation=r.relation,this.owner=r.owner,this.input=null,this.ids=null}clone(){const e=super.clone();return e.input=this.input,e.ids=this.ids,e}};var ia={RelateOperation:cj};const{QueryBuilderOperation:uj}=ht;let dj=class extends uj{constructor(e,r){super(e,r),this.relation=r.relation,this.owner=r.owner,this.ids=null}clone(){const e=super.clone();return e.ids=this.ids,e}};var aa={UnrelateOperation:dj};const{QueryBuilderOperation:fj}=ht,{RelationExpression:hj}=on;let pj=class extends fj{constructor(e,r){super(e,r),this.expression=hj.create(),this.modifiersAtPath=[],this.graphOptions=this.opt.defaultGraphOptions}buildFinalExpression(){const e=this.expression.clone();return this.modifiersAtPath.forEach((r,n)=>{const s=sh(n);e.expressionsAtPath(r.path).forEach(o=>{o.node.$modify.push(s)})}),e}buildFinalModifiers(e){const r=e.modifiers();return this.modifiersAtPath.forEach((n,s)=>{const o=sh(s);r[o]=n.modifier}),r}cloneFrom(e){this.expression=e.expression.clone(),this.modifiersAtPath=e.modifiersAtPath.slice(),this.graphOptions=Object.assign({},e.graphOptions)}clone(){const e=super.clone();return e.cloneFrom(this),e}};function sh(t){return`_f${t}_`}var Iu={EagerOperation:pj};const{ValidationErrorType:_j}=Lr,mj=63,ny=64;function yj(t,e,r){if(t.node.$allRecursive||t.maxRecursionDepth>ny)throw e.createValidationError({type:_j.RelationExpression,message:`recursion depth of eager expression ${t.toString()} too big for JoinEagerAlgorithm`});t.forEachChildExpression(e,r)}var sy={ID_LENGTH_LIMIT:mj,RELATION_RECURSION_LIMIT:ny,forEachChildExpression:yj};let Ej=class oy{constructor({tableTree:e,modelClass:r,expression:n,parentNode:s=null,relation:o=null}){this.tableTree=e,this.modelClass=r,this.parentNode=s,this.relation=o,this.expression=n,this.childNodes=[],this.alias=this._calculateAlias(),this.idGetter=this._createIdGetter()}static create(e){const r=new oy(e);return r.parentNode&&r.parentNode.childNodes.push(r),r}get options(){return this.tableTree.options}get relationProperty(){return this.expression.node.$name}getReferenceForColumn(e){return`${this.alias}.${e}`}getColumnAliasForColumn(e){return this.parentNode?`${this.alias}${this.options.separator}${e}`:e}getColumnForColumnAlias(e){const r=e.lastIndexOf(this.options.separator);return r===-1?e:e.slice(r+this.options.separator.length)}getIdFromFlatRow(e){return this.idGetter(e)}getJoinTableAlias(e){if(this.relation.isObjectionManyToManyRelation)return e.aliasFor(this.relation.joinTableModelClass)||this.modelClass.joinTableAlias(this.alias)}_calculateAlias(){if(this.parentNode){const e=this.expression.node.$name,r=this.options.aliases[e]||e;return this.options.minimize?`_t${this.tableTree.createNextUid()}`:this.parentNode.parentNode?`${this.parentNode.alias}${this.options.separator}${r}`:r}else return this.tableTree.rootTableAlias}_createIdGetter(){const e=this.modelClass.getIdColumnArray(),r=e.map(n=>this.getColumnAliasForColumn(n));return e.length===1?gj(r):Oj(r)}};function gj(t){const e=t[0];return r=>{const n=r[e];return n===null?null:`${n}`}}function Oj(t){return t.length===2?vj(t):Rj(t)}function vj(t){const e=t[0],r=t[1];return n=>{const s=n[e],o=n[r];return s===null||o===null?null:`${s},${o}`}}function Rj(t){return e=>{let r="";for(let n=0,s=t.length;n<s;++n){const o=t[n],i=e[o];if(i===null)return null;r+=i,n!==s-1&&(r+=",")}return r}}var $j={TableNode:Ej};const{forEachChildExpression:wj}=sy,{TableNode:oh}=$j;let Nj=class iy{constructor({expression:e,rootModelClass:r,rootTableAlias:n,options:s}){this.options=s,this.rootModelClass=r,this.rootTableAlias=n,this.nodes=[],this.nodesByAlias=new Map,this.uidCounter=0,this._createNodes({expression:e,modelClass:r})}static create(e){return new iy(e)}get rootNode(){return this.nodes[0]}getNodeForColumnAlias(e){const r=e.lastIndexOf(this.options.separator);if(r===-1)return this.rootNode;{const n=e.slice(0,r);return this.nodesByAlias.get(n)}}createNextUid(){return this.uidCounter++}_createNodes({expression:e,modelClass:r}){const n=this._createRootNode({expression:e,modelClass:r});this._createChildNodes({expression:e,modelClass:r,parentNode:n});for(const s of this.nodes)this.nodesByAlias.set(s.alias,s)}_createRootNode({expression:e,modelClass:r}){const n=oh.create({tableTree:this,modelClass:r,expression:e});return this.nodes.push(n),n}_createChildNodes({expression:e,modelClass:r,parentNode:n}){wj(e,r,(s,o)=>{const i=oh.create({tableTree:this,modelClass:o.relatedModelClass,expression:s,parentNode:n,relation:o});this.nodes.push(i),this._createChildNodes({expression:s,modelClass:o.relatedModelClass,parentNode:i})})}};var bj={TableTree:Nj};let Aj=class ay{constructor({columnAlias:e,tableNode:r,name:n}){this.columnAlias=e,this.tableNode=r,this.name=n}static create({tableTree:e,columnAlias:r}){const n=e.getNodeForColumnAlias(r);return new ay({columnAlias:r,tableNode:n,name:n.getColumnForColumnAlias(r)})}};var Tj={JoinResultColumn:Aj};const{JoinResultColumn:Ij}=Tj,{groupBy:Sj}=ye;let Pj=class ly{constructor({tableTree:e,omitColumnAliases:r=[]}){this.tableTree=e,this.omitColumnAliases=new Set(r),this.columnsByTableNode=null,this.parentMap=null,this.rootModels=null}static create(e){return new ly(e)}parse(e){if(!Array.isArray(e)||e.length===0)return e;this.columnsByTableNode=this._createColumns(e[0]),this.parentMap=new Map,this.rootModels=[];for(const r of e)this._parseNode(this.tableTree.rootNode,r);return this.rootModels}_parseNode(e,r,n=null,s=null){const o=e.getIdFromFlatRow(r);if(o===null)return;const i=Mj(s,o,e);let a=this.parentMap.get(i);a||(a=this._createModel(e,r),this._addToParent(e,a,n),this.parentMap.set(i,a));for(const c of e.childNodes)this._parseNode(c,r,a,i)}_createModel(e,r){const n={},s=this.columnsByTableNode.get(e);if(s)for(const i of s)this.omitColumnAliases.has(i.columnAlias)||(n[i.name]=r[i.columnAlias]);const o=e.modelClass.fromDatabaseJson(n);for(const i of e.childNodes)i.relation.isOneToOne()?o[i.relationProperty]=null:o[i.relationProperty]=[];return o}_addToParent(e,r,n){e.parentNode?e.relation.isOneToOne()?n[e.relationProperty]=r:n[e.relationProperty].push(r):this.rootModels.push(r)}_createColumns(e){const r=Object.keys(e).map(n=>Ij.create({tableTree:this.tableTree,columnAlias:n}));return Sj(r,Cj)}};function Cj(t){return t.tableNode}function Mj(t,e,r){return t!==null?`${t}/${r.relationProperty}/${e}`:`/${e}`}var Dj={JoinResultParser:Pj};const{uniqBy:jj}=ye,{Selection:la}=$u,{createModifier:Lj}=co,{map:Fj}=Ct,{ValidationErrorType:cy}=Lr,{TableTree:kj}=bj,{JoinResultParser:Bj}=Dj,{ID_LENGTH_LIMIT:ih}=sy;let Uj=class{constructor({modelClass:e}){this.rootModelClass=e,this.expression=null,this.modifiers=null,this.options=xj(),this.tableTree=null,this.internalSelections=null}setExpression(e){return this.expression||(this.expression=e),this}setModifiers(e){return this.modifiers||(this.modifiers=e),this}setOptions(e){return this.options=Object.assign(this.options,e),this}fetchColumnInfo(e){const r=this._getTableTree(e),n=new Set(r.nodes.map(s=>s.modelClass));return Fj(Array.from(n),s=>s.fetchTableMetadata({parentBuilder:e}),{concurrency:this.rootModelClass.getConcurrency(e.unsafeKnex())})}build(e,r=!0){const n=this._getTableTree(e).rootNode,s=new Map([[n,e]]);for(const o of n.childNodes)this._buildJoinsForNode({builder:e,tableNode:o,userSelectQueries:s});r&&this._buildSelects({builder:e,tableNode:n,userSelectQueries:s})}parseResult(e,r){return Bj.create({tableTree:this._getTableTree(e),omitColumnAliases:this.internalSelections.map(s=>s.alias)}).parse(r)}_getTableTree(e){return this.tableTree||(this.tableTree=kj.create({rootModelClass:this.rootModelClass,rootTableAlias:e.tableRef(),expression:this.expression,options:this.options})),this.tableTree}_buildJoinsForNode({builder:e,tableNode:r,userSelectQueries:n}){const s=Gj({builder:e,tableNode:r,modifiers:this.modifiers}),o=s.clone();o.modify(r.relation.modify),n.set(r,o),r.relation.join(e,{joinOperation:this.options.joinOperation,ownerTable:r.parentNode.alias,relatedTableAlias:r.alias,joinTableAlias:r.getJoinTableAlias(e),relatedJoinSelectQuery:Vj({builder:s,tableNode:r})});for(const i of r.childNodes)this._buildJoinsForNode({builder:e,tableNode:i,userSelectQueries:n})}_buildSelects({builder:e,tableNode:r,userSelectQueries:n}){const{selections:s,internalSelections:o}=uy({builder:e,tableNode:r,userSelectQueries:n});for(const i of s)Xj(r.modelClass,i.name);this.internalSelections=o,e.select(Jj(s))}};function xj(){return{joinOperation:"leftJoin",minimize:!1,separator:":",aliases:{}}}function Gj({builder:t,tableNode:e,modifiers:r}){const{relation:n,expression:s,modelClass:o}=e,i=o.query().childQueryOf(t);for(const a of s.node.$modify){const c=Lj({modifier:a,modelClass:o,modifiers:r});try{c(i)}catch(u){throw u instanceof o.ModifierNotFoundError?o.createValidationError({type:cy.RelationExpression,message:`could not find modifier "${a}" for relation "${n.name}"`}):u}}return i}function Vj({builder:t,tableNode:e}){const r=t.tableRef(),n=[...t.modelClass().getIdColumnArray(),...e.relation.relatedProp.cols,...e.childNodes.reduce((o,i)=>[...o,...i.relation.ownerProp.cols],[])],s=jj(n).filter(o=>!t.hasSelectionAs(o,o)).map(o=>`${r}.${o}`);return t.select(s)}function uy({builder:t,tableNode:e,userSelectQueries:r}){const n=r.get(e),s=n.findAllSelections(),o=Yj(s);let i=[],a=[];if(e.parentNode&&(i=Hj({userSelections:s,tableNode:e}),o&&e.relation.isObjectionManyToManyRelation)){const c=Kj({builder:t,tableNode:e});i=i.concat(c)}if(o)i=qj({builder:t,tableNode:e}).concat(i);else{const c=Wj({tableNode:e});for(const u of c)n.hasSelectionAs(u.column,u.column)||(i.push(u),a.push(u))}for(const c of e.childNodes){const u=uy({builder:t,tableNode:c,userSelectQueries:r});i=i.concat(u.selections),a=a.concat(u.internalSelections)}return{selections:i,internalSelections:a}}function Hj({userSelections:t,tableNode:e}){return t.filter(Qj).map(r=>new la(e.alias,r.name,e.getColumnAliasForColumn(r.name)))}function Kj({builder:t,tableNode:e}){return e.relation.joinTableExtras.map(r=>new la(e.getJoinTableAlias(t),r.joinTableCol,e.getColumnAliasForColumn(r.aliasCol)))}function qj({builder:t,tableNode:e}){const r=t.tableNameFor(e.modelClass),n=e.modelClass.tableMetadata({table:r});if(!n)throw new Error(`table metadata has not been fetched for table '${r}'. Are you trying to call toKnexQuery() for a withGraphJoined query? To make sure the table metadata is fetched see the objection.initialize function.`);return n.columns.map(s=>new la(e.alias,s,e.getColumnAliasForColumn(s)))}function Wj({tableNode:t}){return t.modelClass.getIdColumnArray().map(e=>new la(t.alias,e,t.getColumnAliasForColumn(e)))}function Jj(t){return t.map(e=>`${`${e.table}.${e.column}`} as ${e.alias}`)}function zj(t){return t.column==="*"}function Qj(t){return t.column!=="*"}function Yj(t){return t.length===0||t.some(zj)}function Xj(t,e){if(e.length>ih)throw t.createValidationError({type:cy.RelationExpression,message:`identifier ${e} is over ${ih} characters long and would be truncated by the database engine.`})}var dy={RelationJoiner:Uj};const{EagerOperation:Zj}=Iu,{RelationJoiner:eL}=dy;class tL extends Zj{constructor(e,r){super(e,r),this.joiner=null}onAdd(e){return e.findOptions({callAfterFindDeeply:!0}),this.joiner=new eL({modelClass:e.modelClass()}),!0}onBefore3(e){return this.joiner.setExpression(this.buildFinalExpression()).setModifiers(this.buildFinalModifiers(e)).setOptions(this.graphOptions).fetchColumnInfo(e)}onBuild(e){this.joiner.setExpression(this.buildFinalExpression()).setModifiers(this.buildFinalModifiers(e)).setOptions(this.graphOptions).build(e)}onRawResult(e,r){return this.joiner.parseResult(e,r)}clone(){const e=super.clone();return e.joiner=this.joiner,e}}var rL={JoinEagerOperation:tL};const{isObject:As}=ye;function nL(t,e,r){r=r||{};let n=e.size>1,s;if(n)if(Array.isArray(t))if(Array.isArray(t[0])){s=new Array(t.length);for(let o=0,i=t.length;o<i;++o)s[o]=ah(t[o],e)}else if(As(t[0])){s=new Array(t.length);for(let o=0,i=t.length;o<i;++o)s[o]=lh(t[o])}else s=[ah(t,e)];else if(As(t))s=[t];else throw new Error(`invalid composite key ${JSON.stringify(t)}`);else if(Array.isArray(t))if(As(t[0])){s=new Array(t.length);for(let o=0,i=t.length;o<i;++o)s[o]=lh(t[o])}else{s=new Array(t.length);for(let o=0,i=t.length;o<i;++o)s[o]={},e.setProp(s[o],0,t[o])}else if(As(t))s=[t];else{const o={};e.setProp(o,0,t),s=[o]}return sL(s,e),r.arrayOutput?oL(s,e):s}function ah(t,e){if(!Array.isArray(t))throw new Error(`invalid composite key ${JSON.stringify(t)}`);if(t.length!=e.size)throw new Error(`composite identifier ${JSON.stringify(t)} should have ${e.size} values`);const r={};for(let n=0;n<t.length;++n)e.setProp(r,n,t[n]);return r}function lh(t){if(As(t))return t;throw new Error(`invalid composite key ${JSON.stringify(t)}`)}function sL(t,e){for(let r=0,n=t.length;r<n;++r){const s=t[r];for(let o=0,i=e.size;o<i;++o)if(typeof e.getProp(s,o)>"u")throw new Error(`expected id ${JSON.stringify(s)} to have property ${e.propDescription(o)}`)}}function oL(t,e){const r=new Array(t.length);for(let n=0,s=t.length;n<s;++n)r[n]=e.getProps(t[n]);return r}var ca={normalizeIds:nL};const{isObject:Su,asArray:iL,asSingle:aL,uniqBy:lL}=ye,{normalizeIds:cL}=ca,Zr={Models:"Models",Reference:"Reference",QueryBuilder:"QueryBuilder",Identifiers:"Identifiers"};let uL=class fy{constructor(e){this.owner=e,this.type=dL(e)}static create(e){return new fy(e)}static createParentReference(e,r){return this.create(r.ownerProp.refs(_L(e)))}get isModels(){return this.type===Zr.Models}get isReference(){return this.type===Zr.Reference}get isQueryBuilder(){return this.type===Zr.QueryBuilder}get isIdentifiers(){return this.type===Zr.Identifiers}get modelArray(){return iL(this.owner)}get model(){return aL(this.owner)}get reference(){return this.owner}get queryBuilder(){return this.owner}get identifiers(){return this.owner}buildFindQuery(e,r,n){if(this.isReference)n.forEach((s,o)=>{e.where(s,this.reference[o])});else if(this.isModels||this.isIdentifiers||this.isQueryBuilder){const s=this.getProps(r);s?e.whereInComposite(n,s):e.where(!1).resolve([])}else e.where(!1).resolve([]);return e}getProps(e,r=e.ownerProp){if(this.isModels)return this._getPropsFromModels(r);if(this.isIdentifiers)return this._getPropsFromIdentifiers(e,r);if(this.isQueryBuilder)return this._getPropsFromQuery(e,r)}getSplitProps(e,r,n=r.ownerProp){const s=this.getProps(r,r.ownerProp);return py(s)?n.size===1?[[s]]:[Array.from({length:n.size}).map((o,i)=>s.clone().clearSelect().select(n.ref(e,i)))]:s}getNormalizedIdentifiers(e){return cL(this.identifiers,e,{arrayOutput:!0})}_getPropsFromModels(e){const r=this.modelArray.map(n=>e.getProps(n));return _y(r)?lL(r,mL):null}_getPropsFromIdentifiers(e,r){const n=this.getNormalizedIdentifiers(r);if(yL(r))return n;{const s=e.ownerModelClass.query();return s.findByIds(n),s.select(r.refs(s)),s}}_getPropsFromQuery(e,r){const n=this.queryBuilder.clone();return EL(n,e)&&(n.clearSelect(),n.select(r.refs(n))),n}};function dL(t){return hy(t)||fL(t)?Zr.Models:pL(t)?Zr.Reference:py(t)?Zr.QueryBuilder:Zr.Identifiers}function hy(t){return Su(t)&&!!t.$isObjectionModel}function fL(t){return Array.isArray(t)&&hy(t[0])}function hL(t){return Su(t)&&!!t.isObjectionReferenceBuilder}function pL(t){return Array.isArray(t)&&hL(t[0])}function py(t){return Su(t)&&!!t.isObjectionQueryBuilder}function _L(t){if(t=t.parentQuery(),!t)throw Error("query method `for` ommitted outside a subquery, can not figure out relation target");for(;t.isPartial()&&t.parentQuery();)t=t.parentQuery();return t}function _y(t){for(let e=0,r=t.length;e<r;++e){const n=t[e];if(Array.isArray(n)){if(_y(n))return!0}else if(n!=null)return!0}return!1}function mL(t){return t.map(e=>Buffer.isBuffer(e)?e.toString("hex"):e).join(",")}function yL(t){return t.modelClass.getIdRelationProperty().props.every((r,n)=>r===t.props[n])}function EL(t,e){return t.modelClass().getTableName()===e.ownerModelClass.getTableName()}var my={RelationOwner:uL};const ch=Ct,{EagerOperation:gL}=Iu,{isMsSql:OL,isOracle:vL,isSqlite:RL}=qt,{isObject:$L,asArray:wL,flatten:NL,chunk:bL}=ye,{ValidationErrorType:yy}=Lr,{createModifier:AL}=co,{RelationDoesNotExistError:TL}=Om,{RelationOwner:IL}=my;let SL=class extends gL{constructor(e,r){super(e,r),this.relationsToFetch=[],this.omitProps=[]}batchSize(e){return this.graphOptions.maxBatchSize?this.graphOptions.maxBatchSize:OL(e)?2e3:vL(e)?1e3:RL(e)?999:1e4}onBuild(e){const r=uh(e.modelClass(),this.buildFinalExpression()),{selectionsToAdd:n,selectedProps:s}=PL(e,r);n.length&&e.select(n),this.relationsToFetch=r,this.omitProps=s}async onAfter2(e,r){const n=e.resultModelClass();if(!r)return r;const s=wL(r);if(!s.length||!$L(s[0]))return r;await ch.map(this.relationsToFetch,i=>this.fetchRelation(e,s,i.relation,i.childExpression),{concurrency:n.getConcurrency(e.unsafeKnex())});const o=e.internalOptions();if(!this.omitProps.length||o.keepImplicitJoinProps)return r;for(let i=0,a=r.length;i<a;++i){const c=r[i];for(let u=0,d=this.omitProps.length;u<d;++u)n.omitImpl(c,this.omitProps[u])}return r}async fetchRelation(e,r,n,s){const o=e.resultModelClass(),i=this.batchSize(e.knex()),a=bL(r,i),c=await ch.map(a,u=>this.fetchRelationBatch(e,u,n,s),{concurrency:o.getConcurrency(e.unsafeKnex())});return NL(c)}fetchRelationBatch(e,r,n,s){if(this.shouldSkipFetched(r,n,s))return this.createSkippedQuery(e,r,n,s);const o=this.createRelationQuery(e,n,s),i=n.find(o,IL.create(r));i.alwaysReturnArray=!0,i.assignResultToOwner=!0,i.relationProperty=s.node.$name,o.addOperation(i,[]);for(const a of s.node.$modify){const c=AL({modifier:a,modelClass:n.relatedModelClass,modifiers:this.buildFinalModifiers(e)});try{c(o)}catch(u){const d=e.modelClass();throw u instanceof d.ModifierNotFoundError?d.createValidationError({type:yy.RelationExpression,message:`could not find modifier "${a}" for relation "${n.name}"`}):u}}return o}shouldSkipFetched(e,r,n){if(!this.graphOptions.skipFetched||e.some(i=>i[n.node.$name]===void 0))return!1;const s=uh(r.relatedModelClass,n),o=dh(e,n);for(const{relation:i}of s){const{ownerProp:a}=i;for(let c=0,u=a.size;c<u;++c){const d=a.props[c];for(const p of o)if(p[d]===void 0)return!1}}return!0}createSkippedQuery(e,r,n,s){const o=dh(r,s);return n.relatedModelClass.query().childQueryOf(e).findOptions({dontCallFindHooks:!0}).withGraphFetched(s,this.graphOptions).resolve(o)}createRelationQuery(e,r,n){return r.relatedModelClass.query().childQueryOf(e).withGraphFetched(n,this.graphOptions).modifiers(this.buildFinalModifiers(e))}clone(){const e=super.clone();return e.relationsToFetch=this.relationsToFetch.slice(),e.omitProps=this.omitProps.slice(),e}};function uh(t,e){const r=[];try{e.forEachChildExpression(t,(n,s)=>{r.push({childExpression:n,relation:s})})}catch(n){throw n instanceof TL?t.createValidationError({type:yy.RelationExpression,message:`unknown relation "${n.relationName}" in an eager expression`}):n}return r}function PL(t,e){const r=[],n=[];for(const{relation:s}of e){const o=s.ownerProp;for(let i=0,a=o.size;i<a;++i){const c=o.ref(t,i).fullColumn(t),u=o.props[i],d=o.cols[i];!t.hasSelectionAs(c,d)&&r.indexOf(c)===-1&&(n.push(u),r.push(c))}}return{selectionsToAdd:r,selectedProps:n}}function dh(t,e){const r=[];for(const n of t){const s=n[e.node.$name];if(s)if(Array.isArray(s))for(const o of s)r.push(o);else r.push(s)}return r}var Ey={WhereInEagerOperation:SL};const{WhereInEagerOperation:CL}=Ey;class ML extends CL{batchSize(){return 1}}var DL={NaiveEagerOperation:ML};const{QueryBuilderOperation:jL}=ht;let LL=class Ht extends jL{constructor(e,r){super(e,r),this.delegate=r.delegate}is(e){return super.is(e)||this.delegate.is(e)}onAdd(e,r){return this.delegate.onAdd(e,r)}onBefore1(e,r){return this.delegate.onBefore1(e,r)}hasOnBefore1(){return this.onBefore1!==Ht.prototype.onBefore1||this.delegate.hasOnBefore1()}onBefore2(e,r){return this.delegate.onBefore2(e,r)}hasOnBefore2(){return this.onBefore2!==Ht.prototype.onBefore2||this.delegate.hasOnBefore2()}onBefore3(e,r){return this.delegate.onBefore3(e,r)}hasOnBefore3(){return this.onBefore3!==Ht.prototype.onBefore3||this.delegate.hasOnBefore3()}onBuild(e){return this.delegate.onBuild(e)}hasOnBuild(){return this.onBuild!==Ht.prototype.onBuild||this.delegate.hasOnBuild()}onBuildKnex(e,r){return this.delegate.onBuildKnex(e,r)}hasOnBuildKnex(){return this.onBuildKnex!==Ht.prototype.onBuildKnex||this.delegate.hasOnBuildKnex()}onRawResult(e,r){return this.delegate.onRawResult(e,r)}hasOnRawResult(){return this.onRawResult!==Ht.prototype.onRawResult||this.delegate.hasOnRawResult()}onAfter1(e,r){return this.delegate.onAfter1(e,r)}hasOnAfter1(){return this.onAfter1!==Ht.prototype.onAfter1||this.delegate.hasOnAfter1()}onAfter2(e,r){return this.delegate.onAfter2(e,r)}hasOnAfter2(){return this.onAfter2!==Ht.prototype.onAfter2||this.delegate.hasOnAfter2()}onAfter3(e,r){return this.delegate.onAfter3(e,r)}hasOnAfter3(){return this.onAfter3!==Ht.prototype.onAfter3||this.delegate.hasOnAfter3()}queryExecutor(e){return this.delegate.queryExecutor(e)}hasQueryExecutor(){return this.queryExecutor!==Ht.prototype.queryExecutor||this.delegate.hasQueryExecutor()}onError(e,r){return this.delegate.onError(e,r)}hasOnError(){return this.onError!==Ht.prototype.onError||this.delegate.hasOnError()}toFindOperation(e){return this.delegate.toFindOperation(e)}hasToFindOperation(){return this.hasToFindOperation!==Ht.prototype.hasToFindOperation||this.delegate.hasToFindOperation()}clone(){const e=super.clone();return e.delegate=this.delegate&&this.delegate.clone(),e}};var po={DelegateOperation:LL};const FL={Relation:"Relation",Reference:"Reference"},kL={Object:"Object",Property:"Property"};let BL=class{constructor(e,r,n,s=null,o=null){this.type=e,this.ownerNode=r,this.relatedNode=n,this.relation=s,this.relationIndex=o,this.refType=null,this.refMatch=null,this.refOwnerDataPath=null,this.refRelatedDataPath=null}static get Type(){return FL}static get ReferenceType(){return kL}getOtherNode(e){return this.isOwnerNode(e)?this.relatedNode:this.ownerNode}isOwnerNode(e){return e===this.ownerNode}isRelatedNode(e){return e===this.relatedNode}};var _o={ModelGraphEdge:BL};const{ModelGraphEdge:Ua}=_o,{isNumber:UL}=ye,Qt={};let xL=class{constructor(e,r){this.modelClass=e,this.obj=r,this.edges=[],this.userData={},this.hasId=r.$hasId(),this.uid=r[e.uidProp],this.refEdges=[],this.parentEdge=null,this._relationPath=Qt,this._relationPathKey=Qt,this._dataPath=Qt,this._dataPathKey=Qt,this._idPath=Qt,this._idPathKey=Qt}get isReference(){return this.reference!==void 0}get isDbReference(){return this.dbReference!==void 0}get reference(){return this.obj[this.modelClass.uidRefProp]}get dbReference(){return this.obj[this.modelClass.dbRefProp]}get parentNode(){return this.parentEdge?this.parentEdge.ownerNode:null}get indexInRelation(){return this.parentEdge?this.parentEdge.relationIndex:null}get relationName(){return this.parentEdge?this.parentEdge.relation.name:null}get relationPath(){return this._relationPath===Qt&&(this._relationPath=this._createRelationPath()),this._relationPath}get relationPathKey(){return this._relationPathKey===Qt&&(this._relationPathKey=this._createRelationPathKey()),this._relationPathKey}get dataPath(){return this._dataPath===Qt&&(this._dataPath=this._createDataPath()),this._dataPath}get dataPathKey(){return this._dataPathKey===Qt&&(this._dataPathKey=this._createDataPathKey()),this._dataPathKey}get idPath(){return this._idPath===Qt&&(this._idPath=this._createIdPath()),this._idPath}get idPathKey(){return this._idPathKey===Qt&&(this._idPathKey=this._createIdPathKey()),this._idPathKey}get referencedNode(){for(const e of this.refEdges)if(e.refType===Ua.ReferenceType.Object&&e.isOwnerNode(this))return e.relatedNode;return null}get referencingNodes(){const e=[];for(const r of this.refEdges)r.refType===Ua.ReferenceType.Object&&r.isRelatedNode(this)&&e.push(r.ownerNode);return e}get descendantRelationNodes(){return this._collectDescendantRelationNodes([])}removeEdge(e){if(e===this.parentEdge)throw new Error("cannot remove parent edge");this.edges=this.edges.filter(r=>r!==e),this.refEdges=this.refEdges.filter(r=>r!==e)}_collectDescendantRelationNodes(e){for(const r of this.edges)r.type===Ua.Type.Relation&&r.isOwnerNode(this)&&(e.push(r.relatedNode),r.relatedNode._collectDescendantRelationNodes(e));return e}_createRelationPath(){return this.parentNode===null?[]:[...this.parentNode.relationPath,this.relationName]}_createRelationPathKey(){return this.relationPath.join(".")}_createDataPath(){return this.parentEdge===null?[]:this.parentEdge.relation.isOneToOne()?[...this.parentNode.dataPath,this.relationName]:[...this.parentNode.dataPath,this.relationName,this.indexInRelation]}_createDataPathKey(){const e=this.dataPath.reduce((r,n)=>UL(n)?`${r}[${n}]`:r?`${r}.${n}`:n,"");return e&&"."+e}_createIdPath(){if(!this.obj.$hasId())return null;if(this.parentEdge===null)return[this.obj.$idKey()];{const e=this.parentNode.idPath;return e===null?null:[...e,this.relationName,this.obj.$idKey()]}}_createIdPathKey(){return this.idPath?this.idPath.join("."):null}};var GL={ModelGraphNode:xL};const{isObject:Nl,isString:VL,asArray:HL,asSingle:KL}=ye,{ValidationErrorType:qL}=Lr,{ModelGraphNode:WL}=GL,{ModelGraphEdge:Sr}=_o;let JL=class{constructor(){this.nodes=[],this.edges=[]}static buildGraph(e,r){const n=new this;return n._buildGraph(e,r),n}_buildGraph(e,r){if(r)if(Array.isArray(r))this._buildNodes(e,r);else if(Nl(r))this._buildNode(e,r);else throw bl(e,r);this._buildReferences()}_buildNodes(e,r,n=null,s=null){r=HL(r),r.forEach((o,i)=>{this._buildNode(e,o,n,s,i)})}_buildNode(e,r,n=null,s=null,o=null){if(r=KL(r),!Nl(r)||!r.$isObjectionModel)throw bl(e,r);const i=new WL(e,r);if(this.nodes.push(i),n){const a=new Sr(Sr.Type.Relation,n,i,s,o);i.parentEdge=a,this._addEdge(n,i,a)}this._buildRelationNodes(i)}_buildRelationNodes(e){for(const r of e.modelClass.getRelationNames()){const n=e.obj[r];if(!n)continue;const s=e.modelClass.getRelation(r);s.isOneToOne()?this._buildNode(s.relatedModelClass,n,e,s):this._buildNodes(s.relatedModelClass,n,e,s)}}_buildReferences(){const e=this._nodesByUid();this._buildObjectReferences(e),this._buildPropertyReferences(e)}_nodesByUid(){const e=new Map;for(const r of this.nodes){const n=r.uid;n!==void 0&&e.set(n,r)}return e}_buildObjectReferences(e){for(const r of this.nodes){const n=r.reference;if(n===void 0)continue;const s=e.get(n);if(!s)throw fh(n);const o=new Sr(Sr.Type.Reference,r,s);o.refType=Sr.ReferenceType.Object,this._addEdge(r,s,o)}}_buildPropertyReferences(e){for(const r of this.nodes)gy(r.obj,({path:n,refMatch:s,ref:o,refPath:i})=>{const a=e.get(o);if(!a)throw fh(o);const c=new Sr(Sr.Type.Reference,r,a);c.refType=Sr.ReferenceType.Property,c.refMatch=s,c.refOwnerDataPath=n.slice(),c.refRelatedDataPath=i,this._addEdge(r,a,c)})}_addEdge(e,r,n){this.edges.push(n),e.edges.push(n),r.edges.push(n),n.type===Sr.Type.Reference&&(e.refEdges.push(n),r.refEdges.push(n))}};function gy(t,e){const r=t.constructor,n=r.getRelationNames();for(const s of Object.keys(t))n.includes(s)||Pu(t[s],[s],(o,i)=>{YL(r.propRefRegex,o,a=>{const[c,u,d]=a;e({path:i,refMatch:c,ref:u,refPath:d.trim().split(".")})})})}function Pu(t,e,r){Array.isArray(t)?zL(t,e,r):Nl(t)&&!Buffer.isBuffer(t)?QL(t,e,r):VL(t)&&r(t,e)}function zL(t,e,r){for(let n=0;n<t.length;++n)e.push(n),Pu(t[n],e,r),e.pop()}function QL(t,e,r){for(const n of Object.keys(t))e.push(n),Pu(t[n],e,r),e.pop()}function YL(t,e,r){let n=t.exec(e);for(;n;)r(n),n=t.exec(e)}function fh(t){return new Error([`could not resolve reference ${t} in a graph.`,"If you are sure the #id exist in the same graph,","this may be due to a limitation that a subgraph under a related item","cannot reference an item in a subgraph under another related item.","If you run into this limitation, please open an issue in objection github."].join(" "))}function bl(t,e){throw t.createValidationError({type:qL.InvalidGraph,message:`expected value "${e}" to be an instance of ${t.name}`})}var Cu={ModelGraphBuilder:JL,createNotModelError:bl,forEachPropertyReference:gy};const{ModelGraphBuilder:XL}=Cu,Vo={};let ZL=class Al{constructor(e,r){this.nodes=e,this.edges=r,this._nodesByObjects=Vo,this._nodesByIdPathKeys=Vo}static create(e,r){const n=XL.buildGraph(e,r);return new Al(n.nodes,n.edges)}static createEmpty(){return new Al([],[])}get rootObjects(){return this.nodes.filter(e=>!e.parentEdge).map(e=>e.obj)}nodeForObject(e){return e?(this._nodesByObjects===Vo&&(this._nodesByObjects=eF(this.nodes)),this._nodesByObjects.get(e)||null):null}nodeForNode(e){return e?(this._nodesByIdPathKeys===Vo&&(this._nodesByIdPathKeys=tF(this.nodes)),this._nodesByIdPathKeys.get(e.idPathKey)||null):null}};function eF(t){const e=new Map;for(const r of t)e.set(r.obj,r);return e}function tF(t){const e=new Map;for(const r of t){const n=r.idPathKey;n!==null&&e.set(n,r)}return e}var Oy={ModelGraph:ZL};const rF="noRelate",hh="noUnrelate",nF="noInsert",xa="noUpdate",ph="noDelete",_h="update",sF="relate",oF="unrelate",mh="insertMissing",yh="fetchStrategy",iF="allowRefs",Tl={OnlyIdentifiers:"OnlyIdentifiers",Everything:"Everything",OnlyNeeded:"OnlyNeeded"};class vi{constructor(e){e instanceof vi?this.options=e.options:this.options=e}isFetchStrategy(e){if(!Tl[e])throw new Error(`unknown strategy "${e}"`);return this.options[yh]?this.options[yh]===e:e===Tl.OnlyNeeded}isInsertOnly(){return[ph,xa,hh,mh].every(e=>this.options[e]===!0)}shouldRelateIgnoreDisable(e,r){return e.isReference||e.isDbReference?!0:this._hasOption(e,sF)&&!Ga(e,r)&&!!e.parentEdge&&!!e.parentEdge.relation&&e.parentEdge.relation.hasRelateProp(e.obj)&&r.nodeDbExistence.doesNodeExistInDb(e)}shouldRelate(e,r){return!this._hasOption(e,rF)&&this.shouldRelateIgnoreDisable(e,r)}shouldInsertIgnoreDisable(e,r){return!Ga(e,r)&&!this.shouldRelateIgnoreDisable(e,r)&&(!e.hasId||this.shouldInsertMissing(e))}shouldInsert(e,r){return!this._hasOption(e,nF)&&this.shouldInsertIgnoreDisable(e,r)}shouldInsertMissing(e){return this._hasOption(e,mh)}shouldPatchOrUpdateIgnoreDisable(e,r){return this.shouldRelate(e,r)?!0:!!Ga(e,r)}shouldPatch(e,r){return this.shouldPatchOrUpdateIgnoreDisable(e,r)&&!this._hasOption(e,xa)&&!this._hasOption(e,_h)}shouldUpdate(e,r){return this.shouldPatchOrUpdateIgnoreDisable(e,r)&&!this._hasOption(e,xa)&&this._hasOption(e,_h)}shouldUnrelateIgnoreDisable(e){return this._hasOption(e,oF)}shouldUnrelate(e,r){return!Eh(e,r.graph)&&!this._hasOption(e,hh)&&this.shouldUnrelateIgnoreDisable(e)}shouldDelete(e,r){return!Eh(e,r.graph)&&!this._hasOption(e,ph)&&!this.shouldUnrelateIgnoreDisable(e)}shouldInsertOrRelate(e,r){return this.shouldInsert(e,r)||this.shouldRelate(e,r)}shouldDeleteOrUnrelate(e,r){return this.shouldDelete(e,r)||this.shouldUnrelate(e,r)}allowRefs(){return!!this.options[iF]}rebasedOptions(e){const r={},n=e.relationPathKey;for(const s of Object.keys(this.options)){const o=this.options[s];Array.isArray(o)?r[s]=o.filter(i=>i.startsWith(n)).map(i=>i.slice(n.length+1)).filter(i=>!!i):r[s]=o}return new vi(r)}_hasOption(e,r){const n=this.options[r];if(Array.isArray(n))return n.indexOf(e.relationPathKey)!==-1;if(typeof n=="boolean")return n;if(n===void 0)return!1;throw new Error(`expected ${r} option value "${n}" to be an instance of boolean or array of strings`)}}function Ga(t,e){return!e||!t?null:e.currentGraph.nodeForNode(t)}function Eh(t,e){return!e||!t?null:e.nodeForNode(t)}var vy={GraphOptions:vi,FetchStrategy:Tl};const{asArray:Ry,groupBy:aF}=ye,{ModelGraph:gh}=Oy,{FetchStrategy:Oh}=vy,{RelationExpression:lF}=on;class cF{static async fetchCurrentGraph({builder:e,graph:r,graphOptions:n}){const{rootObjects:s}=r,o=uF(s),i=e.modelClass();if(o.length===0)return Promise.resolve(gh.create(i,[]));const a=lF.fromModelGraph(s),c=await i.query().childQueryOf(e,OF()).modify(dF(e)).modify(fF(r,n,a)).findByIds(o).withGraphFetched(a).internalOptions(vF());return gh.create(i,c)}}function uF(t){return Ry(t).filter(e=>e.$hasId()).map(e=>e.$id())}function dF(t){return e=>{for(const r of["forUpdate","forShare","forNoKeyUpdate","forKeyShare"])t.has(r)&&e[r]()}}function fF(t,e,r){return n=>{const s=hF(t,r);for(const[o,i]of s.entries()){const a=pF(i,e);o?n.modifyGraph(o,a):n.modify(a)}}}function hF(t,e){const r=aF(t.nodes,n=>n.relationPathKey);return $y(e.node,n=>{r.has(n)||r.set(n,[])}),r}function pF(t,e){return e.isFetchStrategy(Oh.OnlyIdentifiers)?_F():e.isFetchStrategy(Oh.OnlyNeeded)?mF(t):()=>{}}function _F(){return t=>{t.select(t.fullIdColumn())}}function mF(t){return e=>{const r=new Map;for(const o of t){const i=o.obj.$toDatabaseJson(e);for(const a of Object.keys(i)){if(!yF(a,r,o))continue;const c=EF(e,a,o)||gF(e,a,o);r.set(a,c)}}const n=Array.from(r.values()),s=Ry(e.fullIdColumn());for(const o of s)n.includes(o)||n.push(o);e.select(n)}}function yF(t,e,r){const n=r.modelClass;return!e.has(t)&&t!==n.propertyNameToColumnName(n.dbRefProp)&&t!==n.propertyNameToColumnName(n.uidRefProp)&&t!==n.propertyNameToColumnName(n.uidProp)}function EF(t,e,r){if(r.parentEdge&&r.parentEdge.relation.isObjectionManyToManyRelation){const n=r.parentEdge.relation,s=n.joinTableExtras.find(o=>o.aliasCol===e);if(s)return`${t.tableRefFor(n.joinModelClass)}.${s.joinTableCol} as ${s.aliasCol}`}return null}function gF(t,e,r){return`${t.tableRefFor(r.modelClass)}.${e}`}function OF(){return{fork:!0,isInternalQuery:!0}}function vF(){return{keepImplicitJoinProps:!0}}function $y(t,e,r=[]){for(const n of t.$childNames)r.push(n),e(r.join(".")),$y(t[n],e,r),r.pop()}var RF={GraphFetcher:cF};const{isPostgres:$F}=qt,wF=100,NF=100;let bF=class wy{constructor(e){this.graphData=e}static get ReturningAllSelector(){return e=>e.name==="returning"&&e.args.includes("*")}static getConcurrency(e,r){return r.reduce((n,s)=>Math.min(n,s.modelClass.getConcurrency(e.unsafeKnex())),NF)}get graph(){return this.graphData.graph}get currentGraph(){return this.graphData.currentGraph}get graphOptions(){return this.graphData.graphOptions}run(e){return null}_getConcurrency(e,r){return wy.getConcurrency(e,r)}_getBatchSize(e){return $F(e.unsafeKnex())?wF:1}_resolveReferences(e){e.isReference&&this._resolveReference(e)}_resolveReference(e){const r=e.referencedNode;for(const n of Object.keys(r.obj))e.obj.hasOwnProperty(n)||(e.obj[n]=r.obj[n])}};var ys={GraphAction:bF};const{GraphAction:AF}=ys,{groupBy:TF,chunk:IF}=ye,SF=Ct;let PF=class extends AF{constructor(e,{nodes:r}){super(e),this.nodes=r}run(e){const r=this._createInsertBatches(e),n=this._getConcurrency(e,this.nodes);return SF.map(r,s=>this._insertBatch(e,s),{concurrency:n})}_createInsertBatches(e){const r=[],n=this._getBatchSize(e),s=TF(this.nodes,o=>CF(e,o));for(const[o,i]of s.entries())for(const a of IF(i,n))r.push(this._createBatch(o,a));return r}_createBatch(e,r){return r.filter(n=>this.graphOptions.shouldRelate(n,this.graphData)||n.userData.inserted).map(n=>({node:n,joinTableModelClass:e,joinTableObj:this._createJoinTableObj(e,n)}))}_createJoinTableObj(e,r){const{parentEdge:n,parentNode:s}=r,{relation:o}=n;return this._resolveReferences(r),e.fromJson(o.createJoinModel(o.ownerProp.getProps(s.obj),r.obj))}_insertBatch(e,r){return this._beforeInsert(e,r).then(()=>this._insert(e,r))}_beforeInsert(e,r){return Promise.all(r.map(({node:n,joinTableObj:s})=>n.parentEdge?n.parentEdge.relation.joinTableBeforeInsert(s,e.context()):null))}_insert(e,r){if(r.length>0)return r[0].joinTableModelClass.query().childQueryOf(e).insert(r.map(n=>n.joinTableObj))}};function CF(t,e){return e.parentEdge.relation.getJoinModelClass(t.unsafeKnex())}var MF={JoinRowGraphInsertAction:PF};const{GraphAction:vh}=ys,{groupBy:DF,chunk:jF,get:Rh,set:$h}=ye,{ModelGraphEdge:Ho}=_o,LF=Ct;let FF=class extends vh{constructor(e,{nodes:r,dependencies:n}){super(e),this.nodes=r,this.dependencies=n}run(e){const r=this._createInsertBatches(e),n=this._getConcurrency(e,this.nodes);return LF.map(r,s=>this._insertBatch(e,s),{concurrency:n})}_createInsertBatches(e){const r=[],n=this._getBatchSize(e),s=DF(this.nodes,kF);for(const o of s.values())for(const i of jF(o,n))r.push(i);return r}async _insertBatch(e,r){await this._beforeInsert(r),await this._insert(e,r),await this._afterInsert(r)}_beforeInsert(e){return this._resolveDependencies(e),this._omitManyToManyExtraProps(e),this._copyRelationPropsFromCurrentIfNeeded(e),Promise.resolve()}_resolveDependencies(e){for(const r of e){const n=this.dependencies.get(r);if(n)for(const s of n){const o=s.getOtherNode(r);this._resolveDependency(o,s)}}}_resolveDependency(e,r){r.type===Ho.Type.Relation&&!r.relation.joinTable?this._resolveRelationDependency(e,r):r.refType===Ho.ReferenceType.Property&&this._resolvePropertyReferenceNode(e,r)}_resolveRelationDependency(e,r){const n=r.getOtherNode(e);let s,o;r.isOwnerNode(e)?(s=r.relation.ownerProp,o=r.relation.relatedProp):(o=r.relation.ownerProp,s=r.relation.relatedProp),this._resolveReferences(e),o.forEach(i=>{o.setProp(n.obj,i,s.getProp(e.obj,i))})}_resolvePropertyReferenceNode(e,r){const n=r.getOtherNode(e);let s,o;r.isOwnerNode(e)?(s=r.refOwnerDataPath,o=r.refRelatedDataPath):(o=r.refOwnerDataPath,s=r.refRelatedDataPath);const i=Rh(e.obj,s),a=Rh(n.obj,o);a===r.refMatch?$h(n.obj,o,i):$h(n.obj,o,a.replace(r.refMatch,i))}_omitManyToManyExtraProps(e){for(const r of e)r.parentEdge&&r.parentEdge.type===Ho.Type.Relation&&r.parentEdge.relation.joinTableExtras.length>0&&r.parentEdge.relation.omitExtraProps([r.obj])}_copyRelationPropsFromCurrentIfNeeded(e){for(const r of e){const n=this.currentGraph.nodeForNode(r);if(n)for(const s of r.edges){if(s.type!==Ho.Type.Relation)continue;const o=s.isOwnerNode(r)?s.relation.ownerProp:s.relation.relatedProp;o.forEach(i=>{o.getProp(r.obj,i)===void 0&&o.setProp(r.obj,i,o.getProp(n.obj,i))})}}}_insert(e,r){const[{modelClass:n}]=r;r=r.filter(s=>this.graphOptions.shouldInsert(s,this.graphData));for(const s of r)delete s.obj[n.uidProp],s.obj.$validate(null,{dataPath:s.dataPathKey});if(r.length!==0){for(const s of r)s.userData.inserted=!0;return this._runRelationBeforeInsertMethods(e,r).then(()=>n.query().insert(r.map(s=>s.obj)).childQueryOf(e).copyFrom(e,vh.ReturningAllSelector).execute())}}_runRelationBeforeInsertMethods(e,r){return Promise.all(r.map(n=>n.parentEdge?n.parentEdge.relation.beforeInsert(n.obj,e.context()):null))}_afterInsert(e){for(const r of e)for(const n of r.referencingNodes)this._resolveDependency(n,n.parentEdge)}};function kF(t){return t.modelClass}var BF={GraphInsertAction:FF};let UF=class{constructor(e){this.graphData=e}get graph(){return this.graphData.graph}get currentGraph(){return this.graphData.currentGraph}get graphOptions(){return this.graphData.graphOptions}createActions(){return[]}};var ua={GraphOperation:UF};const{JoinRowGraphInsertAction:xF}=MF,{GraphInsertAction:GF}=BF,{GraphOperation:VF}=ua,{ModelGraphEdge:HF}=_o;class KF extends VF{constructor(...e){super(...e),this.dependencies=this._createDependencyMap()}createActions(){return[...this._createNormalActions(),...this._createJoinRowActions()]}_createDependencyMap(){const e=new Map;for(const r of this.graph.edges)r.type==HF.Type.Relation?this._createRelationDependency(r,e):this._createReferenceDependency(r,e);return e}_createRelationDependency(e,r){e.relation.isObjectionHasManyRelation?this._addDependency(e.relatedNode,e,r):e.relation.isObjectionBelongsToOneRelation&&this._addDependency(e.ownerNode,e,r)}_createReferenceDependency(e,r){this._addDependency(e.ownerNode,e,r)}_addDependency(e,r,n){let s=n.get(e);s||(s=[],n.set(e,s)),s.push(r)}_createNormalActions(){const e=new Set,r=[];for(;;){const n=this.graph.nodes.filter(s=>!this._isHandled(s,e)&&!this._hasDependencies(s,e));if(n.length===0)break;r.push(new GF(this.graphData,{nodes:n,dependencies:this.dependencies}));for(const s of n)this._markHandled(s,e)}if(e.size!==this.graph.nodes.length)throw new Error("the object graph contains cyclic references");return r}_isHandled(e,r){return r.has(e)}_hasDependencies(e,r){if(!this.dependencies.has(e))return!1;for(const n of this.dependencies.get(e)){const s=n.getOtherNode(e);if(!r.has(s)&&!this.currentGraph.nodeForNode(s))return!0}return!1}_markHandled(e,r){r.add(e);for(const n of e.referencingNodes)this._markHandled(n,r)}_createJoinRowActions(){return[new xF(this.graphData,{nodes:this.graph.nodes.filter(e=>this.currentGraph.nodeForNode(e)===null&&e.parentEdge&&e.parentEdge.relation.isObjectionManyToManyRelation)})]}}var qF={GraphInsert:KF},Va,wh;function Ny(){if(wh)return Va;wh=1;let t;return Va={getModel:()=>t||(t=eE().Model)},Va}var Ha,Nh;function WF(){if(Nh)return Ha;Nh=1;const{getModel:t}=Ny(),{GraphAction:e}=ys,{isInternalProp:r}=Gi,{difference:n,isObject:s,jsonEquals:o}=ye,i=Ct;class a extends e{constructor(p,{nodes:N}){super(p),this.nodes=N}run(p){return i.map(this.nodes,N=>this._runForNode(p,N),{concurrency:this._getConcurrency(p,this.nodes)})}_runForNode(p,N){const $=this.graphOptions.shouldPatch(N,this.graphData),g=this.graphOptions.shouldUpdate(N,this.graphData),R=this._handleBelongsToOneInserts(N),y=this._handleBelongsToOneDeletes(N),_=()=>{const{changedProps:L,unchangedProps:ne}=this._findChanges(N),ce=[...L,...ne],me=n($||g?L:[...R,...y],N.modelClass.getIdPropertyArray()),q=me.length>0;return q&&(N.obj.$omitFromDatabaseJson(n(ce,me)),N.userData.updated=!0),q},v=t(),C=N.obj.constructor.beforeUpdate!==v.beforeUpdate||N.obj.$beforeUpdate!==v.prototype.$beforeUpdate;if(C&&!this._hasNonIdPropertyChanges(N)||!C&&!_())return null;delete N.obj[N.modelClass.uidProp],delete N.obj[N.modelClass.uidRefProp],delete N.obj[N.modelClass.dbRefProp],N.obj.$validate(null,{dataPath:N.dataPathKey,patch:$||!$&&!g});const D=this._createBuilder(N).childQueryOf(p,c()).copyFrom(p,e.ReturningAllSelector);return C&&D.internalContext().runBefore.push((L,ne)=>(C&&!_()&&(ne.internalOptions().returnImmediatelyValue=null),L)),$?D.patch(N.obj):D.update(N.obj),D.execute().then(L=>(s(L)&&L.$isObjectionModel&&N.obj.$set(L),L))}_handleBelongsToOneInserts(p){const N=this.currentGraph.nodeForNode(p),$=[];for(const g of p.edges)if(g.isOwnerNode(p)&&g.relation&&g.relation.isObjectionBelongsToOneRelation&&g.relation.relatedProp.hasProps(g.relatedNode.obj)){const{relation:R}=g;R.ownerProp.forEach(y=>{const _=N&&R.ownerProp.getProp(N.obj,y),v=R.relatedProp.getProp(g.relatedNode.obj,y);_!=v&&(R.ownerProp.setProp(p.obj,y,v),$.push(R.ownerProp.props[y]))})}return $}_handleBelongsToOneDeletes(p){const N=this.currentGraph.nodeForNode(p),$=[];if(!N)return $;for(const g of N.edges)if(g.isOwnerNode(N)&&g.relation.isObjectionBelongsToOneRelation&&p.obj[g.relation.name]===null&&this.graphOptions.shouldDeleteOrUnrelate(g.relatedNode,this.graphData)){const{relation:R}=g;R.ownerProp.forEach(y=>{R.ownerProp.getProp(N.obj,y)!=null&&(R.ownerProp.setProp(p.obj,y,null),$.push(R.ownerProp.props[y]))})}return $}_findChanges(p){const N=p.obj,$=this.currentGraph.nodeForNode(p),g=$&&$.obj||{},R=p.modelClass.getRelationNames(),y=[],_=[];for(const v of Object.keys(N)){if(r(v)||R.includes(v))continue;const C=N[v],D=g[v];D===void 0||!u(D,C)?_.push(v):y.push(v)}return N.$$queryProps&&_.push(...Object.keys(N.$$queryProps)),{changedProps:_,unchangedProps:y}}_hasNonIdPropertyChanges(p){const N=p.modelClass.getIdPropertyArray();return this._findChanges(p).changedProps.some($=>!N.includes($))}_createBuilder(p){return p.parentEdge&&!p.parentEdge.relation.isObjectionHasManyRelation?this._createRelatedBuilder(p):this._createRootBuilder(p)}_createRelatedBuilder(p){return p.parentNode.obj.$relatedQuery(p.parentEdge.relation.name).findById(p.obj.$id())}_createRootBuilder(p){return p.obj.$query()}}function c(){return{fork:!0,isInternalQuery:!0}}function u(d,p){return d==p?!0:o(d,p)}return Ha={GraphPatchAction:a},Ha}var Ka,bh;function JF(){if(bh)return Ka;bh=1;const{GraphOperation:t}=ua,{GraphPatchAction:e}=WF();class r extends t{createActions(){return[new e(this.graphData,{nodes:this.graph.nodes.filter(s=>this.graphOptions.shouldPatchOrUpdateIgnoreDisable(s,this.graphData))})]}}return Ka={GraphPatch:r},Ka}const{GraphAction:zF}=ys,{groupBy:Ah}=ye,QF=Ct;let YF=class extends zF{constructor(e,{nodes:r}){super(e),this.nodes=r}run(e){const r=this._filterOutBelongsToOneRelationUnrelates(this.nodes),n=this._createDeleteBuilders(e,r);return QF.map(n,s=>s.execute(),{concurrency:this._getConcurrency(e,r)})}_filterOutBelongsToOneRelationUnrelates(e){return e.filter(r=>!(this.graphOptions.shouldUnrelate(r,this.graphData)&&r.parentEdge.relation.isObjectionBelongsToOneRelation))}_createDeleteBuilders(e,r){const n=Ah(r,XF),s=[];return n.forEach((o,i)=>{Ah(o,ZF).forEach((c,u)=>{const d=this.graphOptions.shouldUnrelate(c[0],this.graphData),p=u.obj.$relatedQuery(i.name).childQueryOf(e);i.isObjectionBelongsToOneRelation||p.findByIds(c.map(N=>N.obj.$id()));for(const N of c)N.userData.deleted=!0;s.push(d?p.unrelate():p.delete())})}),s}};function XF(t){return t.parentEdge.relation}function ZF(t){return t.parentNode}var ek={GraphDeleteAction:YF};const{GraphOperation:tk}=ua,{GraphDeleteAction:rk}=ek;class nk extends tk{createActions(){return[new rk(this.graphData,{nodes:this.currentGraph.nodes.filter(e=>this.graphOptions.shouldDeleteOrUnrelate(e,this.graphData))})]}}var sk={GraphDelete:nk};const{GraphAction:Th}=ys,{groupBy:Ih,get:Sh,set:Ph}=ye,{forEachPropertyReference:ok}=Cu,ik=Ct;let ak=class extends Th{constructor(e,{nodes:r}){super(e),this.nodes=r}run(e){const r=this._createUpsertBuilders(e,this.nodes);return ik.map(r,n=>n.execute(),{concurrency:this._getConcurrency(e,this.nodes)})}_createUpsertBuilders(e,r){const n=Ih(r,lk),s=[];return n.forEach(o=>{Ih(o,ck).forEach(a=>{for(const c of a)this._resolveReferences(c),c.userData.upserted=!0;s.push(a[0].modelClass.query().childQueryOf(e).copyFrom(e,Th.ReturningAllSelector).upsertGraph(a.map(c=>c.obj),this.graphOptions.rebasedOptions(a[0])))})}),s}_resolveReferences(e){e.obj.$traverse(r=>this._resolveReferencesForObject(r))}_resolveReferencesForObject(e){this._resolveObjectReference(e),this._resolvePropertyReferences(e)}_resolveObjectReference(e){const r=e.constructor,n=e[r.uidRefProp];if(!n)return;const s=this.graph.nodes.find(i=>i.uid===n);if(!s)return;const o=s.modelClass.getRelationNames();for(const i of Object.keys(s.obj))o.includes(i)||(e[i]=s.obj[i]);delete e[r.uidRefProp]}_resolvePropertyReferences(e){ok(e,({path:r,refMatch:n,ref:s,refPath:o})=>{const i=this.graph.nodes.find(u=>u.uid===s);if(!i)return;const a=Sh(i.obj,o),c=Sh(e,r);c===n?Ph(e,r,a):Ph(e,r,c.replace(n,a))})}};function lk(t){return t.parentEdge.relation}function ck(t){return t.parentNode}var uk={GraphRecursiveUpsertAction:ak};const{GraphOperation:dk}=ua,{GraphRecursiveUpsertAction:fk}=uk;class hk extends dk{createActions(){return[new fk(this.graphData,{nodes:this.graph.nodes.filter(e=>this.graphOptions.shouldRelate(e,this.graphData)&&pk(e.obj))})]}}function pk(t){for(const e of t.constructor.getRelationNames())if(t[e]!==void 0)return!0;return!1}var _k={GraphRecursiveUpsert:hk};let mk=class{constructor({graph:e,currentGraph:r,graphOptions:n,nodeDbExistence:s}){this.graph=e,this.currentGraph=r,this.graphOptions=n,this.nodeDbExistence=s}};var by={GraphData:mk};const{GraphData:yk}=by,{GraphAction:Ek}=ys,gk=Ct;class vn{static createEveryNodeExistsExistence(){return new vn(new Map)}static async create({builder:e,graph:r,graphOptions:n,currentGraph:s}){if(n.isInsertOnly())return vn.createEveryNodeExistsExistence();const o=new yk({graph:r,graphOptions:n,currentGraph:s,nodeDbExistence:vn.createEveryNodeExistsExistence()}),{mayNotExist:i,mayNotExistNodes:a}=Ok(o);if(i.size==0)return vn.createEveryNodeExistsExistence();const c=await Rk({builder:e,mayNotExist:i,mayNotExistNodes:a});return new vn(c)}constructor(e){this.dontExist=e}doesNodeExistInDb(e){const r=this.dontExist.get(e.modelClass);return r?!r.has(e.obj.$idKey()):!0}}function Ok(t){const{graph:e,currentGraph:r,graphOptions:n}=t,s=new Map,o=[];for(const i of e.nodes)n.shouldInsertMissing(i)&&n.shouldRelate(i,t)&&i.hasId&&!vk(r,i)&&(s.has(i.modelClass)||s.set(i.modelClass,new Map),s.get(i.modelClass).set(i.obj.$idKey(),i.obj.$id()),o.push(i));return{mayNotExist:s,mayNotExistNodes:o}}function vk(t,e){const{modelClass:r}=e,n=r.getTableName(),s=r.getIdPropertyArray();return t.nodes.some(o=>o.modelClass.getTableName()===n&&s.every(i=>o.obj[i]===e.obj[i]))}async function Rk({builder:t,mayNotExist:e,mayNotExistNodes:r}){const n=Nk(e),s=$k({builder:t,mayNotExist:e}),o=await gk.map(s,i=>i.execute(),{concurrency:Ek.getConcurrency(t,r)});for(const i of o)for(const a of i){const c=a.constructor;n.get(c).delete(a.$idKey())}return n}function $k({builder:t,mayNotExist:e}){const r=[];for(const[n,s]of e.entries()){const o=Array.from(s.values());r.push(n.query().childQueryOf(t,wk()).findByIds(o).select(n.getIdColumnArray()))}return r}function wk(){return{fork:!0,isInternalQuery:!0}}function Nk(t){const e=new Map(t);for(const r of e.keys())e.set(r,new Map(e.get(r)));return e}var bk={GraphNodeDbExistence:vn},qa,Ch;function Ay(){if(Ch)return qa;Ch=1;const{ModelGraph:t}=Oy,{ModelGraphEdge:e}=_o,{createNotModelError:r}=Cu,{GraphFetcher:n}=RF,{GraphInsert:s}=qF,{GraphPatch:o}=JF(),{GraphDelete:i}=sk,{GraphRecursiveUpsert:a}=_k,{GraphOptions:c}=vy,{ValidationErrorType:u}=Lr,{RelationExpression:d}=on,{GraphNodeDbExistence:p}=bk,{GraphData:N}=by,{uniqBy:$,asArray:g,isObject:R}=ye;class y{constructor({rootModelClass:b,objects:f,upsertOptions:w}){_(b,f),this.objects=b.ensureModelArray(f,y.modelOptions),this.isArray=Array.isArray(f),this.upsertOpt=w}static get modelOptions(){return{skipValidation:!0}}run(b){const f=b.modelClass(),w=new c(this.upsertOpt),m=t.create(f,this.objects);return v(m),C(b,w,m).then(oe(b)).then(L()).then(be(b)).then(Ye(this.objects,this.isArray))}}function _(I,b){g(b).forEach(f=>{if(!R(f))throw r(I,f)})}function v(I){for(const b of I.nodes)!b.parentEdge||!b.parentEdge.relation||!b.isDbReference||b.parentEdge.relation.setRelateProp(b.obj,g(b.dbReference))}async function C(I,b,f){const w=await D(I,b,f),m=await p.create({builder:I,graph:f,graphOptions:b,currentGraph:w});return new N({graph:f,currentGraph:w,graphOptions:b,nodeDbExistence:m})}function D(I,b,f){return b.isInsertOnly()?Promise.resolve(t.createEmpty()):n.fetchCurrentGraph({builder:I,graph:f,graphOptions:b})}function L(){return I=>(ne(I),I.graphOptions.isInsertOnly()||ce(I),I)}function ne(I){const b=I.graph.nodes.filter(f=>!I.currentGraph.nodeForNode(f)&&!I.graphOptions.shouldInsertIgnoreDisable(f,I));q(me(b),I.graph)}function ce(I){const{graph:b,currentGraph:f}=I,w=f.nodes.filter(h=>!b.nodeForNode(h)),m=me(w),l=m.filter(h=>{if(!h.parentNode)return!1;const{relation:A}=h.parentEdge,B=b.nodeForNode(h.parentNode);return B?B.obj[A.name]===void 0:!1});q(m,f),ee(new Set(l),f)}function me(I){const b=new Set(I);return $(I.filter(f=>{let w=f.parentNode;for(;w;){if(b.has(w))return!1;w=w.parentNode}return!0}))}function q(I,b){const f=new Set(I.reduce((w,m)=>[...w,...m.descendantRelationNodes],[]));ee(f,b)}function ee(I,b){const f=new Set;for(const w of I)for(const m of w.edges){const l=m.getOtherNode(w);I.has(l)||(l.removeEdge(m),f.add(m))}return b.nodes=b.nodes.filter(w=>!I.has(w)),b.edges=b.edges.filter(w=>!f.has(w)),b}function oe(I){return b=>(ie(b,I),ae(b,I),ue(b,I),b.graphOptions.isInsertOnly()&&$e(b),b)}function ie(I,b){const{graphOptions:f,currentGraph:w,graph:m}=I;for(const l of m.nodes)if(l.obj.$hasId()&&!f.shouldInsertIgnoreDisable(l,I)&&!f.shouldRelateIgnoreDisable(l,I)&&!w.nodeForNode(l))throw l.parentNode?l.modelClass.createNotFoundError(b.context(),{message:`model (id=${l.obj.$id()}) is not a child of model (id=${l.parentNode.obj.$id()}). If you want to relate it, use the relate option. If you want to insert it with an id, use the insertMissing option`,dataPath:l.dataPath}):l.modelClass.createNotFoundError(b.context(),{message:`root model (id=${l.obj.$id()}) does not exist. If you want to insert it with an id, use the insertMissing option`,dataPath:l.dataPath})}function ae(I,b){const{graph:f}=I,w=b.allowedGraphExpression();if(w){const m=f.nodes.filter(h=>!h.parentEdge).map(h=>h.obj),l=d.fromModelGraph(m);if(!w.isSubExpression(l))throw b.modelClass().createValidationError({type:u.UnallowedRelation,message:"trying to upsert an unallowed relation"})}}function ue(I,b){const{graph:f,graphOptions:w}=I;if(!w.allowRefs()&&f.edges.some(m=>m.type===e.Type.Reference))throw b.modelClass().createValidationError({type:u.InvalidGraph,message:"#ref references are not allowed in a graph by default. see the allowRefs insert/upsert graph option"})}function $e(I){const{graph:b,graphOptions:f}=I;for(const w of b.nodes)if(f.shouldRelate(w,I)&&w.parentEdge.relation.isObjectionHasManyRelation)throw new Error("You cannot relate HasManyRelation or HasOneRelation using insertGraph, because those require update operations. Consider using upsertGraph instead.")}function be(I){return b=>(b.graphOptions.isInsertOnly()?[s]:[i,s,o,a]).reduce((w,m)=>{const h=new m(b).createActions();return w.then(()=>Fe(I,h))},Promise.resolve())}function Fe(I,b){return b.reduce((f,w)=>f.then(()=>w.run(I)),Promise.resolve())}function Ye(I,b){return()=>b?I:I[0]}return qa={GraphUpsert:y},qa}var Wa,Mh;function Ty(){if(Mh)return Wa;Mh=1;const{DelegateOperation:t}=po,{InsertOperation:e}=ho,{GraphUpsert:r}=Ay();class n extends t{constructor(o,i=null){if(super(o,i),!this.delegate.is(e))throw new Error("Invalid delegate");Object.assign(this.delegate.modelOptions,r.modelOptions),this.upsertOptions=i.opt||{},this.upsert=null}get models(){return this.delegate.models}get isArray(){return this.delegate.isArray}get relation(){return this.delegate.relation}onAdd(o,i){const a=super.onAdd(o,i);return this.upsert=new r({objects:this.models,rootModelClass:o.modelClass(),upsertOptions:Object.assign({},this.upsertOptions,{noUpdate:!0,noDelete:!0,noUnrelate:!0,insertMissing:!0})}),o.resolve([]),a}onBefore1(o,i){return i}onBefore2(o,i){return this.relation?this.relation.executeBeforeInsert(this.models,o.context(),i):i}onBefore3(o,i){return i}onBuild(){}onBuildKnex(o){return o}async onAfter1(o,...i){return await this.upsert.run(o),await super.onAfter1(o,...i)}onAfter2(){return this.isArray?this.models:this.models[0]||null}clone(){const o=super.clone();return o.upsert=this.upsert,o}}return Wa={InsertGraphOperation:n},Wa}var Ja,Dh;function Ak(){if(Dh)return Ja;Dh=1;const{DelegateOperation:t}=po,{InsertGraphOperation:e}=Ty(),{RelationExpression:r}=on;class n extends t{constructor(o,i){if(super(o,i),!this.delegate.is(e))throw new Error("Invalid delegate")}get models(){return this.delegate.models}get isArray(){return this.delegate.isArray}async onAfter2(o){if(this.models.length===0)return this.isArray?[]:null;const i=r.fromModelGraph(this.models),a=this.models[0].constructor,c=this.models.map(d=>d.$id()),u=await a.query().childQueryOf(o).findByIds(c).withGraphFetched(i);return this.isArray?u:u[0]||null}}return Ja={InsertGraphAndFetchOperation:n},Ja}const{FindOperation:Tk}=Au;let Ik=class extends Tk{constructor(e,r){super(e,r),this.relation=r.relation,this.owner=r.owner,this.alwaysReturnArray=!1,this.assignResultToOwner=!0,this.relationProperty=r.relationProperty||this.relation.name,this.omitProps=[],this.alias=null}onBuild(e){this.maybeApplyAlias(e),this.relation.findQuery(e,this.owner),this.assignResultToOwner&&this.owner.isModels&&this.selectMissingJoinColumns(e)}onAfter2(e,r){const n=this.relation.isOneToOne();if(this.assignResultToOwner&&this.owner.isModels){const s=this.owner.modelArray,o=new Map;for(let i=0,a=r.length;i<a;++i){const c=r[i],u=this.relation.relatedProp.propKey(c);let d=o.get(u);d||(d=[],o.set(u,d)),d.push(c)}for(let i=0,a=s.length;i<a;++i){const c=s[i],u=this.relation.ownerProp.propKey(c),d=o.get(u);n?c[this.relationProperty]=d&&d[0]||null:c[this.relationProperty]=d||[]}}return r}onAfter3(e,r){const n=this.relation.isOneToOne();return e.internalOptions().keepImplicitJoinProps||this.omitImplicitJoinProps(r),!this.alwaysReturnArray&&n&&r.length<=1&&(r=r[0]||void 0),super.onAfter3(e,r)}selectMissingJoinColumns(e){const r=this.relation.relatedProp,n=[];for(let s=0,o=r.size;s<o;++s){const i=r.ref(e,s).fullColumn(e),a=r.props[s],c=r.cols[s];!e.hasSelectionAs(i,c)&&n.indexOf(i)===-1&&(this.omitProps.push(a),n.push(i))}n.length&&e.select(n)}maybeApplyAlias(e){!e.alias()&&this.alias&&e.alias(this.alias)}omitImplicitJoinProps(e){const r=this.relation.relatedModelClass;if(!this.omitProps.length||!e)return e;if(!Array.isArray(e))return this.omitImplicitJoinPropsFromOne(r,e);if(!e.length)return e;for(let n=0,s=e.length;n<s;++n)this.omitImplicitJoinPropsFromOne(r,e[n]);return e}omitImplicitJoinPropsFromOne(e,r){for(let n=0,s=this.omitProps.length;n<s;++n)e.omitImpl(r,this.omitProps[n]);return r}clone(){const e=super.clone();return e.alwaysReturnArray=this.alwaysReturnArray,e.assignResultToOwner=this.assignResultToOwner,e.relationProperty=this.relationProperty,e.omitProps=this.omitProps.slice(),e.alias=this.alias,e}};var mo={RelationFindOperation:Ik},za,jh;function Iy(){if(jh)return za;jh=1;const{QueryBuilderOperation:t}=ht,{GraphUpsert:e}=Ay(),{RelationFindOperation:r}=mo;class n extends t{constructor(i,a){super(i,Object.assign({},a,{upsertOptions:{}})),this.upsertOptions=a.upsertOptions||{},this.upsert=null}get models(){return this.upsert.objects}get isArray(){return this.upsert.isArray}onAdd(i,a){const[c]=a;return this.upsert=new e({objects:c,rootModelClass:i.modelClass(),upsertOptions:this.upsertOptions}),i.resolve([]),!0}onAfter1(i){if(s(i))throw new Error("upsertGraph query should contain no other query builder calls like `findById`, `where` or `$relatedQuery` that would affect the SQL. They have no effect.");return this.upsert.run(i)}clone(){const i=super.clone();return i.upsert=this.upsert,i}}function s(o){return o.has(/where/)||o.has(r)}return za={UpsertGraphOperation:n},za}var Qa,Lh;function Sk(){if(Lh)return Qa;Lh=1;const{DelegateOperation:t}=po,{UpsertGraphOperation:e}=Iy(),{RelationExpression:r}=on;class n extends t{constructor(o,i){if(super(o,i),!this.delegate.is(e))throw new Error("Invalid delegate")}get models(){return this.delegate.models}get isArray(){return this.delegate.isArray}async onAfter3(o){if(this.models.length===0)return this.isArray?[]:null;const i=r.fromModelGraph(this.models),a=this.models[0].constructor,c=this.models.map(d=>d.$id()),u=await a.query().childQueryOf(o).findByIds(c).withGraphFetched(i);return this.isArray?u:u[0]||null}}return Qa={UpsertGraphAndFetchOperation:n},Qa}const{InsertOperation:Pk}=ho,{DelegateOperation:Ck}=po,{keyByProps:Mk}=sn,{asArray:Dk}=ye;class jk extends Ck{constructor(e,r){if(super(e,r),!this.delegate.is(Pk))throw new Error("Invalid delegate")}get models(){return this.delegate.models}async onAfter2(e,r){const n=e.modelClass(),s=await super.onAfter2(e,r),o=Dk(s),i=n.getIdPropertyArray(),a=o.map(d=>d.$id()),c=await n.query().childQueryOf(e).findByIds(a).castTo(e.resultModelClass()),u=Mk(c,i);return o.forEach(d=>{d.$set(u.get(d.$propKey(i)))}),s}}var Lk={InsertAndFetchOperation:jk};const{QueryBuilderOperation:Fk}=ht,{assertIdNotUndefined:kk}=uo;let Bk=class extends Fk{constructor(e,r){super(e,r),this.id=this.opt.id}onAdd(e,r){return(this.id===null||this.id===void 0)&&(this.id=r[0]),super.onAdd(e,r)}onBuild(e){e.internalOptions().skipUndefined||kk(this.id,`undefined was passed to ${this.name}`),e.whereComposite(e.fullIdColumn(),this.id)}clone(){const e=super.clone();return e.id=this.id,e}};var Sy={FindByIdOperation:Bk};const{DelegateOperation:Uk}=po,{FindByIdOperation:xk}=Sy,{UpdateOperation:Gk}=ms;class Vk extends Uk{constructor(e,r){if(super(e,r),!this.delegate.is(Gk))throw new Error("Invalid delegate");this.id=null,this.skipIdWhere=!1}get model(){return this.delegate.model}onAdd(e,r){return this.id=r[0],this.delegate.onAdd(e,r.slice(1))}onBuild(e){this.skipIdWhere||e.findById(this.id),super.onBuild(e)}async onAfter2(e,r){if(r==0){await super.onAfter2(e,r);return}const n=await e.emptyInstance().childQueryOf(e).modify(s=>{this.skipIdWhere||s.findById(this.id)}).castTo(e.resultModelClass());return n&&this.model.$set(n),await super.onAfter2(e,r),n?this.model:void 0}toFindOperation(){return new xk("findById",{id:this.id})}clone(){const e=super.clone();return e.id=this.id,e.skipIdWhere=this.skipIdWhere,e}}var Hk={UpdateAndFetchOperation:Vk};const{QueryBuilderOperation:Kk}=ht,{RelationExpression:Fh}=on,{RelationJoiner:qk}=dy,{isString:Wk}=ye;class Jk extends Kk{constructor(e,r){super(e,r),this.calls=[]}get joinOperation(){return this.opt.joinOperation}addCall(e){this.calls.push(e)}onBuild(e){const r=e.modelClass(),n=this.joinOperation;let s=Fh.create();for(const i of this.calls){const a=Fh.create(i.expression).toPojo(),c=a.$childNames,u=i.options||{};c.length===1&&zk(a,r,e,u),u.aliases&&Py(a,r,u),s=s.merge(a)}const o=new qk({modelClass:r});o.setOptions({joinOperation:n}),o.setExpression(s),o.setModifiers(e.modifiers()),o.build(e,!1)}clone(){const e=super.clone();return e.calls=this.calls.slice(),e}}function zk(t,e,r,n){const o=t.$childNames[0],i=t[o],a=e.getRelation(i.$relation);let c=o;n.alias===!1?c=r.tableRefFor(a.relatedModelClass):Wk(n.alias)&&(c=n.alias),o!==c&&Cy(t,o,c)}function Py(t,e,r){for(const n of t.$childNames){const s=t[n],o=e.getRelation(s.$relation),i=r.aliases[s.$relation];i&&i!==n&&Cy(t,n,i),Py(s,o.relatedModelClass,r)}}function Cy(t,e,r){const n=t[e];delete t[e],t[r]=n,n.$name=r,t.$childNames=t.$childNames.map(s=>s===e?r:s)}var Qk={JoinRelatedOperation:Jk};const{QueryBuilderOperation:Yk}=ht;class Xk extends Yk{constructor(e,r){super(e,r),this.func=null}onAdd(e,r){return this.func=r[0],!0}onBuildKnex(e,r){return this.func.call(e,e,r)}clone(){const e=super.clone();return e.func=this.func,e}}var Zk={OnBuildKnexOperation:Xk};const{QueryBuilderOperation:eB}=ht;class tB extends eB{constructor(e,r){super(e,r),this.func=null}onAdd(e,r){return this.func=r[0],!0}onBefore1(e,r){return this.func.call(e,r,e)}clone(){const e=super.clone();return e.func=this.func,e}}var rB={RunBeforeOperation:tB};const{QueryBuilderOperation:nB}=ht;class sB extends nB{constructor(e,r){super(e,r),this.func=null}onAdd(e,r){return this.func=r[0],!0}onAfter3(e,r){return this.func.call(e,r,e)}clone(){const e=super.clone();return e.func=this.func,e}}var oB={RunAfterOperation:sB};const{QueryBuilderOperation:iB}=ht;class aB extends iB{constructor(e,r){super(e,r),this.ids=null}onAdd(e,r){return this.ids=r[0],super.onAdd(e,r)}onBuild(e){e.whereInComposite(e.fullIdColumn(),this.ids)}clone(){const e=super.clone();return e.ids=this.ids,e}}var lB={FindByIdsOperation:aB};const{QueryBuilderOperation:cB}=ht;class uB extends cB{constructor(e,r){super(e,r),this.func=null}onAdd(e,r){return this.func=r[0],!0}onBuild(e){return this.func.call(e,e)}clone(){const e=super.clone();return e.func=this.func,e}}var dB={OnBuildOperation:uB};const{QueryBuilderOperation:fB}=ht;class hB extends fB{constructor(e,r){super(e,r),this.func=null}onAdd(e,r){return this.func=r[0],!0}onError(e,r){return this.func.call(e,r,e)}clone(){const e=super.clone();return e.func=this.func,e}}var pB={OnErrorOperation:hB};const{QueryBuilderOperation:_B}=ht;class mB extends _B{constructor(e,r){super(e,r),this.resultSizeBuilder=null}onAdd(e,r){if(r.length===2){const n=r[0],s=r[1];e.limit(s-n+1).offset(n)}return!0}onBefore1(e,r){return this.resultSizeBuilder=e.clone(),super.onBefore1(e,r)}async onAfter3(e,r){const n=await this.resultSizeBuilder.resultSize();return{results:r,total:parseInt(n)}}clone(){const e=super.clone();return e.resultSizeBuilder=this.resultSizeBuilder,e}}var yB={RangeOperation:mB};const{QueryBuilderOperation:EB}=ht;class gB extends EB{onBuildKnex(e,r){const n=r.modelClass();return r.isFind()&&n.useLimitInFirst&&(e=e.limit(1)),e}onAfter3(e,r){return Array.isArray(r)?r[0]:r}}var OB={FirstOperation:gB};const{ObjectionToKnexConvertingOperation:vB}=_r(),{isPlainObject:RB,isString:$B}=ye,kh=/\s+as\s+/i;class wB extends vB{constructor(e,r){super(e,r),this.table=null,this.alias=null}onAdd(e,r){const n=super.onAdd(e,r),s=NB(this.args[0],e);return s.table&&(e.tableName(s.table),this.table=s.table),s.alias&&(e.aliasFor(e.modelClass().getTableName(),s.alias),this.alias=s.alias),n}onBuildKnex(e,r){return e.from.apply(e,this.getKnexArgs(r))}clone(){const e=super.clone();return e.table=this.table,e.alias=this.alias,e}}function NB(t,e){return $B(t)?bB(t):RB(t)?AB(t,e):{table:null,alias:null}}function bB(t){if(kh.test(t)){const e=t.split(kh);return{table:e[0].trim(),alias:e[1].trim()}}else return{table:t.trim(),alias:null}}function AB(t,e){for(const r of Object.keys(t)){const n=t[r].trim();if(n===e.modelClass().getTableName())return{alias:r,table:n}}throw new Error(`one of the tables in ${JSON.stringify(t)} must be the query's model class's table.`)}var TB={FromOperation:wB},Ya,Bh;function My(){if(Bh)return Ya;Bh=1;const{wrapError:t}=up,{raw:e}=Vi,{createModifier:r}=co,{ValidationErrorType:n}=Lr,{isObject:s,isString:o,isFunction:i,last:a,flatten:c}=ye,{RelationExpression:u,DuplicateRelationError:d}=on,{assertIdNotUndefined:p}=uo,{Selection:N}=$u,{QueryBuilderContext:$}=E1,{QueryBuilderBase:g}=Qm,{FindOperation:R}=Au,{DeleteOperation:y}=oa,{UpdateOperation:_}=ms,{InsertOperation:v}=ho,{RelateOperation:C}=ia,{UnrelateOperation:D}=aa,{JoinEagerOperation:L}=rL,{NaiveEagerOperation:ne}=DL,{WhereInEagerOperation:ce}=Ey,{InsertGraphAndFetchOperation:me}=Ak(),{UpsertGraphAndFetchOperation:q}=Sk(),{InsertAndFetchOperation:ee}=Lk,{UpdateAndFetchOperation:oe}=Hk,{JoinRelatedOperation:ie}=Qk,{OnBuildKnexOperation:ae}=Zk,{InsertGraphOperation:ue}=Ty(),{UpsertGraphOperation:$e}=Iy(),{RunBeforeOperation:be}=rB,{RunAfterOperation:Fe}=oB,{FindByIdOperation:Ye}=Sy,{FindByIdsOperation:I}=lB,{OnBuildOperation:b}=dB,{OnErrorOperation:f}=pB,{SelectOperation:w}=xm,{EagerOperation:m}=Iu,{RangeOperation:l}=yB,{FirstOperation:h}=OB,{FromOperation:A}=TB,{KnexOperation:B}=wu();class V extends g{static init(O,F){super.init(O,F),O._resultModelClass=null,O._explicitRejectValue=null,O._explicitResolveValue=null,O._modifiers={},O._allowedGraphExpression=null,O._findOperationOptions=F.defaultFindOptions,O._relatedQueryFor=null,O._findOperationFactory=Nr,O._insertOperationFactory=Fr,O._updateOperationFactory=Mn,O._patchOperationFactory=Dn,O._relateOperationFactory=jn,O._unrelateOperationFactory=mr,O._deleteOperationFactory=rr}static get QueryBuilderContext(){return $}static parseRelationExpression(O){return u.create(O).toPojo()}tableNameFor(O,F){return super.tableNameFor(H(O),F)}tableName(O){return this.tableNameFor(this.modelClass().getTableName(),O)}tableRef(){return this.tableRefFor(this.modelClass().getTableName())}aliasFor(O,F){return super.aliasFor(H(O),F)}alias(O){return this.aliasFor(this.modelClass().getTableName(),O)}fullIdColumnFor(O){const F=this.tableRefFor(O),se=O.getIdColumn();return Array.isArray(se)?se.map(fe=>`${F}.${fe}`):`${F}.${se}`}fullIdColumn(){return this.fullIdColumnFor(this.modelClass())}modifiers(O){return arguments.length===0?{...this._modifiers}:(this._modifiers={...this._modifiers,...O},this)}modify(O,...F){return O?(O=r({modifier:O,modelClass:this.modelClass(),modifiers:this._modifiers}),O(this,...F),this):this}reject(O){return this._explicitRejectValue=O,this}resolve(O){return this._explicitResolveValue=O,this}isExplicitlyResolvedOrRejected(){return!!(this._explicitRejectValue||this._explicitResolveValue)}isExecutable(){return!this.isExplicitlyResolvedOrRejected()&&!je(this)}findOperationFactory(O){return this._findOperationFactory=O,this}insertOperationFactory(O){return this._insertOperationFactory=O,this}updateOperationFactory(O){return this._updateOperationFactory=O,this}patchOperationFactory(O){return this._patchOperationFactory=O,this}deleteOperationFactory(O){return this._deleteOperationFactory=O,this}relateOperationFactory(O){return this._relateOperationFactory=O,this}unrelateOperationFactory(O){return this._unrelateOperationFactory=O,this}withGraphFetched(O,F={}){return this._withGraph(O,F,_e(this))}withGraphJoined(O,F={}){return this._withGraph(O,F,Ae(this))}_withGraph(O,F,se){const fe=re(this,se),He=Xe(this.modelClass(),O);return fe.expression=fe.expression.merge(He),fe.graphOptions={...fe.graphOptions,...F},qe(this),this}allowGraph(O){const F=this._allowedGraphExpression||u.create();return this._allowedGraphExpression=F.merge(Xe(this.modelClass(),O)),qe(this),this}allowedGraphExpression(){return this._allowedGraphExpression}graphExpressionObject(){const O=this.findOperation(m);return O&&!O.expression.isEmpty?O.expression.toPojo():null}graphModifiersAtPath(){const O=this.findOperation(m);return O&&!O.expression.isEmpty?O.modifiersAtPath.map(F=>Object.assign({},F)):[]}modifyGraph(O,F){return re(this).modifiersAtPath.push({path:O,modifier:F}),this}findOptions(O){return arguments.length!==0?(this._findOperationOptions=Object.assign({},this._findOperationOptions,O),this):this._findOperationOptions}resultModelClass(){return this._resultModelClass||this.modelClass()}isFind(){return!(this.isInsert()||this.isUpdate()||this.isDelete()||this.isRelate()||this.isUnrelate())}isInsert(){return this.has(v)}isUpdate(){return this.has(_)}isDelete(){return this.has(y)}isRelate(){return this.has(C)}isUnrelate(){return this.has(D)}hasWheres(){const O=this.clone().clearWithGraph();return U(O).has(g.WhereSelector)}hasSelects(){return this.has(g.SelectSelector)}hasWithGraph(){const O=this.findOperation(m);return!!O&&!O.expression.isEmpty}isSelectAll(){if(this._operations.length===0)return!0;const O=this.tableRef(),F=this.tableName();return this.everyOperation(se=>se.constructor===w?se.selections.length>0&&se.selections.every(fe=>(!fe.table||fe.table===O)&&fe.column==="*"):se.constructor===A?se.table===F:!!(se.name==="as"||se.is(R)||se.is(f)))}toString(){return"[object QueryBuilder]"}clone(){const O=this.emptyInstance();return this.baseCloneInto(O),O._resultModelClass=this._resultModelClass,O._explicitRejectValue=this._explicitRejectValue,O._explicitResolveValue=this._explicitResolveValue,O._modifiers={...this._modifiers},O._allowedGraphExpression=this._allowedGraphExpression,O._findOperationOptions=this._findOperationOptions,O._relatedQueryFor=this._relatedQueryFor,O}emptyInstance(){const O=new this.constructor(this.modelClass());return O._findOperationFactory=this._findOperationFactory,O._insertOperationFactory=this._insertOperationFactory,O._updateOperationFactory=this._updateOperationFactory,O._patchOperationFactory=this._patchOperationFactory,O._relateOperationFactory=this._relateOperationFactory,O._unrelateOperationFactory=this._unrelateOperationFactory,O._deleteOperationFactory=this._deleteOperationFactory,O._relatedQueryFor=this._relatedQueryFor,O}clearWithGraph(){return this.clear(m),this}clearWithGraphFetched(){return this.clear(ce),this}clearAllowGraph(){return this._allowedGraphExpression=null,this}clearModifiers(){return this._modifiers={},this}clearReject(){return this._explicitRejectValue=null,this}clearResolve(){return this._explicitResolveValue=null,this}castTo(O){return this._resultModelClass=O||null,this}then(...O){return this.execute().then(...O)}catch(...O){return this.execute().catch(...O)}async resultSize(){const O=this.knex(),F=this.clone().clear(/orderBy|offset|limit/),se=O.count("* as count").from(He=>{F.toKnexQuery(He).as("temp")});this.internalOptions().debug&&se.debug();const fe=await se;return fe[0]&&fe[0].count?parseInt(fe[0].count):0}toKnexQuery(O=this.knex().queryBuilder()){const F=U(this.clone());return Ne(F,O)}async execute(){const O=this.clone();try{await we(O);const F=await ct(O);return await Qe(O,F)}catch(F){return await z(O,F)}}throwIfNotFound(O={}){return this.runAfter(F=>{if(Array.isArray(F)&&F.length===0||F===null||F===void 0||F===0)throw this.modelClass().createNotFoundError(this.context(),O);return F})}findSelection(O,F=!1){let se=!0,fe=null;if(this.forEachOperation(!0,He=>{if(He.constructor===w&&(fe=He.findSelection(this,O),se=!1,fe))return!1}),fe)return fe;if(se&&!F){const He=new N(this.tableRef(),"*");return N.doesSelect(this,He,O)?He:null}else return null}findAllSelections(){let O=[];return this.forEachOperation(!0,F=>{F.constructor===w&&(O=O.concat(F.selections))}),O}hasSelection(O,F){return this.findSelection(O,F)!==null}hasSelectionAs(O,F,se){O=N.create(O);const fe=this.findSelection(O,se);return fe===null?!1:fe.column==="*"?O.column===F:fe.name===F}traverse(O,F){return typeof F>"u"&&(F=O,O=null),this.runAfter(se=>(this.resultModelClass().traverse(O,se,F),se))}page(O,F){return this.range(+O*+F,(+O+1)*+F-1)}columnInfo({table:O=null}={}){O=O||this.tableName();const F=this.knex(),se=O.split("."),fe=F(a(se)).columnInfo(),He=this.internalOptions().schema;return He?fe.withSchema(He):se.length>1&&fe.withSchema(se[0]),this.internalOptions().debug&&fe.debug(),fe}withSchema(O){return this.internalOptions().schema=O,this.internalContext().onBuild.push(F=>{F.has(/withSchema/)||F.addOperationToFront(new B("withSchema"),[O])}),this}debug(){return this.internalOptions().debug=!0,this.internalContext().onBuild.push(O=>{O.addOperation(new B("debug"),[])}),this}insert(O){return ze(this,()=>{const F=this._insertOperationFactory(this);this.addOperation(F,[O])})}insertAndFetch(O){return ze(this,()=>{const F=this._insertOperationFactory(this),se=new ee("insertAndFetch",{delegate:F});this.addOperation(se,[O])})}insertGraph(O,F){return ze(this,()=>{const se=this._insertOperationFactory(this),fe=new ue("insertGraph",{delegate:se,opt:F});this.addOperation(fe,[O])})}insertGraphAndFetch(O,F){return ze(this,()=>{const se=this._insertOperationFactory(this),fe=new ue("insertGraph",{delegate:se,opt:F}),He=new me("insertGraphAndFetch",{delegate:fe});return this.addOperation(He,[O])})}update(O){return ze(this,()=>{const F=this._updateOperationFactory(this);this.addOperation(F,[O])})}updateAndFetch(O){return ze(this,()=>{const F=this._updateOperationFactory(this);if(!(F.instance instanceof this.modelClass()))throw new Error("updateAndFetch can only be called for instance operations");const se=new oe("updateAndFetch",{delegate:F});se.skipIdWhere=!0,this.addOperation(se,[F.instance.$id(),O])})}updateAndFetchById(O,F){return ze(this,()=>{const se=this._updateOperationFactory(this),fe=new oe("updateAndFetch",{delegate:se});this.addOperation(fe,[O,F])})}upsertGraph(O,F){return ze(this,()=>{const se=new $e("upsertGraph",{upsertOptions:F});this.addOperation(se,[O])})}upsertGraphAndFetch(O,F){return ze(this,()=>{const se=new $e("upsertGraph",{upsertOptions:F}),fe=new q("upsertGraphAndFetch",{delegate:se});return this.addOperation(fe,[O])})}patch(O){return ze(this,()=>{const F=this._patchOperationFactory(this);this.addOperation(F,[O])})}patchAndFetch(O){return ze(this,()=>{const F=this._patchOperationFactory(this);if(!(F.instance instanceof this.modelClass()))throw new Error("patchAndFetch can only be called for instance operations");const se=new oe("patchAndFetch",{delegate:F});se.skipIdWhere=!0,this.addOperation(se,[F.instance.$id(),O])})}patchAndFetchById(O,F){return ze(this,()=>{const se=this._patchOperationFactory(this),fe=new oe("patchAndFetch",{delegate:se});this.addOperation(fe,[O,F])})}delete(...O){return ze(this,()=>{if(O.length)throw new Error("Don't pass arguments to delete(). You should use it like this: delete().where('foo', 'bar').andWhere(...)");const F=this._deleteOperationFactory(this);this.addOperation(F,O)})}del(...O){return this.delete(...O)}relate(...O){return ze(this,()=>{const F=this._relateOperationFactory(this);this.addOperation(F,O)})}unrelate(...O){return ze(this,()=>{if(O.length)throw new Error("Don't pass arguments to unrelate(). You should use it like this: unrelate().where('foo', 'bar').andWhere(...)");const F=this._unrelateOperationFactory(this);this.addOperation(F,O)})}increment(O,F){const se=this.modelClass().propertyNameToColumnName(O);return this.patch({[se]:e("?? + ?",[se,F])})}decrement(O,F){const se=this.modelClass().propertyNameToColumnName(O);return this.patch({[se]:e("?? - ?",[se,F])})}findOne(...O){return this.where.apply(this,O).first()}range(...O){return this.clear(l).addOperation(new l("range"),O)}first(...O){return this.addOperation(new h("first"),O)}joinRelated(O,F){return P(this,"innerJoin").addCall({expression:O,options:F}),this}innerJoinRelated(O,F){return P(this,"innerJoin").addCall({expression:O,options:F}),this}outerJoinRelated(O,F){return P(this,"outerJoin").addCall({expression:O,options:F}),this}fullOuterJoinRelated(O,F){return P(this,"fullOuterJoin").addCall({expression:O,options:F}),this}leftJoinRelated(O,F){return P(this,"leftJoin").addCall({expression:O,options:F}),this}leftOuterJoinRelated(O,F){return P(this,"leftOuterJoin").addCall({expression:O,options:F}),this}rightJoinRelated(O,F){return P(this,"rightJoin").addCall({expression:O,options:F}),this}rightOuterJoinRelated(O,F){return P(this,"rightOuterJoin").addCall({expression:O,options:F}),this}deleteById(O){return this.findById(O).delete().runBefore((F,se)=>{se.internalOptions().skipUndefined||p(O,"undefined was passed to deleteById")})}findById(...O){return this.addOperation(new Ye("findById"),O).first()}findByIds(...O){return this.addOperation(new I("findByIds"),O)}runBefore(...O){return this.addOperation(new be("runBefore"),O)}onBuild(...O){return this.addOperation(new b("onBuild"),O)}onBuildKnex(...O){return this.addOperation(new ae("onBuildKnex"),O)}runAfter(...O){return this.addOperation(new Fe("runAfter"),O)}onError(...O){return this.addOperation(new f("onError"),O)}from(...O){return this.addOperation(new A("from"),O)}table(...O){return this.addOperation(new A("table"),O)}for(O){return arguments.length===0?this._relatedQueryFor:(this._relatedQueryFor=O,this)}}Object.defineProperties(V.prototype,{isObjectionQueryBuilder:{enumerable:!1,writable:!1,value:!0}});function H(G){return o(G)?G:G.getTableName()}function re(G,O=null){const se=G.modelClass().getDefaultGraphOptions(),fe=G.findOperation(m);if(O){const He=de(G,O);if(fe instanceof He)return fe;{const bt=new He("eager",{defaultGraphOptions:se});return fe&&bt.cloneFrom(fe),G.clear(m),G.addOperation(bt),bt}}else{if(fe)return fe;{const He=de(G,_e(G)),bt=new He("eager",{defaultGraphOptions:se});return G.addOperation(bt),bt}}}function _e(G){return G.modelClass().WhereInEagerAlgorithm}function Ae(G){return G.modelClass().JoinEagerAlgorithm}function We(G){return G.modelClass().NaiveEagerAlgorithm}function de(G,O){return O===Ae(G)?L:O===We(G)?ne:ce}function Xe(G,O){try{return u.create(O)}catch(F){throw F instanceof d?G.createValidationError({type:n.RelationExpression,message:`Duplicate relation name "${F.relationName}" in relation expression "${O}". For example, use "${F.relationName}.[foo, bar]" instead of "[${F.relationName}.foo, ${F.relationName}.bar]".`}):G.createValidationError({type:n.RelationExpression,message:`Invalid relation expression "${O}"`})}}function qe(G){const O=G.findOperation(m);if(!O)return;const F=O.expression,se=G.allowedGraphExpression();if(F.numChildren>0&&se&&!se.isSubExpression(F)){const fe=G.modelClass();G.reject(fe.createValidationError({type:n.UnallowedRelation,message:"eager expression not allowed"}))}}function je(G){return G.findOperation(O=>O.hasQueryExecutor())}function we(G){let O=Promise.resolve();return G=Q(G),O=J(O,G,"onBefore1"),O=J(O,G,"onBefore2"),O=ke(O,G,G.context().runBefore),O=ke(O,G,G.internalContext().runBefore),O=J(O,G,"onBefore3"),O}function ct(G){let O=Promise.resolve();G=S(G);const F=je(G),se=G._explicitRejectValue,fe=G._explicitResolveValue;return se!==null?O=Promise.reject(se):fe!==null?O=Promise.resolve(fe):F!==null?O=Promise.resolve(F.queryExecutor(G)):(O=Promise.resolve(Ne(G)),O=J(O,G,"onRawResult"),O=O.then(He=>et(He,G))),O}function Qe(G,O){let F=Promise.resolve(O);return F=J(F,G,"onAfter1"),F=J(F,G,"onAfter2"),F=ke(F,G,G.context().runAfter),F=ke(F,G,G.internalContext().runAfter),F=J(F,G,"onAfter3"),F}class nt{constructor(O){this.value=O}}function Z(G){const{returnImmediatelyValue:O}=G.internalOptions();if(O!==void 0)throw new nt(O)}function z(G,O){if(O instanceof nt)return Promise.resolve(O.value);let F=Promise.reject(t(O));return G.forEachOperation(!0,se=>{se.hasOnError()&&(F=F.catch(fe=>G.callAsyncOperationMethod(se,"onError",[G,fe])))}),F}function J(G,O,F){return G.then(se=>{let fe=Promise.resolve(se);return O.forEachOperation(!0,He=>{He.hasHook(F)&&(fe=fe.then(bt=>{const kr=O.callAsyncOperationMethod(He,F,[O,bt]);return Z(O),kr}))}),fe})}function P(G,O){const F=O+"Relation";let se=G.findOperation(F);return se||(se=new ie(F,{joinOperation:O}),G.addOperation(se)),se}function U(G){G=Q(G),G=S(G);const O=je(G);return O?U(O.queryExecutor(G)):G}function Q(G){return G.isFind()&&le(G),G.hasWithGraph()&&x(G),G}function le(G){if(!G.has(R)){const O=G._findOperationFactory(G);G.addOperationToFront(O,[])}}function x(G){const O=G.findOperation(m);G.clear(m),G.addOperation(O)}function S(G){return te(G,G.context().onBuild),te(G,G.internalContext().onBuild),G.executeOnBuild(),G}function te(G,O){i(O)?O.call(G,G):Array.isArray(O)&&O.forEach(F=>te(G,F))}function Ne(G,O=G.knex().queryBuilder()){O=G.executeOnBuildKnex(O);const F=G.findLastOperation(g.FromSelector);return G.isPartial()||(F||(O=Ce(G,O)),!G.hasSelects()&&(!F||F.table)&&(O=Mt(G,O))),O}function Ce(G,O){const F=G.tableName(),se=G.tableRef();return F===se?O.table(F):O.table(`${F} as ${se}`)}function Mt(G,O){const F=G.tableRef();return O.select(`${F}.*`)}async function ke(G,O,F){return G.then(se=>{let fe=Promise.resolve(se);return i(F)?fe=fe.then(He=>{const bt=F.call(O,He,O);return Z(O),bt}):Array.isArray(F)&&F.forEach(He=>{fe=ke(fe,O,He)}),fe})}function et(G,O){if(G==null)return null;if(O.isInsert())return G;const F=O.resultModelClass();if(Array.isArray(G)){if(G.length&&st(G[0],F))for(let se=0,fe=G.length;se<fe;++se)G[se]=F.fromDatabaseJson(G[se])}else st(G,F)&&(G=F.fromDatabaseJson(G));return G}function st(G,O){return s(G)&&!(G instanceof O)}function ze(G,O){if(!G.isFind())return G.reject(new Error("Double call to a write method. You can only call one of the write methods (insert, update, patch, delete, relate, unrelate, increment, decrement) and only once per query builder."));try{return O(),G}catch(F){return G.reject(F)}}function Nr(){return new R("find")}function Fr(){return new v("insert")}function Mn(){return new _("update")}function Dn(){return new _("patch",{modelOptions:{patch:!0}})}function jn(){return new C("relate",{})}function mr(){return new D("unrelate",{})}function rr(){return new y("delete")}return Ya={QueryBuilder:V},Ya}let IB=class extends Error{constructor({modelClass:e,data:r={},statusCode:n=404,...s}={}){super(s.message||"NotFoundError"),this.type="NotFound",this.name=this.constructor.name,this.data={...s,...r},this.statusCode=n,Object.defineProperty(this,"modelClass",{value:e,enumerable:!1})}};var Dy={NotFoundError:IB};class SB extends Error{constructor(e){super(`Unable to determine modify function from provided value: "${e}".`),this.modifierName=e}}var PB={ModifierNotFoundError:SB};const{asArray:CB,isObject:MB,uniqBy:DB,get:jB,set:LB}=ye,{ref:FB}=Hi,{propToStr:kB,PROP_KEY_PREFIX:BB}=Ip;class jy extends Error{constructor(e){super(),this.name=this.constructor.name,this.tableName=e}}class da extends Error{constructor(){super(),this.name=this.constructor.name}}let UB=class{constructor(e,r){const n=xB(CB(e)),s=GB(n,r),o=VB(s);this._refs=n.map(i=>i.model(o)),this._modelClass=o,this._props=s.map(i=>i.path[0]),this._cols=n.map(i=>i.column),this._propGetters=s.map(i=>HB(i.path)),this._propSetters=s.map(i=>KB(i.path)),this._patchers=n.map((i,a)=>qB(i,s[a].path))}static get ModelNotFoundError(){return jy}static get InvalidReferenceError(){return da}get size(){return this._refs.length}get modelClass(){return this._modelClass}get props(){return this._props}get cols(){return this._cols}forEach(e){for(let r=0,n=this.size;r<n;++r)e(r)}propKey(e){const r=this.size;let n=BB;for(let s=0;s<r;++s)n+=kB(this.getProp(e,s)),s!==r-1&&(n+=",");return n}getProps(e){const r=this.size,n=new Array(r);for(let s=0;s<r;++s)n[s]=this.getProp(e,s);return n}hasProps(e){const r=this.size;for(let n=0;n<r;++n){const s=this.getProp(e,n);if(s==null)return!1}return!0}getProp(e,r){return this._propGetters[r](e)}setProp(e,r,n){return this._propSetters[r](e,n)}ref(e,r){const n=e.tableRefFor(this.modelClass);return this._refs[r].clone().table(n)}refs(e){const r=new Array(this.size);for(let n=0,s=r.length;n<s;++n)r[n]=this.ref(e,n);return r}patch(e,r,n){return this._patchers[r](e,n)}propDescription(e){return this._refs[e].expression}};function xB(t){try{return t.map(e=>!MB(e)||!e.isObjectionReferenceBuilder?FB(e):e)}catch{throw new da}}function GB(t,e){return t.map(r=>{if(!r.tableName)throw new da;const n=e(r.tableName);if(!n)throw new jy(r.tableName);const s=n.columnNameToPropertyName(r.column),o=r.parsedExpr.access.map(i=>i.ref);return{path:[s].concat(o),modelClass:n}})}function VB(t){const e=t.map(n=>n.modelClass);if(DB(e).length!==1)throw new da;return e[0]}function HB(t){if(t.length===1){const e=t[0];return r=>r[e]}else return e=>jB(e,t)}function KB(t){if(t.length===1){const e=t[0];return(r,n)=>r[e]=n}else return(e,r)=>LB(e,t,r)}function qB(t,e){return t.isPlainColumnRef?(r,n)=>r[e[0]]=n:(r,n)=>r[t.expression]=n}var Mu={RelationProperty:UB};const{UpdateOperation:WB}=ms,{RelationFindOperation:JB}=mo;let zB=class extends WB{constructor(e,r){super(e,r),this.relation=r.relation,this.owner=r.owner}onBuild(e){super.onBuild(e),this.relation.findQuery(e,this.owner)}toFindOperation(){return new JB("find",{relation:this.relation,owner:this.owner})}};var QB={RelationUpdateOperation:zB};const{DeleteOperation:YB}=oa,{RelationFindOperation:XB}=mo;let ZB=class extends YB{constructor(e,r){super(e,r),this.relation=r.relation,this.owner=r.owner}onBuild(e){super.onBuild(e),this.relation.findQuery(e,this.owner)}toFindOperation(){return new XB("find",{relation:this.relation,owner:this.owner})}};var Ly={RelationDeleteOperation:ZB};function eU(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const Fy={},tU=Object.freeze(Object.defineProperty({__proto__:null,default:Fy},Symbol.toStringTag,{value:"Module"})),rU=hg(tU),ks=rU,{isString:nU,isFunction:ky}=ye;class Ws extends Error{}function sU(t,e,r){try{if(nU(t)){if(iU(t))return By(t);if(e)return oU(t,e)}else{if(ky(t)&&!Jn(t)&&(t=t()),!Jn(t))throw new Ws("is not a subclass of Model or a file path to a module that exports one. You may be dealing with a require loop. See the documentation section about require loops.");return t}}catch(n){throw n instanceof Ws?new Error(`${r}: ${n.message}`):n}}function oU(t,e){let r=null;for(const n of e)try{return By(ks.join(n,t))}catch(s){r===null&&(r=s)}throw r||new Ws(`could not resolve ${t} using modelPaths`)}function By(t){let e=eU(`${ks.resolve(t)}`),r=null;if(Jn(e)?r=e:Jn(e.default)?r=e.default:Object.keys(e).forEach(n=>{const s=e[n];if(Jn(s)){if(r!==null)throw new Ws(`path ${t} exports multiple models. Don't know which one to choose.`);r=s}}),!Jn(r))throw new Ws(`${t} is an invalid file path to a model class`);return r}function iU(t){return ks.normalize(t+"/")===ks.normalize(ks.resolve(t)+"/")}function Jn(t){return ky(t)&&t.isObjectionModelClass}var Uy={resolveModel:sU};const{RelationProperty:Xa}=Mu,{RelationFindOperation:aU}=mo,{RelationUpdateOperation:Uh}=QB,{RelationDeleteOperation:lU}=Ly,{resolveModel:cU}=Uy,{get:uU,isFunction:Du}=ye,{mapAfterAllReturn:dU}=Ct,{createModifier:fU}=co;let ju=class{constructor(e,r){this.name=e,this.ownerModelClass=r,this.relatedModelClass=null,this.ownerProp=null,this.relatedProp=null,this.joinTableModelClass=null,this.joinTableOwnerProp=null,this.joinTableRelatedProp=null,this.joinTableBeforeInsert=null,this.joinTableExtras=[],this.modify=null,this.beforeInsert=null}setMapping(e){let r={name:this.name,mapping:e,ownerModelClass:this.ownerModelClass,relatedModelClass:null,relatedProp:null,ownerProp:null,modify:null,beforeInsert:null,forbiddenMappingProperties:this.forbiddenMappingProperties,createError:n=>this.createError(n)};r=hU(r),r=pU(r),r=_U(r),r=mU(r),r=yU(r),r=EU(r),r=gU(r),r=OU(r),this.relatedModelClass=r.relatedModelClass,this.ownerProp=r.ownerProp,this.relatedProp=r.relatedProp,this.modify=r.modify,this.beforeInsert=r.beforeInsert}get forbiddenMappingProperties(){return["join.through"]}get joinTable(){return this.joinTableModelClass?this.joinTableModelClass.getTableName():null}get joinModelClass(){return this.getJoinModelClass(this.ownerModelClass.knex())}getJoinModelClass(e){return this.joinTableModelClass&&e!==this.joinTableModelClass.knex()?this.joinTableModelClass.bindKnex(e):this.joinTableModelClass}isOneToOne(){return!1}clone(){const e=new this.constructor(this.name,this.ownerModelClass);return e.relatedModelClass=this.relatedModelClass,e.ownerProp=this.ownerProp,e.relatedProp=this.relatedProp,e.modify=this.modify,e.beforeInsert=this.beforeInsert,e.joinTableModelClass=this.joinTableModelClass,e.joinTableOwnerProp=this.joinTableOwnerProp,e.joinTableRelatedProp=this.joinTableRelatedProp,e.joinTableBeforeInsert=this.joinTableBeforeInsert,e.joinTableExtras=this.joinTableExtras,e}bindKnex(e){const r=this.clone();return r.relatedModelClass=this.relatedModelClass.bindKnex(e),r.ownerModelClass=this.ownerModelClass.bindKnex(e),this.joinTableModelClass&&(r.joinTableModelClass=this.joinTableModelClass.bindKnex(e)),r}findQuery(e,r){const n=this.relatedProp.refs(e);return r.buildFindQuery(e,this,n),this.applyModify(e)}applyModify(e){try{return e.modify(this.modify)}catch(r){throw r instanceof this.relatedModelClass.ModifierNotFoundError?this.createError(r.message):r}}join(e,{joinOperation:r="join",relatedTableAlias:n=e.tableRefFor(this.relatedModelClass),relatedJoinSelectQuery:s=this.relatedModelClass.query().childQueryOf(e),relatedTable:o=e.tableNameFor(this.relatedModelClass),ownerTable:i=e.tableRefFor(this.ownerModelClass)}={}){let a=this.applyModify(s).as(n);return a.isSelectAll()&&(a=vU(o,n)),e[r](a,c=>{const u=this.relatedProp,d=this.ownerProp;u.forEach(p=>{const N=u.ref(e,p).table(n),$=d.ref(e,p).table(i);c.on(N,$)})})}find(e,r){return new aU("find",{relation:this,owner:r})}insert(e,r){throw this.createError("not implemented")}update(e,r){return new Uh("update",{relation:this,owner:r})}patch(e,r){return new Uh("patch",{relation:this,owner:r,modelOptions:{patch:!0}})}delete(e,r){return new lU("delete",{relation:this,owner:r})}relate(){throw this.createError("not implemented")}unrelate(){throw this.createError("not implemented")}hasRelateProp(e){return e.$hasProps(this.relatedProp.props)}setRelateProp(e,r){this.relatedProp.forEach(n=>{this.relatedProp.setProp(e,n,r[n])})}executeBeforeInsert(e,r,n){return dU(e,s=>this.beforeInsert(s,r),n)}createError(e){return this.ownerModelClass&&this.ownerModelClass.name&&this.name?new Error(`${this.ownerModelClass.name}.relationMappings.${this.name}: ${e}`):new Error(`${this.constructor.name}: ${e}`)}};Object.defineProperties(ju,{isObjectionRelationClass:{enumerable:!1,writable:!1,value:!0}});Object.defineProperties(ju.prototype,{isObjectionRelation:{enumerable:!1,writable:!1,value:!0}});function hU(t){return t.forbiddenMappingProperties.forEach(e=>{if(uU(t.mapping,e.split("."))!==void 0)throw t.createError(`Property ${e} is not supported for this relation type.`)}),t}function pU(t){if(!Du(t.ownerModelClass)||!t.ownerModelClass.isObjectionModelClass)throw t.createError("Relation's owner is not a subclass of Model");return t}function _U(t){if(!t.mapping.modelClass)throw t.createError("modelClass is not defined");return t}function mU(t){let e;try{e=cU(t.mapping.modelClass,t.ownerModelClass.modelPaths,"modelClass")}catch(r){throw t.createError(r.message)}return Object.assign(t,{relatedModelClass:e})}function yU(t){if(!t.mapping.relation)throw t.createError("relation is not defined");if(!Du(t.mapping.relation)||!t.mapping.relation.isObjectionRelationClass)throw t.createError("relation is not a subclass of Relation");return t}function EU(t){const e=t.mapping;if(!e.join||!e.join.from||!e.join.to)throw t.createError('join must be an object that maps the columns of the related models together. For example: {from: "SomeTable.id", to: "SomeOtherTable.someModelId"}');const r=xh(t,e.join.from,"join.from"),n=xh(t,e.join.to,"join.to");let s,o;if(r.modelClass.getTableName()===t.ownerModelClass.getTableName())s=r,o=n;else if(n.modelClass.getTableName()===t.ownerModelClass.getTableName())s=n,o=r;else throw t.createError("join: either `from` or `to` must point to the owner model table.");if(s.props.some(i=>i===t.name))throw t.createError(`join: relation name and join property '${t.name}' cannot have the same name. If you cannot change one or the other, you can use $parseDatabaseJson and $formatDatabaseJson methods to convert the column name.`);if(o.modelClass.getTableName()!==t.relatedModelClass.getTableName())throw t.createError("join: either `from` or `to` must point to the related model table.");return Object.assign(t,{ownerProp:s,relatedProp:o})}function xh(t,e,r){try{return new Xa(e,n=>[t.ownerModelClass,t.relatedModelClass].find(s=>s.getTableName()===n))}catch(n){throw n instanceof Xa.ModelNotFoundError?t.createError(`join: either \`from\` or \`to\` must point to the owner model table and the other one to the related table. It might be that specified table '${n.tableName}' is not correct`):n instanceof Xa.InvalidReferenceError?t.createError(`${r} must have format TableName.columnName. For example "SomeTable.id" or in case of composite key ["SomeTable.a", "SomeTable.b"].`):n}}function gU(t){const e=t.mapping,r=e.modify||e.filter,n=r&&fU({modifier:r,modelClass:t.relatedModelClass});return Object.assign(t,{modify:n})}function OU(t){let e;return Du(t.mapping.beforeInsert)?e=t.mapping.beforeInsert:e=r=>r,Object.assign(t,{beforeInsert:e})}function vU(t,e){return t===e?t:`${t} as ${e}`}var fa={Relation:ju};const{InsertOperation:RU}=ho;let $U=class extends RU{constructor(e,r){super(e,r),this.relation=r.relation,this.owner=r.owner,this.assignResultToOwner=!0}async onBefore2(e,r){const n=e.context();return r=await this.relation.executeBeforeInsert(this.models,n,r),super.onBefore2(e,r)}clone(){const e=super.clone();return e.relation=this.relation,e.owner=this.owner,e.assignResultToOwner=this.assignResultToOwner,e}};var Lu={RelationInsertOperation:$U};const{RelationInsertOperation:wU}=Lu;let NU=class extends wU{onAdd(e,r){const n=super.onAdd(e,r);bU(this.owner,this.relation);const s=this.owner.getSplitProps(e,this.relation),o=this.relation.relatedProp;for(const i of this.models)for(let a=0,c=o.size;a<c;++a)o.setProp(i,a,s[0][a]);return n}async onAfter1(e,r){const n=await super.onAfter1(e,r);if(!this.assignResultToOwner)return n;if(this.owner.isModels)for(const s of this.owner.modelArray)s.$appendRelated(this.relation,n);return n}};function bU(t,e){const{isModels:r,isIdentifiers:n,isQueryBuilder:s}=t,{ownerProp:o}=e,i=r&&t.modelArray.length===1,a=n&&t.getNormalizedIdentifiers(o).length===1;if(!i&&!a&&!s)throw new Error(["Can only insert items for one parent at a time in case of HasManyRelation.","Otherwise multiple insert queries would need to be created.","If you need to insert items for multiple parents, simply loop through them.","That's the most performant way."].join(" "))}var AU={HasManyInsertOperation:NU};const{normalizeIds:TU}=ca,{RelateOperation:IU}=ia;let SU=class extends IU{onAdd(e,r){return this.input=r[0],this.ids=TU(r[0],this.relation.relatedModelClass.getIdRelationProperty(),{arrayOutput:!0}),PU(this.owner,this.relation),!0}queryExecutor(e){const r={},n=this.relation.relatedProp,s=this.owner.getSplitProps(e,this.relation);return n.forEach(o=>{n.patch(r,o,s[0][o])}),this.relation.relatedModelClass.query().childQueryOf(e).patch(r).copyFrom(e,e.constructor.JoinSelector).copyFrom(e,e.constructor.WhereSelector).findByIds(this.ids).modify(this.relation.modify)}};function PU(t,e){const{isModels:r,isIdentifiers:n,isQueryBuilder:s}=t,{ownerProp:o}=e,i=r&&t.modelArray.length===1,a=n&&t.getNormalizedIdentifiers(o).length===1;if(!i&&!a&&!s)throw new Error(["Can only relate items for one parent at a time in case of HasManyRelation.","Otherwise multiple update queries would need to be created.","If you need to relate items for multiple parents, simply loop through them.","That's the most performant way."].join(" "))}var CU={HasManyRelateOperation:SU};const{UnrelateOperation:MU}=aa;let DU=class extends MU{queryExecutor(e){const r={},n=this.relation.relatedProp,s=this.owner.getProps(this.relation),o=n.refs(e);return n.forEach(i=>{n.patch(r,i,null)}),this.relation.relatedModelClass.query().childQueryOf(e).patch(r).copyFrom(e,e.constructor.JoinSelector).copyFrom(e,e.constructor.WhereSelector).whereInComposite(o,s).modify(this.relation.modify)}};var jU={HasManyUnrelateOperation:DU};const{Relation:LU}=fa,{HasManyInsertOperation:FU}=AU,{HasManyRelateOperation:kU}=CU,{HasManyUnrelateOperation:BU}=jU;let xy=class extends LU{insert(e,r){return new FU("insert",{relation:this,owner:r})}relate(e,r){return new kU("relate",{relation:this,owner:r})}unrelate(e,r){return new BU("unrelate",{relation:this,owner:r})}hasRelateProp(e){return e.$hasId()}setRelateProp(e,r){e.$id(r)}};Object.defineProperties(xy.prototype,{isObjectionHasManyRelation:{enumerable:!1,writable:!1,value:!0}});var Fu={HasManyRelation:xy};const{HasManyRelation:UU}=Fu;let xU=class extends UU{isOneToOne(){return!0}};var Gy={HasOneRelation:xU};const{RelationFindOperation:GU}=mo,{getTempColumn:VU}=Wm;let HU=class extends GU{constructor(e,r){super(e,r),this.ownerJoinColumnAlias=new Array(this.relation.joinTableOwnerProp.size);for(let n=0,s=this.ownerJoinColumnAlias.length;n<s;++n)this.ownerJoinColumnAlias[n]=VU(n)}onBuild(e){const r=this.relation.relatedModelClass;if(this.maybeApplyAlias(e),this.relation.findQuery(e,this.owner),!e.hasSelects()){const n=e.tableRefFor(r);e.select(`${n}.*`);for(const s of this.relation.joinTableExtras){const o=e.tableRefFor(this.relation.joinTable);e.select(`${o}.${s.joinTableCol} as ${s.aliasCol}`)}}this.assignResultToOwner&&this.owner.isModels&&this.selectMissingJoinColumns(e)}onAfter2(e,r){const n=this.relation.isOneToOne();if(this.assignResultToOwner&&this.owner.isModels){const s=this.owner.modelArray,o=this.relation.ownerProp,i=new Map;for(let a=0,c=r.length;a<c;++a){const u=r[a],d=u.$propKey(this.ownerJoinColumnAlias);let p=i.get(d);p||(p=[],i.set(d,p)),p.push(u)}for(let a=0,c=s.length;a<c;++a){const u=s[a],d=o.propKey(u),p=i.get(d);n?u[this.relationProperty]=p&&p[0]||null:u[this.relationProperty]=p||[]}}return r}clone(){const e=super.clone();return e.ownerJoinColumnAlias=this.ownerJoinColumnAlias.slice(),e}selectMissingJoinColumns(e){const{relatedModelClass:r,joinTableOwnerProp:n}=this.relation;n.forEach(s=>{const o=n.ref(e,s),i=r.columnNameToPropertyName(this.ownerJoinColumnAlias[s]);e.select(o.as(this.ownerJoinColumnAlias[s])),this.omitProps.push(i)}),super.selectMissingJoinColumns(e)}};var Vy={ManyToManyFindOperation:HU};const{isPostgres:KU}=qt,{normalizeIds:qU}=ca,{RelateOperation:WU}=ia;let JU=class extends WU{onAdd(e,r){return this.input=r[0],this.ids=qU(r[0],this.relation.relatedProp),zU(e,this.owner,this.relation),!0}queryExecutor(e){const r=this.relation.getJoinModelClass(e.knex()),n=this.owner.getSplitProps(e,this.relation),s=[];for(const o of n)for(const i of this.ids)s.push(r.fromJson(this.relation.createJoinModel(o,i)));return r.query().childQueryOf(e).modify(o=>{this.opt.dontCopyReturning||o.copyFrom(e,/returning/),this.opt.dontCopyOnConflict||o.copyFrom(e,/onConflict|ignore|merge/)}).runBefore((o,i)=>this.relation.executeJoinTableBeforeInsert(s,i.context(),null)).insert(s).runAfter(o=>Array.isArray(o)?o.length:1)}};function zU(t,e,r){const{isModels:n,isIdentifiers:s,isQueryBuilder:o}=e,{ownerProp:i}=r,a=n&&e.modelArray.length===1,c=s&&e.getNormalizedIdentifiers(i).length===1;if(KU(t.unsafeKnex())){if(!n&&!s&&!o)throw new Error("Parent must be a list of identifiers or a list of models when relating a ManyToManyRelation")}else if(!a&&!c&&!o)throw new Error(["Can only relate items for one parent at a time in case of ManyToManyRelation.","Otherwise multiple insert queries would need to be created.","If you need to relate items for multiple parents, simply loop through them.","That's the most performant way."].join(" "))}var Hy={ManyToManyRelateOperation:JU};const{RelationInsertOperation:QU}=Lu,{ManyToManyRelateOperation:YU}=Hy;class XU extends QU{onAdd(e,r){const n=super.onAdd(e,r);return this.relation.omitExtraProps(this.models),n}async onAfter1(e,r){const n=await super.onAfter1(e,r),s=new YU("relate",{dontCopyReturning:!0,dontCopyOnConflict:!0,relation:this.relation,owner:this.owner}),o=n.filter(i=>this.relation.relatedProp.hasProps(i));if(this.assignResultToOwner&&this.owner.isModels)for(const i of this.owner.modelArray)i.$appendRelated(this.relation,n);return o.length===0||(s.onAdd(e,[o]),await s.queryExecutor(e)),n}}var ZU={ManyToManyInsertOperation:XU};const{UnrelateOperation:ex}=aa;let tx=class extends ex{queryExecutor(e){const r=this.relation.getJoinModelClass(e.knex()).query().childQueryOf(e).delete();return this.applyModifyFilterForJoinTable(r).modify(this.relation.joinTableModify)}applyModifyFilterForRelatedTable(e){throw new Error("not implemented")}applyModifyFilterForJoinTable(e){throw new Error("not implemented")}};var Ky={ManyToManyUnrelateOperationBase:tx};const{ManyToManyFindOperation:rx}=Vy,nx=t=>class extends t{constructor(...e){super(...e),this.modifyFilterSubquery=null}get modifyMainQuery(){return!0}onBuild(e){return this.modifyFilterSubquery=this.createModifyFilterSubquery(e),this.modifyMainQuery&&(this.removeFiltersFromMainQuery(e),this.applyModifyFilterForRelatedTable(e)),super.onBuild(e)}createModifyFilterSubquery(e){const r=this.relation.relatedModelClass,n=e.constructor,s=r.query().childQueryOf(e);return this.relation.findQuery(s,this.owner),s.copyFrom(e,n.WhereSelector).copyFrom(e,n.JoinSelector),s.clearSelect()}removeFiltersFromMainQuery(e){const r=e.constructor;e.clear(r.WhereSelector),e.clear(r.JoinSelector)}applyModifyFilterForRelatedTable(e){const r=this.relation.relatedModelClass.getIdRelationProperty().refs(e),n=this.modifyFilterSubquery.clone().select(r);return e.whereInComposite(r,n)}applyModifyFilterForJoinTable(e){const r=this.relation.joinTableOwnerProp.refs(e),n=this.relation.joinTableRelatedProp.refs(e),s=this.relation.relatedProp.refs(e),o=this.owner.getProps(this.relation),i=this.modifyFilterSubquery.clone().select(s);return e.whereInComposite(n,i).whereInComposite(r,o)}toFindOperation(){return new rx("find",{relation:this.relation,owner:this.owner})}clone(){const e=super.clone();return e.modifyFilterSubquery=this.modifyFilterSubquery,e}};var ha={ManyToManyModifyMixin:nx};const{ManyToManyUnrelateOperationBase:sx}=Ky,{ManyToManyModifyMixin:ox}=ha;class ix extends ox(sx){get modifyMainQuery(){return!1}}var ax={ManyToManyUnrelateOperation:ix};const{ManyToManyModifyMixin:lx}=ha,Gh="_rowid_",cx=t=>class extends lx(t){applyModifyFilterForRelatedTable(e){const n=`${e.tableRefFor(this.relation.relatedModelClass)}.${Gh}`,s=this.modifyFilterSubquery.clone().select(n);return e.whereInComposite(n,s)}applyModifyFilterForJoinTable(e){const r=this.relation.joinTableOwnerProp.refs(e),s=`${e.tableRefFor(this.relation.getJoinModelClass(e))}.${Gh}`,o=this.owner.getProps(this.relation),i=this.modifyFilterSubquery.clone().select(s);return e.whereInComposite(s,i).whereInComposite(r,o)}};var ku={ManyToManySqliteModifyMixin:cx};const{ManyToManyUnrelateOperationBase:ux}=Ky,{ManyToManySqliteModifyMixin:dx}=ku;class fx extends dx(ux){get modifyMainQuery(){return!1}}var hx={ManyToManyUnrelateSqliteOperation:fx};const{UpdateOperation:px}=ms;let _x=class extends px{constructor(e,r){super(e,r),this.relation=r.relation,this.owner=r.owner,this.hasExtraProps=!1,this.joinTablePatch={},this.joinTablePatchFilterQuery=null}onAdd(e,r){const n=r[0];for(const o of this.relation.joinTableExtras)o.aliasProp in n&&(this.hasExtraProps=!0,this.joinTablePatch[o.joinTableProp]=n[o.aliasProp]);const s=super.onAdd(e,r);return this.hasExtraProps&&this.relation.omitExtraProps([this.model]),s}async onAfter1(e,r){if(this.hasExtraProps){const n=this.relation.getJoinModelClass(e.knex()).query().childQueryOf(e).patch(this.joinTablePatch);return await this.applyModifyFilterForJoinTable(n).modify(this.relation.joinTableModify),r}else return r}applyModifyFilterForRelatedTable(e){throw new Error("not implemented")}applyModifyFilterForJoinTable(e){throw new Error("not implemented")}clone(){const e=super.clone();return e.hasExtraProps=this.hasExtraProps,e.joinTablePatch=this.joinTablePatch,e.joinTablePatchFilterQuery=this.joinTablePatchFilterQuery,e}};var qy={ManyToManyUpdateOperationBase:_x};const{ManyToManyUpdateOperationBase:mx}=qy,{ManyToManyModifyMixin:yx}=ha;class Ex extends yx(mx){}var gx={ManyToManyUpdateOperation:Ex};const{ManyToManyUpdateOperationBase:Ox}=qy,{ManyToManySqliteModifyMixin:vx}=ku;class Rx extends vx(Ox){}var $x={ManyToManyUpdateSqliteOperation:Rx};const{DeleteOperation:wx}=oa;let Nx=class extends wx{constructor(e,r){super(e,r),this.relation=r.relation,this.owner=r.owner}applyModifyFilterForRelatedTable(e){throw new Error("not implemented")}applyModifyFilterForJoinTable(e){throw new Error("not implemented")}};var Wy={ManyToManyDeleteOperationBase:Nx};const{ManyToManyDeleteOperationBase:bx}=Wy,{ManyToManyModifyMixin:Ax}=ha;class Tx extends Ax(bx){}var Ix={ManyToManyDeleteOperation:Tx};const{ManyToManyDeleteOperationBase:Sx}=Wy,{ManyToManySqliteModifyMixin:Px}=ku;class Cx extends Px(Sx){}var Mx={ManyToManyDeleteSqliteOperation:Cx},Za,Vh;function Bu(){if(Vh)return Za;Vh=1;const{getModel:t}=Ny(),{Relation:e}=fa,{RelationProperty:r}=Mu,{isSqlite:n}=qt,{inheritModel:s}=mp,{resolveModel:o}=Uy,{mapAfterAllReturn:i}=Ct,{isFunction:a,isObject:c,isString:u}=ye,{createModifier:d}=co,{ManyToManyFindOperation:p}=Vy,{ManyToManyInsertOperation:N}=ZU,{ManyToManyRelateOperation:$}=Hy,{ManyToManyUnrelateOperation:g}=ax,{ManyToManyUnrelateSqliteOperation:R}=hx,{ManyToManyUpdateOperation:y}=gx,{ManyToManyUpdateSqliteOperation:_}=$x,{ManyToManyDeleteOperation:v}=Ix,{ManyToManyDeleteSqliteOperation:C}=Mx;class D extends e{setMapping(f){const w=super.setMapping(f);let m={mapping:f,ownerModelClass:this.ownerModelClass,relatedModelClass:this.relatedModelClass,ownerProp:this.ownerProp,relatedProp:this.relatedProp,joinTableModelClass:null,joinTableOwnerProp:null,joinTableRelatedProp:null,joinTableBeforeInsert:null,joinTableExtras:[],createError:l=>this.createError(l)};return m=ie(m),m=ae(m),m=ue(m),m=be(m),m=Fe(m),m=Ye(m),m=I(m),this.joinTableExtras=m.joinTableExtras,this.joinTableModify=m.joinTableModify,this.joinTableModelClass=m.joinTableModelClass,this.joinTableOwnerProp=m.joinTableOwnerProp,this.joinTableRelatedProp=m.joinTableRelatedProp,this.joinTableBeforeInsert=m.joinTableBeforeInsert,w}get forbiddenMappingProperties(){return[]}findQuery(f,w){const m=this.joinTableOwnerProp.refs(f),l=f.tableNameFor(this.joinTable),h=f.tableRefFor(this.joinTable);let A=this.joinTableModelClass.query().childQueryOf(f).modify(this.joinTableModify).as(h);return A.isSelectAll()&&(A=oe(l,h)),f.join(A,B=>{this.relatedProp.forEach(V=>{const H=this.relatedProp.ref(f,V),re=this.joinTableRelatedProp.ref(f,V);B.on(H,re)})}),w.buildFindQuery(f,this,m),this.applyModify(f)}join(f,{joinOperation:w=L(),relatedTableAlias:m=ne(this,f),relatedJoinSelectQuery:l=ce(this,f),relatedTable:h=me(this,f),ownerTable:A=q(this,f),joinTableAlias:B=ee(this,m,f)}={}){let V=this.applyModify(l).as(m);V.isSelectAll()&&(V=oe(h,m));let H=this.joinTableModelClass.query().childQueryOf(f).modify(this.joinTableModify).as(B);return H.isSelectAll()&&(H=oe(this.joinTable,B)),f[w](H,re=>{const _e=this.ownerProp,Ae=this.joinTableOwnerProp;_e.forEach(We=>{const de=Ae.ref(f,We).table(B),Xe=_e.ref(f,We).table(A);re.on(de,Xe)})})[w](V,re=>{const _e=this.relatedProp,Ae=this.joinTableRelatedProp;_e.forEach(We=>{const de=Ae.ref(f,We).table(B),Xe=_e.ref(f,We).table(m);re.on(de,Xe)})})}find(f,w){return new p("find",{relation:this,owner:w})}insert(f,w){return new N("insert",{relation:this,owner:w})}update(f,w){return n(f.knex())?new _("update",{relation:this,owner:w}):new y("update",{relation:this,owner:w})}patch(f,w){return n(f.knex())?new _("patch",{modelOptions:{patch:!0},relation:this,owner:w}):new y("patch",{modelOptions:{patch:!0},relation:this,owner:w})}delete(f,w){return n(f.knex())?new C("delete",{relation:this,owner:w}):new v("delete",{relation:this,owner:w})}relate(f,w){return new $("relate",{relation:this,owner:w})}unrelate(f,w){return n(f.knex())?new R("unrelate",{relation:this,owner:w}):new g("unrelate",{relation:this,owner:w})}createJoinModels(f,w){return w.map(m=>this.createJoinModel(f,m))}createJoinModel(f,w){let m={};for(let l=0,h=this.joinTableOwnerProp.size;l<h;++l)this.joinTableOwnerProp.setProp(m,l,f[l]);for(let l=0,h=this.joinTableRelatedProp.size;l<h;++l){const A=this.relatedProp.getProp(w,l);A!==void 0&&this.joinTableRelatedProp.setProp(m,l,A)}for(const l of this.joinTableExtras){let h=w[l.aliasProp];h===void 0&&w.$$queryProps&&(h=w.$$queryProps[l.aliasProp]),h!==void 0&&(m[l.joinTableProp]=h)}return m}omitExtraProps(f){if(this.joinTableExtras&&this.joinTableExtras.length){const w=this.joinTableExtras.map(m=>m.aliasProp);for(const m of f)m.$omitFromDatabaseJson(w)}}executeJoinTableBeforeInsert(f,w,m){return i(f,l=>this.joinTableBeforeInsert(l,w),m)}}Object.defineProperties(D.prototype,{isObjectionManyToManyRelation:{enumerable:!1,writable:!1,value:!0}});function L(){return"join"}function ne(b,f){return f.tableRefFor(b.relatedModelClass)}function ce(b,f){return b.relatedModelClass.query().childQueryOf(f)}function me(b,f){return f.tableNameFor(b.relatedModelClass)}function q(b,f){return f.tableRefFor(b.ownerModelClass)}function ee(b,f,w){const m=w.tableRefFor(b.joinTable);return m===b.joinTable?b.ownerModelClass.joinTableAlias(f):m}function oe(b,f){return b===f?b:`${b} as ${f}`}function ie(b){const f=b.mapping;if(!c(f.join.through))throw b.createError("join must have a `through` object that describes the join table.");if(!f.join.through.from||!f.join.through.to)throw b.createError('join.through must be an object that describes the join table. For example: {from: "JoinTable.someId", to: "JoinTable.someOtherId"}');return b}function ae(b){let f=null;if(b.mapping.join.through.modelClass)try{f=o(b.mapping.join.through.modelClass,b.ownerModelClass.modelPaths,"join.through.modelClass")}catch(w){throw b.createError(w.message)}return Object.assign(b,{joinTableModelClass:f})}function ue(b){let f,w,m,l,h;if(f=$e(b,b.mapping.join.through.from,"join.through.from"),w=f.prop,b=f.ctx,f=$e(b,b.mapping.join.through.to,"join.through.to"),m=f.prop,b=f.ctx,w.modelClass.getTableName()!==m.modelClass.getTableName())throw b.createError("join.through `from` and `to` must point to the same join table.");return b.relatedProp.modelClass.getTableName()===w.modelClass.getTableName()?(l=w,h=m):(l=m,h=w),Object.assign(b,{joinTableOwnerProp:h,joinTableRelatedProp:l})}function $e(b,f,w){let m=null,l=b.joinTableModelClass;const h=A=>(l===null&&(l=s(t()),l.tableName=A,l.idColumn=null,l.concurrency=b.ownerModelClass.concurrency),l.getTableName()===A?l:null);try{m=new r(f,h)}catch(A){throw A instanceof r.ModelNotFoundError?b.createError("join.through `from` and `to` must point to the same join table."):b.createError(`${w} must have format JoinTable.columnName. For example "JoinTable.someId" or in case of composite key ["JoinTable.a", "JoinTable.b"].`)}return{ctx:Object.assign(b,{joinTableModelClass:l}),prop:m}}function be(b){let f=b.mapping.join.through.extra;if(!f)return b;u(f)?f={[f]:f}:Array.isArray(f)&&(f=f.reduce((m,l)=>(m[l]=l,m),{}));const w=Object.keys(f).map(m=>{const l=f[m];return{joinTableCol:l,joinTableProp:b.joinTableModelClass.columnNameToPropertyName(l),aliasCol:m,aliasProp:b.joinTableModelClass.columnNameToPropertyName(m)}});return Object.assign(b,{joinTableExtras:w})}function Fe(b){const f=b.mapping.join.through,w=f.modify||f.filter,m=w&&d({modifier:w,modelClass:b.relatedModelClass});return Object.assign(b,{joinTableModify:m})}function Ye(b){let f;return a(b.mapping.join.through.beforeInsert)?f=b.mapping.join.through.beforeInsert:f=w=>w,Object.assign(b,{joinTableBeforeInsert:f})}function I(b){return b.joinTableModelClass.getIdColumn()===null&&(b.joinTableModelClass.idColumn=b.joinTableRelatedProp.cols),b}return Za={ManyToManyRelation:D},Za}const{normalizeIds:Dx}=ca,{RelateOperation:jx}=ia;let Lx=class extends jx{onAdd(e,r){return this.input=r[0],this.ids=Dx(r[0],this.relation.relatedProp,{arrayOutput:!0}),Fx(this.ids),!0}queryExecutor(e){const r={},n=this.relation.ownerProp;n.forEach(i=>{const a=this.ids[0][i];if(this.owner.isModels)for(const c of this.owner.modelArray)n.setProp(c,i,a);n.patch(r,i,a)});const s=this.relation.ownerModelClass.getIdRelationProperty(),o=this.owner.getProps(this.relation,s);return this.relation.ownerModelClass.query().childQueryOf(e).patch(r).whereInComposite(s.refs(e),o)}};function Fx(t){if(t.length>1)throw new Error("can only relate one model to a BelongsToOneRelation")}var Jy={BelongsToOneRelateOperation:Lx};const{RelationInsertOperation:kx}=Lu,{BelongsToOneRelateOperation:Bx}=Jy;let Ux=class extends kx{onAdd(e,r){const n=super.onAdd(e,r);if(this.models.length>1)throw this.relation.createError("can only insert one model to a BelongsToOneRelation");return n}async onAfter1(e,r){const n=await super.onAfter1(e,r);if(!e.isExecutable())return n;const s=new Bx("relate",{relation:this.relation,owner:this.owner});if(this.assignResultToOwner&&this.owner.isModels)for(const o of this.owner.modelArray)o.$setRelated(this.relation,n);return s.onAdd(e,[n]),await s.queryExecutor(e),n}};var xx={BelongsToOneInsertOperation:Ux};const{RelationDeleteOperation:Gx}=Ly;let Vx=class extends Gx{onAfter1(e,r){if(this.owner.isModels){const n=this.relation.ownerProp;for(const s of this.owner.modelArray)n.forEach(o=>{n.setProp(s,o,null)})}return r}};var Hx={BelongsToOneDeleteOperation:Vx};const{UnrelateOperation:Kx}=aa;let qx=class extends Kx{onAdd(){const e=new Array(this.relation.ownerProp.size);return this.relation.ownerProp.forEach(r=>{e[r]=null}),this.ids=[e],!0}queryExecutor(e){const r={},n=this.relation.ownerProp;n.forEach(c=>{const u=this.ids[0][c];if(this.owner.isModels)for(const d of this.owner.modelArray)n.setProp(d,c,u);n.patch(r,c,u)});const s=this.relation.ownerModelClass.getIdRelationProperty(),o=s.refs(e),i=this.owner.getProps(this.relation,s),a=this.relation.ownerModelClass.query().childQueryOf(e).patch(r).whereInComposite(o,i);return e.has(e.constructor.WhereSelector)&&a.whereExists(this.relation.ownerModelClass.relatedQuery(this.relation.name).copyFrom(e,e.constructor.JoinSelector).copyFrom(e,e.constructor.WhereSelector)),a}};var Wx={BelongsToOneUnrelateOperation:qx};const{Relation:Jx}=fa,{BelongsToOneInsertOperation:zx}=xx,{BelongsToOneDeleteOperation:Qx}=Hx,{BelongsToOneRelateOperation:Yx}=Jy,{BelongsToOneUnrelateOperation:Xx}=Wx;let zy=class extends Jx{isOneToOne(){return!0}insert(e,r){return new zx("insert",{relation:this,owner:r})}delete(e,r){return new Qx("delete",{relation:this,owner:r})}relate(e,r){return new Yx("relate",{relation:this,owner:r})}unrelate(e,r){return new Xx("unrelate",{relation:this,owner:r})}};Object.defineProperties(zy.prototype,{isObjectionBelongsToOneRelation:{enumerable:!1,writable:!1,value:!0}});var Qy={BelongsToOneRelation:zy},el,Hh;function Yy(){if(Hh)return el;Hh=1;const{ManyToManyRelation:t}=Bu();class e extends t{isOneToOne(){return!0}}return el={HasOneThroughRelation:e},el}const{FindOperation:Zx}=Au,{assertHasId:eG}=uo;let tG=class extends Zx{constructor(e,r){super(e,r),this.instance=r.instance}onBuild(e){eG(this.instance),e.findById(this.instance.$id())}};var Uu={InstanceFindOperation:tG};const{InsertOperation:rG}=ho;class nG extends rG{constructor(e,r){super(e,r),this.instance=r.instance}onAdd(e,r){return!r||r.length===0?r=[this.instance]:r[0]=this.instance,super.onAdd(e,r)}}var sG={InstanceInsertOperation:nG};const{UpdateOperation:oG}=ms,{InstanceFindOperation:iG}=Uu,{assertHasId:aG}=uo,{isObject:lG}=ye;class cG extends oG{constructor(e,r){super(e,r),this.instance=r.instance,this.modelOptions.old=r.instance}onAdd(e,r){const n=super.onAdd(e,r);return this.model||(this.model=this.instance),n}onBuild(e){super.onBuild(e),aG(this.instance),e.findById(this.instance.$id())}async onAfter2(e,r){return Array.isArray(r)&&(r=r[0]),r=await super.onAfter2(e,r),this.instance.$set(this.model),lG(r)&&this.instance.$set(r),r}toFindOperation(){return new iG("find",{instance:this.instance})}}var uG={InstanceUpdateOperation:cG};const{DeleteOperation:dG}=oa,{InstanceFindOperation:fG}=Uu,{assertHasId:hG}=uo;class pG extends dG{constructor(e,r){super(e,r),this.instance=r.instance}async onBefore2(e,r){return await this.instance.$beforeDelete(e.context()),await super.onBefore2(e,r),r}onBuild(e){super.onBuild(e),hG(this.instance),e.findById(this.instance.$id())}async onAfter2(e,r){return Array.isArray(r)&&(r=r[0]),await this.instance.$afterDelete(e.context()),super.onAfter2(e,r)}toFindOperation(){return new fG("find",{instance:this.instance})}}var _G={InstanceDeleteOperation:pG};const mG=Ct,{isFunction:xu}=ye;function Xy(){if(arguments.length<2)return Promise.reject(new Error("objection.transaction: provide at least one Model class to bind to the transaction or a knex instance"));let t=Array.from(arguments);if(!Il(t[0])&&xu(t[0].transaction)){let e=t[0];return t=t.slice(1),e.transaction.apply(e,t)}else{let e=t[t.length-1],r=t.slice(0,t.length-1),n;for(n=0;n<r.length;++n)if(!Il(r[n]))return Promise.reject(new Error("objection.transaction: all but the last argument should be Model subclasses"));let s=r[0].knex();for(n=0;n<r.length;++n)if(r[n].knex()!==s)return Promise.reject(new Error("objection.transaction: all Model subclasses must be bound to the same database"));return s.transaction(o=>{let i=new Array(r.length+1);for(let a=0;a<r.length;++a)i[a]=r[a].bindTransaction(o);return i[i.length-1]=o,mG.try(()=>e.apply(o,i))})}}Xy.start=function(t){let e=t;return Il(t)&&(e=t.knex()),!e||!xu(e.transaction)?Promise.reject(new Error("objection.transaction.start: first argument must be a model class or a knex instance")):new Promise((r,n)=>{e.transaction(s=>{r(s)}).catch(s=>{n(s)})})};function Il(t){return xu(t)&&t.isObjectionModelClass}var Zy={transaction:Xy},tl,Kh;function eE(){if(Kh)return tl;Kh=1;const{clone:t}=_p,{bindKnex:e}=vR,{validate:r}=wR,{isMsSql:n}=qt,{visitModels:s}=FR,{hasId:o,getSetId:i}=GR,{map:a}=Ct,{toJson:c,toDatabaseJson:u}=H$,{values:d,propKey:p,hasProps:N}=Ip,{defineNonEnumerableProperty:$}=sn,{parseRelationsIntoModelInstances:g}=Cp,{fetchTableMetadata:R,tableMetadata:y}=dw,{asArray:_,isFunction:v,isString:C,asSingle:D}=ye,{setJson:L,setFast:ne,setRelated:ce,appendRelated:me,setDatabaseJson:q}=$w,{getJsonAttributes:ee,parseJsonAttributes:oe,formatJsonAttributes:ie}=Sw,{columnNameToPropertyName:ae,propertyNameToColumnName:ue}=Mw,{raw:$e}=Vi,{ref:be}=Hi,{fn:Fe}=Bp,{AjvValidator:Ye}=gm,{QueryBuilder:I}=My(),{NotFoundError:b}=Dy,{ValidationError:f}=Lr,{ModifierNotFoundError:w}=PB,{RelationProperty:m}=Mu,{RelationOwner:l}=my,{HasOneRelation:h}=Gy,{HasManyRelation:A}=Fu,{ManyToManyRelation:B}=Bu(),{BelongsToOneRelation:V}=Qy,{HasOneThroughRelation:H}=Yy(),{InstanceFindOperation:re}=Uu,{InstanceInsertOperation:_e}=sG,{InstanceUpdateOperation:Ae}=uG,{InstanceDeleteOperation:We}=_G;class de{get $modelClass(){return this.constructor}$id(S){return i(this,S)}$hasId(){return o(this)}$hasProps(S){return N(this,S)}$query(S){return Xe({instance:this,transaction:S})}$relatedQuery(S,te){return qe({modelClass:this.constructor,relationName:S,transaction:te,alwaysReturnArray:!1}).for(this)}$fetchGraph(S,te){return this.constructor.fetchGraph(this,S,te)}$beforeValidate(S,te,Ne){return S}$validate(S,te){return r(this,S,te)}$afterValidate(S,te){}$parseDatabaseJson(S){const te=this.constructor.getColumnNameMappers();return te&&(S=te.parse(S)),oe(S,this.constructor)}$formatDatabaseJson(S){const te=this.constructor.getColumnNameMappers();return S=ie(S,this.constructor),te&&(S=te.format(S)),S}$parseJson(S,te){return S}$formatJson(S){return S}$setJson(S,te){return L(this,S,te)}$setDatabaseJson(S){return q(this,S)}$set(S){return ne(this,S)}$setRelated(S,te){return ce(this,S,te)}$appendRelated(S,te){return me(this,S,te)}$toJson(S){return c(this,S)}toJSON(S){return this.$toJson(S)}$toDatabaseJson(S){return u(this,S)}$beforeInsert(S){}$afterInsert(S){}$beforeUpdate(S,te){}$afterUpdate(S,te){}$afterFind(S){}$beforeDelete(S){}$afterDelete(S){}$values(S){return d(this,S)}$propKey(S){return p(this,S)}$idKey(){return this.$propKey(this.constructor.getIdPropertyArray())}$clone(S){return t(this,!!(S&&S.shallow),!1)}$traverse(S,te){return te===void 0&&(te=S,S=null),this.constructor.traverse(S,this,te),this}$traverseAsync(S,te){return te===void 0&&(te=S,S=null),this.constructor.traverseAsync(S,this,te)}$omitFromJson(...S){return arguments.length===0?this.$$omitFromJson:(this.hasOwnProperty("$$omitFromJson")||$(this,"$$omitFromJson",[]),this.$$omitFromJson=this.$$omitFromJson.concat(le(S)),this)}$omitFromDatabaseJson(...S){return arguments.length===0?this.$$omitFromDatabaseJson:(this.hasOwnProperty("$$omitFromDatabaseJson")||$(this,"$$omitFromDatabaseJson",[]),this.$$omitFromDatabaseJson=this.$$omitFromDatabaseJson.concat(le(S)),this)}$knex(){return this.constructor.knex()}$transaction(...S){return this.constructor.transaction(...S)}get $ref(){return this.constructor.ref}static get objectionModelClass(){return de}static fromJson(S,te){const Ne=new this;return Ne.$setJson(S||{},te),Ne}static fromDatabaseJson(S){const te=new this;return te.$setDatabaseJson(S||{}),te}static onCreateQuery(S){}static beforeFind(S){}static afterFind(S){}static beforeInsert(S){}static afterInsert(S){}static beforeUpdate(S){}static afterUpdate(S){}static beforeDelete(S){}static afterDelete(S){}static omitImpl(S,te){delete S[te]}static joinTableAlias(S){return`${S}_join`}static createValidator(){return new Ye({onCreateAjv:S=>{},options:{allErrors:!0,validateSchema:!1,ownProperties:!0,v5:!0}})}static modifierNotFound(S,te){throw new this.ModifierNotFoundError(te)}static createNotFoundError(S,te){return new this.NotFoundError({...te,modelClass:this})}static createValidationError(S){return new this.ValidationError({...S,modelClass:this})}static getTableName(){let S=this.tableName;if(v(S)&&(S=this.tableName()),!C(S))throw new Error(`Model ${this.name} must have a static property tableName`);return S}static getIdColumn(){let S=this.idColumn;return v(S)&&(S=this.idColumn()),S}static getValidator(){return je(this,"$$validator",we)}static getJsonSchema(){return je(this,"$$jsonSchema",ct)}static getJsonAttributes(){return je(this,"$$jsonAttributes",ee)}static getColumnNameMappers(){return je(this,"$$columnNameMappers",Qe)}static getConcurrency(S){return this.concurrency===null?S&&n(S)?1:4:v(this.concurrency)?this.concurrency():this.concurrency}static getModifiers(){return this.modifiers||{}}static columnNameToPropertyName(S){let te=je(this,"$$colToProp",()=>new Map),Ne=te.get(S);return Ne||(Ne=ae(this,S),te.set(S,Ne)),Ne}static propertyNameToColumnName(S){let te=je(this,"$$propToCol",()=>new Map),Ne=te.get(S);return Ne||(Ne=ue(this,S),te.set(S,Ne)),Ne}static getReadOnlyAttributes(){return je(this,"$$readOnlyAttributes",Z)}static getIdRelationProperty(){return je(this,"$$idRelationProperty",nt)}static getIdColumnArray(){return this.getIdRelationProperty().cols}static getIdPropertyArray(){return this.getIdRelationProperty().props}static getIdProperty(){const S=this.getIdPropertyArray();return S.length===1?S[0]:S}static getRelationMappings(){return je(this,"$$relationMappings",J)}static getRelations(){const S=Object.create(null);for(const te of this.getRelationNames())S[te]=this.getRelation(te);return S}static getRelationNames(){return je(this,"$$relationNames",P)}static getVirtualAttributes(){return je(this,"$$virtualAttributes",U)}static getDefaultGraphOptions(){return this.defaultGraphOptions}static getRelatedFindQueryMutates(){return this.relatedFindQueryMutates}static getRelatedInsertQueryMutates(){return this.relatedInsertQueryMutates}static query(S){const te=this.QueryBuilder.forClass(this).transacting(S);return this.onCreateQuery(te),te}static relatedQuery(S,te){return qe({modelClass:this,relationName:S,transaction:te,alwaysReturnArray:!0})}static fetchTableMetadata(S){return R(this,S)}static tableMetadata(S){return y(this,S)}static knex(...S){if(S.length)$(this,"$$knex",S[0]);else return this.$$knex}static transaction(S,te){return te||(te=S,S=null),(S||this.knex()).transaction(te)}static startTransaction(S){const{transaction:te}=Zy;return te.start(S||this.knex())}static get raw(){return $e}static get ref(){return(...S)=>be(...S).model(this)}static get fn(){return Fe}static knexQuery(){return this.knex().table(this.getTableName())}static uniqueTag(){return this.name?`${this.getTableName()}_${this.name}`:this.getTableName()}static bindKnex(S){return e(this,S)}static bindTransaction(S){return e(this,S)}static ensureModel(S,te){const Ne=this;return S?S instanceof Ne?g(S,S,te):Ne.fromJson(S,te):null}static ensureModelArray(S,te){if(!S)return[];if(Array.isArray(S)){const Ne=new Array(S.length);for(let Ce=0,Mt=S.length;Ce<Mt;++Ce)Ne[Ce]=this.ensureModel(S[Ce],te);return Ne}else return[this.ensureModel(S,te)]}static getRelationUnsafe(S){const te=this.getRelationMappings()[S];return te?(this.hasOwnProperty("$$relations")||$(this,"$$relations",Object.create(null)),this.$$relations[S]||(this.$$relations[S]=new te.relation(S,this),this.$$relations[S].setMapping(te)),this.$$relations[S]):null}static getRelation(S){const te=this.getRelationUnsafe(S);if(!te)throw new Error(`A model class ${this.name} doesn't have relation ${S}`);return te}static fetchGraph(S,te,Ne={}){return this.query(Ne.transaction).resolve(this.ensureModelArray(S)).findOptions({dontCallFindHooks:!0}).withGraphFetched(te,Ne).runAfter(Ce=>Array.isArray(S)?Ce:Ce[0])}static traverse(...S){const{traverser:te,models:Ne,filterConstructor:Ce}=Q(...S);if(!D(Ne))return;const Mt=D(Ne).constructor;return s(Ne,Mt,(ke,et,st,ze)=>{(!Ce||ke instanceof Ce)&&te(ke,st,ze&&ze.name)}),this}static traverseAsync(...S){const{traverser:te,models:Ne,filterConstructor:Ce}=Q(...S);if(!D(Ne))return Promise.resolve();const Mt=D(Ne).constructor,ke=[];return s(Ne,Mt,(et,st,ze,Nr)=>{if(!Ce||et instanceof Ce){const Fr=te(et,ze,Nr&&Nr.name);ke.push(Fr)}}),a(ke,et=>et,{concurrency:this.getConcurrency(this.knex())})}}Object.defineProperties(de,{isObjectionModelClass:{enumerable:!1,writable:!1,value:!0}}),Object.defineProperties(de.prototype,{$isObjectionModel:{enumerable:!1,writable:!1,value:!0},$objectionModelClass:{enumerable:!1,writable:!1,value:de}}),de.QueryBuilder=I,de.HasOneRelation=h,de.HasManyRelation=A,de.ManyToManyRelation=B,de.BelongsToOneRelation=V,de.HasOneThroughRelation=H,de.JoinEagerAlgorithm="JoinEagerAlgorithm",de.NaiveEagerAlgorithm="NaiveEagerAlgorithm",de.WhereInEagerAlgorithm="WhereInEagerAlgorithm",de.ValidationError=f,de.NotFoundError=b,de.ModifierNotFoundError=w,de.tableName=null,de.jsonSchema=null,de.idColumn="id",de.uidProp="#id",de.uidRefProp="#ref",de.dbRefProp="#dbRef",de.propRefRegex=/#ref{([^\.]+)\.([^}]+)}/g,de.jsonAttributes=null,de.cloneObjectAttributes=!0,de.virtualAttributes=null,de.relationMappings=null,de.modelPaths=[],de.pickJsonSchemaProperties=!1,de.defaultGraphOptions=null,de.defaultFindOptions=Object.freeze({}),de.modifiers=null,de.useLimitInFirst=!1,de.columnNameMappers=null,de.relatedFindQueryMutates=!1,de.relatedInsertQueryMutates=!1,de.concurrency=null;function Xe({instance:x,transaction:S}){return x.constructor.query(S).findOperationFactory(()=>new re("find",{instance:x})).insertOperationFactory(()=>new _e("insert",{instance:x})).updateOperationFactory(()=>new Ae("update",{instance:x})).patchOperationFactory(()=>new Ae("patch",{instance:x,modelOptions:{patch:!0}})).deleteOperationFactory(()=>new We("delete",{instance:x})).relateOperationFactory(()=>{throw new Error("`relate` makes no sense in this context")}).unrelateOperationFactory(()=>{throw new Error("`unrelate` makes no sense in this context")})}function qe({modelClass:x,relationName:S,transaction:te,alwaysReturnArray:Ne}={}){const Ce=x.getRelation(S);return Ce.relatedModelClass.query(te).findOperationFactory(ke=>{const et=!ke.for(),st=et?l.createParentReference(ke,Ce):l.create(ke.for()),ze=Ce.find(ke,st);return ze.assignResultToOwner=x.getRelatedFindQueryMutates(),ze.alwaysReturnArray=Ne,ze.alias=et?Ce.name:null,ze}).insertOperationFactory(ke=>{const et=l.create(ke.for()),st=Ce.insert(ke,et);return st.assignResultToOwner=x.getRelatedInsertQueryMutates(),st}).updateOperationFactory(ke=>{const et=l.create(ke.for());return Ce.update(ke,et)}).patchOperationFactory(ke=>{const et=l.create(ke.for());return Ce.patch(ke,et)}).deleteOperationFactory(ke=>{const et=l.create(ke.for());return Ce.delete(ke,et)}).relateOperationFactory(ke=>{const et=l.create(ke.for());return Ce.relate(ke,et)}).unrelateOperationFactory(ke=>{const et=l.create(ke.for());return Ce.unrelate(ke,et)})}function je(x,S,te){return x.hasOwnProperty(S)||$(x,S,te(x)),x[S]}function we(x){return x.createValidator()}function ct(x){return x.jsonSchema}function Qe(x){return x.columnNameMappers}function nt(x){const S=_(x.getIdColumn());return new m(S.map(te=>`${x.getTableName()}.${te}`),()=>x)}function Z(x){return[...new Set(z(x))]}function z(x){if(x===de||x.prototype==null)return[];const S=Object.getOwnPropertyNames(x.prototype);return[...Z(Object.getPrototypeOf(x)),...S.filter(te=>{const Ne=Object.getOwnPropertyDescriptor(x.prototype,te);return Ne.get&&!Ne.set||Ne.writable===!1||v(Ne.value)})]}function J(x){let S=x.relationMappings;return v(S)&&(S=S.call(x)),S||{}}function P(x){return Object.keys(x.getRelationMappings())}function U(x){return x.virtualAttributes||[]}function Q(x,S,te){if(x=x||null,te===void 0&&(te=S,S=x,x=null),!v(te))throw new Error("traverser must be a function");return{traverser:te,models:S,filterConstructor:x}}function le(x){if(x.length===1){const S=x[0];if(Array.isArray(S))return S;if(S&&typeof S=="object")return Object.entries(S).filter(([,te])=>te).map(([te])=>te)}return x}return tl={Model:de},tl}async function yG(t,e){e||(e=t,t=e[0].knex()),await Promise.all(e.map(r=>r.fetchTableMetadata({knex:t})))}var EG={initialize:yG};const{isObject:gG}=ye;function os(t){const e=new Map;return r=>{let n=e.get(r);return n===void 0&&(n=t(r),e.set(r,n)),n}}function Ri(t,{upperCase:e=!1,underscoreBeforeDigits:r=!1,underscoreBetweenUppercaseLetters:n=!1}={}){if(t.length===0)return t;const s=t.toUpperCase(),o=t.toLowerCase();let i=o[0];for(let a=1,c=t.length;a<c;++a){const u=t[a],d=t[a-1],p=s[a],N=s[a-1],$=o[a],g=o[a-1];if(r&&qh(u)&&!qh(d)){i+="_"+u;continue}u===p&&p!==$?n||!(d===N&&N!==g)?i+="_"+$:i+=$:i+=u}return e?i.toUpperCase():i}function $i(t,{upperCase:e=!1}={}){if(t.length===0)return t;e&&OG(t)&&(t=t.toLowerCase());let r=t[0];for(let n=1,s=t.length;n<s;++n){const o=t[n],i=t[n-1];o!=="_"&&(i==="_"?r+=o.toUpperCase():r+=o)}return r}function OG(t){for(let e=1,r=t.length;e<r;++e){const n=t[e];if(n!=="_"&&n!==n.toUpperCase())return!1}return!0}function qh(t){return t>="0"&&t<="9"}function Wh(t,e){return r=>{if(!r)return r;const n=r.lastIndexOf(e),s=t(r.slice(n+e.length));return r.slice(0,n+e.length)+s}}function Js(t){return e=>{if(!gG(e)||Array.isArray(e))return e;const r=Object.keys(e),n={};for(let s=0,o=r.length;s<o;++s){const i=r[s];n[t(i)]=e[i]}return n}}function vG(t={}){return{parse:Js(os(e=>$i(e,t))),format:Js(os(e=>Ri(e,t)))}}function Gu({parse:t,format:e,idSeparator:r=":"}={}){const n=os(Wh(e,r)),s=os(Wh(t,r)),o=Js(s);return{wrapIdentifier(i,a){return a(n(i))},postProcessResponse(i){if(Array.isArray(i)){const a=new Array(i.length);for(let c=0,u=i.length;c<u;++c)a[c]=o(i[c]);return a}else return o(i)}}}function RG(t={}){return Gu({parse:e=>$i(e,t),format:e=>Ri(e,t)})}function $G(t){const e=Object.keys(t).reduce((r,n)=>(r[t[n]]=n,r),{});return Gu({parse:r=>t[r]||r,format:r=>e[r]||r})}var wG={snakeCase:Ri,camelCase:$i,snakeCaseMappers:vG,knexSnakeCaseMappers:RG,knexIdentifierMappers:Gu,knexIdentifierMapping:$G,camelCaseKeys:Js(os($i)),snakeCaseKeys:Js(os(Ri))};const{flatten:tE}=ye;function rE(){const t=tE(arguments);return t.slice(1).reduce((r,n)=>n(r),t[0])}function NG(){const t=tE(arguments);return function(e){return rE(e,t)}}var bG={compose:NG,mixin:rE};const{asArray:AG,isObject:TG}=ye,{buildArg:IG}=jp;class nE{constructor(e){this._value=e,this._cast=null,this._toJson=TG(e),this._toArray=!1,this._alias=null}get cast(){return this._cast}castText(){return this.castTo("text")}castInt(){return this.castTo("integer")}castBigInt(){return this.castTo("bigint")}castFloat(){return this.castTo("float")}castDecimal(){return this.castTo("decimal")}castReal(){return this.castTo("real")}castBool(){return this.castTo("boolean")}castJson(){return this._toArray=!1,this._toJson=!0,this._cast="jsonb",this}castTo(e){return this._cast=e,this}asArray(){return this._toJson=!1,this._toArray=!0,this}as(e){return this._alias=e,this}toKnexRaw(e){return e.knex().raw(...this._createRawArgs(e))}_createRawArgs(e){let r=null,n=[];if(this._toJson)n.push(JSON.stringify(this._value)),r="?";else if(this._toArray){const s=AG(this._value);n.push(...s.map(o=>IG(o,e))),r=`ARRAY[${s.map(()=>"?").join(", ")}]`}else n.push(this._value),r="?";return this._cast&&(r=`CAST(${r} AS ${this._cast})`),this._alias&&(n.push(this._alias),r=`${r} as ??`),[r,n]}}function SG(t){return new nE(t)}var PG={ValueBuilder:nE,val:SG};function CG(t,e){return t.prototype=Object.create(e.prototype),t.prototype.constructor=e,Object.setPrototypeOf(t,e),t}var MG={inherit:CG};const{DBError:DG,UniqueViolationError:jG,NotNullViolationError:LG,ForeignKeyViolationError:FG,ConstraintViolationError:kG,CheckViolationError:BG,DataError:UG}=up,{Model:xG}=eE(),{QueryBuilder:sE}=My(),{QueryBuilderBase:GG}=Qm,{QueryBuilderOperation:VG}=ht,{RelationExpression:HG}=on,{ValidationError:KG}=Lr,{NotFoundError:qG}=Dy,{AjvValidator:oE}=gm,{Validator:iE}=ym,{Relation:WG}=fa,{HasOneRelation:JG}=Gy,{HasManyRelation:zG}=Fu,{BelongsToOneRelation:QG}=Qy,{HasOneThroughRelation:YG}=Yy(),{ManyToManyRelation:XG}=Bu(),{transaction:ZG}=Zy,{initialize:eV}=EG,{snakeCaseMappers:tV,knexSnakeCaseMappers:rV,knexIdentifierMapping:nV}=wG,{compose:sV,mixin:oV}=bG,{ref:iV}=Hi,{val:aV}=PG,{raw:lV}=Vi,{fn:cV}=Bp,{inherit:pa}=MG;function Vu(){}function Hu(...t){sE.init(this,...t)}function aE(...t){iE.init(this,...t)}function lE(...t){oE.init(this,...t)}pa(Vu,xG);pa(Hu,sE);pa(aE,iE);pa(lE,oE);Vu.QueryBuilder=Hu;var Jh={Model:Vu,QueryBuilder:Hu,QueryBuilderBase:GG,QueryBuilderOperation:VG,RelationExpression:HG,ValidationError:KG,NotFoundError:qG,AjvValidator:lE,Validator:aE,Relation:WG,HasOneRelation:JG,HasManyRelation:zG,BelongsToOneRelation:QG,HasOneThroughRelation:YG,ManyToManyRelation:XG,transaction:ZG,initialize:eV,compose:sV,mixin:oV,ref:iV,val:aV,raw:lV,fn:cV,snakeCaseMappers:tV,knexSnakeCaseMappers:rV,knexIdentifierMapping:nV,DBError:DG,UniqueViolationError:jG,NotNullViolationError:LG,ForeignKeyViolationError:FG,ConstraintViolationError:kG,CheckViolationError:BG,DataError:UG};class cE extends Jh.Model{static get jsonSchema(){return{type:"object",required:["name","email"],properties:{id:{type:"integer"},name:{type:"string",minLength:1,maxLength:255},email:{type:"string",minLength:1,maxLength:255}}}}static get relationMappings(){return{}}static get database(){const e=require("knex")({client:"sqlite3",useNullAsDefault:!0,connection:{filename:Fy.resolve(__dirname,"../database.sqlite")}});return Jh.Model.knex(e),e}}Ad(cE,"tableName","users");var uV=function(){function t(e,r){r===void 0&&(r=[]),this._eventType=e,this._eventFunctions=r}return t.prototype.init=function(){var e=this;this._eventFunctions.forEach(function(r){typeof window<"u"&&window.addEventListener(e._eventType,r)})},t}(),dV=function(){function t(){this._instances={Accordion:{},Carousel:{},Collapse:{},Dial:{},Dismiss:{},Drawer:{},Dropdown:{},Modal:{},Popover:{},Tabs:{},Tooltip:{},InputCounter:{},CopyClipboard:{}}}return t.prototype.addInstance=function(e,r,n,s){if(s===void 0&&(s=!1),!this._instances[e])return console.warn("Flowbite: Component ".concat(e," does not exist.")),!1;if(this._instances[e][n]&&!s){console.warn("Flowbite: Instance with ID ".concat(n," already exists."));return}s&&this._instances[e][n]&&this._instances[e][n].destroyAndRemoveInstance(),this._instances[e][n||this._generateRandomId()]=r},t.prototype.getAllInstances=function(){return this._instances},t.prototype.getInstances=function(e){return this._instances[e]?this._instances[e]:(console.warn("Flowbite: Component ".concat(e," does not exist.")),!1)},t.prototype.getInstance=function(e,r){if(this._componentAndInstanceCheck(e,r)){if(!this._instances[e][r]){console.warn("Flowbite: Instance with ID ".concat(r," does not exist."));return}return this._instances[e][r]}},t.prototype.destroyAndRemoveInstance=function(e,r){this._componentAndInstanceCheck(e,r)&&(this.destroyInstanceObject(e,r),this.removeInstance(e,r))},t.prototype.removeInstance=function(e,r){this._componentAndInstanceCheck(e,r)&&delete this._instances[e][r]},t.prototype.destroyInstanceObject=function(e,r){this._componentAndInstanceCheck(e,r)&&this._instances[e][r].destroy()},t.prototype.instanceExists=function(e,r){return!(!this._instances[e]||!this._instances[e][r])},t.prototype._generateRandomId=function(){return Math.random().toString(36).substr(2,9)},t.prototype._componentAndInstanceCheck=function(e,r){return this._instances[e]?this._instances[e][r]?!0:(console.warn("Flowbite: Instance with ID ".concat(r," does not exist.")),!1):(console.warn("Flowbite: Component ".concat(e," does not exist.")),!1)},t}(),Ge=new dV;typeof window<"u"&&(window.FlowbiteInstances=Ge);var wi=function(){return wi=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},wi.apply(this,arguments)},Ni={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},fV={id:null,override:!0},uE=function(){function t(e,r,n,s){e===void 0&&(e=null),r===void 0&&(r=[]),n===void 0&&(n=Ni),s===void 0&&(s=fV),this._instanceId=s.id?s.id:e.id,this._accordionEl=e,this._items=r,this._options=wi(wi({},Ni),n),this._initialized=!1,this.init(),Ge.addInstance("Accordion",this,this._instanceId,s.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._items.forEach(function(r){r.active&&e.open(r.id);var n=function(){e.toggle(r.id)};r.triggerEl.addEventListener("click",n),r.clickHandler=n}),this._initialized=!0)},t.prototype.destroy=function(){this._items.length&&this._initialized&&(this._items.forEach(function(e){e.triggerEl.removeEventListener("click",e.clickHandler),delete e.clickHandler}),this._initialized=!1)},t.prototype.removeInstance=function(){Ge.removeInstance("Accordion",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getItem=function(e){return this._items.filter(function(r){return r.id===e})[0]},t.prototype.open=function(e){var r,n,s=this,o=this.getItem(e);this._options.alwaysOpen||this._items.map(function(i){var a,c;i!==o&&((a=i.triggerEl.classList).remove.apply(a,s._options.activeClasses.split(" ")),(c=i.triggerEl.classList).add.apply(c,s._options.inactiveClasses.split(" ")),i.targetEl.classList.add("hidden"),i.triggerEl.setAttribute("aria-expanded","false"),i.active=!1,i.iconEl&&i.iconEl.classList.add("rotate-180"))}),(r=o.triggerEl.classList).add.apply(r,this._options.activeClasses.split(" ")),(n=o.triggerEl.classList).remove.apply(n,this._options.inactiveClasses.split(" ")),o.triggerEl.setAttribute("aria-expanded","true"),o.targetEl.classList.remove("hidden"),o.active=!0,o.iconEl&&o.iconEl.classList.remove("rotate-180"),this._options.onOpen(this,o)},t.prototype.toggle=function(e){var r=this.getItem(e);r.active?this.close(e):this.open(e),this._options.onToggle(this,r)},t.prototype.close=function(e){var r,n,s=this.getItem(e);(r=s.triggerEl.classList).remove.apply(r,this._options.activeClasses.split(" ")),(n=s.triggerEl.classList).add.apply(n,this._options.inactiveClasses.split(" ")),s.targetEl.classList.add("hidden"),s.triggerEl.setAttribute("aria-expanded","false"),s.active=!1,s.iconEl&&s.iconEl.classList.add("rotate-180"),this._options.onClose(this,s)},t.prototype.updateOnOpen=function(e){this._options.onOpen=e},t.prototype.updateOnClose=function(e){this._options.onClose=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function Ku(){document.querySelectorAll("[data-accordion]").forEach(function(t){var e=t.getAttribute("data-accordion"),r=t.getAttribute("data-active-classes"),n=t.getAttribute("data-inactive-classes"),s=[];t.querySelectorAll("[data-accordion-target]").forEach(function(o){if(o.closest("[data-accordion]")===t){var i={id:o.getAttribute("data-accordion-target"),triggerEl:o,targetEl:document.querySelector(o.getAttribute("data-accordion-target")),iconEl:o.querySelector("[data-accordion-icon]"),active:o.getAttribute("aria-expanded")==="true"};s.push(i)}}),new uE(t,s,{alwaysOpen:e==="open",activeClasses:r||Ni.activeClasses,inactiveClasses:n||Ni.inactiveClasses})})}typeof window<"u"&&(window.Accordion=uE,window.initAccordions=Ku);var bi=function(){return bi=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},bi.apply(this,arguments)},zh={onCollapse:function(){},onExpand:function(){},onToggle:function(){}},hV={id:null,override:!0},Sl=function(){function t(e,r,n,s){e===void 0&&(e=null),r===void 0&&(r=null),n===void 0&&(n=zh),s===void 0&&(s=hV),this._instanceId=s.id?s.id:e.id,this._targetEl=e,this._triggerEl=r,this._options=bi(bi({},zh),n),this._visible=!1,this._initialized=!1,this.init(),Ge.addInstance("Collapse",this,this._instanceId,s.override)}return t.prototype.init=function(){var e=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._clickHandler=function(){e.toggle()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){Ge.removeInstance("Collapse",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.collapse=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)},t.prototype.expand=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)},t.prototype.toggle=function(){this._visible?this.collapse():this.expand(),this._options.onToggle(this)},t.prototype.updateOnCollapse=function(e){this._options.onCollapse=e},t.prototype.updateOnExpand=function(e){this._options.onExpand=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function qu(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(t){var e=t.getAttribute("data-collapse-toggle"),r=document.getElementById(e);r?Ge.instanceExists("Collapse",r.getAttribute("id"))?new Sl(r,t,{},{id:r.getAttribute("id")+"_"+Ge._generateRandomId()}):new Sl(r,t):console.error('The target element with id "'.concat(e,'" does not exist. Please check the data-collapse-toggle attribute.'))})}typeof window<"u"&&(window.Collapse=Sl,window.initCollapses=qu);var Rn=function(){return Rn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Rn.apply(this,arguments)},si={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},pV={id:null,override:!0},dE=function(){function t(e,r,n,s){e===void 0&&(e=null),r===void 0&&(r=[]),n===void 0&&(n=si),s===void 0&&(s=pV),this._instanceId=s.id?s.id:e.id,this._carouselEl=e,this._items=r,this._options=Rn(Rn(Rn({},si),n),{indicators:Rn(Rn({},si.indicators),n.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._intervalDuration=this._options.interval,this._intervalInstance=null,this._initialized=!1,this.init(),Ge.addInstance("Carousel",this,this._instanceId,s.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._items.map(function(r){r.el.classList.add("absolute","inset-0","transition-transform","transform")}),this.getActiveItem()?this.slideTo(this.getActiveItem().position):this.slideTo(0),this._indicators.map(function(r,n){r.el.addEventListener("click",function(){e.slideTo(n)})}),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},t.prototype.removeInstance=function(){Ge.removeInstance("Carousel",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getItem=function(e){return this._items[e]},t.prototype.slideTo=function(e){var r=this._items[e],n={left:r.position===0?this._items[this._items.length-1]:this._items[r.position-1],middle:r,right:r.position===this._items.length-1?this._items[0]:this._items[r.position+1]};this._rotate(n),this._setActiveItem(r),this._intervalInstance&&(this.pause(),this.cycle()),this._options.onChange(this)},t.prototype.next=function(){var e=this.getActiveItem(),r=null;e.position===this._items.length-1?r=this._items[0]:r=this._items[e.position+1],this.slideTo(r.position),this._options.onNext(this)},t.prototype.prev=function(){var e=this.getActiveItem(),r=null;e.position===0?r=this._items[this._items.length-1]:r=this._items[e.position-1],this.slideTo(r.position),this._options.onPrev(this)},t.prototype._rotate=function(e){if(this._items.map(function(r){r.el.classList.add("hidden")}),this._items.length===1){e.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),e.middle.el.classList.add("translate-x-0","z-20");return}e.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),e.left.el.classList.add("-translate-x-full","z-10"),e.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),e.middle.el.classList.add("translate-x-0","z-30"),e.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-30"),e.right.el.classList.add("translate-x-full","z-20")},t.prototype.cycle=function(){var e=this;typeof window<"u"&&(this._intervalInstance=window.setInterval(function(){e.next()},this._intervalDuration))},t.prototype.pause=function(){clearInterval(this._intervalInstance)},t.prototype.getActiveItem=function(){return this._activeItem},t.prototype._setActiveItem=function(e){var r,n,s=this;this._activeItem=e;var o=e.position;this._indicators.length&&(this._indicators.map(function(i){var a,c;i.el.setAttribute("aria-current","false"),(a=i.el.classList).remove.apply(a,s._options.indicators.activeClasses.split(" ")),(c=i.el.classList).add.apply(c,s._options.indicators.inactiveClasses.split(" "))}),(r=this._indicators[o].el.classList).add.apply(r,this._options.indicators.activeClasses.split(" ")),(n=this._indicators[o].el.classList).remove.apply(n,this._options.indicators.inactiveClasses.split(" ")),this._indicators[o].el.setAttribute("aria-current","true"))},t.prototype.updateOnNext=function(e){this._options.onNext=e},t.prototype.updateOnPrev=function(e){this._options.onPrev=e},t.prototype.updateOnChange=function(e){this._options.onChange=e},t}();function Wu(){document.querySelectorAll("[data-carousel]").forEach(function(t){var e=t.getAttribute("data-carousel-interval"),r=t.getAttribute("data-carousel")==="slide",n=[],s=0;t.querySelectorAll("[data-carousel-item]").length&&Array.from(t.querySelectorAll("[data-carousel-item]")).map(function(u,d){n.push({position:d,el:u}),u.getAttribute("data-carousel-item")==="active"&&(s=d)});var o=[];t.querySelectorAll("[data-carousel-slide-to]").length&&Array.from(t.querySelectorAll("[data-carousel-slide-to]")).map(function(u){o.push({position:parseInt(u.getAttribute("data-carousel-slide-to")),el:u})});var i=new dE(t,n,{defaultPosition:s,indicators:{items:o},interval:e||si.interval});r&&i.cycle();var a=t.querySelector("[data-carousel-next]"),c=t.querySelector("[data-carousel-prev]");a&&a.addEventListener("click",function(){i.next()}),c&&c.addEventListener("click",function(){i.prev()})})}typeof window<"u"&&(window.Carousel=dE,window.initCarousels=Wu);var Ai=function(){return Ai=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Ai.apply(this,arguments)},Qh={transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},_V={id:null,override:!0},fE=function(){function t(e,r,n,s){e===void 0&&(e=null),r===void 0&&(r=null),n===void 0&&(n=Qh),s===void 0&&(s=_V),this._instanceId=s.id?s.id:e.id,this._targetEl=e,this._triggerEl=r,this._options=Ai(Ai({},Qh),n),this._initialized=!1,this.init(),Ge.addInstance("Dismiss",this,this._instanceId,s.override)}return t.prototype.init=function(){var e=this;this._triggerEl&&this._targetEl&&!this._initialized&&(this._clickHandler=function(){e.hide()},this._triggerEl.addEventListener("click",this._clickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._initialized&&(this._triggerEl.removeEventListener("click",this._clickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){Ge.removeInstance("Dismiss",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){var e=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){e._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)},t.prototype.updateOnHide=function(e){this._options.onHide=e},t}();function Ju(){document.querySelectorAll("[data-dismiss-target]").forEach(function(t){var e=t.getAttribute("data-dismiss-target"),r=document.querySelector(e);r?new fE(r,t):console.error('The dismiss element with id "'.concat(e,'" does not exist. Please check the data-dismiss-target attribute.'))})}typeof window<"u"&&(window.Dismiss=fE,window.initDismisses=Ju);var Ut="top",er="bottom",tr="right",xt="left",zu="auto",yo=[Ut,er,tr,xt],is="start",zs="end",mV="clippingParents",hE="viewport",ws="popper",yV="reference",Yh=yo.reduce(function(t,e){return t.concat([e+"-"+is,e+"-"+zs])},[]),pE=[].concat(yo,[zu]).reduce(function(t,e){return t.concat([e,e+"-"+is,e+"-"+zs])},[]),EV="beforeRead",gV="read",OV="afterRead",vV="beforeMain",RV="main",$V="afterMain",wV="beforeWrite",NV="write",bV="afterWrite",AV=[EV,gV,OV,vV,RV,$V,wV,NV,bV];function Rr(t){return t?(t.nodeName||"").toLowerCase():null}function Kt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Sn(t){var e=Kt(t).Element;return t instanceof e||t instanceof Element}function Zt(t){var e=Kt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Qu(t){if(typeof ShadowRoot>"u")return!1;var e=Kt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function TV(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},s=e.attributes[r]||{},o=e.elements[r];!Zt(o)||!Rr(o)||(Object.assign(o.style,n),Object.keys(s).forEach(function(i){var a=s[i];a===!1?o.removeAttribute(i):o.setAttribute(i,a===!0?"":a)}))})}function IV(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var s=e.elements[n],o=e.attributes[n]||{},i=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),a=i.reduce(function(c,u){return c[u]="",c},{});!Zt(s)||!Rr(s)||(Object.assign(s.style,a),Object.keys(o).forEach(function(c){s.removeAttribute(c)}))})}}const SV={name:"applyStyles",enabled:!0,phase:"write",fn:TV,effect:IV,requires:["computeStyles"]};function vr(t){return t.split("-")[0]}var wn=Math.max,Ti=Math.min,as=Math.round;function Pl(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function _E(){return!/^((?!chrome|android).)*safari/i.test(Pl())}function ls(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),s=1,o=1;e&&Zt(t)&&(s=t.offsetWidth>0&&as(n.width)/t.offsetWidth||1,o=t.offsetHeight>0&&as(n.height)/t.offsetHeight||1);var i=Sn(t)?Kt(t):window,a=i.visualViewport,c=!_E()&&r,u=(n.left+(c&&a?a.offsetLeft:0))/s,d=(n.top+(c&&a?a.offsetTop:0))/o,p=n.width/s,N=n.height/o;return{width:p,height:N,top:d,right:u+p,bottom:d+N,left:u,x:u,y:d}}function Yu(t){var e=ls(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function mE(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&Qu(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function jr(t){return Kt(t).getComputedStyle(t)}function PV(t){return["table","td","th"].indexOf(Rr(t))>=0}function an(t){return((Sn(t)?t.ownerDocument:t.document)||window.document).documentElement}function _a(t){return Rr(t)==="html"?t:t.assignedSlot||t.parentNode||(Qu(t)?t.host:null)||an(t)}function Xh(t){return!Zt(t)||jr(t).position==="fixed"?null:t.offsetParent}function CV(t){var e=/firefox/i.test(Pl()),r=/Trident/i.test(Pl());if(r&&Zt(t)){var n=jr(t);if(n.position==="fixed")return null}var s=_a(t);for(Qu(s)&&(s=s.host);Zt(s)&&["html","body"].indexOf(Rr(s))<0;){var o=jr(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function Eo(t){for(var e=Kt(t),r=Xh(t);r&&PV(r)&&jr(r).position==="static";)r=Xh(r);return r&&(Rr(r)==="html"||Rr(r)==="body"&&jr(r).position==="static")?e:r||CV(t)||e}function Xu(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Bs(t,e,r){return wn(t,Ti(e,r))}function MV(t,e,r){var n=Bs(t,e,r);return n>r?r:n}function yE(){return{top:0,right:0,bottom:0,left:0}}function EE(t){return Object.assign({},yE(),t)}function gE(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var DV=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,EE(typeof e!="number"?e:gE(e,yo))};function jV(t){var e,r=t.state,n=t.name,s=t.options,o=r.elements.arrow,i=r.modifiersData.popperOffsets,a=vr(r.placement),c=Xu(a),u=[xt,tr].indexOf(a)>=0,d=u?"height":"width";if(!(!o||!i)){var p=DV(s.padding,r),N=Yu(o),$=c==="y"?Ut:xt,g=c==="y"?er:tr,R=r.rects.reference[d]+r.rects.reference[c]-i[c]-r.rects.popper[d],y=i[c]-r.rects.reference[c],_=Eo(o),v=_?c==="y"?_.clientHeight||0:_.clientWidth||0:0,C=R/2-y/2,D=p[$],L=v-N[d]-p[g],ne=v/2-N[d]/2+C,ce=Bs(D,ne,L),me=c;r.modifiersData[n]=(e={},e[me]=ce,e.centerOffset=ce-ne,e)}}function LV(t){var e=t.state,r=t.options,n=r.element,s=n===void 0?"[data-popper-arrow]":n;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||mE(e.elements.popper,s)&&(e.elements.arrow=s))}const FV={name:"arrow",enabled:!0,phase:"main",fn:jV,effect:LV,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function cs(t){return t.split("-")[1]}var kV={top:"auto",right:"auto",bottom:"auto",left:"auto"};function BV(t,e){var r=t.x,n=t.y,s=e.devicePixelRatio||1;return{x:as(r*s)/s||0,y:as(n*s)/s||0}}function Zh(t){var e,r=t.popper,n=t.popperRect,s=t.placement,o=t.variation,i=t.offsets,a=t.position,c=t.gpuAcceleration,u=t.adaptive,d=t.roundOffsets,p=t.isFixed,N=i.x,$=N===void 0?0:N,g=i.y,R=g===void 0?0:g,y=typeof d=="function"?d({x:$,y:R}):{x:$,y:R};$=y.x,R=y.y;var _=i.hasOwnProperty("x"),v=i.hasOwnProperty("y"),C=xt,D=Ut,L=window;if(u){var ne=Eo(r),ce="clientHeight",me="clientWidth";if(ne===Kt(r)&&(ne=an(r),jr(ne).position!=="static"&&a==="absolute"&&(ce="scrollHeight",me="scrollWidth")),ne=ne,s===Ut||(s===xt||s===tr)&&o===zs){D=er;var q=p&&ne===L&&L.visualViewport?L.visualViewport.height:ne[ce];R-=q-n.height,R*=c?1:-1}if(s===xt||(s===Ut||s===er)&&o===zs){C=tr;var ee=p&&ne===L&&L.visualViewport?L.visualViewport.width:ne[me];$-=ee-n.width,$*=c?1:-1}}var oe=Object.assign({position:a},u&&kV),ie=d===!0?BV({x:$,y:R},Kt(r)):{x:$,y:R};if($=ie.x,R=ie.y,c){var ae;return Object.assign({},oe,(ae={},ae[D]=v?"0":"",ae[C]=_?"0":"",ae.transform=(L.devicePixelRatio||1)<=1?"translate("+$+"px, "+R+"px)":"translate3d("+$+"px, "+R+"px, 0)",ae))}return Object.assign({},oe,(e={},e[D]=v?R+"px":"",e[C]=_?$+"px":"",e.transform="",e))}function UV(t){var e=t.state,r=t.options,n=r.gpuAcceleration,s=n===void 0?!0:n,o=r.adaptive,i=o===void 0?!0:o,a=r.roundOffsets,c=a===void 0?!0:a,u={placement:vr(e.placement),variation:cs(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Zh(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Zh(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const xV={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:UV,data:{}};var Ko={passive:!0};function GV(t){var e=t.state,r=t.instance,n=t.options,s=n.scroll,o=s===void 0?!0:s,i=n.resize,a=i===void 0?!0:i,c=Kt(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(d){d.addEventListener("scroll",r.update,Ko)}),a&&c.addEventListener("resize",r.update,Ko),function(){o&&u.forEach(function(d){d.removeEventListener("scroll",r.update,Ko)}),a&&c.removeEventListener("resize",r.update,Ko)}}const VV={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:GV,data:{}};var HV={left:"right",right:"left",bottom:"top",top:"bottom"};function oi(t){return t.replace(/left|right|bottom|top/g,function(e){return HV[e]})}var KV={start:"end",end:"start"};function ep(t){return t.replace(/start|end/g,function(e){return KV[e]})}function Zu(t){var e=Kt(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function ed(t){return ls(an(t)).left+Zu(t).scrollLeft}function qV(t,e){var r=Kt(t),n=an(t),s=r.visualViewport,o=n.clientWidth,i=n.clientHeight,a=0,c=0;if(s){o=s.width,i=s.height;var u=_E();(u||!u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:o,height:i,x:a+ed(t),y:c}}function WV(t){var e,r=an(t),n=Zu(t),s=(e=t.ownerDocument)==null?void 0:e.body,o=wn(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),i=wn(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+ed(t),c=-n.scrollTop;return jr(s||r).direction==="rtl"&&(a+=wn(r.clientWidth,s?s.clientWidth:0)-o),{width:o,height:i,x:a,y:c}}function td(t){var e=jr(t),r=e.overflow,n=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+n)}function OE(t){return["html","body","#document"].indexOf(Rr(t))>=0?t.ownerDocument.body:Zt(t)&&td(t)?t:OE(_a(t))}function Us(t,e){var r;e===void 0&&(e=[]);var n=OE(t),s=n===((r=t.ownerDocument)==null?void 0:r.body),o=Kt(n),i=s?[o].concat(o.visualViewport||[],td(n)?n:[]):n,a=e.concat(i);return s?a:a.concat(Us(_a(i)))}function Cl(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function JV(t,e){var r=ls(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function tp(t,e,r){return e===hE?Cl(qV(t,r)):Sn(e)?JV(e,r):Cl(WV(an(t)))}function zV(t){var e=Us(_a(t)),r=["absolute","fixed"].indexOf(jr(t).position)>=0,n=r&&Zt(t)?Eo(t):t;return Sn(n)?e.filter(function(s){return Sn(s)&&mE(s,n)&&Rr(s)!=="body"}):[]}function QV(t,e,r,n){var s=e==="clippingParents"?zV(t):[].concat(e),o=[].concat(s,[r]),i=o[0],a=o.reduce(function(c,u){var d=tp(t,u,n);return c.top=wn(d.top,c.top),c.right=Ti(d.right,c.right),c.bottom=Ti(d.bottom,c.bottom),c.left=wn(d.left,c.left),c},tp(t,i,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function vE(t){var e=t.reference,r=t.element,n=t.placement,s=n?vr(n):null,o=n?cs(n):null,i=e.x+e.width/2-r.width/2,a=e.y+e.height/2-r.height/2,c;switch(s){case Ut:c={x:i,y:e.y-r.height};break;case er:c={x:i,y:e.y+e.height};break;case tr:c={x:e.x+e.width,y:a};break;case xt:c={x:e.x-r.width,y:a};break;default:c={x:e.x,y:e.y}}var u=s?Xu(s):null;if(u!=null){var d=u==="y"?"height":"width";switch(o){case is:c[u]=c[u]-(e[d]/2-r[d]/2);break;case zs:c[u]=c[u]+(e[d]/2-r[d]/2);break}}return c}function Qs(t,e){e===void 0&&(e={});var r=e,n=r.placement,s=n===void 0?t.placement:n,o=r.strategy,i=o===void 0?t.strategy:o,a=r.boundary,c=a===void 0?mV:a,u=r.rootBoundary,d=u===void 0?hE:u,p=r.elementContext,N=p===void 0?ws:p,$=r.altBoundary,g=$===void 0?!1:$,R=r.padding,y=R===void 0?0:R,_=EE(typeof y!="number"?y:gE(y,yo)),v=N===ws?yV:ws,C=t.rects.popper,D=t.elements[g?v:N],L=QV(Sn(D)?D:D.contextElement||an(t.elements.popper),c,d,i),ne=ls(t.elements.reference),ce=vE({reference:ne,element:C,strategy:"absolute",placement:s}),me=Cl(Object.assign({},C,ce)),q=N===ws?me:ne,ee={top:L.top-q.top+_.top,bottom:q.bottom-L.bottom+_.bottom,left:L.left-q.left+_.left,right:q.right-L.right+_.right},oe=t.modifiersData.offset;if(N===ws&&oe){var ie=oe[s];Object.keys(ee).forEach(function(ae){var ue=[tr,er].indexOf(ae)>=0?1:-1,$e=[Ut,er].indexOf(ae)>=0?"y":"x";ee[ae]+=ie[$e]*ue})}return ee}function YV(t,e){e===void 0&&(e={});var r=e,n=r.placement,s=r.boundary,o=r.rootBoundary,i=r.padding,a=r.flipVariations,c=r.allowedAutoPlacements,u=c===void 0?pE:c,d=cs(n),p=d?a?Yh:Yh.filter(function(g){return cs(g)===d}):yo,N=p.filter(function(g){return u.indexOf(g)>=0});N.length===0&&(N=p);var $=N.reduce(function(g,R){return g[R]=Qs(t,{placement:R,boundary:s,rootBoundary:o,padding:i})[vr(R)],g},{});return Object.keys($).sort(function(g,R){return $[g]-$[R]})}function XV(t){if(vr(t)===zu)return[];var e=oi(t);return[ep(t),e,ep(e)]}function ZV(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var s=r.mainAxis,o=s===void 0?!0:s,i=r.altAxis,a=i===void 0?!0:i,c=r.fallbackPlacements,u=r.padding,d=r.boundary,p=r.rootBoundary,N=r.altBoundary,$=r.flipVariations,g=$===void 0?!0:$,R=r.allowedAutoPlacements,y=e.options.placement,_=vr(y),v=_===y,C=c||(v||!g?[oi(y)]:XV(y)),D=[y].concat(C).reduce(function(l,h){return l.concat(vr(h)===zu?YV(e,{placement:h,boundary:d,rootBoundary:p,padding:u,flipVariations:g,allowedAutoPlacements:R}):h)},[]),L=e.rects.reference,ne=e.rects.popper,ce=new Map,me=!0,q=D[0],ee=0;ee<D.length;ee++){var oe=D[ee],ie=vr(oe),ae=cs(oe)===is,ue=[Ut,er].indexOf(ie)>=0,$e=ue?"width":"height",be=Qs(e,{placement:oe,boundary:d,rootBoundary:p,altBoundary:N,padding:u}),Fe=ue?ae?tr:xt:ae?er:Ut;L[$e]>ne[$e]&&(Fe=oi(Fe));var Ye=oi(Fe),I=[];if(o&&I.push(be[ie]<=0),a&&I.push(be[Fe]<=0,be[Ye]<=0),I.every(function(l){return l})){q=oe,me=!1;break}ce.set(oe,I)}if(me)for(var b=g?3:1,f=function(h){var A=D.find(function(B){var V=ce.get(B);if(V)return V.slice(0,h).every(function(H){return H})});if(A)return q=A,"break"},w=b;w>0;w--){var m=f(w);if(m==="break")break}e.placement!==q&&(e.modifiersData[n]._skip=!0,e.placement=q,e.reset=!0)}}const e2={name:"flip",enabled:!0,phase:"main",fn:ZV,requiresIfExists:["offset"],data:{_skip:!1}};function rp(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function np(t){return[Ut,tr,er,xt].some(function(e){return t[e]>=0})}function t2(t){var e=t.state,r=t.name,n=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,i=Qs(e,{elementContext:"reference"}),a=Qs(e,{altBoundary:!0}),c=rp(i,n),u=rp(a,s,o),d=np(c),p=np(u);e.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":p})}const r2={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:t2};function n2(t,e,r){var n=vr(t),s=[xt,Ut].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,i=o[0],a=o[1];return i=i||0,a=(a||0)*s,[xt,tr].indexOf(n)>=0?{x:a,y:i}:{x:i,y:a}}function s2(t){var e=t.state,r=t.options,n=t.name,s=r.offset,o=s===void 0?[0,0]:s,i=pE.reduce(function(d,p){return d[p]=n2(p,e.rects,o),d},{}),a=i[e.placement],c=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=i}const o2={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:s2};function i2(t){var e=t.state,r=t.name;e.modifiersData[r]=vE({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const a2={name:"popperOffsets",enabled:!0,phase:"read",fn:i2,data:{}};function l2(t){return t==="x"?"y":"x"}function c2(t){var e=t.state,r=t.options,n=t.name,s=r.mainAxis,o=s===void 0?!0:s,i=r.altAxis,a=i===void 0?!1:i,c=r.boundary,u=r.rootBoundary,d=r.altBoundary,p=r.padding,N=r.tether,$=N===void 0?!0:N,g=r.tetherOffset,R=g===void 0?0:g,y=Qs(e,{boundary:c,rootBoundary:u,padding:p,altBoundary:d}),_=vr(e.placement),v=cs(e.placement),C=!v,D=Xu(_),L=l2(D),ne=e.modifiersData.popperOffsets,ce=e.rects.reference,me=e.rects.popper,q=typeof R=="function"?R(Object.assign({},e.rects,{placement:e.placement})):R,ee=typeof q=="number"?{mainAxis:q,altAxis:q}:Object.assign({mainAxis:0,altAxis:0},q),oe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ie={x:0,y:0};if(ne){if(o){var ae,ue=D==="y"?Ut:xt,$e=D==="y"?er:tr,be=D==="y"?"height":"width",Fe=ne[D],Ye=Fe+y[ue],I=Fe-y[$e],b=$?-me[be]/2:0,f=v===is?ce[be]:me[be],w=v===is?-me[be]:-ce[be],m=e.elements.arrow,l=$&&m?Yu(m):{width:0,height:0},h=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:yE(),A=h[ue],B=h[$e],V=Bs(0,ce[be],l[be]),H=C?ce[be]/2-b-V-A-ee.mainAxis:f-V-A-ee.mainAxis,re=C?-ce[be]/2+b+V+B+ee.mainAxis:w+V+B+ee.mainAxis,_e=e.elements.arrow&&Eo(e.elements.arrow),Ae=_e?D==="y"?_e.clientTop||0:_e.clientLeft||0:0,We=(ae=oe==null?void 0:oe[D])!=null?ae:0,de=Fe+H-We-Ae,Xe=Fe+re-We,qe=Bs($?Ti(Ye,de):Ye,Fe,$?wn(I,Xe):I);ne[D]=qe,ie[D]=qe-Fe}if(a){var je,we=D==="x"?Ut:xt,ct=D==="x"?er:tr,Qe=ne[L],nt=L==="y"?"height":"width",Z=Qe+y[we],z=Qe-y[ct],J=[Ut,xt].indexOf(_)!==-1,P=(je=oe==null?void 0:oe[L])!=null?je:0,U=J?Z:Qe-ce[nt]-me[nt]-P+ee.altAxis,Q=J?Qe+ce[nt]+me[nt]-P-ee.altAxis:z,le=$&&J?MV(U,Qe,Q):Bs($?U:Z,Qe,$?Q:z);ne[L]=le,ie[L]=le-Qe}e.modifiersData[n]=ie}}const u2={name:"preventOverflow",enabled:!0,phase:"main",fn:c2,requiresIfExists:["offset"]};function d2(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function f2(t){return t===Kt(t)||!Zt(t)?Zu(t):d2(t)}function h2(t){var e=t.getBoundingClientRect(),r=as(e.width)/t.offsetWidth||1,n=as(e.height)/t.offsetHeight||1;return r!==1||n!==1}function p2(t,e,r){r===void 0&&(r=!1);var n=Zt(e),s=Zt(e)&&h2(e),o=an(e),i=ls(t,s,r),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((Rr(e)!=="body"||td(o))&&(a=f2(e)),Zt(e)?(c=ls(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):o&&(c.x=ed(o))),{x:i.left+a.scrollLeft-c.x,y:i.top+a.scrollTop-c.y,width:i.width,height:i.height}}function _2(t){var e=new Map,r=new Set,n=[];t.forEach(function(o){e.set(o.name,o)});function s(o){r.add(o.name);var i=[].concat(o.requires||[],o.requiresIfExists||[]);i.forEach(function(a){if(!r.has(a)){var c=e.get(a);c&&s(c)}}),n.push(o)}return t.forEach(function(o){r.has(o.name)||s(o)}),n}function m2(t){var e=_2(t);return AV.reduce(function(r,n){return r.concat(e.filter(function(s){return s.phase===n}))},[])}function y2(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function E2(t){var e=t.reduce(function(r,n){var s=r[n.name];return r[n.name]=s?Object.assign({},s,n,{options:Object.assign({},s.options,n.options),data:Object.assign({},s.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var sp={placement:"bottom",modifiers:[],strategy:"absolute"};function op(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function g2(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,s=e.defaultOptions,o=s===void 0?sp:s;return function(a,c,u){u===void 0&&(u=o);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},sp,o),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},p=[],N=!1,$={state:d,setOptions:function(_){var v=typeof _=="function"?_(d.options):_;R(),d.options=Object.assign({},o,d.options,v),d.scrollParents={reference:Sn(a)?Us(a):a.contextElement?Us(a.contextElement):[],popper:Us(c)};var C=m2(E2([].concat(n,d.options.modifiers)));return d.orderedModifiers=C.filter(function(D){return D.enabled}),g(),$.update()},forceUpdate:function(){if(!N){var _=d.elements,v=_.reference,C=_.popper;if(op(v,C)){d.rects={reference:p2(v,Eo(C),d.options.strategy==="fixed"),popper:Yu(C)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(ee){return d.modifiersData[ee.name]=Object.assign({},ee.data)});for(var D=0;D<d.orderedModifiers.length;D++){if(d.reset===!0){d.reset=!1,D=-1;continue}var L=d.orderedModifiers[D],ne=L.fn,ce=L.options,me=ce===void 0?{}:ce,q=L.name;typeof ne=="function"&&(d=ne({state:d,options:me,name:q,instance:$})||d)}}}},update:y2(function(){return new Promise(function(y){$.forceUpdate(),y(d)})}),destroy:function(){R(),N=!0}};if(!op(a,c))return $;$.setOptions(u).then(function(y){!N&&u.onFirstUpdate&&u.onFirstUpdate(y)});function g(){d.orderedModifiers.forEach(function(y){var _=y.name,v=y.options,C=v===void 0?{}:v,D=y.effect;if(typeof D=="function"){var L=D({state:d,name:_,instance:$,options:C}),ne=function(){};p.push(L||ne)}})}function R(){p.forEach(function(y){return y()}),p=[]}return $}}var O2=[VV,a2,xV,SV,o2,e2,u2,FV,r2],rd=g2({defaultModifiers:O2}),Wr=function(){return Wr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Wr.apply(this,arguments)},qo=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Jr={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onShow:function(){},onHide:function(){},onToggle:function(){}},v2={id:null,override:!0},RE=function(){function t(e,r,n,s){e===void 0&&(e=null),r===void 0&&(r=null),n===void 0&&(n=Jr),s===void 0&&(s=v2),this._instanceId=s.id?s.id:e.id,this._targetEl=e,this._triggerEl=r,this._options=Wr(Wr({},Jr),n),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ge.addInstance("Dropdown",this,this._instanceId,s.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._popperInstance=this._createPopperInstance(),this._setupEventListeners(),this._initialized=!0)},t.prototype.destroy=function(){var e=this,r=this._getTriggerEvents();this._options.triggerType==="click"&&r.showEvents.forEach(function(n){e._triggerEl.removeEventListener(n,e._clickHandler)}),this._options.triggerType==="hover"&&(r.showEvents.forEach(function(n){e._triggerEl.removeEventListener(n,e._hoverShowTriggerElHandler),e._targetEl.removeEventListener(n,e._hoverShowTargetElHandler)}),r.hideEvents.forEach(function(n){e._triggerEl.removeEventListener(n,e._hoverHideHandler),e._targetEl.removeEventListener(n,e._hoverHideHandler)})),this._popperInstance.destroy(),this._initialized=!1},t.prototype.removeInstance=function(){Ge.removeInstance("Dropdown",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,r=this._getTriggerEvents();this._clickHandler=function(){e.toggle()},this._options.triggerType==="click"&&r.showEvents.forEach(function(n){e._triggerEl.addEventListener(n,e._clickHandler)}),this._hoverShowTriggerElHandler=function(n){n.type==="click"?e.toggle():setTimeout(function(){e.show()},e._options.delay)},this._hoverShowTargetElHandler=function(){e.show()},this._hoverHideHandler=function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},e._options.delay)},this._options.triggerType==="hover"&&(r.showEvents.forEach(function(n){e._triggerEl.addEventListener(n,e._hoverShowTriggerElHandler),e._targetEl.addEventListener(n,e._hoverShowTargetElHandler)}),r.hideEvents.forEach(function(n){e._triggerEl.addEventListener(n,e._hoverHideHandler),e._targetEl.addEventListener(n,e._hoverHideHandler)}))},t.prototype._createPopperInstance=function(){return rd(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[this._options.offsetSkidding,this._options.offsetDistance]}}]})},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(r){e._handleClickOutside(r,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,r){var n=e.target,s=this._options.ignoreClickOutsideClass,o=!1;if(s){var i=document.querySelectorAll(".".concat(s));i.forEach(function(a){if(a.contains(n)){o=!0;return}})}n!==r&&!r.contains(n)&&!this._triggerEl.contains(n)&&!o&&this.isVisible()&&this.hide()},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","click"],hideEvents:["mouseleave"]};case"click":return{showEvents:["click"],hideEvents:[]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["click"],hideEvents:[]}}},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},t.prototype.isVisible=function(){return this._visible},t.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(e){return Wr(Wr({},e),{modifiers:qo(qo([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(e){return Wr(Wr({},e),{modifiers:qo(qo([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._visible=!1,this._removeClickOutsideListener(),this._options.onHide(this)},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function nd(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(t){var e=t.getAttribute("data-dropdown-toggle"),r=document.getElementById(e);if(r){var n=t.getAttribute("data-dropdown-placement"),s=t.getAttribute("data-dropdown-offset-skidding"),o=t.getAttribute("data-dropdown-offset-distance"),i=t.getAttribute("data-dropdown-trigger"),a=t.getAttribute("data-dropdown-delay"),c=t.getAttribute("data-dropdown-ignore-click-outside-class");new RE(r,t,{placement:n||Jr.placement,triggerType:i||Jr.triggerType,offsetSkidding:s?parseInt(s):Jr.offsetSkidding,offsetDistance:o?parseInt(o):Jr.offsetDistance,delay:a?parseInt(a):Jr.delay,ignoreClickOutsideClass:c||Jr.ignoreClickOutsideClass})}else console.error('The dropdown element with id "'.concat(e,'" does not exist. Please check the data-dropdown-toggle attribute.'))})}typeof window<"u"&&(window.Dropdown=RE,window.initDropdowns=nd);var Ii=function(){return Ii=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Ii.apply(this,arguments)},Si={placement:"center",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-40",backdrop:"dynamic",closable:!0,onHide:function(){},onShow:function(){},onToggle:function(){}},R2={id:null,override:!0},$E=function(){function t(e,r,n){e===void 0&&(e=null),r===void 0&&(r=Si),n===void 0&&(n=R2),this._eventListenerInstances=[],this._instanceId=n.id?n.id:e.id,this._targetEl=e,this._options=Ii(Ii({},Si),r),this._isHidden=!0,this._backdropEl=null,this._initialized=!1,this.init(),Ge.addInstance("Modal",this,this._instanceId,n.override)}return t.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._getPlacementClasses().map(function(r){e._targetEl.classList.add(r)}),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),this._initialized=!1)},t.prototype.removeInstance=function(){Ge.removeInstance("Modal",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._createBackdrop=function(){var e;if(this._isHidden){var r=document.createElement("div");r.setAttribute("modal-backdrop",""),(e=r.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(r),this._backdropEl=r}},t.prototype._destroyBackdropEl=function(){this._isHidden||document.querySelector("[modal-backdrop]").remove()},t.prototype._setupModalCloseEventListeners=function(){var e=this;this._options.backdrop==="dynamic"&&(this._clickOutsideEventListener=function(r){e._handleOutsideClick(r.target)},this._targetEl.addEventListener("click",this._clickOutsideEventListener,!0)),this._keydownEventListener=function(r){r.key==="Escape"&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeModalCloseEventListeners=function(){this._options.backdrop==="dynamic"&&this._targetEl.removeEventListener("click",this._clickOutsideEventListener,!0),document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._handleOutsideClick=function(e){(e===this._targetEl||e===this._backdropEl&&this.isVisible())&&this.hide()},t.prototype._getPlacementClasses=function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}},t.prototype.toggle=function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)},t.prototype.show=function(){this.isHidden&&(this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,this._options.closable&&this._setupModalCloseEventListeners(),document.body.classList.add("overflow-hidden"),this._options.onShow(this))},t.prototype.hide=function(){this.isVisible&&(this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.closable&&this._removeModalCloseEventListeners(),this._options.onHide(this))},t.prototype.isVisible=function(){return!this._isHidden},t.prototype.isHidden=function(){return this._isHidden},t.prototype.addEventListenerInstance=function(e,r,n){this._eventListenerInstances.push({element:e,type:r,handler:n})},t.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(e){e.element.removeEventListener(e.type,e.handler)}),this._eventListenerInstances=[]},t.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function sd(){document.querySelectorAll("[data-modal-target]").forEach(function(t){var e=t.getAttribute("data-modal-target"),r=document.getElementById(e);if(r){var n=r.getAttribute("data-modal-placement"),s=r.getAttribute("data-modal-backdrop");new $E(r,{placement:n||Si.placement,backdrop:s||Si.backdrop})}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-target attribute points to the correct modal id?."))}),document.querySelectorAll("[data-modal-toggle]").forEach(function(t){var e=t.getAttribute("data-modal-toggle"),r=document.getElementById(e);if(r){var n=Ge.getInstance("Modal",e);if(n){var s=function(){n.toggle()};t.addEventListener("click",s),n.addEventListenerInstance(t,"click",s)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-toggle attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-show]").forEach(function(t){var e=t.getAttribute("data-modal-show"),r=document.getElementById(e);if(r){var n=Ge.getInstance("Modal",e);if(n){var s=function(){n.show()};t.addEventListener("click",s),n.addEventListenerInstance(t,"click",s)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-show attribute points to the correct modal id?"))}),document.querySelectorAll("[data-modal-hide]").forEach(function(t){var e=t.getAttribute("data-modal-hide"),r=document.getElementById(e);if(r){var n=Ge.getInstance("Modal",e);if(n){var s=function(){n.hide()};t.addEventListener("click",s),n.addEventListenerInstance(t,"click",s)}else console.error("Modal with id ".concat(e," has not been initialized. Please initialize it using the data-modal-target attribute."))}else console.error("Modal with id ".concat(e," does not exist. Are you sure that the data-modal-hide attribute points to the correct modal id?"))})}typeof window<"u"&&(window.Modal=$E,window.initModals=sd);var Pi=function(){return Pi=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Pi.apply(this,arguments)},$n={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},$2={id:null,override:!0},wE=function(){function t(e,r,n){e===void 0&&(e=null),r===void 0&&(r=$n),n===void 0&&(n=$2),this._eventListenerInstances=[],this._instanceId=n.id?n.id:e.id,this._targetEl=e,this._options=Pi(Pi({},$n),r),this._visible=!1,this._initialized=!1,this.init(),Ge.addInstance("Drawer",this,this._instanceId,n.override)}return t.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform"),this._getPlacementClasses(this._options.placement).base.map(function(r){e._targetEl.classList.add(r)}),this._handleEscapeKey=function(r){r.key==="Escape"&&e.isVisible()&&e.hide()},document.addEventListener("keydown",this._handleEscapeKey),this._initialized=!0)},t.prototype.destroy=function(){this._initialized&&(this.removeAllEventListenerInstances(),this._destroyBackdropEl(),document.removeEventListener("keydown",this._handleEscapeKey),this._initialized=!1)},t.prototype.removeInstance=function(){Ge.removeInstance("Drawer",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(r){e._targetEl.classList.remove(r)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(r){e._targetEl.classList.add(r)})):(this._getPlacementClasses(this._options.placement).active.map(function(r){e._targetEl.classList.remove(r)}),this._getPlacementClasses(this._options.placement).inactive.map(function(r){e._targetEl.classList.add(r)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)},t.prototype.show=function(){var e=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(r){e._targetEl.classList.add(r)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(r){e._targetEl.classList.remove(r)})):(this._getPlacementClasses(this._options.placement).active.map(function(r){e._targetEl.classList.add(r)}),this._getPlacementClasses(this._options.placement).inactive.map(function(r){e._targetEl.classList.remove(r)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},t.prototype._createBackdrop=function(){var e,r=this;if(!this._visible){var n=document.createElement("div");n.setAttribute("drawer-backdrop",""),(e=n.classList).add.apply(e,this._options.backdropClasses.split(" ")),document.querySelector("body").append(n),n.addEventListener("click",function(){r.hide()})}},t.prototype._destroyBackdropEl=function(){this._visible&&document.querySelector("[drawer-backdrop]")!==null&&document.querySelector("[drawer-backdrop]").remove()},t.prototype._getPlacementClasses=function(e){switch(e){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}},t.prototype.isHidden=function(){return!this._visible},t.prototype.isVisible=function(){return this._visible},t.prototype.addEventListenerInstance=function(e,r,n){this._eventListenerInstances.push({element:e,type:r,handler:n})},t.prototype.removeAllEventListenerInstances=function(){this._eventListenerInstances.map(function(e){e.element.removeEventListener(e.type,e.handler)}),this._eventListenerInstances=[]},t.prototype.getAllEventListenerInstances=function(){return this._eventListenerInstances},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function od(){document.querySelectorAll("[data-drawer-target]").forEach(function(t){var e=t.getAttribute("data-drawer-target"),r=document.getElementById(e);if(r){var n=t.getAttribute("data-drawer-placement"),s=t.getAttribute("data-drawer-body-scrolling"),o=t.getAttribute("data-drawer-backdrop"),i=t.getAttribute("data-drawer-edge"),a=t.getAttribute("data-drawer-edge-offset");new wE(r,{placement:n||$n.placement,bodyScrolling:s?s==="true":$n.bodyScrolling,backdrop:o?o==="true":$n.backdrop,edge:i?i==="true":$n.edge,edgeOffset:a||$n.edgeOffset})}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(t){var e=t.getAttribute("data-drawer-toggle"),r=document.getElementById(e);if(r){var n=Ge.getInstance("Drawer",e);if(n){var s=function(){n.toggle()};t.addEventListener("click",s),n.addEventListenerInstance(t,"click",s)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))}),document.querySelectorAll("[data-drawer-dismiss], [data-drawer-hide]").forEach(function(t){var e=t.getAttribute("data-drawer-dismiss")?t.getAttribute("data-drawer-dismiss"):t.getAttribute("data-drawer-hide"),r=document.getElementById(e);if(r){var n=Ge.getInstance("Drawer",e);if(n){var s=function(){n.hide()};t.addEventListener("click",s),n.addEventListenerInstance(t,"click",s)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id"))}),document.querySelectorAll("[data-drawer-show]").forEach(function(t){var e=t.getAttribute("data-drawer-show"),r=document.getElementById(e);if(r){var n=Ge.getInstance("Drawer",e);if(n){var s=function(){n.show()};t.addEventListener("click",s),n.addEventListenerInstance(t,"click",s)}else console.error("Drawer with id ".concat(e," has not been initialized. Please initialize it using the data-drawer-target attribute."))}else console.error("Drawer with id ".concat(e," not found. Are you sure that the data-drawer-target attribute points to the correct drawer id?"))})}typeof window<"u"&&(window.Drawer=wE,window.initDrawers=od);var Ci=function(){return Ci=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Ci.apply(this,arguments)},Mi={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},w2={id:null,override:!0},NE=function(){function t(e,r,n,s){e===void 0&&(e=null),r===void 0&&(r=[]),n===void 0&&(n=Mi),s===void 0&&(s=w2),this._instanceId=s.id?s.id:e.id,this._tabsEl=e,this._items=r,this._activeTab=n?this.getTab(n.defaultTabId):null,this._options=Ci(Ci({},Mi),n),this._initialized=!1,this.init(),Ge.addInstance("Tabs",this,this._tabsEl.id,!0),Ge.addInstance("Tabs",this,this._instanceId,s.override)}return t.prototype.init=function(){var e=this;this._items.length&&!this._initialized&&(this._activeTab||this.setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(r){r.triggerEl.addEventListener("click",function(n){n.preventDefault(),e.show(r.id)})}))},t.prototype.destroy=function(){this._initialized&&(this._initialized=!1)},t.prototype.removeInstance=function(){this.destroy(),Ge.removeInstance("Tabs",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getActiveTab=function(){return this._activeTab},t.prototype.setActiveTab=function(e){this._activeTab=e},t.prototype.getTab=function(e){return this._items.filter(function(r){return r.id===e})[0]},t.prototype.show=function(e,r){var n,s,o=this;r===void 0&&(r=!1);var i=this.getTab(e);i===this._activeTab&&!r||(this._items.map(function(a){var c,u;a!==i&&((c=a.triggerEl.classList).remove.apply(c,o._options.activeClasses.split(" ")),(u=a.triggerEl.classList).add.apply(u,o._options.inactiveClasses.split(" ")),a.targetEl.classList.add("hidden"),a.triggerEl.setAttribute("aria-selected","false"))}),(n=i.triggerEl.classList).add.apply(n,this._options.activeClasses.split(" ")),(s=i.triggerEl.classList).remove.apply(s,this._options.inactiveClasses.split(" ")),i.triggerEl.setAttribute("aria-selected","true"),i.targetEl.classList.remove("hidden"),this.setActiveTab(i),this._options.onShow(this,i))},t.prototype.updateOnShow=function(e){this._options.onShow=e},t}();function id(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(t){var e=[],r=t.getAttribute("data-tabs-active-classes"),n=t.getAttribute("data-tabs-inactive-classes"),s=null;t.querySelectorAll('[role="tab"]').forEach(function(o){var i=o.getAttribute("aria-selected")==="true",a={id:o.getAttribute("data-tabs-target"),triggerEl:o,targetEl:document.querySelector(o.getAttribute("data-tabs-target"))};e.push(a),i&&(s=a.id)}),new NE(t,e,{defaultTabId:s,activeClasses:r||Mi.activeClasses,inactiveClasses:n||Mi.inactiveClasses})})}typeof window<"u"&&(window.Tabs=NE,window.initTabs=id);var zr=function(){return zr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},zr.apply(this,arguments)},Wo=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Di={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},N2={id:null,override:!0},bE=function(){function t(e,r,n,s){e===void 0&&(e=null),r===void 0&&(r=null),n===void 0&&(n=Di),s===void 0&&(s=N2),this._instanceId=s.id?s.id:e.id,this._targetEl=e,this._triggerEl=r,this._options=zr(zr({},Di),n),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ge.addInstance("Tooltip",this,this._instanceId,s.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},t.prototype.destroy=function(){var e=this;if(this._initialized){var r=this._getTriggerEvents();r.showEvents.forEach(function(n){e._triggerEl.removeEventListener(n,e._showHandler)}),r.hideEvents.forEach(function(n){e._triggerEl.removeEventListener(n,e._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},t.prototype.removeInstance=function(){Ge.removeInstance("Tooltip",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,r=this._getTriggerEvents();this._showHandler=function(){e.show()},this._hideHandler=function(){e.hide()},r.showEvents.forEach(function(n){e._triggerEl.addEventListener(n,e._showHandler)}),r.hideEvents.forEach(function(n){e._triggerEl.addEventListener(n,e._hideHandler)})},t.prototype._createPopperInstance=function(){return rd(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},t.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(r){r.key==="Escape"&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(r){e._handleClickOutside(r,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,r){var n=e.target;n!==r&&!r.contains(n)&&!this._triggerEl.contains(n)&&this.isVisible()&&this.hide()},t.prototype.isVisible=function(){return this._visible},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show()},t.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return zr(zr({},e),{modifiers:Wo(Wo([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return zr(zr({},e),{modifiers:Wo(Wo([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function ad(){document.querySelectorAll("[data-tooltip-target]").forEach(function(t){var e=t.getAttribute("data-tooltip-target"),r=document.getElementById(e);if(r){var n=t.getAttribute("data-tooltip-trigger"),s=t.getAttribute("data-tooltip-placement");new bE(r,t,{placement:s||Di.placement,triggerType:n||Di.triggerType})}else console.error('The tooltip element with id "'.concat(e,'" does not exist. Please check the data-tooltip-target attribute.'))})}typeof window<"u"&&(window.Tooltip=bE,window.initTooltips=ad);var Qr=function(){return Qr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Qr.apply(this,arguments)},Jo=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,o;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},xs={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},b2={id:null,override:!0},AE=function(){function t(e,r,n,s){e===void 0&&(e=null),r===void 0&&(r=null),n===void 0&&(n=xs),s===void 0&&(s=b2),this._instanceId=s.id?s.id:e.id,this._targetEl=e,this._triggerEl=r,this._options=Qr(Qr({},xs),n),this._popperInstance=null,this._visible=!1,this._initialized=!1,this.init(),Ge.addInstance("Popover",this,s.id?s.id:this._targetEl.id,s.override)}return t.prototype.init=function(){this._triggerEl&&this._targetEl&&!this._initialized&&(this._setupEventListeners(),this._popperInstance=this._createPopperInstance(),this._initialized=!0)},t.prototype.destroy=function(){var e=this;if(this._initialized){var r=this._getTriggerEvents();r.showEvents.forEach(function(n){e._triggerEl.removeEventListener(n,e._showHandler),e._targetEl.removeEventListener(n,e._showHandler)}),r.hideEvents.forEach(function(n){e._triggerEl.removeEventListener(n,e._hideHandler),e._targetEl.removeEventListener(n,e._hideHandler)}),this._removeKeydownListener(),this._removeClickOutsideListener(),this._popperInstance&&this._popperInstance.destroy(),this._initialized=!1}},t.prototype.removeInstance=function(){Ge.removeInstance("Popover",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype._setupEventListeners=function(){var e=this,r=this._getTriggerEvents();this._showHandler=function(){e.show()},this._hideHandler=function(){setTimeout(function(){e._targetEl.matches(":hover")||e.hide()},100)},r.showEvents.forEach(function(n){e._triggerEl.addEventListener(n,e._showHandler),e._targetEl.addEventListener(n,e._showHandler)}),r.hideEvents.forEach(function(n){e._triggerEl.addEventListener(n,e._hideHandler),e._targetEl.addEventListener(n,e._hideHandler)})},t.prototype._createPopperInstance=function(){return rd(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})},t.prototype._getTriggerEvents=function(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},t.prototype._setupKeydownListener=function(){var e=this;this._keydownEventListener=function(r){r.key==="Escape"&&e.hide()},document.body.addEventListener("keydown",this._keydownEventListener,!0)},t.prototype._removeKeydownListener=function(){document.body.removeEventListener("keydown",this._keydownEventListener,!0)},t.prototype._setupClickOutsideListener=function(){var e=this;this._clickOutsideEventListener=function(r){e._handleClickOutside(r,e._targetEl)},document.body.addEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._removeClickOutsideListener=function(){document.body.removeEventListener("click",this._clickOutsideEventListener,!0)},t.prototype._handleClickOutside=function(e,r){var n=e.target;n!==r&&!r.contains(n)&&!this._triggerEl.contains(n)&&this.isVisible()&&this.hide()},t.prototype.isVisible=function(){return this._visible},t.prototype.toggle=function(){this.isVisible()?this.hide():this.show(),this._options.onToggle(this)},t.prototype.show=function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(e){return Qr(Qr({},e),{modifiers:Jo(Jo([],e.modifiers,!0),[{name:"eventListeners",enabled:!0}],!1)})}),this._setupClickOutsideListener(),this._setupKeydownListener(),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)},t.prototype.hide=function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(e){return Qr(Qr({},e),{modifiers:Jo(Jo([],e.modifiers,!0),[{name:"eventListeners",enabled:!1}],!1)})}),this._removeClickOutsideListener(),this._removeKeydownListener(),this._visible=!1,this._options.onHide(this)},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function ld(){document.querySelectorAll("[data-popover-target]").forEach(function(t){var e=t.getAttribute("data-popover-target"),r=document.getElementById(e);if(r){var n=t.getAttribute("data-popover-trigger"),s=t.getAttribute("data-popover-placement"),o=t.getAttribute("data-popover-offset");new AE(r,t,{placement:s||xs.placement,offset:o?parseInt(o):xs.offset,triggerType:n||xs.triggerType})}else console.error('The popover element with id "'.concat(e,'" does not exist. Please check the data-popover-target attribute.'))})}typeof window<"u"&&(window.Popover=AE,window.initPopovers=ld);var ji=function(){return ji=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},ji.apply(this,arguments)},Ml={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},A2={id:null,override:!0},TE=function(){function t(e,r,n,s,o){e===void 0&&(e=null),r===void 0&&(r=null),n===void 0&&(n=null),s===void 0&&(s=Ml),o===void 0&&(o=A2),this._instanceId=o.id?o.id:n.id,this._parentEl=e,this._triggerEl=r,this._targetEl=n,this._options=ji(ji({},Ml),s),this._visible=!1,this._initialized=!1,this.init(),Ge.addInstance("Dial",this,this._instanceId,o.override)}return t.prototype.init=function(){var e=this;if(this._triggerEl&&this._targetEl&&!this._initialized){var r=this._getTriggerEventTypes(this._options.triggerType);this._showEventHandler=function(){e.show()},r.showEvents.forEach(function(n){e._triggerEl.addEventListener(n,e._showEventHandler),e._targetEl.addEventListener(n,e._showEventHandler)}),this._hideEventHandler=function(){e._parentEl.matches(":hover")||e.hide()},r.hideEvents.forEach(function(n){e._parentEl.addEventListener(n,e._hideEventHandler)}),this._initialized=!0}},t.prototype.destroy=function(){var e=this;if(this._initialized){var r=this._getTriggerEventTypes(this._options.triggerType);r.showEvents.forEach(function(n){e._triggerEl.removeEventListener(n,e._showEventHandler),e._targetEl.removeEventListener(n,e._showEventHandler)}),r.hideEvents.forEach(function(n){e._parentEl.removeEventListener(n,e._hideEventHandler)}),this._initialized=!1}},t.prototype.removeInstance=function(){Ge.removeInstance("Dial",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.hide=function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)},t.prototype.show=function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)},t.prototype.toggle=function(){this._visible?this.hide():this.show()},t.prototype.isHidden=function(){return!this._visible},t.prototype.isVisible=function(){return this._visible},t.prototype._getTriggerEventTypes=function(e){switch(e){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};case"none":return{showEvents:[],hideEvents:[]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}},t.prototype.updateOnShow=function(e){this._options.onShow=e},t.prototype.updateOnHide=function(e){this._options.onHide=e},t.prototype.updateOnToggle=function(e){this._options.onToggle=e},t}();function cd(){document.querySelectorAll("[data-dial-init]").forEach(function(t){var e=t.querySelector("[data-dial-toggle]");if(e){var r=e.getAttribute("data-dial-toggle"),n=document.getElementById(r);if(n){var s=e.getAttribute("data-dial-trigger");new TE(t,e,n,{triggerType:s||Ml.triggerType})}else console.error("Dial with id ".concat(r," does not exist. Are you sure that the data-dial-toggle attribute points to the correct modal id?"))}else console.error("Dial with id ".concat(t.id," does not have a trigger element. Are you sure that the data-dial-toggle attribute exists?"))})}typeof window<"u"&&(window.Dial=TE,window.initDials=cd);var Li=function(){return Li=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Li.apply(this,arguments)},ip={minValue:null,maxValue:null,onIncrement:function(){},onDecrement:function(){}},T2={id:null,override:!0},IE=function(){function t(e,r,n,s,o){e===void 0&&(e=null),r===void 0&&(r=null),n===void 0&&(n=null),s===void 0&&(s=ip),o===void 0&&(o=T2),this._instanceId=o.id?o.id:e.id,this._targetEl=e,this._incrementEl=r,this._decrementEl=n,this._options=Li(Li({},ip),s),this._initialized=!1,this.init(),Ge.addInstance("InputCounter",this,this._instanceId,o.override)}return t.prototype.init=function(){var e=this;this._targetEl&&!this._initialized&&(this._inputHandler=function(r){{var n=r.target;/^\d*$/.test(n.value)||(n.value=n.value.replace(/[^\d]/g,"")),e._options.maxValue!==null&&parseInt(n.value)>e._options.maxValue&&(n.value=e._options.maxValue.toString()),e._options.minValue!==null&&parseInt(n.value)<e._options.minValue&&(n.value=e._options.minValue.toString())}},this._incrementClickHandler=function(){e.increment()},this._decrementClickHandler=function(){e.decrement()},this._targetEl.addEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.addEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.addEventListener("click",this._decrementClickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._targetEl&&this._initialized&&(this._targetEl.removeEventListener("input",this._inputHandler),this._incrementEl&&this._incrementEl.removeEventListener("click",this._incrementClickHandler),this._decrementEl&&this._decrementEl.removeEventListener("click",this._decrementClickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){Ge.removeInstance("InputCounter",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getCurrentValue=function(){return parseInt(this._targetEl.value)||0},t.prototype.increment=function(){this._options.maxValue!==null&&this.getCurrentValue()>=this._options.maxValue||(this._targetEl.value=(this.getCurrentValue()+1).toString(),this._options.onIncrement(this))},t.prototype.decrement=function(){this._options.minValue!==null&&this.getCurrentValue()<=this._options.minValue||(this._targetEl.value=(this.getCurrentValue()-1).toString(),this._options.onDecrement(this))},t.prototype.updateOnIncrement=function(e){this._options.onIncrement=e},t.prototype.updateOnDecrement=function(e){this._options.onDecrement=e},t}();function ud(){document.querySelectorAll("[data-input-counter]").forEach(function(t){var e=t.id,r=document.querySelector('[data-input-counter-increment="'+e+'"]'),n=document.querySelector('[data-input-counter-decrement="'+e+'"]'),s=t.getAttribute("data-input-counter-min"),o=t.getAttribute("data-input-counter-max");t?Ge.instanceExists("InputCounter",t.getAttribute("id"))||new IE(t,r||null,n||null,{minValue:s?parseInt(s):null,maxValue:o?parseInt(o):null}):console.error('The target element with id "'.concat(e,'" does not exist. Please check the data-input-counter attribute.'))})}typeof window<"u"&&(window.InputCounter=IE,window.initInputCounters=ud);var Fi=function(){return Fi=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Fi.apply(this,arguments)},ki={htmlEntities:!1,contentType:"input",onCopy:function(){}},I2={id:null,override:!0},SE=function(){function t(e,r,n,s){e===void 0&&(e=null),r===void 0&&(r=null),n===void 0&&(n=ki),s===void 0&&(s=I2),this._instanceId=s.id?s.id:r.id,this._triggerEl=e,this._targetEl=r,this._options=Fi(Fi({},ki),n),this._initialized=!1,this.init(),Ge.addInstance("CopyClipboard",this,this._instanceId,s.override)}return t.prototype.init=function(){var e=this;this._targetEl&&this._triggerEl&&!this._initialized&&(this._triggerElClickHandler=function(){e.copy()},this._triggerEl&&this._triggerEl.addEventListener("click",this._triggerElClickHandler),this._initialized=!0)},t.prototype.destroy=function(){this._triggerEl&&this._targetEl&&this._initialized&&(this._triggerEl&&this._triggerEl.removeEventListener("click",this._triggerElClickHandler),this._initialized=!1)},t.prototype.removeInstance=function(){Ge.removeInstance("CopyClipboard",this._instanceId)},t.prototype.destroyAndRemoveInstance=function(){this.destroy(),this.removeInstance()},t.prototype.getTargetValue=function(){if(this._options.contentType==="input")return this._targetEl.value;if(this._options.contentType==="innerHTML")return this._targetEl.innerHTML;if(this._options.contentType==="textContent")return this._targetEl.textContent.replace(/\s+/g," ").trim()},t.prototype.copy=function(){var e=this.getTargetValue();this._options.htmlEntities&&(e=this.decodeHTML(e));var r=document.createElement("textarea");return r.value=e,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),this._options.onCopy(this),e},t.prototype.decodeHTML=function(e){var r=document.createElement("textarea");return r.innerHTML=e,r.textContent},t.prototype.updateOnCopyCallback=function(e){this._options.onCopy=e},t}();function dd(){document.querySelectorAll("[data-copy-to-clipboard-target]").forEach(function(t){var e=t.getAttribute("data-copy-to-clipboard-target"),r=document.getElementById(e),n=t.getAttribute("data-copy-to-clipboard-content-type"),s=t.getAttribute("data-copy-to-clipboard-html-entities");r?Ge.instanceExists("CopyClipboard",r.getAttribute("id"))||new SE(t,r,{htmlEntities:s&&s==="true"?!0:ki.htmlEntities,contentType:n||ki.contentType}):console.error('The target element with id "'.concat(e,'" does not exist. Please check the data-copy-to-clipboard-target attribute.'))})}typeof window<"u"&&(window.CopyClipboard=SE,window.initClipboards=dd);function S2(){Ku(),qu(),Wu(),Ju(),nd(),sd(),od(),id(),ad(),ld(),cd(),ud(),dd()}typeof window<"u"&&(window.initFlowbite=S2);var P2=new uV("load",[Ku,qu,Wu,Ju,nd,sd,od,id,ad,ld,cd,ud,dd]);P2.init();const C2={data(){return{email:"",password:"",failLogin:!1}},methods:{login(){this.email=="efm"&&this.password=="password"?this.$router.push("/dashboard"):this.failLogin=!0;const t=new sqlite3.Database("~/database/database.db",sqlite3.OPEN_READWRITE,r=>{if(r)return console.error(r.message)});let e="SELECT * FROM user WHERE email='"+this.email+"' AND password="+this.password;t.all(e,[],(r,n)=>{r?this.failLogin=!0:(n.forEach(s=>{this.$router.push("/dashboard")}),this.failLogin=!0)})}},async mounted(){const t=await cE.query();console.log(t)}},M2={class:"bg-gray-50 dark:bg-gray-900"},D2={class:"flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0"},j2=It("a",{href:"#",class:"flex items-center mb-6 text-2xl font-semibold text-gray-900 dark:text-white"},[It("img",{class:"w-8 h-8 mr-2",src:"https://flowbite.s3.amazonaws.com/blocks/marketing-ui/logo.svg",alt:"logo"}),ap(" KSR Sistem ")],-1),L2={class:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700"},F2={class:"p-6 space-y-4 md:space-y-6 sm:p-8"},k2=It("h1",{class:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"}," Sign in to your account ",-1),B2=It("span",{class:"font-medium"},"Salah!",-1),U2=It("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Your email",-1),x2=It("label",{for:"password",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Password",-1),G2=fg('<div class="flex items-center justify-between"><div class="flex items-start"><div class="flex items-center h-5"><input id="remember" aria-describedby="remember" type="checkbox" class="w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-primary-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-primary-600 dark:ring-offset-gray-800"></div><div class="ml-3 text-sm"><label for="remember" class="text-gray-500 dark:text-gray-300">Remember me</label></div></div><a href="#" class="text-sm font-medium text-primary-600 hover:underline dark:text-primary-500">Forgot password?</a></div><button type="submit" class="w-full bg-blue-500 p-2 rounded text-white"> Login </button><p class="text-sm font-light text-gray-500 dark:text-gray-400"> Dont have an account yet? <a href="#" class="font-medium text-primary-600 hover:underline dark:text-primary-500">Sign up</a></p>',3);function V2(t,e,r,n,s,o){return Pd(),Td("div",null,[It("section",M2,[It("div",D2,[j2,It("div",L2,[It("div",F2,[k2,It("form",{onSubmit:e[3]||(e[3]=ug((...i)=>o.login&&o.login(...i),["prevent"])),class:"space-y-4 md:space-y-6",action:"#"},[s.failLogin?(Pd(),Td("div",{key:0,onClick:e[0]||(e[0]=i=>s.failLogin=!s.failLogin),class:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},[ap(" Email atau Password anda "),B2])):dg("",!0),It("div",null,[U2,Id(It("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>s.email=i),type:"email",name:"email",id:"email",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"name@company.com",required:""},null,512),[[Sd,s.email]])]),It("div",null,[x2,Id(It("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>s.password=i),type:"password",name:"password",id:"password",placeholder:"",class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,512),[[Sd,s.password]])]),G2],32)])])])])])}const yK=cg(C2,[["render",V2]]);export{yK as default};
